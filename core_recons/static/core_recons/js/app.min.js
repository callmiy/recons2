!function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";function n(){function e(e,r,t,n){r.find(t).each(function(){$(this).val("")}),e.$setPristine(),e.$setUntouched(),n?n():angular.noop()}return e}var o=t(1);angular.module("kanmii-underscore",[]).factory("kanmiiUnderscore",function(){return window._}),angular.module("kanmii-URI",[]).factory("kanmiiUri",function(){return window.URI});var a=angular.module("rootApp",["ngRoute","ui.bootstrap","ngResource","ngAnimate","angularModalService","toggle-dim-element"]);o.setStaticPrefix(a),a.factory("resetForm",n),t(2),t(3),t(6),t(7),t(8),t(9),t(10),t(11),t(12),t(13),t(15),t(17),t(18)},function(e,r){"use strict";function t(e,r){return staticPrefix+e+"/js/"+r}function n(e){e.run(["$rootScope",function(e){e.staticPrefix=staticPrefix,e.addIconSrc=staticPrefix+"core_recons/css/images/icon_addposting.gif"}])}var o=["$interpolateProvider",function(e){e.startSymbol("{$"),e.endSymbol("$}")}];e.exports={interpolateProviderConfig:o,buildUrl:t,rootAppName:"core_recons",setStaticPrefix:n}},function(e,r){"use strict";function t(){function e(){var e=this;e.dim=function(e,r){e.addClass("ui-widget-overlay ui-front"),r?r():angular.noop},e.unDim=function(e,r){e.removeClass("ui-widget-overlay ui-front"),r?r():angular.noop}}return new e}angular.module("toggle-dim-element",[]).service("ToggleDimElement",t)},function(e,r,t){"use strict";function n(e,r){var t=appendToUrl(r.customerAPIUrl,":id");return e(t,{id:"@id"},{put:{method:"PUT"}})}function o(e){function r(r){return e.query({name:r}).$promise}return r}var a=angular.module("customer",["rootApp"]);a.factory("Customer",n),n.$inject=["$resource","urls"],a.factory("getTypeAheadCustomer",o),o.$inject=["Customer"],t(4)},function(e,r,t){"use strict";function n(e,r,t,n,o){function a(){t()}function l(t){m.customer={},e(t,r,".form-control")}function i(e){t(e)}function c(e){return n.query({filter:e}).$promise}function s(e){function r(e){m.customer.branch=e,d()}function t(e){o(e,{code:"Branch code",name:"Branch Name"})}e&&n.save(e).$promise.then(r,t)}function d(){g.hide(),f.show(),p.removeClass("ui-widget-overlay ui-front").find(".form-control").each(function(){$(this).prop("disabled",!1)})}function u(){f.hide(),g.show(),p.addClass("ui-widget-overlay ui-front").find(".form-control").each(function(){$(this).prop("disabled",!0)})}var m=this;m.customer={},m.revealNewBranchForm=u,m.dismissNewBranchForm=d,m.close=a,m.reset=l,m.submitCustomer=i,m.getBranch=c,m.createNewBranch=s;var p=r.find(".add-new-customer-container"),f=r.find(".add-customer-form-control"),g=r.find(".new-branch-form-container")}function o(e,r,n){return{restrict:"A",link:function(o,a,l,i){function c(){e.showModal({template:t(5),controller:"CustomerModalCtrl as customerModal"}).then(function(e){function t(){a.find(".form-control").each(function(){var e=$(this);e.prop("disabled",!e.prop("disabled"))})}var a=r(l.dimParent)(o.$parent);e.element.dialog({dialogClass:"no-close",title:"Add Customer",modal:!0,minWidth:600,minHeight:450,open:function(){a&&n.dim(a,t)},close:function(){a&&n.unDim(a,t)}}),e.close.then(function(e){e&&angular.isObject(e)&&i.addCustomer(e),a&&n.unDim(a,t)})})}a.css({cursor:"pointer"}).bind("click",c)},controller:"AddCustomerDirectiveCtrl as addCustomer",scope:{},bindToController:{newCustomer:"=addedNewCustomer",customerAdded:"&onCustomerAdded"}}}function a(e,r){function t(t){function o(e){n.newCustomer=e,n.customerAdded({customer:e})}function a(e){r(e)}var l=new e(t);l.$save(o,a)}var n=this;n.customer={},n.addCustomer=t}var l=angular.module("customer");l.controller("CustomerModalCtrl",n),n.$inject=["resetForm","$element","close","Branch","xhrErrorDisplay"],l.directive("addCustomer",o),o.$inject=["ModalService","$parse","ToggleDimElement"],l.controller("AddCustomerDirectiveCtrl",a),a.$inject=["Customer","xhrErrorDisplay"]},function(e,r){e.exports='<div id="add-customer"><form novalidate="" class="form-horizontal" ng-submit="customerModal.submitCustomer(customerModal.customer)" name="customerModalForm"><fieldset class="add-new-customer-container" ng-form="" name="newCustomerModalForm" style="position: relative;padding: 7px;"><div class="form-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="customer-name">Customer Name</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" min="3" id="customer-name" required="" to-upper="" ng-pattern="/.{3,}/" ng-model="customerModal.customer.name"></div></div><div class="form-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="customer-id">Customer ID</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="customer-id" maxlength="9" ng-pattern="/^\\d{9}$/" ng-model="customerModal.customer.customer_id"></div></div><div class="form-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="account-number">Account Number</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="account-number" required="" maxlength="10" ng-model="customerModal.customer.account" ng-pattern="/^\\d{10}$/"></div></div><div class="form-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="branch">Branch</label><div class="col-md-8 col-lg-8 col-sm-8"><div class="input-group"><input class="form-control" id="branch" required="" ng-model="customerModal.customer.branch" typeahead-min-length="2" uib-typeahead="branch as branch.view_value for branch in customerModal.getBranch($viewValue)"> <span class="input-group-addon add-new-branch-reveal" ng-click="customerModal.revealNewBranchForm()" style="cursor: pointer;"><img ng-src="{$$root.addIconSrc$}" alt="add-branch"></span></div></div></div></fieldset><div class="new-branch-form-container" ng-form="" name="newBranchForm" style="margin-left: 5%;display: none"><h4>Add New Branch</h4><div class="form-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="new-branch-name">Branch Name</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="new-branch-name" ng-model="customerModal.newBranch.name" to-upper=""></div></div><div class="form-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="new-branch-code">Branch Code</label><div class="col-md-3 col-lg-3 col-sm-3"><input class="form-control" id="new-branch-code" ng-model="customerModal.newBranch.code" maxlength="3" ng-pattern="/^\\d{3}$/"></div><div class="col-md-5 col-lg-5 col-sm-5"><button class="btn btn-info" type="button" ng-disabled="newBranchForm.$invalid" ng-click="customerModal.createNewBranch(customerModal.newBranch)">Add Branch</button> <button class="btn btn-default new-branch-form-dismiss-btn" type="button" ng-click="customerModal.dismissNewBranchForm(customerModal.newBranch)">Dismiss</button></div></div></div><div class="row add-customer-form-control"><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left"><span class="btn btn-default" ng-click="customerModal.reset(customerModalForm)">Reset</span></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center"><button type="submit" class="btn btn-info" ng-disabled="newCustomerModalForm.$invalid">Add Customer</button></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right"><span class="btn btn-default" ng-click="customerModal.close()">Close</span></div></div></form></div>'},function(e,r){"use strict";function t(e,r){var t=appendToUrl(r.lcBidRequestAPIUrl,":id");return e(t,{id:"@id"},{put:{method:"PUT"},getPaginated:{method:"GET"},pending:{method:"GET",params:{pending:!0}}})}function n(e){var r={"text-align":"right"};return[{title:"Form M",modelKey:"form_m_number"},{title:"Applicant",modelKey:"applicant"},{title:"Currency",modelKey:"currency"},{title:"Amount",tdStyle:r,render:function(r){return e("number")(r.amount,2)}},{title:"Date Created",tdStyle:r,render:function(r){return e("date")(r.created_at,"dd-MMM-yyyy")}},{title:"Date Requested",tdStyle:r,render:function(r){return e("date")(r.requested_at,"dd-MMM-yyyy")}}]}var o=angular.module("lc-bid-request",["rootApp"]);o.factory("LcBidRequest",t),t.$inject=["$resource","urls"],o.factory("lcBidRequestModelManager",n),n.$inject=["$filter"],o.value("bidAttributesVerboseNames",{mf:"form m",amount:"amount"})},function(e,r){"use strict";function t(e,r){var t=appendToUrl(r.formMAPIUrl,":id");return e(t,{id:"@id"},{put:{method:"PUT"},getPaginated:{method:"GET"},getNoLcAttached:{method:"GET",params:{lc_not_attached:!0}}})}function n(e){var r={"text-align":"right"};return[{title:"Form M",modelKey:"number"},{title:"Applicant",render:function(e){return e.applicant_data.name}},{title:"Currency",render:function(e){return e.currency_data.code}},{title:"Amount",tdStyle:r,render:function(r){return e("number")(r.amount,2)}},{title:"Date Received",tdStyle:r,render:function(r){return e("date")(r.date_received,"dd-MMM-yyyy")}},{title:"Bid Date",modelKey:"nothing"}]}var o=angular.module("form-m-service",["rootApp"]);o.factory("FormM",t),t.$inject=["$resource","urls"],o.factory("formMModelManager",n),n.$inject=["$filter"],o.value("formMAttributesVerboseNames",{date_received:"date received",number:"form m number"})},function(e,r){"use strict";function t(e,r){var t=appendToUrl(r.letterOfCredit1APIUrl,":id");return e(t,{id:"@id"},{put:{method:"PUT"},getPaginated:{method:"GET"}})}function n(e){var r={"text-align":"right"};return[{title:"Form M",modelKey:"number"},{title:"Applicant",render:function(e){return e.applicant_data.name}},{title:"Currency",render:function(e){return e.currency_data.code}},{title:"Amount",tdStyle:r,render:function(r){return e("number")(r.amount,2)}},{title:"Date Received",tdStyle:r,render:function(r){return e("date")(r.date_received,"dd-MMM-yyyy")}},{title:"Bid Date",modelKey:"nothing"}]}var o=angular.module("lc-service",["rootApp"]);o.factory("LetterOfCredit",t),t.$inject=["$resource","urls"],o.factory("LcModelManager",n),n.$inject=["$filter"],o.value("LcAttributesVerboseNames",{date_received:"date received",number:"form m number"})},function(e,r){"use strict";function t(e,r){var t=appendToUrl(r.lcIssueAPIUrl,":id");return e(t,{id:"@id"},{put:{method:"PUT"}})}function n(e,r){var t=appendToUrl(r.lcIssueConcreteAPIUrl,":id");return e(t,{id:"@id"},{put:{method:"PUT"}})}function o(e){function r(r){return e.query(r).$promise}return r}var a=angular.module("lc-issue-service",["rootApp"]);a.factory("LCIssue",t),t.$inject=["$resource","urls"],a.factory("LCIssueConcrete",n),n.$inject=["$resource","urls"],a.factory("getTypeAheadLCIssue",o),o.$inject=["LCIssue"]},function(e,r){"use strict";var t=angular.module("rootApp");t.directive("numberFormat",["$filter",function(e){function r(r,t,n,o){function a(){t.val(e("number")(o.$viewValue,2))}function l(e){var r=e.replace(/,/g,"");return e?Number(r):void 0}function i(){var r,n;r=t.val(),r&&(r=t.val().replace(/,/g,""),n=e("number")(r,2),t.val(n),o.$setViewValue(n))}function c(e){var r;r=e.which,0===r||8===r||r>15&&19>r||r>=37&&40>=r||","!==String.fromCharCode(r)&&"."!==String.fromCharCode(r)&&!(r>=48&&57>=r)}o&&(o.$render=a,o.$parsers.push(l),t.bind("focusout",i),t.bind("keypress",c))}return{require:"?ngModel",link:r,restrict:"A"}}])},function(e,r){"use strict";var t=angular.module("rootApp");t.directive("toUpper",[function(){function e(e,r,t,n){function o(e){return e?e.toUpperCase():void 0}n.$parsers.push(o),r.bind("focusout",function(){var e;e=r.val(),r.val(e.toUpperCase())})}return{require:"ngModel",link:e,restrict:"A"}}])},function(e,r){"use strict";function t(){return{link:function(e,r,t){r.on({click:function(){var e=t.selectedClassIndicator,r=$(this);r.hasClass(e)?r.removeClass(e):r.addClass(e).siblings().removeClass(e)}},t.rowSelector)}}}angular.module("toggle-bg-color",[]).directive("toggleBgColor",t)},function(e,r,t){"use strict";function n(){return{link:function(e,r,t,n){r.on({click:function(e){e.preventDefault();var r=$(e.target);if(!r.is(".active")&&!r.closest("li").is(".disabled")){var t=r.attr("href")||r.parent().attr("href");n.targetClickedCallback({linkUrl:t})}}},".pager-nav-link")},scope:{},bindToController:{targetClickedCallback:"&",prevPageLink:"=",linkUrls:"=",currentLink:"=currentPagerLink",nextPageLink:"="},controller:"PagerNavCtrl as pageNav",template:t(14)}}function o(){}function a(e){function r(r,t,n){var o={currentLink:1};if(o.linkUrls=[],!n||1===n)return o;var a,l,i,c;if(t)for(a=e(t),l=a.search(!0),l.page?o.currentLink=Number(l.page)+1:o.currentLink=2,i=a.search(""),c=1;n>=c;c++)l.page=c,o.linkUrls.push(i.clone().search(l).toString());else for(a=e(r),l=a.search(!0),i=a.search(""),l.page=1,o.linkUrls=[i.clone().search(l).toString(),r],c=3;n>=c;c++)l.page=c,o.linkUrls.push(i.clone().search(l).toString());return o}return r}var l=angular.module("pager-nav",["kanmii-URI"]);l.directive("pagerNav",n),l.controller("PagerNavCtrl",o),l.factory("pagerNavSetUpLinks",a),a.$inject=["kanmiiUri"]},function(e,r){e.exports='<nav id="pager-nav">\n  <ul class="pagination" style="margin: 0;">\n    <li ng-class="[\'previous\', {disabled: !pageNav.prevPageLink}]">\n      <a ng-href="{$pageNav.prevPageLink$}" aria-label="Previous" class="pager-nav-link">\n        <span aria-hidden="true">&laquo;</span>\n      </a>\n    </li>\n\n    <li ng-repeat="link in pageNav.linkUrls"\n        ng-class="{active: (pageNav.currentLink == ($index + 1))}">\n      <a ng-href="{$link$}"\n         ng-class="[\'pager-nav-link\', {active: (pageNav.currentLink == ($index + 1))}]">\n        {$($index + 1)$}\n      </a>\n    </li>\n\n    <li ng-class="[\'next\', {disabled: !pageNav.nextPageLink}]">\n      <a ng-href="{$pageNav.nextPageLink$}" aria-label="Next" class="pager-nav-link">\n        <span aria-hidden="true">&raquo;</span>\n      </a>\n    </li>\n  </ul>\n</nav>\n'},function(e,r,t){"use strict";function n(){return{restrict:"AE",scope:{},bindToController:{modelCollection:"=",modelManager:"=tableModelManager",newModel:"=",caption:"=tableCaption",paginationSize:"=",updateCollection:"&",pager:"=pagerObject",onDblClick:"&onRowDblClickCallback"},controller:"ModelTableDirectiveCtrl as modelTable",template:t(16)}}function o(e,r,t){function n(e,t,n){var o=Math.ceil(n/a.paginationSize),l=r(e,t,o);a.nextPageLink=e,a.prevPageLink=t,a.linkUrls=l.linkUrls,a.currentLink=l.currentLink,a.rowIndexOffset=(a.currentLink-1)*a.paginationSize}function o(e){a.updateCollection({linkUrl:e})}var a=this;a.orderProp="-created_at",a.onUpdateCollection=o,e.$watch(function(){return a.pager},function(e){e&&!t.isEmpty(e)&&n(e.next,e.previous,e.count)})}var a=angular.module("model-table",["toggle-bg-color","kanmii-underscore","pager-nav"]);a.config(t(1).interpolateProviderConfig),a.directive("modelTable",n),a.controller("ModelTableDirectiveCtrl",o),o.$inject=["$scope","pagerNavSetUpLinks","kanmiiUnderscore"]},function(e,r){e.exports='<div class="model-table-display-root-container"><table class="table table-striped table-condensed table-bordered model-table-table-display" style="margin-bottom: 13px;"><caption>{$::modelTable.caption$}</caption><thead><tr><th>S/N</th><th ng-repeat="modelManager in modelTable.modelManager">{$::modelManager.title$}</th></tr></thead><tbody toggle-bg-color="" row-selector="tr" selected-class-indicator="model-table-display-selected"><tr ng-repeat="aModel in modelTable.modelCollection" style="cursor: pointer;" ng-dblclick="modelTable.onDblClick({rowModel: aModel})" ng-class="[\'model-table-display-table-row\', {\'model-table-display-selected\': aModel.highlighted}]"><td>{$$index + 1 + modelTable.rowIndexOffset$}</td><td ng-repeat="modelManager in modelTable.modelManager" ng-style="::modelManager.tdStyle">{$modelManager.modelKey ? aModel[modelManager.modelKey] : modelManager.render(aModel)$}</td></tr></tbody></table><pager-nav prev-page-link="modelTable.prevPageLink" link-urls="modelTable.linkUrls" current-pager-link="modelTable.currentLink" next-page-link="modelTable.nextPageLink" target-clicked-callback="modelTable.onUpdateCollection(linkUrl)"></pager-nav></div>'},function(e,r,t){"use strict";function n(e,r){var t=appendToUrl(r.currencyAPIUrl,":id");return e(t,{id:"@id"},{put:{method:"PUT"}})}function o(e){function r(r){return e.query({code:r}).$promise}return r}function a(e,r){var t=appendToUrl(r.branchAPIUrl,":id");return e(t,{id:"@id"},{put:{method:"PUT"}})}function l(){return function(e){return"string"==typeof e&&/\d{4}-\d{2}-\d{2}/.test(e)?e:e instanceof Date?e.strftime("%Y-%m-%d"):null}}function i(){return function(e){return"string"==typeof e&&/\d{4}-\d{2}-\d{2}/.test(e)?e:e instanceof Date?e.strftime("%Y-%m-%d"):null}}function c(e,r){e=angular.copy(e),console.log(e),400===e.status&&(e.messages=e.data,this.errorKeyMap=r),this.error=e}function s(e){return function(r,t){function n(e){e.element.dialog({modal:!0,dialogClass:"no-close",title:"Request Not Completed"})}e.showModal({templateUrl:d.buildUrl("core_recons","commons/./xhr-error-display.service.html"),controller:"XhrErrorDisplayCtrl as xhrErrorDisplay",inputs:{error:r,errorKeyMap:t}}).then(n)}}var d=t(1),u=angular.module("rootApp");u.factory("Currency",n),n.$inject=["$resource","urls"],u.factory("getTypeAheadCurrency",o),o.$inject=["Currency"],u.factory("Branch",a),a.$inject=["$resource","urls"],u.factory("parseDate",l),u.factory("formatDate",i),u.controller("XhrErrorDisplayCtrl",c),c.$inject=["error","errorKeyMap"],u.factory("xhrErrorDisplay",s),s.$inject=["ModalService"]},function(e,r,t){"use strict";function n(e){function r(r,t,n,o){function a(r){o.searchParams={},r&&e(r,t,".form-control")}o.reset=a,o.reset()}return{restrict:"E",scope:{},bindToController:!0,templateUrl:a.buildUrl(a.rootAppName,"search-lc/search-lc.html"),controller:"SearchLcDirectiveCtrl as searchLc",link:r}}function o(e,r){function t(r){return e.query({name:r}).$promise}function n(e){_.isEmpty(e)||(e.applicant&&(e.applicant=e.applicant.name),o.lcees=r.query(e),console.log(o.lcees))}var o=this;o.cssPath=a.buildUrl(a.rootAppName,"search-lc/search-lc.min.css"),o.lcees=[],o.searchParams={},o.getCustomer=t,o.getLcees=n}var a=t(1),l=angular.module("rootApp.search_lc",["rootApp"]);l.config(a.interpolateProviderConfig),a.setStaticPrefix(l),l.directive("searchLc",n),n.$inject=["resetForm"],l.controller("SearchLcDirectiveCtrl",o),o.$inject=["Customer","LetterOfCredit"]}]);
//# sourceMappingURL=app.min.js.map