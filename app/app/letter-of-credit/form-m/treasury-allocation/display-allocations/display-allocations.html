<div class="existing-allocations-directive-container"><div class="edit-allocation-container" ng-if="displayAllocations.showEditAllocationForm"><div edit-allocation="" allocation="displayAllocations.allocationToEdit" on-edited="displayAllocations.onAllocationEdited(allocation, edited)"></div></div><div class="action-container" ng-if="!displayAllocations.showEditAllocationForm"><form class="form-horizontal"><div class="row"><div class="col-sm-4"><div class="form-group"><label style="text-align: right;" class="control-label col-sm-3" for="selected-allocations-actions">Select Action</label><div class="col-sm-9"><div class="input-group"><select name="" id="selected-allocations-actions" class="form-control" km-null-model-on-destroyx="" ng-model="displayAllocations.action"><option value="">-----Select Action-----</option><option value="download-all">Download All</option><option ng-if="displayAllocations.selectedIds.length === 1" km-null-model-on-destroy="" value="edit">Edit</option><option ng-if="displayAllocations.selectedIds.length" value="download">Download</option></select><span style="cursor: pointer" class="input-group-addon form-m-action-execute" ng-if="displayAllocations.action" ng-click="displayAllocations.doAction( displayAllocations.action )"><span>Go</span></span> <span class="input-group-addon" ng-if="!displayAllocations.action"></span></div></div></div></div></div></form></div><div class="display-allocations-table-container treasury-allocations-table-display"><table ng-table="displayAllocations.tableParams" class="table table-bordered table-condensed table-responsive table-striped allocation-table"><tbody><tr style="cursor: pointer;" ng-repeat="allocationObj in $data track by allocationObj.id" ng-class="{'bid-row-matched': allocationObj.originalRequests, 'allocation-checked': displayAllocations.isChecked(allocationObj)}"><td><input type="checkbox" ng-model="displayAllocations.selectedAllocations[allocationObj.id]" ng-attr-name="{$'displayAllocations' + allocationObj.id$}"></td><td data-title="'S/N'">{$$index + 1$}</td><td title="'DEAL NO'" filter="{deal_number: 'text'}">{$::allocationObj.deal_number$}</td><td data-title="'SOURCE'" sortable="'source_of_fund'">{$::allocationObj.source_of_fund$}</td><td data-title="'DEAL DATE'" sortable="'deal_date'">{$::allocationObj.deal_date | date:'dd-MMM-yyyy'$}</td><td data-title="'SETTLEMENT DATE'" sortable="'settlement_date'">{$::allocationObj.settlement_date | date:'dd-MMM-yyyy'$}</td><td data-title="'TYPE'" sortable="'transaction_type'">{$::allocationObj.transaction_type$}</td><td data-title="'PRODUCT'" sortable="'product_type'">{$::allocationObj.product_type$}</td><td data-title="'CATEGORY'" sortable="'client_category'" filter="{client_category:'text'}">{$ allocationObj.client_category$}</td><td class="td-number" data-title="'RATE'" sortable="'naira_rate'">{$::allocationObj.naira_rate $}</td><td data-title="'CCY'" sortable="'currency'" filter="{currency:'text'}">{$::allocationObj.currency $}</td><td data-title="'CUSTOMER NAME'" sortable="'customer_name_no_ref'" filter="{customer_name_no_ref:'text'}">{$allocationObj.customer_name_no_ref $}</td><td data-title="'REFERENCE'" sortable="'ref'" filter="{ref :'text'}">{$allocationObj.ref $}</td><td class="td-number" data-title="'FCY AMOUNT'" sortable="'fcy_amount'" filter="{fcy_amount: 'number'}">{$::allocationObj.fcy_amount |number:2$}</td><td data-title="'ORIGINAL REQUEST'" filter="{originalRequests :'number'}"><span class="original-request-row td-number" ng-repeat="req in allocationObj.originalRequests"><span ng-class="{'original-request-form-m-number': (allocationObj.originalRequests.length > 1)}">{$::allocationObj.originalRequestsFormsM[$index]$}</span> <span class="original-request-amount">{$::req |number:2$}</span></span></td><td data-title="'CURRENT DISTRIBUTION'"><span class="original-request-row td-number" ng-repeat="req in allocationObj.distributions">{$::req |number:2$}</span></td><td data-title="'TOTAL ALLOCATIONS'" filter="{totalAllocations :'number'}"><span class="original-request-row td-number" ng-repeat="req in allocationObj.totalAllocations">{$::req |number:2$}</span></td><td data-title="'AMOUNT OUTSTANDING'" filter="{outstandingAmounts :'number'}" sortable="'outstandingAmounts'"><span class="original-request-row td-number" ng-repeat="req in allocationObj.outstandingAmounts">{$::req |number:2$}</span></td></tr></tbody></table></div></div>