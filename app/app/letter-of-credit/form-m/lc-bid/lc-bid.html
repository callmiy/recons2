<div class="bid-request-form-container form-m-add-on-container"><div class="row"><div class="col-lg-8 col-md-8 col-sm-12"><div ng-click="lcBid.toggleShow(bidForm)" class="form-m-add-on-toggle form-m-bid-toggle-show clearfix"><span class="form-m-add-on-show-helper" ng-if="lcBid.showBidForm">{$lcBid.formM.showEditBid ? 'Edit Bid' : 'New Bid Request'$}</span><div class="form-m-add-on-show-icon form-m-bid-add-on-show-icon"><span ng-class="['glyphicon', {'glyphicon-chevron-down': !lcBid.showBidForm, 'glyphicon-chevron-up': lcBid.showBidForm}]"></span> {$lcBid.title$}</div></div><form style="margin-top: 15px;" class="form-horizontal" name="bidForm" novalidate="" id="bidForm" autocomplete="on" ng-show="lcBid.showBidForm"><fieldset><div class="form-group bid-goods-description" control-has-feedback=""><label class="control-label col-sm-3" for="goods-description">Goods Description</label><div class="col-sm-9"><input type="text" class="form-control" id="goods-description" name="bidGoodsDescription" required="" ng-minlength="3" ng-required="lcBid.showBidForm" to-upper="" ng-model="lcBid.bid.goods_description"><div ng-messages="bidForm.bidGoodsDescription.$error" role="alert"><div ng-if="lcBid.isValid('bidGoodsDescription')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div class="form-group bid-amount-group" control-has-feedback=""><label class="control-label col-sm-3" for="bid-amount">Amount</label><div class="col-sm-9"><input type="text" class="form-control" id="bid-amount" name="bidAmount" ng-model="lcBid.amountGetterSetter" ng-model-options="{getterSetter: true, updateOn: 'blur'}" ng-required="lcBid.showBidForm"><div ng-messages="bidForm.bidAmount.$error" role="alert"><div ng-if="lcBid.isValid('bidAmount')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div class="form-group bid-rate-group" control-has-feedback=""><label class="control-label col-sm-3" for="bid-rate">Rate</label><div class="col-sm-9"><input type="text" class="form-control" id="bid-rate" name="bidRate" ng-model="lcBid.bid.rate" to-upper=""><div ng-messages="bidForm.bidRate.$error" role="alert"><div ng-if="lcBid.isValid('bidRate')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div class="form-group bid-letter-group" control-has-feedback="" control-selector="input[name=bidLetter]"><label class="control-label col-sm-3" for="bid-letter">Bid Letter?</label><div class="col-sm-9"><input type="checkbox" id="bid-letter" name="bidLetter" ng-model="lcBid.bid.bid_letter"><div ng-messages="bidForm.bidLetter.$error" role="alert"><div ng-if="lcBid.isValid('bidLetter')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div class="form-group bid-credit-approval-group" control-has-feedback="" control-selector="input[name=bidCreditApproval]"><label class="control-label col-sm-3" for="bid-credit-approval">Credit Approval?</label><div class="col-sm-9"><input type="checkbox" id="bid-credit-approval" name="bidCreditApproval" ng-model="lcBid.bid.credit_approval"><div ng-messages="bidForm.bidCreditApproval.$error" role="alert"><div ng-if="lcBid.isValid('bidCreditApproval')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div class="form-group bid-docs-complete-group" control-has-feedback="" control-selector="input[name=bidDocsComplete]"><label class="control-label col-sm-3" for="bid-docs-complete">Documentation Complete?</label><div class="col-sm-9"><input type="checkbox" id="bid-docs-complete" name="bidDocsComplete" ng-model="lcBid.bid.docs_complete" ng-disabled=""><div ng-messages="bidForm.bidDocsComplete.$error" role="alert"><div ng-if="lcBid.isValid('bidDocsComplete')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div class="form-group bid-comment-group" control-has-feedback=""><label class="control-label col-sm-3" for="bid-comment">Comment</label><div class="col-sm-9"><textarea style="height: 70px" class="form-control" id="bid-comment" name="bidComment" ng-model="lcBid.bid.comment"></textarea><div ng-messages="bidForm.bidComment.$error" role="alert"><div ng-if="lcBid.isValid('bidComment')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div ng-if="lcBid.formM.showEditBid"><div class="form-group bid-created-date-group" control-has-feedback="" feedback-after=".input-group-addon"><label class="control-label col-sm-3" for="bid-created-date">Date Created</label><div class="col-sm-9"><div class="input-group"><input type="text" class="form-control" id="bid-created-date" name="bidCreatedDate" ng-model="lcBid.bid.created_at" ng-disabled="!lcBid.formM.showEditBid" ng-required="lcBid.formM.showEditBid" uib-datepicker-popup="{$lcBid.formM.datePickerFormat$}" is-open="lcBid.datePickerIsOpen.bidCreatedDate"> <span class="input-group-addon" ng-click="lcBid.openDatePicker('bidCreatedDate')"><i class="glyphicon glyphicon-calendar"></i></span></div><div ng-messages="bidForm.bidCreatedDate.$error" role="alert"><div ng-if="lcBid.isValid('bidCreatedDate')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div class="form-group bid-requested-date-group" control-has-feedback="" feedback-after=".input-group-addon"><label class="control-label col-sm-3" for="bid-requested-date">Date Requested</label><div class="col-sm-9"><div class="input-group"><input type="text" class="form-control" id="bid-requested-date" name="bidRequestedDate" ng-model="lcBid.bid.requested_at" ng-disabled="!lcBid.formM.showEditBid" uib-datepicker-popup="{$lcBid.formM.datePickerFormat$}" is-open="lcBid.datePickerIsOpen.bidRequestedDate"> <span class="input-group-addon" ng-click="lcBid.openDatePicker('bidRequestedDate')"><i class="glyphicon glyphicon-calendar"></i></span></div><div ng-messages="bidForm.bidRequestedDate.$error" role="alert"><div ng-if="lcBid.isValid('bidRequestedDate')"><div ng-messages-include="form-error-messages"></div></div></div></div></div><div class="form-group bid-downloaded-group" control-has-feedback="" control-selector="#bid-downloaded"><label class="control-label col-sm-3" for="bid-downloaded">Downloaded</label><div class="col-sm-9"><input type="checkbox" id="bid-downloaded" name="bidDownloaded" ng-model="lcBid.bid.downloaded" ng-disabled="!lcBid.formM.showEditBid"><div ng-messages="bidForm.bidDownloaded.$error" role="alert"><div ng-if="lcBid.isValid('bidRequestedDate')"><div ng-messages-include="form-error-messages"></div></div></div></div></div></div><div style="text-align: right" ng-if="lcBid.formM.showEditBid"><button type="button" class="btn btn-info" ng-click="lcBid.editBid()" ng-disabled="lcBid.editBidInvalid(bidForm)">Edit Bid</button></div><div style="text-align: right" ng-if="!lcBid.formM.showEditBid"><button type="button" class="btn btn-info" ng-click="lcBid.saveBid(lcBid.bid)" ng-disabled="bidForm.$invalid">Save Bid</button></div></fieldset></form><div class="allocation-form-container" ng-if="lcBid.showAllocateFx"><span class="close-btn" ng-click="lcBid.dismissShowAllocateFxForm()">&times;</span><div add-fx-allocation="" initial-deal-props="lcBid.initialBidProps" km-title="lcBid.allocationTitle" on-fx-allocated="lcBid.onFxAllocated(result)"></div></div></div></div><div class="items-table-display" ng-if="lcBid.formM.existingBids.length"><hr><table class="table table-responsive table-striped table-bordered"><caption class="items-table-display-caption">Existing Bids <span class="badge">{$lcBid.formM.existingBids.length$}</span></caption><thead><tr><td style="width: 5px"></td><td style="text-align: center; width: 5px">S/N</td><td style="text-align: center; width: 5px;">Currency</td><td style="text-align: center; width: 10px;">Amount</td><td style="text-align: center; width: 90px;">Date Sent</td><td style="text-align: center; width: 10px;">Allocations</td><td style="text-align: center; width: 10px;">Utilization</td><td style="text-align: center; width: 10px;">Unallocated</td></tr></thead><tbody class="existing-bids-table-body"><tr ng-repeat="bid in lcBid.formM.existingBids" ng-class="['existing-bid-row', {'existing-bid-checked': bid.checked, 'deleted': (bid.deleted_at || lcBid.formM.deleted_at ) } ]"><td><input type="checkbox" ng-model="lcBid.selectedBids[bid.id]" ng-attr-name="{$'existingBid' + bid.id$}"></td><td style="text-align: right;">{$$index + 1$}</td><td style="text-align: center;">{$::lcBid.formM.currency.code$}</td><td style="text-align: right;">{$::bid.amount|number:2$}</td><td style="text-align: center;">{$::bid.requested_at|date:'dd-MMM-yyyy'$}</td><td style="text-align: right;">{$::bid.total_allocation|number:2$}</td><td style="text-align: right;">{$::bid.total_utilization|number:2$}</td><td style="text-align: right;">{$::bid.unallocated|number:2$}</td></tr></tbody></table><div style="text-align: center" ng-if="lcBid.selectedBidsLen"><form class="form-horizontal selected-bids-actions-form"><div class="row"><div class="col-sm-4"><div class="form-group"><label class="control-label col-sm-3" for="selected-bids-actions">Action</label><div class="col-sm-9"><div class="input-group"><select class="form-control" name="" id="selected-bids-actions" ng-model="lcBid.action"><option value="">-----Select Action-----</option><option value="download">Download</option><option ng-if="lcBid.selectedBidsLen === 1 && lcBid.selectedBidNotDeleted(lcBid.selectedBids)" value="edit">Edit</option><option ng-if="lcBid.selectedBidsLen === 1 && !lcBid.selectedBidNotDeleted(lcBid.selectedBids)" value="reinstate">Reinstate</option><option ng-if="lcBid.selectedBidsLen === 1 && lcBid.selectedBidNotDeleted(lcBid.selectedBids)" value="add-allocation">Add allocation</option><option ng-if="lcBid.selectedBidsLen === 1" value="view-bids">View Bid</option><option ng-if="lcBid.selectedBidsLen === 1 && lcBid.selectedBidNotDeleted(lcBid.selectedBids)" value="delete">Delete</option></select><span style="cursor: pointer" class="input-group-addon form-m-action-execute" ng-if="lcBid.action" ng-click="lcBid.doAction( lcBid.action, lcBid.selectedBids, bidForm )"><span>Go</span></span> <span class="input-group-addon" ng-if="!lcBid.action"></span></div></div></div></div></div></form></div></div></div>