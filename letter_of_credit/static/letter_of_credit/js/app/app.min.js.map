{"version":3,"sources":["app.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","formMRootAppURLConfig","$stateProvider","$urlRouterProvider","otherwise","state","url","kanmiiTitle","template","rootCommons","app","angular","config","interpolateProviderConfig","run","$rootScope","$state","$stateParams","$inject","SearchUploadedFormMService","UploadFormM","xhrErrorDisplay","ModalService","kanmiiUnderscore","$q","searchFormM","submittedSearchParams","searchFormMSuccess","data","deferred","resolve","searchFormMError","xhr","reject","defer","searchParams","copy","applicant","name","currency","code","query","$promise","then","promise","SearchService","searchWithModal","showModal","templateUrl","buildUrl","controller","modal","element","dialog","dialogClass","minWidth","minHeight","title","close","isObject","isEmpty","service","this","SearchUploadedFormMServiceModalCtrl","resetForm","initForm","vm","reset","form","$invalid","$error","submitSearchParams","factory","fsPath","lcCommons","appName","staticPrefix","setStaticPrefix","addIconSrc","$interpolateProvider","startSymbol","endSymbol","rootAppName","addBidURLConfig","MakeBidRequestController","SearchFormMService","formMModelManager","filter","LcBidRequest","FormM","EditBid","formMAttributesVerboseNames","bidAttributesVerboseNames","$setPristine","$setUntouched","formMDetailShown","goodsInputIsEditable","bid","mf","amount","submitBid","newBid","saveNewBid","bidToSave","$save","bidSavedSuccess","bidSavedError","editWithModal","formM","formMForBid","closeCb","editedBid","go","goods_description","put","onSelectFormM","rowModel","mfGetterSetter","number","amountGetterSetter","dateReceivedGetterSetter","date_received","formMs","toggleEditGoods","modelManager","tableCaption","newVal","applicant_data","Number","String","replace","val","Date","getFormM","results","length","paginationHooks","next","previous","count","toggleShowFormMDetail","displayPendingBidDirective","restrict","lcAppCommons","scope","bindToController","bids","updateCollection","onSelectedBidsChanged","pager","onDblClick","paginationSize","selectedBids","displayPendingBidDirectiveCtrl","pagerNavSetUpLinks","setUpLinks","prev","numLinks","Math","ceil","linkProperties","nextPageLink","prevPageLink","linkUrls","currentLink","rowIndexOffset","onUpdateCollection","linkUrl","deselectAllBids","forEach","highlighted","modelRowClicked","model","downloaded","any","checked","$watch","newSelections","each","bidIndex","toggleAll","all","toggleAllClicked","directive","addBidDirective","link","elm","attributes","self","css","cursor","bind","maxHeight","submittedData","saveBid","onNewBid","AddBidDirectiveCtrl","dataToSave","AddBidModalCtrl","isDefined","executeAfterDim","find","$el","$","prop","parent","dim","dimCb","unDimCb","formMsFromSearch","bidURLConfig","params","BidRequestController","$http","stateParams","kanmiiUri","urls","formatDate","$timeout","initialize","searchedBidResult","selectedDownloadedBids","bidRequests","pending","updateBids","searchFormMs","console","log","receiveNewBid","unshift","getBidsOnNavigation","get","response","splice","bidId","getBidFromId","index","lcBidRequestDownloadUrl","downloadUrl","search","selection","push","bid_ids","toString","downloadBtnDisabled","selectionVal","markRequestedBtnDisabled","anyNoneDownloadedChecked","has","markRequested","editedBids","requested_at","refreshPage","EditBidService","Error","inputs","form_m_number","noop","bidForEdit","EditBidModalCtrl","toggleEnableEditForm","inputName","formIsEditable","controls","goods","bidAmountGetterSetter","formMStateURLConfig","detailedFormM","showSummary","views","addFormM","AddFormMStateController","getTypeAheadCustomer","getTypeAheadCurrency","SearchDetailedOrUploadedFormMService","$filter","resetForm2","$scope","initDetailedFormM","updateAddFormMTitle","fieldsEdit","closedIssues","nonClosedIssues","existingBids","initFormMSavingIndicator","cover","issues","currency_data","form_m_issues","covers","getPaginated","summary","savingFormMIndicator","formMIsSaving","disableSubmitBtn","newFormMForm","coverForm","bidForm","issuesForm","compared","compareDetailedFormMWithForm","addFormMForm","elements","showFormMMessage","header","showIssuesMessage","issuesText","issue","formatIssueText","text","equals","onCoverChanged","onIssuesChanged","onNonClosedIssuesChanged","enableFieldEdit","field","validators","test","getApplicant","getCurrency","datePickerFormat","datePickerIsOpen","openDatePicker","getUploadedFormM","detailed","uploaded","ccy","submit","formMSavedSuccess","formMSavedError","formMToSave","cover_type","do_not_update","$put","lcBidDirective","LcBidDirectiveController","formFieldIsValid","init","show","addFormMState","isValid","validity","arguments","undefined","toggleShow","lcIssueDirective","LcIssueDirectiveController","LCIssueConcrete","getTypeAheadLCIssue","clearFormField","$window","initExistingIssues","initContainerVars","showContainer","closeIssue","$index","issueClosedSuccess","closed_at","closedAt","issueClosedError","confirm","issueSelected","$item","$model","deleteIssue","getIssue","_ids","x","concat","exclude_issue_ids","join","downloadIssues","newFormM","formMIssues","newIssues","$validate","require","atts","ctrl","lcIssue","$validators","Boolean","LcCoverDirectiveController","formMCoverTypes","coverTypes","newCover","SearchDetailedOrUploadedFormMServiceModalCtrl","ToggleDimElement","uiOptions","open","unDim","SearchFormMServiceModalCtrl","showLcIssueContainer","searchLcIssuesTitle","selectedLcIssues","toggleShowLcIssueContainer","displayLcIssueUI","searchFormMDirective","searchFormMResult","SearchFormMDirectiveCtrl","SearchFormMModalCtrl","uploadFormMURLConfig","uploadFormM","UploadFormMController","initial","formMIsUploading","uploadIndicationText","uploadFormMText","parseDate","dt","slice","formMCreatedSuccess","creationResult","created_data","numCreatedNow","numCreatedPreviously","formMCreatedError","row","Papa","parse","delimiter","step","ba","fob","submitted_at","validated_at","save","likely_duplicates","formMListURLConfig","listFormM","FormMListController","updateFormMs","getFormMCollectionOnNavigation","modelRowDblClick","tabs","active","getNoLcAttached","searchedFormMResult","formMURLConfig","FormMController","uploadFormMTab","viewName","select","listFormMTab","addFormMTitle","addFormMTab","reportsTab","LetterOfCreditController","SearchLc","searchLc","lc","lc_number","LetterOfCreditDetailController","LetterOfCredit","Customer","getIssuesNotClosed","lcIssues","lcForm","alertIsShown","issueDateGetterSetter","estb_date","expiryDateGetterSetter","expiry_date","saveIssue","saveSuccess","issue_text","saveError","transform","form_m_creation_errors","postData","get_or_create_form_m","form_m_data","ccy_data","lc_amt_org_ccy","anIssue","replaceLc","newLcNumber","replaceLcFormInvalid","formInvalid","toLowerCase","indexOf","customerAdded","customer","exclude_form_m_issues","addCustomer","closeAlert","searchLcSuccess","searchLcError","SearchLcModalCtrl"],"mappings":"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","file":"app.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t__webpack_require__(5)\r\n\t__webpack_require__(7)\r\n\t__webpack_require__(8)\r\n\t__webpack_require__(9)\r\n\t__webpack_require__(11)\r\n\t__webpack_require__(13)\r\n\t__webpack_require__(17)\r\n\t__webpack_require__(18)\r\n\t__webpack_require__(19)\r\n\t__webpack_require__(1)\r\n\t__webpack_require__(21)\r\n\t__webpack_require__(23)\r\n\t__webpack_require__(25)\r\n\t__webpack_require__(27)\r\n\t__webpack_require__(28)\r\n\t__webpack_require__(29)\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('lc-root-app',\r\n\t  ['rootApp',\r\n\t   'ui.router',\r\n\t   'form-m',\r\n\t   'form-m-bid',\r\n\t   'lc'\r\n\t  ])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\r\n\t  $rootScope.$state = $state\r\n\t  $rootScope.$stateParams = $stateParams\r\n\t}])\r\n\r\n\tapp.config(formMRootAppURLConfig)\r\n\tformMRootAppURLConfig.$inject = ['$stateProvider', '$urlRouterProvider']\r\n\tfunction formMRootAppURLConfig($stateProvider, $urlRouterProvider) {\r\n\t  $urlRouterProvider\r\n\t    .otherwise('/')\r\n\r\n\t  $stateProvider\r\n\t    .state('home', {\r\n\t      url: '/',\r\n\r\n\t      kanmiiTitle: 'Home',\r\n\r\n\t      template: __webpack_require__(30)\r\n\t    })\r\n\t}\r\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('search-uploaded-form-m', [\r\n\t  'kanmii-underscore',\r\n\t  'upload-form-m-service',\r\n\t  'toggle-dim-element'\r\n\t])\r\n\r\n\tapp.factory('SearchUploadedFormMService', SearchUploadedFormMService)\r\n\tSearchUploadedFormMService.$inject = [\r\n\t  'UploadFormM',\r\n\t  'xhrErrorDisplay',\r\n\t  'ModalService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$q'\r\n\t]\r\n\tfunction SearchUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q) {\r\n\r\n\t  function searchFormM(submittedSearchParams) {\r\n\t    var deferred = $q.defer()\r\n\t    var searchParams = angular.copy(submittedSearchParams)\r\n\r\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\r\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\r\n\r\n\t    UploadFormM.query(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\r\n\r\n\t    function searchFormMSuccess(data) {\r\n\t      deferred.resolve(data)\r\n\t    }\r\n\r\n\t    function searchFormMError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t      deferred.reject(xhr)\r\n\t    }\r\n\r\n\t    return deferred.promise\r\n\t  }\r\n\r\n\t  function SearchService() {\r\n\t    var service = this\r\n\r\n\t    service.searchWithModal = searchWithModal\r\n\t    function searchWithModal() {\r\n\t      var deferred = $q.defer()\r\n\r\n\t      ModalService.showModal({\r\n\t        templateUrl: __webpack_require__(2).buildUrl(\r\n\t          'form-m/upload-form-m/search-uploaded-form-m/search-uploaded-form-m-modal.html'),\r\n\r\n\t        controller: 'SearchUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          dialogClass: 'no-close',\r\n\t          modal: true,\r\n\t          minWidth: 600,\r\n\t          minHeight: 250,\r\n\t          title: 'Search Uploaded Form M',\r\n\r\n\t          close: function() {\r\n\t            modal.close.then()\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(submittedSearchParams) {\r\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t            deferred.resolve(searchFormM(submittedSearchParams))\r\n\t          }\r\n\t        })\r\n\t      })\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new SearchService()\r\n\t}\r\n\r\n\tapp.controller('SearchUploadedFormMServiceModalCtrl', SearchUploadedFormMServiceModalCtrl)\r\n\tSearchUploadedFormMServiceModalCtrl.$inject = [\r\n\t  'close',\r\n\t  'resetForm',\r\n\t  '$element'\r\n\t]\r\n\tfunction SearchUploadedFormMServiceModalCtrl(close, resetForm, element) {\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\r\n\t  vm.submitSearchParams = submitSearchParams\r\n\t  function submitSearchParams(searchParams) {\r\n\t    close(searchParams)\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar lcCommons = __webpack_require__(3)\r\n\r\n\t/**\r\n\t * @description\r\n\t *\r\n\t * @param {String} fsPath - the path relative to the form-m directory\r\n\t * @returns {*|string}\r\n\t */\r\n\tfunction buildUrl(fsPath) {\r\n\t  return lcCommons.buildUrl('app') + '/' + fsPath\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t  buildUrl: buildUrl\r\n\t}\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar appName = 'letter_of_credit'\r\n\r\n\tfunction buildUrl(fsPath) {\r\n\t  return rootCommons.buildUrl(appName, fsPath)\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t  buildUrl: buildUrl,\r\n\t  appName: appName\r\n\t}\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\r\n\tvar interpolateProviderConfig = ['$interpolateProvider', function ($interpolateProvider) {\r\n\t  $interpolateProvider.startSymbol('{$');\r\n\t  $interpolateProvider.endSymbol('$}');\r\n\t}];\r\n\r\n\t/**\r\n\t * Takes a file system path to a file (most likely a template path) and returns the server compatible path\r\n\t *\r\n\t * @param {string} appName - the name of the django app\r\n\t * @param {string} fsPath - relative path to a file resource on disk. The path must be relative to appName/js directory\r\n\t *   path\r\n\t * @returns {string} - a server compatible path\r\n\t */\r\n\tfunction buildUrl(appName, fsPath) {\r\n\t  return staticPrefix + appName + '/js/' + fsPath\r\n\t}\r\n\r\n\t/**\r\n\t * sets the static root on an angular app - so we can use a variable in our views rather hard-coding the static root\r\n\t * value\r\n\t * @param {angular.module} app the angular module on which we wish to set the static root\r\n\t */\r\n\tfunction setStaticPrefix(app) {\r\n\t  app.run(['$rootScope', function ($rootScope) {\r\n\t    $rootScope.staticPrefix = staticPrefix\r\n\t    $rootScope.addIconSrc = staticPrefix + 'core_recons/css/images/icon_addposting.gif'\r\n\t  }])\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t  interpolateProviderConfig: interpolateProviderConfig,\r\n\r\n\t  buildUrl: buildUrl,\r\n\r\n\t  rootAppName: 'core_recons',\r\n\r\n\t  setStaticPrefix: setStaticPrefix\r\n\t}\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\t/**\r\n\t Add bid service\r\n\t */\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('add-bid', [\r\n\t  'rootApp',\r\n\t  'ui.router',\r\n\t  'model-table',\r\n\t  'form-m-service',\r\n\t  'form-m-search-service',\r\n\t  'kanmii-underscore',\r\n\t  'lc-bid-request',\r\n\t  'edit-bid'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(addBidURLConfig)\r\n\taddBidURLConfig.$inject = ['$stateProvider']\r\n\tfunction addBidURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('addBid', {\r\n\t      url: '/bid/add-bid',\r\n\r\n\t      kanmiiTitle: 'Make Bid Request',\r\n\r\n\t      template: __webpack_require__(6),\r\n\r\n\t      controller: 'MakeBidRequestController as makeBidRequest'\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('MakeBidRequestController', MakeBidRequestController)\r\n\tMakeBidRequestController.$inject = [\r\n\t  'SearchFormMService',\r\n\t  'formMModelManager',\r\n\t  'kanmiiUnderscore',\r\n\t  '$filter',\r\n\t  'LcBidRequest',\r\n\t  'FormM',\r\n\t  'xhrErrorDisplay',\r\n\t  'EditBid',\r\n\t  '$state',\r\n\t  'formMAttributesVerboseNames',\r\n\t  'bidAttributesVerboseNames'\r\n\t]\r\n\tfunction MakeBidRequestController(SearchFormMService, formMModelManager, kanmiiUnderscore, filter, LcBidRequest,\r\n\t  FormM, xhrErrorDisplay, EditBid, state, formMAttributesVerboseNames, bidAttributesVerboseNames) {\r\n\r\n\t  var vm = this\r\n\r\n\t  /**\r\n\t   * The form M we wish to bid for. This will be the form M instance retrieved from server\r\n\t   * @type {{}}\r\n\t   */\r\n\t  var formMForBid = {\r\n\t    goods_description: null\r\n\t  }\r\n\r\n\t  reset()\r\n\t  function reset(form) {\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\r\n\t    vm.formMDetailShown = false\r\n\t    vm.goodsInputIsEditable = false\r\n\r\n\t    vm.bid = {\r\n\t      mf: null,\r\n\t      amount: ''\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.reset = reset\r\n\r\n\t  /**\r\n\t   * Required by model table directive to display bids\r\n\t   * @type {[]}\r\n\t   */\r\n\t  vm.modelManager = formMModelManager\r\n\r\n\t  /**\r\n\t   * Required by model table directive as the table caption\r\n\t   * @type {string}\r\n\t   */\r\n\t  vm.tableCaption = 'Select form M for bid request'\r\n\r\n\t  /**\r\n\t   * The form Ms collection from which user will make a choice. The chosen form M will be the one for which bid\r\n\t   * is to be requested\r\n\t   * @type {Array}\r\n\t   */\r\n\t  vm.formMs = []\r\n\r\n\t  vm.submitBid = submitBid\r\n\t  /**\r\n\t   * We create a new bid from data collected from user. If we have edited the goods description (because we did not\r\n\t   * provide one while saving the form M initially or we wish to change the goods description prior to creating a new\r\n\t   * bid) we first update the form M with the edited goods description before creating the bid\r\n\t   * @param {{}} newBid\r\n\t   */\r\n\t  function submitBid(newBid) {\r\n\r\n\t    if (formMForBid.goods_description !== newBid.mf.goods_description) {\r\n\t      formMForBid.goods_description = newBid.mf.goods_description\r\n\r\n\t      FormM.put(formMForBid).$promise.then(function(data) {\r\n\t        saveNewBid()\r\n\t        formMForBid = data\r\n\r\n\t      }, function(xhr) {\r\n\t        xhrErrorDisplay(xhr, formMAttributesVerboseNames)\r\n\t      })\r\n\r\n\t    } else saveNewBid();\r\n\r\n\t    function saveNewBid() {\r\n\t      var bidToSave = {\r\n\t        mf: newBid.mf.url,\r\n\t        amount: newBid.amount\r\n\t      }\r\n\r\n\t      new LcBidRequest(bidToSave).$save(bidSavedSuccess, bidSavedError)\r\n\t    }\r\n\r\n\t    function bidSavedSuccess(data) {\r\n\t      /**\r\n\t       * `EditBid` service will display the just saved bid and will allow us to optionally edit the bid in case we\r\n\t       * made mistake\r\n\t       */\r\n\t      EditBid.editWithModal({\r\n\t        bid: data,\r\n\t        formM: formMForBid,\r\n\t        title: 'Bid Save Successful',\r\n\t        closeCb: function(editedBid) {\r\n\t          state.go('bid', {newBid: editedBid})\r\n\t        }\r\n\t      })\r\n\t    }\r\n\r\n\t    function bidSavedError(xhr) {\r\n\t      xhrErrorDisplay(xhr, bidAttributesVerboseNames)\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.mfGetterSetter = function mfGetterSetter(newVal) {\r\n\t    if (newVal) vm.bid.mf = newVal\r\n\t    else if (!kanmiiUnderscore.isEmpty(vm.bid.mf)) return vm.bid.mf.number + ': ' + vm.bid.mf.applicant_data.name\r\n\t    else return ''\r\n\t  }\r\n\r\n\t  vm.amountGetterSetter = function amountGetterSetter(newVal) {\r\n\t    if (newVal) {\r\n\t      vm.bid.amount = Number(String(newVal).replace(',', ''))\r\n\t    }\r\n\t    else if (vm.bid.amount) return filter('number')(vm.bid.amount, 2)\r\n\t    else return ''\r\n\t  }\r\n\r\n\t  vm.dateReceivedGetterSetter = function dateReceivedGetterSetter(val) {\r\n\t    if (val) vm.bid.mf.date_received = new Date(val)\r\n\t    else if (vm.bid.mf) return filter('date')(vm.bid.mf.date_received, 'dd-MMM-yyyy')\r\n\t    else return ''\r\n\t  }\r\n\r\n\t  vm.onSelectFormM = onSelectFormM\r\n\t  function onSelectFormM(rowModel) {\r\n\t    formMForBid = angular.copy(rowModel)\r\n\r\n\t    vm.mfGetterSetter(rowModel)\r\n\t    if (!vm.bid.number) vm.amountGetterSetter(rowModel.amount)\r\n\r\n\t    vm.dateReceivedGetterSetter(rowModel.date_received)\r\n\r\n\t    vm.formMs = [rowModel]\r\n\t  }\r\n\r\n\t  vm.getFormM = function getFormM() {\r\n\r\n\t    SearchFormMService.searchWithModal().then(function(data) {\r\n\t      var results = data.results\r\n\t      if (results.length) {\r\n\t        if (results.length === 1) {\r\n\t          vm.onSelectFormM(results[0])\r\n\r\n\t        } else {\r\n\t          vm.formMs = results\r\n\t          vm.paginationHooks = {\r\n\t            next: data.next,\r\n\t            previous: data.previous,\r\n\t            count: data.count\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.toggleShowFormMDetail = function toggleShowFormMDetail() {\r\n\t    vm.formMDetailShown = !vm.formMDetailShown\r\n\t  }\r\n\r\n\t  vm.toggleEditGoods = toggleEditGoods\r\n\t  function toggleEditGoods() {\r\n\t    vm.goodsInputIsEditable = !vm.goodsInputIsEditable && vm.bid.mf && vm.bid.mf.number ? true : false\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"make-bid-request-root-container\\\"><div class=\\\"state-navigate-back\\\"><a ui-sref=\\\"bid\\\"><span class=\\\"glyphicon glyphicon-circle-arrow-left\\\"></span> Pending Bids</a></div><div class=\\\"row\\\" style=\\\"margin-bottom: 45px;\\\"><div class=\\\"bid-request-form col-sm-5 well\\\"><form novalidate=\\\"\\\" ng-submit=\\\"makeBidRequest.submitBid(makeBidRequest.bid)\\\" role=\\\"form\\\" name=\\\"makeBidRequestForm\\\"><div class=\\\"form-group form-m-group\\\"><label for=\\\"form-m\\\">Form M</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\" data-toggle=\\\"tooltip\\\" title=\\\"Search for Form M\\\" ng-dblclick=\\\"makeBidRequest.getFormM()\\\" style=\\\"cursor: pointer;\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"text\\\" class=\\\"form-control\\\" min=\\\"4\\\" id=\\\"form-m\\\" readonly=\\\"\\\" required=\\\"\\\" name=\\\"mf\\\" placeholder=\\\"Double click to search\\\" ng-model=\\\"makeBidRequest.mfGetterSetter\\\" ng-dblclick=\\\"makeBidRequest.getFormM()\\\" ng-pattern=\\\"/^MF\\\\d{11}\\\\: .+/\\\" ng-model-options=\\\"{getterSetter: true}\\\"> <span class=\\\"input-group-addon\\\" data-toggle=\\\"tooltip\\\" ng-show=\\\"makeBidRequest.bid.mf.number\\\" ng-click=\\\"makeBidRequest.toggleShowFormMDetail()\\\" title=\\\"View Form M\\\" style=\\\"cursor:pointer;\\\"><i class=\\\"glyphicon glyphicon-eye-open\\\"></i></span></div></div><div class=\\\"form-group amount-group\\\"><label for=\\\"amount\\\">Bid Amount</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\">{$makeBidRequest.bid.mf.currency_data.code || '@'$}</span> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"amount\\\" required=\\\"\\\" ng-model=\\\"makeBidRequest.amountGetterSetter\\\" ng-model-options=\\\"{getterSetter: true, updateOn: 'blur'}\\\"></div></div><div class=\\\"form-group goods-description-group\\\"><label for=\\\"goods-description\\\">Goods description</label><div class=\\\"input-group\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"goods-description\\\" required=\\\"\\\" ng-minlength=\\\"5\\\" to-upper=\\\"\\\" name=\\\"goods-description\\\" ng-model=\\\"makeBidRequest.bid.mf.goods_description\\\" ng-readonly=\\\"!makeBidRequest.goodsInputIsEditable\\\"> <span class=\\\"input-group-addon\\\" style=\\\"cursor:pointer;\\\" ng-click=\\\"makeBidRequest.toggleEditGoods()\\\"><span class=\\\"glyphicon glyphicon-pencil\\\"></span></span></div></div><div class=\\\"form-group add-bid-form-control\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"makeBidRequestForm.$invalid\\\" name=\\\"add-bid-form-control-submit\\\" style=\\\"margin-right: 5%;\\\">Make Request</button> <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"makeBidRequest.reset(makeBidRequestForm)\\\">Reset</button></div></form></div><div class=\\\"form-m-detail-container col-sm-offset-2 col-sm-4\\\" ng-show=\\\"makeBidRequest.formMDetailShown\\\"><span class=\\\"form-m-detail-container-dismiss\\\" ng-click=\\\"makeBidRequest.toggleShowFormMDetail()\\\">&times;</span><div class=\\\"form-group form-m-number-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-number\\\">Form M Number</label> <input class=\\\"form-control\\\" ng-model=\\\"makeBidRequest.bid.mf.number\\\" id=\\\"form-m-detail-number\\\" disabled=\\\"\\\"></div><div class=\\\"form-group applicant-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-applicant\\\">Applicant</label> <input class=\\\"form-control\\\" type=\\\"text\\\" id=\\\"form-m-detail-applicant\\\" ng-model=\\\"makeBidRequest.bid.mf.applicant_data.name\\\" disabled=\\\"\\\"></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-amount\\\">Form M Amount</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\">{$makeBidRequest.bid.mf.currency_data.code$}</span> <input class=\\\"form-control\\\" id=\\\"form-m-detail-amount\\\" required=\\\"\\\" ng-model=\\\"makeBidRequest.amountGetterSetter\\\" disabled=\\\"\\\" ng-model-options=\\\"{getterSetter: true}\\\"></div></div><div class=\\\"form-group goods-description-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-goods-description\\\">Goods Description</label> <input class=\\\"form-control\\\" type=\\\"text\\\" id=\\\"form-m-detail-goods-description\\\" ng-model=\\\"makeBidRequest.bid.mf.goods_description\\\" disabled=\\\"\\\"></div><div class=\\\"form-group received-date-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-date-received\\\">Date Received</label> <input class=\\\"form-control\\\" id=\\\"form-m-detail-date-received\\\" disabled=\\\"\\\" ng-model=\\\"makeBidRequest.dateReceivedGetterSetter\\\" ng-model-options=\\\"{getterSetter: true}\\\"></div></div></div><model-table model-collection=\\\"makeBidRequest.formMs\\\" table-model-manager=\\\"::makeBidRequest.modelManager\\\" table-caption=\\\"::makeBidRequest.tableCaption\\\" pagination-size=\\\"20\\\" update-collection=\\\"makeBidRequest.getBidsOnNavigation(linkUrl)\\\" pager-object=\\\"makeBidRequest.paginationHooks\\\" on-row-dbl-click-callback=\\\"makeBidRequest.onSelectFormM(rowModel)\\\"></model-table></div>\";\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar lcAppCommons = __webpack_require__(2)\r\n\r\n\tvar app = angular.module('display-pending-bid', ['kanmii-underscore'])\r\n\r\n\tapp.directive('displayPendingBid', displayPendingBidDirective)\r\n\tfunction displayPendingBidDirective() {\r\n\t  return {\r\n\t    restrict: 'EA',\r\n\r\n\t    templateUrl: lcAppCommons.buildUrl('bid-request/display-pending-bid/display-pending-bid.html'),\r\n\r\n\t    scope: {},\r\n\r\n\t    bindToController: {\r\n\t      bids: '=pendingBids',\r\n\r\n\t      updateCollection: '&',\r\n\r\n\t      onSelectedBidsChanged: '&',\r\n\r\n\t      pager: '=pagerObject',\r\n\r\n\t      onDblClick: '&onRowDblClickCallback',\r\n\r\n\t      paginationSize: '=',\r\n\r\n\t      selectedBids: '='\r\n\t    },\r\n\r\n\t    controller: 'displayPendingBidDirectiveCtrl as bidTable'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('displayPendingBidDirectiveCtrl', displayPendingBidDirectiveCtrl)\r\n\tdisplayPendingBidDirectiveCtrl.$inject = [\r\n\t  'pagerNavSetUpLinks',\r\n\t  '$scope',\r\n\t  'kanmiiUnderscore'\r\n\t]\r\n\tfunction displayPendingBidDirectiveCtrl(pagerNavSetUpLinks, scope, kanmiiUnderscore) {\r\n\t  var vm = this //jshint -W040\r\n\r\n\t  vm.selectedBids = {}\r\n\r\n\t  function setUpLinks(next, prev, count) {\r\n\r\n\t    var numLinks = Math.ceil(count / vm.paginationSize)\r\n\r\n\t    var linkProperties = pagerNavSetUpLinks(next, prev, numLinks)\r\n\r\n\t    vm.nextPageLink = next\r\n\t    vm.prevPageLink = prev\r\n\r\n\t    vm.linkUrls = linkProperties.linkUrls\r\n\t    vm.currentLink = linkProperties.currentLink\r\n\r\n\t    /**\r\n\t     * The row index offset. The row begin at one so in the view, we do `$index + 1` for row number. However, as we\r\n\t     * move from page to page, the `$index` view value is reset back to zero, so that row number always begin at 1.\r\n\t     * Since we know what the page number is (this.currentLink), we calculate the offset for the row (as an arithmetic\r\n\t     * progression)\r\n\t     * @type {number}\r\n\t     */\r\n\t    vm.rowIndexOffset = (vm.currentLink - 1) * vm.paginationSize\r\n\t  }\r\n\r\n\t  vm.onUpdateCollection = onUpdateCollection\r\n\t  function onUpdateCollection(linkUrl) {\r\n\t    vm.updateCollection({linkUrl: linkUrl})\r\n\t  }\r\n\r\n\t  scope.$watch(function getPager() {return vm.pager}, function updatedPager(pager) {\r\n\t    if (pager && !kanmiiUnderscore.isEmpty(pager)) {\r\n\t      setUpLinks(pager.next, pager.previous, pager.count)\r\n\t    }\r\n\t  })\r\n\r\n\t  function deselectAllBids() {\r\n\t    vm.bids.forEach(function(bid) {\r\n\t      bid.highlighted = false\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.modelRowClicked = modelRowClicked\r\n\t  function modelRowClicked(model) {\r\n\t    if (!model.downloaded) {\r\n\t      deselectAllBids()\r\n\r\n\t      //only highlight a row if no row is checked and the row model is not downloaded previously\r\n\t      model.highlighted = !kanmiiUnderscore.any(vm.bids, function(bid) {\r\n\t        return bid.checked\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  scope.$watch(function getSelectedBids() {return vm.selectedBids}, function updatedSelectedBids(selectedBids) {\r\n\t    vm.onSelectedBidsChanged({newSelections: selectedBids})\r\n\r\n\t    if (selectedBids && !kanmiiUnderscore.isEmpty(selectedBids)) {\r\n\r\n\t      kanmiiUnderscore.each(selectedBids, function(checked, id) {\r\n\r\n\t        for (var bidIndex = 0; bidIndex < vm.bids.length; bidIndex++) {\r\n\t          var bid = vm.bids[bidIndex]\r\n\t          if (bid.id === +id) {\r\n\t            bid.checked = checked\r\n\t          }\r\n\t        }\r\n\r\n\t      })\r\n\r\n\t      vm.toggleAll = kanmiiUnderscore.all(vm.bids, function(bid) {\r\n\t        return bid.checked === true\r\n\t      })\r\n\t    }\r\n\t  }, true)\r\n\r\n\t  vm.toggleAll = false\r\n\r\n\t  vm.toggleAllClicked = function toggleAllClicked() {\r\n\t    vm.bids.forEach(function(bid) {\r\n\t      vm.selectedBids[bid.id] = vm.toggleAll\r\n\t    })\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('add-bid-service', ['rootApp', 'kanmii-underscore', 'form-m-search-service'])\r\n\r\n\tapp.directive('addBid', addBidDirective)\r\n\taddBidDirective.$inject = ['ModalService']\r\n\tfunction addBidDirective(ModalService) {\r\n\t  function link(scope, elm, attributes, self) {\r\n\t    elm\r\n\t      .css({cursor: 'pointer'})\r\n\t      .bind('click', function() {\r\n\t              ModalService.showModal({\r\n\t                templateUrl: __webpack_require__(2).buildUrl('bid-request/add-bid/add-bid.html'),\r\n\r\n\t                controller: 'AddBidModalCtrl as addBidModal'\r\n\r\n\t              }).then(function(modal) {\r\n\t                modal.element.dialog({\r\n\t                  dialogClass: 'no-close',\r\n\t                  modal: true,\r\n\t                  minWidth: 600,\r\n\t                  maxHeight: 450,\r\n\t                  title: 'Make Bid Request'\r\n\t                })\r\n\r\n\t                modal.close.then(function(submittedData) {\r\n\t                  if (submittedData) {\r\n\t                    self.saveBid(submittedData)\r\n\t                  }\r\n\t                })\r\n\t              })\r\n\t            })\r\n\t  }\r\n\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    link: link,\r\n\t    controller: 'AddBidDirectiveCtrl as addBid',\r\n\t    scope: {},\r\n\t    bindToController: {\r\n\t      onNewBid: '&'\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('AddBidDirectiveCtrl', AddBidDirectiveCtrl)\r\n\tAddBidDirectiveCtrl.$inject = [\r\n\t  'xhrErrorDisplay', 'LcBidRequest'\r\n\t]\r\n\tfunction AddBidDirectiveCtrl(xhrErrorDisplay, LcBidRequest) {\r\n\t  var vm = this\r\n\r\n\t  vm.saveBid = saveBid\r\n\t  function saveBid(submittedData) {\r\n\t    var dataToSave = {\r\n\t      amount: submittedData.amount,\r\n\t      mf: submittedData.mf.url\r\n\t    }\r\n\r\n\t    new LcBidRequest(dataToSave).$save(bidSavedSuccess, bidSavedError)\r\n\r\n\t    function bidSavedSuccess(data) {\r\n\t      vm.onNewBid({newBid: data})\r\n\t    }\r\n\r\n\t    function bidSavedError(xhr) {\r\n\t      xhrErrorDisplay(xhr, {mf: 'form m', amount: 'amount'})\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('AddBidModalCtrl', AddBidModalCtrl)\r\n\tAddBidModalCtrl.$inject = [\r\n\t  'resetForm',\r\n\t  '$element',\r\n\t  'close',\r\n\t  'SearchFormMService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$state'\r\n\t]\r\n\tfunction AddBidModalCtrl(resetForm, element, close, SearchFormMService, kanmiiUnderscore, state) {\r\n\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.bid = {\r\n\t      mf: {}\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.mfGetterSetter = function mfGetterSetter(newVal) {\r\n\t    if (angular.isDefined(newVal)) vm.bid.mf = newVal\r\n\t    else if (!kanmiiUnderscore.isEmpty(vm.bid.mf)) return vm.bid.mf.number + ': ' + vm.bid.mf.applicant_data.name\r\n\t    else return ''\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t  }\r\n\r\n\t  vm.submitBid = submitBid\r\n\t  function submitBid(newBid) {\r\n\t    close(newBid)\r\n\t  }\r\n\r\n\t  vm.getFormM = function getFormM() {\r\n\t    function executeAfterDim() {\r\n\t      element.find('.form-control').each(function() {\r\n\t        var $el = $(this)\r\n\t        $el.prop('disabled', !$el.prop('disabled'))\r\n\t      })\r\n\t    }\r\n\r\n\t    SearchFormMService.searchWithModal({\r\n\t      parent: element,\r\n\t      dim: true,\r\n\t      dimCb: executeAfterDim,\r\n\t      unDimCb: executeAfterDim\r\n\t    }).then(function(data) {\r\n\t      var results = data.results\r\n\t      if (results.length) {\r\n\t        if (results.length === 1) vm.mfGetterSetter(results[0])\r\n\t        else {\r\n\t          close()\r\n\t          state.go('addBid', {formMsFromSearch: data})\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('form-m-bid', [\r\n\t  'ui.router',\r\n\t  'display-pending-bid',\r\n\t  'add-bid',\r\n\t  'form-m-search-service',\r\n\t  'lc-bid-request',\r\n\t  'rootApp',\r\n\t  'kanmii-URI',\r\n\t  'kanmii-underscore'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(bidURLConfig)\r\n\tbidURLConfig.$inject = ['$stateProvider']\r\n\tfunction bidURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('bid', {\r\n\t      url: '/bid',\r\n\r\n\t      params: {newBid: null},\r\n\r\n\t      kanmiiTitle: 'Bid Requests',\r\n\r\n\t      template: __webpack_require__(10),\r\n\r\n\t      controller: 'BidRequestController as bidHome'\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('BidRequestController', BidRequestController)\r\n\tBidRequestController.$inject = [\r\n\t  'LcBidRequest',\r\n\t  '$scope',\r\n\t  'SearchFormMService',\r\n\t  '$http',\r\n\t  '$stateParams',\r\n\t  'kanmiiUri',\r\n\t  'urls',\r\n\t  'kanmiiUnderscore',\r\n\t  'formatDate',\r\n\t  'xhrErrorDisplay',\r\n\t  '$timeout',\r\n\t  '$q'\r\n\t]\r\n\tfunction BidRequestController(LcBidRequest, scope, SearchFormMService, $http,\r\n\t  stateParams, kanmiiUri, urls, kanmiiUnderscore, formatDate, xhrErrorDisplay, $timeout, $q) {\r\n\t  var vm = this;\r\n\r\n\t  initialize()\r\n\t  function initialize() {\r\n\t    vm.newBid = null\r\n\r\n\t    /**\r\n\t     * When the search-form-m directive returns, the result is propagated into this model\r\n\t     * @type {null|object}\r\n\t     */\r\n\t    vm.searchedBidResult = null\r\n\r\n\t    vm.selectedBids = {}\r\n\r\n\t    vm.selectedDownloadedBids = {}\r\n\r\n\t    /**\r\n\t     * The bids retrieved from backend. Will contain a list of bids and pagination hooks for\r\n\t     * retrieving the next and previous sets of bids. This model is used by the display directive\r\n\t     * to display the bids in a table\r\n\t     * @type {object}\r\n\t     */\r\n\t    vm.bidRequests = []\r\n\t    vm.paginationHooks = {}\r\n\t    LcBidRequest.pending().$promise.then(function(data) {\r\n\t      updateBids(data)\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.searchFormMs = searchFormMs\r\n\t  function searchFormMs() {\r\n\t    SearchFormMService.searchWithModal().then(function(data) {\r\n\t      console.log(data);\r\n\t    })\r\n\t  }\r\n\r\n\t  /**\r\n\t   * The 'new bid' model. When we create a new bid via the create/add bid directive, the result is\r\n\t   * propagated from the creation directive into this model\r\n\t   * @type {null|object}\r\n\t   */\r\n\r\n\t  vm.receiveNewBid = receiveNewBid\r\n\t  function receiveNewBid(newBid) {\r\n\t    if (newBid) vm.bidRequests.unshift(newBid)\r\n\t  }\r\n\r\n\t  /**\r\n\t   * The table caption for the 'model-table' directive\r\n\t   * @type {string}\r\n\t   */\r\n\t  vm.tableCaption = 'Pending Bids'\r\n\r\n\t  vm.getBidsOnNavigation = getBidsOnNavigation\r\n\t  function getBidsOnNavigation(linkUrl) {\r\n\t    $http.get(linkUrl).then(function(response) {\r\n\t      updateBids(response.data)\r\n\t    })\r\n\t  }\r\n\r\n\t  scope.$watch(function searchedBidResult() {return vm.searchedBidResult},\r\n\t               function searchedBidResultChanged(searchedBidResult) {\r\n\t                 if (searchedBidResult) {\r\n\t                   updateBids(searchedBidResult)\r\n\t                 }\r\n\t               })\r\n\r\n\t  /**\r\n\t   * Update the bid collection and pagination hooks\r\n\t   * @param {object} data\r\n\t   */\r\n\t  function updateBids(data) {\r\n\r\n\t    var results = data.results\r\n\r\n\t    /**\r\n\t     * if we are initializing this state with a new bid (because we are coming to this state from 'the create new bid\r\n\t     * state'), then we first find out if the new bid is among those downloaded from the server. if it is one, we\r\n\t     * delete it from the collection (because angular will complain if there are duplicate collection elements) and\r\n\t     * we mark it as pre-selected so that background of the row displaying the new bid can be highlighted\r\n\t     */\r\n\t    if (stateParams.newBid) {\r\n\r\n\t      for (var bidIndex = 0; bidIndex < results.length; bidIndex++) {\r\n\r\n\t        if (results[bidIndex].id === stateParams.newBid.id) {\r\n\t          results.splice(bidIndex, 1)\r\n\t          break\r\n\t        }\r\n\t      }\r\n\r\n\t      stateParams.newBid.highlighted = true\r\n\t      results.unshift(stateParams.newBid)\r\n\t      stateParams.newBid = null\r\n\t    }\r\n\r\n\t    vm.bidRequests = results\r\n\r\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\r\n\t  }\r\n\r\n\t  var url = kanmiiUri(urls.lcBidRequestDownloadUrl)\r\n\t  vm.downloadUrl = function downloadUrl() {\r\n\t    if (!kanmiiUnderscore.isEmpty(vm.selectedBids)) {\r\n\t      var search = []\r\n\r\n\t      kanmiiUnderscore.each(vm.selectedBids, function(selection, bidId) {\r\n\t        if (selection === true) search.push(bidId)\r\n\t      })\r\n\r\n\t      return url.search({bid_ids: search}).toString()\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.downloadBtnDisabled = function downloadBtnDisabled() {\r\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedBids)) return true\r\n\r\n\t    return !kanmiiUnderscore.any(vm.selectedBids, function(selectionVal) {\r\n\t      return selectionVal === true\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.onSelectedBidsChanged = onSelectedBidsChanged\r\n\t  function onSelectedBidsChanged(newSelections) {\r\n\t    if (newSelections && !kanmiiUnderscore.isEmpty(newSelections)) {\r\n\t      kanmiiUnderscore.each(newSelections, function(checked, bidId) {\r\n\t        var bid = getBidFromId(bidId)\r\n\r\n\t        if (bid && bid.downloaded) vm.selectedDownloadedBids[bidId] = checked\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.markRequestedBtnDisabled = function markRequestedBtnDisabled() {\r\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedDownloadedBids)) return true\r\n\r\n\t    //return true if un-downloaded bid is checked\r\n\t    //return false if there is at least one downloaded bid checked\r\n\t    var anyNoneDownloadedChecked = kanmiiUnderscore.any(vm.selectedBids, function(checked, bidId) {\r\n\t      return !kanmiiUnderscore.has(vm.selectedDownloadedBids, bidId) && checked === true\r\n\t    })\r\n\r\n\t    if (anyNoneDownloadedChecked) return true\r\n\t    else return !kanmiiUnderscore.any(vm.selectedDownloadedBids, function(checked) {\r\n\t      return checked === true\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.markRequested = function markRequested() {\r\n\t    var editedBids = []\r\n\r\n\t    kanmiiUnderscore.each(vm.selectedDownloadedBids, function(checked, bidId) {\r\n\t      if (!checked) return\r\n\r\n\t      var bid = getBidFromId(bidId)\r\n\t      if (bid) {\r\n\t        bid.requested_at = formatDate(new Date())\r\n\t        //LcBidRequest.put(bid).$promise.then(bidEditSuccess, bidEditFailure)\r\n\t        editedBids.push(LcBidRequest.put(bid).$promise)\r\n\t      }\r\n\t    })\r\n\r\n\t    if (editedBids.length) {\r\n\t      $q.all(editedBids).then(function() {\r\n\t        initialize()\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.refreshPage = function refreshPage() {\r\n\t    $timeout(function() {initialize()}, 3000)\r\n\t  }\r\n\r\n\t  function getBidFromId(bidId) {\r\n\t    for (var index = 0; index < vm.bidRequests.length; index++) {\r\n\t      var bid = vm.bidRequests[index]\r\n\t      if (bid.id === +bidId) return bid\r\n\t    }\r\n\r\n\t    return null\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"action-buttons\\\" style=\\\"text-align: right;margin-bottom: 30px;\\\"><button type=\\\"button\\\" class=\\\"btn btn-info\\\" ng-click=\\\"$state.go('addBid')\\\">Add bid request</button> <button class=\\\"btn btn-info\\\" ng-click=\\\"bidHome.searchBids()\\\">Search Bid Requests</button> <a class=\\\"btn btn-success\\\" ng-href=\\\"{$bidHome.downloadUrl()$}\\\" ng-disabled=\\\"bidHome.downloadBtnDisabled()\\\" ng-click=\\\"bidHome.refreshPage()\\\">Download</a> <button type=\\\"button\\\" name=\\\"bid-home-mark-as-requested-btn\\\" class=\\\"btn btn-success\\\" ng-click=\\\"bidHome.markRequested()\\\" ng-disabled=\\\"bidHome.markRequestedBtnDisabled()\\\">Mark as requested</button></div><div display-pending-bid=\\\"\\\" pending-bids=\\\"bidHome.bidRequests\\\" pager-object=\\\"bidHome.paginationHooks\\\" update-collection=\\\"bidHome.getBidsOnNavigation(linkUrl)\\\" pagination-size=\\\"20\\\" selected-bids=\\\"bidHome.selectedBids\\\" on-selected-bids-changed=\\\"bidHome.onSelectedBidsChanged(newSelections)\\\"></div></div>\";\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('edit-bid', ['angularModalService'])\r\n\r\n\tapp.factory('EditBid', EditBid)\r\n\tEditBid.$inject = ['ModalService']\r\n\tfunction EditBid(ModalService) {\r\n\t  function EditBidService() {\r\n\t    var self = this\r\n\r\n\t    self.editWithModal = editWithModal\r\n\t    function editWithModal(config) {\r\n\t      config = (config && angular.isObject(config)) ? config : {}\r\n\t      var bid = config.bid\r\n\r\n\t      if (!bid) throw new Error('You did not specify the bid to edit')\r\n\r\n\t      var formM = config.formM\r\n\r\n\t      ModalService.showModal({\r\n\t        controller: 'EditBidModalCtrl as editBidModal',\r\n\t        template: __webpack_require__(12),\r\n\t        inputs: {\r\n\t          bid: bid,\r\n\t          formM: formM\r\n\t        }\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          minWidth: 450,\r\n\t          minHeight: 400,\r\n\t          modal: true,\r\n\t          title: config.title || 'Edit Bid for ' + bid.form_m_number,\r\n\t          close: function() {\r\n\t            modal.close.then()\r\n\t            config.closeCb ? config.closeCb(bid) : angular.noop\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(bidForEdit) {\r\n\t          if (bidForEdit) {\r\n\t            console.log('bidForEdit = ', bidForEdit);\r\n\t            config.closeCb ? config.closeCb() : angular.noop //jshint -W030\r\n\t          }\r\n\t        })\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  return new EditBidService()\r\n\t}\r\n\r\n\tapp.controller('EditBidModalCtrl', EditBidModalCtrl)\r\n\tEditBidModalCtrl.$inject = ['bid', 'formM', '$filter']\r\n\tfunction EditBidModalCtrl(bid, formM, filter) {\r\n\t  var vm = this\r\n\r\n\t  vm.resetForm = function resetForm(form) {\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\r\n\t    vm.formIsEditable = {\r\n\t      goods: false, amount: false, controls: false\r\n\t    }\r\n\t    vm.bid = angular.copy(bid)\r\n\t    vm.formM = angular.copy(formM)\r\n\t  }\r\n\t  vm.resetForm()\r\n\r\n\t  vm.bidAmountGetterSetter = function bidAmountGetterSetter(newVal) {\r\n\t    if (newVal) vm.bid.amount = Number(newVal.replace(',', ''))\r\n\t    else if (vm.bid.amount) return filter('number')(vm.bid.amount, 2)\r\n\t    else return ''\r\n\t  }\r\n\r\n\t  vm.toggleEnableEditForm = toggleEnableEditForm\r\n\t  function toggleEnableEditForm(inputName) {\r\n\t    vm.formIsEditable[inputName] = !vm.formIsEditable[inputName]\r\n\t    vm.formIsEditable.controls = vm.formIsEditable.amount || vm.formIsEditable.goods\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"bid-edit-modal\\\"><form role=\\\"form\\\" name=\\\"bidEditForm\\\"><div class=\\\"form-group bid-edit-form-m-number\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-form-m-number\\\">Form M Number</label> <input class=\\\"form-control\\\" ng-model=\\\"editBidModal.bid.form_m_number\\\" id=\\\"bid-edit-form-m-number\\\" disabled=\\\"\\\"></div><div class=\\\"form-group customer-name-group\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-customer-name\\\">Customer Name</label> <input class=\\\"form-control\\\" type=\\\"text\\\" id=\\\"bid-edit-customer-name\\\" ng-model=\\\"editBidModal.bid.applicant\\\" disabled=\\\"\\\"></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-form-m-amount\\\">Form M Amount</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\">{$editBidModal.formM.currency_data.code$}</span> <input class=\\\"form-control\\\" id=\\\"bid-edit-form-m-amount\\\" ng-model=\\\"editBidModal.formM.amount\\\" disabled=\\\"\\\" number-format=\\\"\\\"></div></div><div class=\\\"form-group goods-description-group\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-goods-description\\\">Goods Description</label><div class=\\\"input-group\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" id=\\\"bid-edit-goods-description\\\" ng-disabled=\\\"!editBidModal.formIsEditable.goods\\\" ng-model=\\\"editBidModal.bid.goods_description\\\"> <span class=\\\"input-group-addon\\\" style=\\\"cursor:pointer;\\\" ng-click=\\\"editBidModal.toggleEnableEditForm('goods')\\\"><span class=\\\"glyphicon glyphicon-pencil\\\"></span></span></div></div><div class=\\\"form-group bid-amount-group\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-bid-amount\\\">Bid Amount</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\">{$editBidModal.formM.currency_data.code$}</span> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"bid-edit-bid-amount\\\" required=\\\"\\\" ng-disabled=\\\"!editBidModal.formIsEditable.amount\\\" ng-model=\\\"editBidModal.bidAmountGetterSetter\\\" ng-model-options=\\\"{getterSetter: true, updateOn: 'blur'}\\\"> <span class=\\\"input-group-addon\\\" style=\\\"cursor:pointer;\\\" ng-click=\\\"editBidModal.toggleEnableEditForm('amount')\\\"><span class=\\\"glyphicon glyphicon-pencil\\\"></span></span></div></div><div class=\\\"edit-bid-form-control\\\" ng-show=\\\"editBidModal.formIsEditable.controls\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"bidEditForm.$invalid\\\">Edit</button> <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"editBidModal.resetForm(bidEditForm)\\\">Reset</button></div></form></div>\";\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\t__webpack_require__(14)\r\n\t__webpack_require__(15)\r\n\t__webpack_require__(16)\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('add-form-m', [\r\n\t  'ui.router',\r\n\t  'rootApp',\r\n\t  'kanmii-underscore',\r\n\t  'customer',\r\n\t  'search-detailed-or-uploaded-form-m',\r\n\t  'form-m-service',\r\n\t  'lc-cover',\r\n\t  'lc-issue',\r\n\t  'lc-bid',\r\n\t  'lc-bid-request'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(formMStateURLConfig)\r\n\r\n\tformMStateURLConfig.$inject = ['$stateProvider']\r\n\r\n\tfunction formMStateURLConfig($stateProvider) {\r\n\t  $stateProvider\r\n\t    .state('form_m.add', {\r\n\t      kanmiiTitle: 'Add form M',\r\n\r\n\t      params: {detailedFormM: null, showSummary: null},\r\n\r\n\t      views: {\r\n\t        addFormM: {\r\n\t          templateUrl: __webpack_require__(2).buildUrl('form-m/add-form-m/add-form-m.html'),\r\n\r\n\t          controller: 'AddFormMStateController as addFormMState'\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('AddFormMStateController', AddFormMStateController)\r\n\r\n\tAddFormMStateController.$inject = [\r\n\t  'getTypeAheadCustomer',\r\n\t  'getTypeAheadCurrency',\r\n\t  'SearchDetailedOrUploadedFormMService',\r\n\t  'kanmiiUnderscore',\r\n\t  'formatDate',\r\n\t  'xhrErrorDisplay',\r\n\t  'formMAttributesVerboseNames',\r\n\t  'FormM',\r\n\t  '$timeout',\r\n\t  '$filter',\r\n\t  '$stateParams',\r\n\t  'resetForm2',\r\n\t  '$state',\r\n\t  '$scope',\r\n\t  'LcBidRequest'\r\n\t]\r\n\r\n\tfunction AddFormMStateController(getTypeAheadCustomer, getTypeAheadCurrency, SearchDetailedOrUploadedFormMService,\r\n\t  kanmiiUnderscore, formatDate, xhrErrorDisplay, formMAttributesVerboseNames, FormM, $timeout, $filter, $stateParams,\r\n\t  resetForm2, $state, $scope, LcBidRequest) {\r\n\t  var vm = this\r\n\r\n\t  vm.detailedFormM = angular.copy($stateParams.detailedFormM)\r\n\t  $stateParams.detailedFormM = null\r\n\r\n\t  /*\r\n\t   *@param {angular.form} the HTML fieldSet element for form M cover\r\n\t   */\r\n\t  var coverForm\r\n\r\n\t  /*\r\n\t   *@param {angular.form} the HTML fieldSet element for form M issues\r\n\t   */\r\n\t  var issuesForm\r\n\r\n\t  initialize()\r\n\t  function initialize(form) {\r\n\t    if (vm.detailedFormM) initDetailedFormM()\r\n\t    else {\r\n\t      $scope.updateAddFormMTitle()\r\n\t      vm.formM = {\r\n\t        date_received: new Date()\r\n\t      }\r\n\r\n\t      vm.fieldsEdit = {\r\n\t        number: false,\r\n\t        currency: false,\r\n\t        applicant: false,\r\n\t        date_received: false,\r\n\t        amount: false\r\n\t      }\r\n\r\n\t      vm.closedIssues = []\r\n\t      vm.nonClosedIssues = []\r\n\t      vm.existingBids = []\r\n\t    }\r\n\r\n\t    vm.searchFormM = {}\r\n\t    initFormMSavingIndicator()\r\n\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\r\n\t    /*\r\n\t     *@param {angular.form.model} the form M cover model\r\n\t     */\r\n\t    vm.cover = null\r\n\r\n\t    /*\r\n\t     *@param {angular.form.model} bid model that we want to create for the form M\r\n\t     */\r\n\t    vm.bid = {}\r\n\r\n\t    /*\r\n\t     *@param {angular.form.model} the form M issues model\r\n\t     */\r\n\t    vm.issues = []\r\n\r\n\t    vm.nonClosedIssues = []\r\n\t  }\r\n\r\n\t  function initDetailedFormM() {\r\n\t    vm.formM = {\r\n\t      date_received: new Date(vm.detailedFormM.date_received),\r\n\t      number: vm.detailedFormM.number,\r\n\t      applicant: vm.detailedFormM.applicant_data,\r\n\t      currency: vm.detailedFormM.currency_data,\r\n\t      amount: Number(vm.detailedFormM.amount),\r\n\t      goods_description: vm.detailedFormM.goods_description,\r\n\t      form_m_issues: vm.detailedFormM.form_m_issues,\r\n\t      url: vm.detailedFormM.url,\r\n\t      covers: vm.detailedFormM.covers\r\n\t    }\r\n\r\n\t    $scope.updateAddFormMTitle(vm.formM)\r\n\r\n\t    LcBidRequest.getPaginated({mf: vm.formM.number}).$promise.then(function(data) {\r\n\t      if (data.count) {\r\n\t        var results = data.results\r\n\r\n\t        if (results.length) vm.existingBids = results\r\n\t      }\r\n\t    })\r\n\r\n\t    vm.fieldsEdit = {\r\n\t      number: true,\r\n\t      currency: true,\r\n\t      applicant: true,\r\n\t      date_received: true,\r\n\t      amount: true\r\n\t    }\r\n\r\n\t  }\r\n\r\n\t  function initFormMSavingIndicator() {\r\n\t    var summary = $stateParams.showSummary\r\n\t    $stateParams.showSummary = null\r\n\r\n\t    if (summary) {\r\n\t      vm.savingFormMIndicator = summary\r\n\t      vm.formMIsSaving = true\r\n\r\n\t      $timeout(function() {\r\n\t        vm.formMIsSaving = false\r\n\t      }, 120000)\r\n\t    }\r\n\r\n\t    else {\r\n\t      vm.savingFormMIndicator = 'Creating New Form M...........please wait'\r\n\t      vm.formMIsSaving = false\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.onCoverChanged = function onCoverChanged(cover, form) {\r\n\t    vm.cover = cover\r\n\t    coverForm = form\r\n\t  }\r\n\r\n\t  vm.onIssuesChanged = function onIssuesChanged(issues, form) {\r\n\t    vm.issues = issues\r\n\t    issuesForm = form\r\n\t  }\r\n\r\n\t  vm.onNonClosedIssuesChanged = function onNonClosedIssuesChanged(issues) {\r\n\t    vm.nonClosedIssues = issues\r\n\t  }\r\n\r\n\t  vm.enableFieldEdit = function enableFieldEdit(field) {\r\n\t    vm.fieldsEdit[field] = vm.detailedFormM ? !vm.fieldsEdit[field] : false\r\n\t  }\r\n\r\n\t  vm.validators = {\r\n\t    applicant: {\r\n\t      test: function() {\r\n\t        return kanmiiUnderscore.isObject(vm.formM.applicant)\r\n\t      }\r\n\t    },\r\n\r\n\t    currency: {\r\n\t      test: function() {\r\n\t        return kanmiiUnderscore.isObject(vm.formM.currency)\r\n\t      }\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.disableSubmitBtn = disableSubmitBtn\r\n\t  function disableSubmitBtn() {\r\n\t    if ($scope.newFormMForm.$invalid) return true\r\n\r\n\t    if (coverForm && coverForm.$invalid) return true\r\n\r\n\t    if ($scope.bidForm.$invalid) return true\r\n\r\n\t    if (issuesForm && issuesForm.$invalid) return true\r\n\r\n\t    var compared = compareDetailedFormMWithForm()\r\n\t    if (!compared) return false\r\n\r\n\t    if (kanmiiUnderscore.all(compared)) {\r\n\t      if (!kanmiiUnderscore.isEmpty(vm.bid)) return false\r\n\t      if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) return false\r\n\t      return !vm.issues.length\r\n\t    }\r\n\r\n\t    return false\r\n\t  }\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(addFormMForm) {\r\n\t    vm.detailedFormM = null\r\n\r\n\t    resetForm2(addFormMForm, [\r\n\t      {\r\n\t        form: $scope.newFormMForm, elements: ['applicant', 'currency']\r\n\t      }\r\n\t    ])\r\n\r\n\t    initialize()\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\t  vm.getCurrency = getTypeAheadCurrency\r\n\r\n\t  vm.datePickerFormat = 'dd-MMM-yyyy'\r\n\t  vm.datePickerIsOpen = false\r\n\t  vm.openDatePicker = function openDatePicker() {\r\n\t    vm.datePickerIsOpen = true\r\n\t  }\r\n\r\n\t  vm.getUploadedFormM = function getUploadedFormM() {\r\n\t    vm.detailedFormM = null\r\n\t    initialize()\r\n\r\n\t    SearchDetailedOrUploadedFormMService.searchWithModal().then(function(data) {\r\n\t      if (data.detailed) {\r\n\t        vm.detailedFormM = data.detailed\r\n\t        initDetailedFormM()\r\n\r\n\t      } else {\r\n\t        var formM = data.uploaded\r\n\t        vm.searchFormM = formM\r\n\t        vm.formM.number = formM.mf\r\n\r\n\t        getTypeAheadCurrency(formM.ccy).then(function(ccy) {\r\n\t          vm.formM.currency = ccy[0]\r\n\t        })\r\n\t      }\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.submit = function submit(formM) {\r\n\t    var formMToSave = angular.copy(formM)\r\n\r\n\t    formMToSave.applicant = formMToSave.applicant.url\r\n\t    formMToSave.currency = formMToSave.currency.url\r\n\t    formMToSave.date_received = formatDate(formMToSave.date_received)\r\n\r\n\t    if (!kanmiiUnderscore.isEmpty(vm.bid)) {\r\n\t      formMToSave.goods_description = vm.bid.goods_description\r\n\t      formMToSave.bid = {amount: vm.bid.amount}\r\n\t    }\r\n\r\n\t    if (vm.issues.length) formMToSave.issues = vm.issues\r\n\r\n\t    if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) {\r\n\t      formMToSave.cover = {\r\n\t        amount: vm.cover.amount,\r\n\t        cover_type: vm.cover.cover_type[0]\r\n\t      }\r\n\t    }\r\n\r\n\t    if (!vm.detailedFormM) new FormM(formMToSave).$save(formMSavedSuccess, formMSavedError)\r\n\r\n\t    else {\r\n\t      if (kanmiiUnderscore.all(compareDetailedFormMWithForm())) {\r\n\t        formMToSave.do_not_update = 'do_not_update'\r\n\t        formMToSave.applicant_data = vm.formM.applicant\r\n\t        formMToSave.currency_data = vm.formM.currency\r\n\t      }\r\n\t      formMToSave.id = vm.detailedFormM.id\r\n\t      new FormM(formMToSave).$put(formMSavedSuccess, formMSavedError)\r\n\t    }\r\n\r\n\t    function formMSavedSuccess(data) {\r\n\t      var summary = showFormMMessage() + showIssuesMessage()\r\n\r\n\t      if (data.bid) {\r\n\t        summary += '\\n\\nBid Amount     : ' + data.currency_data.code + ' ' + $filter('number')(data.bid.amount, 2)\r\n\t      }\r\n\r\n\t      if (data.cover) data.covers.push(data.cover)\r\n\r\n\t      $state.go('form_m.add', {detailedFormM: data, showSummary: summary})\r\n\t    }\r\n\r\n\t    function formMSavedError(xhr) {\r\n\t      initFormMSavingIndicator()\r\n\t      xhrErrorDisplay(xhr, formMAttributesVerboseNames)\r\n\t    }\r\n\t  }\r\n\r\n\t  $scope.showFormMMessage = showFormMMessage\r\n\t  function showFormMMessage() {\r\n\t    var number = $filter('number')(vm.formM.amount, 2)\r\n\t    var header = vm.formM.applicant.name + ' - ' + vm.formM.number + ' - ' + vm.formM.currency.code + ' ' + number\r\n\t    return header + '\\n\\nForm M Number : ' + vm.formM.number + '\\n' +\r\n\t           'Value         : ' + vm.formM.currency.code + ' ' +\r\n\t           number + '\\n' +\r\n\t           'Applicant     : ' + vm.formM.applicant.name\r\n\t  }\r\n\r\n\t  $scope.showIssuesMessage = showIssuesMessage\r\n\t  function showIssuesMessage() {\r\n\t    if (!vm.nonClosedIssues.length) return ''\r\n\r\n\t    var issuesText = '\\n\\n\\nPlease note the following issues which must be \\n' +\r\n\t                     'regularized before the LC ' +\r\n\t                     'request can be treated:\\n'\r\n\t    var index = 1\r\n\r\n\t    kanmiiUnderscore.each(vm.nonClosedIssues, function(issue) {\r\n\t      issuesText += ('(' + index++ + ') ' + vm.formatIssueText(issue.issue.text) + '\\n')\r\n\t    })\r\n\r\n\t    return issuesText\r\n\t  }\r\n\r\n\t  vm.formatIssueText = function(text) {\r\n\t    return text.replace(/:ISSUE$/i, '')\r\n\t  }\r\n\r\n\t  function compareDetailedFormMWithForm() {\r\n\t    if (!vm.detailedFormM) return false\r\n\r\n\t    return {\r\n\t      number: vm.formM.number && angular.equals(vm.formM.number, vm.detailedFormM.number),\r\n\r\n\t      date_received: angular.equals(vm.formM.date_received, new Date(vm.detailedFormM.date_received)),\r\n\r\n\t      amount: vm.formM.amount && angular.equals(vm.formM.amount, Number(vm.detailedFormM.amount)),\r\n\r\n\t      currency: vm.formM.currency && (vm.formM.currency.code === vm.detailedFormM.currency_data.code),\r\n\r\n\t      applicant: vm.formM.applicant && (vm.formM.applicant.name === vm.detailedFormM.applicant_data.name)\r\n\t    }\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('lc-bid', [\r\n\t  'rootApp'\r\n\t])\r\n\r\n\tapp.directive('lcBid', lcBidDirective)\r\n\r\n\tlcBidDirective.$inject = []\r\n\r\n\tfunction lcBidDirective() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    templateUrl: __webpack_require__(2).buildUrl('form-m/add-form-m/lc-bid/lc-bid.html'),\r\n\t    scope: false,\r\n\t    bindToController: {\r\n\t      bid: '='\r\n\t    },\r\n\t    controller: 'LcBidDirectiveController as lcBid'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('LcBidDirectiveController', LcBidDirectiveController)\r\n\r\n\tLcBidDirectiveController.$inject = ['$scope', '$filter', 'formFieldIsValid']\r\n\r\n\tfunction LcBidDirectiveController($scope, $filter, formFieldIsValid) {\r\n\t  var vm = this\r\n\t  var title = 'Make Bid Request'\r\n\t  init()\r\n\r\n\t  function init(form) {\r\n\t    vm.title = title\r\n\t    vm.show = false\r\n\t    $scope.addFormMState.bid = {}\r\n\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.isValid = function(name, validity) {\r\n\t    return formFieldIsValid($scope, 'bidForm', name, validity)\r\n\t  }\r\n\r\n\t  vm.amountGetterSetter = function(val) {\r\n\t    if (arguments.length) {\r\n\t      if (!/[\\d,\\.]+/.test(val)) $scope.addFormMState.bid.amount = null\r\n\t      else $scope.addFormMState.bid.amount = Number(val.replace(/,/g, ''))\r\n\r\n\t    } else return $scope.addFormMState.bid.amount ? $filter('number')($scope.addFormMState.bid.amount, 2) : undefined\r\n\t  }\r\n\r\n\t  vm.toggleShow = function toggleShow(form) {\r\n\t    vm.show = $scope.addFormMState.formM.amount && $scope.addFormMState.formM.number && !vm.show\r\n\r\n\t    if (!vm.show) {\r\n\t      init(form)\r\n\t    }\r\n\t    else {\r\n\t      vm.title = 'Dismiss'\r\n\t      $scope.addFormMState.bid.amount = $scope.addFormMState.formM.amount\r\n\t      $scope.addFormMState.bid.goods_description = $scope.addFormMState.formM.goods_description\r\n\t    }\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('lc-issue', [\r\n\t  'rootApp',\r\n\t  'lc-issue-service'\r\n\t])\r\n\r\n\tapp.directive('lcIssue', lcIssueDirective)\r\n\r\n\tlcIssueDirective.$inject = []\r\n\r\n\tfunction lcIssueDirective() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    templateUrl: __webpack_require__(2).buildUrl('form-m/add-form-m/lc-issue/lc-issue.html'),\r\n\t    scope: true,\r\n\t    bindToController: {\r\n\t      formM: '=mfContext',\r\n\t      issues: '=',\r\n\t      onIssuesChanged: '&',\r\n\t      onNonClosedIssuesChanged: '&'\r\n\t    },\r\n\t    controller: 'LcIssueDirectiveController as lcIssue'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('LcIssueDirectiveController', LcIssueDirectiveController)\r\n\r\n\tLcIssueDirectiveController.$inject = [\r\n\t  '$scope',\r\n\t  'LCIssueConcrete',\r\n\t  'getTypeAheadLCIssue',\r\n\t  'formatDate',\r\n\t  'xhrErrorDisplay',\r\n\t  'resetForm2',\r\n\t  'clearFormField',\r\n\t  '$window'\r\n\t]\r\n\r\n\tfunction LcIssueDirectiveController($scope, LCIssueConcrete, getTypeAheadLCIssue, formatDate, xhrErrorDisplay,\r\n\t  resetForm2, clearFormField, $window) {\r\n\t  var vm = this\r\n\t  var title = 'Add Letter Of Credit Issues'\r\n\r\n\t  initExistingIssues()\r\n\t  function initExistingIssues() {\r\n\t    vm.closedIssues = []\r\n\t    vm.nonClosedIssues = []\r\n\t  }\r\n\r\n\t  initContainerVars()\r\n\t  function initContainerVars(form) {\r\n\t    vm.title = title\r\n\t    vm.showContainer = false\r\n\r\n\t    vm.issues = []\r\n\t    vm.issue = null\r\n\r\n\t    if (form) resetForm2(form, [\r\n\t      {form: form, elements: ['issue']}\r\n\t    ])\r\n\t  }\r\n\r\n\t  vm.closeIssue = function closeIssue(issue, $index) {\r\n\t    if ($window.confirm(\r\n\t        'Sure you want to close issue:\\n\"' +\r\n\t        $scope.addFormMState.formatIssueText(issue.issue.text) + '\"?')\r\n\t    ) {\r\n\t      var closedAt = formatDate(new Date())\r\n\r\n\t      LCIssueConcrete.put({\r\n\t        id: issue.id,\r\n\t        mf: vm.formM.url,\r\n\t        issue: issue.issue.url,\r\n\t        closed_at: closedAt\r\n\t      }).$promise.then(issueClosedSuccess, issueClosedError)\r\n\t    }\r\n\r\n\t    function issueClosedSuccess() {\r\n\t      vm.nonClosedIssues.splice($index, 1)\r\n\t      issue.closed_at = closedAt\r\n\t      vm.closedIssues.push(issue)\r\n\t    }\r\n\r\n\t    function issueClosedError(xhr) {xhrErrorDisplay(xhr)}\r\n\t  }\r\n\r\n\t  vm.issueSelected = function issueSelected($item, $model) {\r\n\t    vm.issues.push($model)\r\n\t    vm.issue = null\r\n\t    clearFormField($scope.issuesForm, 'issue')\r\n\t  }\r\n\r\n\t  vm.deleteIssue = function deleteIssue(index) {\r\n\t    vm.issues.splice(index, 1)\r\n\t  }\r\n\r\n\t  vm.getIssue = function getIssue(text) {\r\n\t    var _ids = []\r\n\r\n\t    vm.issues.forEach(function(issue) {\r\n\t      _ids.push(issue.id)\r\n\t    })\r\n\r\n\t    var x = []\r\n\r\n\t    x.concat(vm.nonClosedIssues).concat(vm.closedIssues).forEach(function(issue) {\r\n\t      _ids.push(issue.issue.id)\r\n\t    })\r\n\r\n\t    return getTypeAheadLCIssue({text: text, exclude_issue_ids: _ids.join(',')})\r\n\t  }\r\n\r\n\t  vm.downloadIssues = function downloadIssues() {\r\n\t    $scope.addFormMState.savingFormMIndicator = $scope.showFormMMessage() + $scope.showIssuesMessage()\r\n\r\n\t    $scope.addFormMState.formMIsSaving = true\r\n\t  }\r\n\r\n\t  vm.toggleShow = function toggleShow(form) {\r\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\r\n\r\n\t    if (!vm.showContainer) initContainerVars(form)\r\n\t    else vm.title = 'Dismiss'\r\n\t  }\r\n\r\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\r\n\t    if (newFormM) {\r\n\t      var formMIssues = newFormM.form_m_issues\r\n\t      if (formMIssues && formMIssues.length !== (vm.closedIssues.length + vm.nonClosedIssues.length)) {\r\n\t        formMIssues.forEach(function(issue) {\r\n\t          if (!issue.closed_at) {\r\n\t            vm.nonClosedIssues.push(issue)\r\n\t            return true\r\n\t          }\r\n\t          else {\r\n\t            vm.closedIssues.push(issue)\r\n\t            return false\r\n\t          }\r\n\t        })\r\n\t      }\r\n\r\n\t      if (!newFormM.number || !newFormM.amount) {\r\n\t        initExistingIssues()\r\n\t        initContainerVars()\r\n\t      }\r\n\t    }\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getIssues() {return vm.issues}, function onUpdateIssues(newIssues) {\r\n\t    $scope.issuesForm.issue.$validate()\r\n\t    if (newIssues) vm.onIssuesChanged({issues: newIssues, issuesForm: $scope.issuesForm})\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getNonClosedIssues() {return vm.nonClosedIssues}, function onUpdateNonClosedIssues(newIssues) {\r\n\t    if (newIssues) vm.onNonClosedIssuesChanged({issues: newIssues})\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getShowContainer() {return vm.showContainer}, function onUpdateShowContainer() {\r\n\t    $scope.issuesForm.issue.$validate()\r\n\t  })\r\n\t}\r\n\r\n\tapp.directive('validateIssues', function validateIssues() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    require: 'ngModel',\r\n\t    link: function($scope, elm, atts, ctrl) {\r\n\t      var vm = $scope.lcIssue\r\n\t      ctrl.$validators.issues = function() {\r\n\t        return !vm.showContainer || Boolean(vm.issues.length)\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t})\r\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('lc-cover', [\r\n\t  'rootApp'\r\n\t])\r\n\r\n\tapp.directive('lcCover', lcIssueDirective)\r\n\r\n\tlcIssueDirective.$inject = []\r\n\r\n\tfunction lcIssueDirective() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    templateUrl: __webpack_require__(2).buildUrl('form-m/add-form-m/lc-cover/lc-cover.html'),\r\n\t    scope: true,\r\n\t    bindToController: {\r\n\t      formM: '=mfContext',\r\n\t      cover: '=',\r\n\t      onCoverChanged: '&'\r\n\t    },\r\n\t    controller: 'LcCoverDirectiveController as lcCover'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('LcCoverDirectiveController', LcCoverDirectiveController)\r\n\r\n\tLcCoverDirectiveController.$inject = [\r\n\t  '$scope',\r\n\t  'formMCoverTypes',\r\n\t  '$filter',\r\n\t  'formFieldIsValid'\r\n\t]\r\n\r\n\tfunction LcCoverDirectiveController($scope, formMCoverTypes, $filter, formFieldIsValid) {\r\n\t  var vm = this\r\n\t  var title = 'Register Cover'\r\n\t  init()\r\n\r\n\t  function init(form) {\r\n\t    vm.title = title\r\n\t    vm.showContainer = false\r\n\t    vm.cover = {}\r\n\t    vm.coverTypes = null\r\n\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.isValid = function isValid(name, validity) {\r\n\t    return formFieldIsValid($scope, 'coverForm', name, validity)\r\n\t  }\r\n\r\n\t  vm.amountGetterSetter = function(val) {\r\n\t    if (arguments.length) {\r\n\t      if (!/[\\d,\\.]+/.test(val)) vm.cover.amount = null\r\n\t      else vm.cover.amount = Number(val.replace(/,/g, ''))\r\n\t    } else return vm.cover.amount ? $filter('number')(vm.cover.amount, 2) : undefined\r\n\t  }\r\n\r\n\t  vm.toggleShow = function toggleShow(form) {\r\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\r\n\r\n\t    if (!vm.showContainer) {\r\n\t      init(form)\r\n\t    }\r\n\t    else {\r\n\t      vm.title = 'Dismiss'\r\n\t      vm.coverTypes = formMCoverTypes\r\n\t      vm.cover.amount = vm.formM.amount\r\n\t    }\r\n\t  }\r\n\r\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\r\n\t    if (newFormM) {\r\n\t      if (! newFormM.number || !newFormM.amount) init()\r\n\t    }\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getCover() {return vm.cover}, function(newCover) {\r\n\t    vm.onCoverChanged({\r\n\t      cover: newCover, coverForm: $scope.coverForm\r\n\t    })\r\n\r\n\t  }, true)\r\n\t}\r\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('search-detailed-or-uploaded-form-m', [\r\n\t  'kanmii-underscore',\r\n\t  'upload-form-m-service',\r\n\t  'toggle-dim-element',\r\n\t  'form-m-service'\r\n\t])\r\n\r\n\tapp.factory('SearchDetailedOrUploadedFormMService', SearchDetailedOrUploadedFormMService)\r\n\tSearchDetailedOrUploadedFormMService.$inject = [\r\n\t  'UploadFormM',\r\n\t  'xhrErrorDisplay',\r\n\t  'ModalService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$q',\r\n\t  'FormM'\r\n\t]\r\n\tfunction SearchDetailedOrUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, FormM) {\r\n\r\n\t  function searchFormM(submittedSearchParams) {\r\n\t    var deferred = $q.defer()\r\n\t    var mf = submittedSearchParams.mf\r\n\r\n\t    FormM.getPaginated({number: mf}).$promise.then(function(data) {\r\n\t      if (data.count === 1) {\r\n\t        deferred.resolve({detailed: data.results[0]})\r\n\r\n\t      } else UploadFormM.query({mf: mf}).$promise.then(searchFormMSuccess, searchFormMError)\r\n\r\n\t    }, searchFormMError)\r\n\r\n\t    function searchFormMSuccess(data) {\r\n\t      if (data.length === 1) deferred.resolve({uploaded: data[0]})\r\n\t    }\r\n\r\n\t    function searchFormMError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t      deferred.reject(xhr)\r\n\t    }\r\n\r\n\t    return deferred.promise\r\n\t  }\r\n\r\n\t  function SearchService() {\r\n\t    var service = this\r\n\r\n\t    service.searchWithModal = searchWithModal\r\n\t    function searchWithModal() {\r\n\t      var deferred = $q.defer()\r\n\r\n\t      ModalService.showModal({\r\n\t        templateUrl: __webpack_require__(2).buildUrl(\r\n\t          'form-m/search-detailed-or-uploaded-form-m/search-detailed-or-uploaded-form-m-modal.html'),\r\n\r\n\t        controller: 'SearchDetailedOrUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          dialogClass: 'no-close',\r\n\t          modal: true,\r\n\t          minWidth: 500,\r\n\t          minHeight: 200,\r\n\t          title: 'Search Form M',\r\n\r\n\t          close: function() {\r\n\t            modal.close.then()\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(submittedSearchParams) {\r\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t            deferred.resolve(searchFormM(submittedSearchParams))\r\n\t          }\r\n\t        })\r\n\t      })\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new SearchService()\r\n\t}\r\n\r\n\tapp.controller('SearchDetailedOrUploadedFormMServiceModalCtrl', SearchDetailedOrUploadedFormMServiceModalCtrl)\r\n\tSearchDetailedOrUploadedFormMServiceModalCtrl.$inject = [\r\n\t  'close',\r\n\t  'resetForm',\r\n\t  '$element'\r\n\t]\r\n\tfunction SearchDetailedOrUploadedFormMServiceModalCtrl(close, resetForm, element) {\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('form-m-search-service', ['kanmii-underscore', 'toggle-dim-element'])\r\n\r\n\tapp.factory('SearchFormMService', SearchFormMService)\r\n\tSearchFormMService.$inject = [\r\n\t  'FormM',\r\n\t  'xhrErrorDisplay',\r\n\t  'ModalService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$q',\r\n\t  'ToggleDimElement'\r\n\t]\r\n\tfunction SearchFormMService(FormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement) {\r\n\r\n\t  function searchFormM(submittedSearchParams) {\r\n\t    var deferred = $q.defer()\r\n\t    var searchParams = angular.copy(submittedSearchParams)\r\n\r\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\r\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\r\n\r\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\r\n\r\n\t    function searchFormMSuccess(data) {\r\n\t      deferred.resolve(data)\r\n\t    }\r\n\r\n\t    function searchFormMError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t      deferred.reject(xhr)\r\n\t    }\r\n\r\n\t    return deferred.promise\r\n\t  }\r\n\r\n\t  function SearchService() {\r\n\t    var service = this\r\n\r\n\t    service.searchWithModal = searchWithModal\r\n\t    function searchWithModal(config) {\r\n\t      var deferred = $q.defer()\r\n\t      config = config || {}\r\n\r\n\t      ModalService.showModal({\r\n\t        templateUrl: __webpack_require__(2).buildUrl('form-m/search-form-m-service/search-form-m-modal.html'),\r\n\t        controller: 'SearchFormMServiceModalCtrl as searchFormMModal',\r\n\t        inputs: {\r\n\t          uiOptions: config.uiOptions\r\n\t        }\r\n\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          dialogClass: 'no-close',\r\n\t          modal: true,\r\n\t          minWidth: 600,\r\n\t          minHeight: 450,\r\n\t          title: 'Search Form M',\r\n\r\n\t          open: function() {\r\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb) //jshint -W030\r\n\t          },\r\n\r\n\t          close: function() {\r\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(submittedSearchParams) {\r\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t            deferred.resolve(searchFormM(submittedSearchParams))\r\n\t          }\r\n\r\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\r\n\t        })\r\n\t      })\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new SearchService()\r\n\t}\r\n\r\n\tapp.controller('SearchFormMServiceModalCtrl', SearchFormMServiceModalCtrl)\r\n\tSearchFormMServiceModalCtrl.$inject = [\r\n\t  'uiOptions',\r\n\t  'close',\r\n\t  'resetForm',\r\n\t  '$element',\r\n\t  'getTypeAheadCustomer',\r\n\t  'getTypeAheadCurrency'\r\n\t]\r\n\tfunction SearchFormMServiceModalCtrl(uiOptions, close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\r\n\t  var vm = this\r\n\r\n\t  vm.displayLcIssueUI = false\r\n\r\n\t  if (uiOptions) {\r\n\t    vm.displayLcIssueUI = uiOptions.displayLcIssueUI\r\n\t  }\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t    vm.showLcIssueContainer = false\r\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\r\n\t    vm.selectedLcIssues = {}\r\n\t  }\r\n\r\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\r\n\t  function toggleShowLcIssueContainer() {\r\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\r\n\r\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\r\n\t  vm.submitSearchParams = submitSearchParams\r\n\t  function submitSearchParams(searchParams) {\r\n\t    close(searchParams)\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\t  vm.getCurrency = getTypeAheadCurrency\r\n\t}\r\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('form-m-search', ['kanmii-underscore'])\r\n\r\n\tapp.directive('searchFormM', searchFormMDirective)\r\n\tsearchFormMDirective.$inject = ['ModalService', 'kanmiiUnderscore']\r\n\tfunction searchFormMDirective(ModalService, kanmiiUnderscore) {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\r\n\t    link: function(scope, elm, attributes, self) {\r\n\t      elm\r\n\t        .css({cursor: 'pointer'})\r\n\t        .bind('click', function() {\r\n\t                ModalService.showModal({\r\n\t                  template: __webpack_require__(20),\r\n\r\n\t                  controller: 'SearchFormMModalCtrl as searchFormMModal'\r\n\r\n\t                }).then(function(modal) {\r\n\t                  modal.element.dialog({\r\n\t                    dialogClass: 'no-close',\r\n\t                    modal: true,\r\n\t                    minWidth: 600,\r\n\t                    minHeight: 450,\r\n\t                    title: 'Search Form M'\r\n\t                  })\r\n\r\n\t                  modal.close.then(function(submittedSearchParams) {\r\n\t                    if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t                      self.searchFormM(submittedSearchParams)\r\n\t                    }\r\n\t                  })\r\n\t                })\r\n\t              })\r\n\t    },\r\n\r\n\t    controller: 'SearchFormMDirectiveCtrl as searchFormM',\r\n\r\n\t    scope: {},\r\n\r\n\t    bindToController: {\r\n\t      searchFormMResult: '='\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('SearchFormMDirectiveCtrl', SearchFormMDirectiveCtrl)\r\n\tSearchFormMDirectiveCtrl.$inject = ['FormM', 'xhrErrorDisplay']\r\n\tfunction SearchFormMDirectiveCtrl(FormM, xhrErrorDisplay) {\r\n\t  var vm = this\r\n\r\n\t  vm.searchFormM = searchFormM\r\n\t  function searchFormM(submittedSearchParams) {\r\n\t    var searchParams = angular.copy(submittedSearchParams)\r\n\r\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\r\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\r\n\r\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\r\n\r\n\t    function searchFormMSuccess(data) {\r\n\t      vm.searchFormMResult = data\r\n\t    }\r\n\r\n\t    function searchFormMError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('SearchFormMModalCtrl', SearchFormMModalCtrl)\r\n\tSearchFormMModalCtrl.$inject = ['close', 'resetForm', '$element', 'getTypeAheadCustomer', 'getTypeAheadCurrency']\r\n\tfunction SearchFormMModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t    vm.showLcIssueContainer = false\r\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\r\n\t    vm.selectedLcIssues = {}\r\n\t  }\r\n\r\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\r\n\t  function toggleShowLcIssueContainer() {\r\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\r\n\r\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\r\n\t  vm.submitSearchParams = submitSearchParams\r\n\t  function submitSearchParams(searchParams) {\r\n\t    close(searchParams)\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\t  vm.getCurrency = getTypeAheadCurrency\r\n\t}\r\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=\\\"search-form-m-root-container\\\" class=\\\"search-form-m-root-container\\\"><form novalidate=\\\"\\\" class=\\\"form-horizontal\\\" ng-submit=\\\"searchFormMModal.submitSearchParams(searchFormMModal.searchParams)\\\" name=\\\"searchFormMModalForm\\\"><fieldset class=\\\"search-form-m-container\\\" style=\\\"position: relative; padding: 7px;\\\"><div class=\\\"form-group form-m-number-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"form-m-number\\\">Form M Number</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" maxlength=\\\"13\\\" id=\\\"form-m-number\\\" min=\\\"0\\\" ng-pattern=\\\"/(?:mf)?\\\\d{4,11}/i\\\" ng-model=\\\"searchFormMModal.searchParams.number\\\"></div></div><div class=\\\"form-group applicant-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"applicant\\\">Applicant</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" min=\\\"3\\\" id=\\\"applicant\\\" ng-model=\\\"searchFormMModal.searchParams.applicant\\\" typeahead-min-length=\\\"3\\\" uib-typeahead=\\\"applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)\\\"></div></div><div class=\\\"form-group currency-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"currency\\\">Currency</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"currency\\\" maxlength=\\\"3\\\" ng-model=\\\"searchFormMModal.searchParams.currency\\\" uib-typeahead=\\\"currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)\\\" typeahead-min-length=\\\"2\\\"></div></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"amount\\\">Amount</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"amount\\\" min=\\\"0\\\" ng-model=\\\"searchFormMModal.searchParams.amount\\\" number-format=\\\"\\\" ng-pattern=\\\"/^\\\\d[\\\\d,]*(?:\\\\.\\\\d*)?$/\\\"></div></div></fieldset><div class=\\\"form-m-lc-issue-container\\\"><span ng-click=\\\"searchFormMModal.toggleShowLcIssueContainer()\\\" class=\\\"form-m-lc-issue-toggle-show\\\"><span ng-class=\\\"['glyphicon', {'glyphicon-chevron-down': !searchFormMModal.showLcIssueContainer, 'glyphicon-chevron-up': searchFormMModal.showLcIssueContainer}]\\\"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class=\\\"form-m-search-lc-issue\\\" ng-show=\\\"searchFormMModal.showLcIssueContainer\\\"><lc-issue lc-issue-show=\\\"searchFormMModal.showLcIssueContainer\\\" lc-issues-selected=\\\"searchFormMModal.selectedLcIssues\\\"></lc-issue></div></div><div class=\\\"row search-form-m-form-control\\\"><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: left\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.reset(searchFormMModalForm)\\\">Reset</span></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"searchFormMModalForm.$invalid\\\">Search Form M</button></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: right\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.close()\\\">Close</span></div></div></form></div>\";\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('upload-form-m',\r\n\t  ['rootApp',\r\n\t   'ui.router',\r\n\t   'upload-form-m-service'\r\n\t  ])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(uploadFormMURLConfig)\r\n\tuploadFormMURLConfig.$inject = ['$stateProvider']\r\n\tfunction uploadFormMURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('form_m.upload', {\r\n\t      kanmiiTitle: 'Form M Upload',\r\n\r\n\t      views: {\r\n\t        'uploadFormM': {\r\n\t          template: __webpack_require__(22),\r\n\r\n\t          controller: 'UploadFormMController as uploadFormM'\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('UploadFormMController', UploadFormMController)\r\n\r\n\tUploadFormMController.$inject = ['UploadFormM', '$timeout']\r\n\r\n\tfunction UploadFormMController(UploadFormM, $timeout) {\r\n\t  var vm = this\r\n\r\n\t  initial()\r\n\t  function initial() {\r\n\t    vm.formMIsUploading = false\r\n\t    vm.uploadIndicationText = 'Uploading Form Ms.........please wait'\r\n\t    vm.uploadFormMText = ''\r\n\t  }\r\n\r\n\t  vm.uploadFormM = function uploadFormM(text) {\r\n\t    vm.formMIsUploading = true\r\n\r\n\t    var uploaded = [],\r\n\t      row\r\n\r\n\t    function parseDate(dt) {\r\n\t      return '20' + dt.slice(6) + '-' + dt.slice(3, 5) + '-' + dt.slice(0, 2)\r\n\t    }\r\n\r\n\t    Papa.parse(text, {\r\n\t      delimiter: '\\t',\r\n\t      header: false,\r\n\t      step: function(data) {\r\n\t        row = data.data[0]\r\n\r\n\t        uploaded.push({\r\n\t          ba: row[0],\r\n\t          mf: row[1],\r\n\t          ccy: row[2],\r\n\t          applicant: row[3],\r\n\t          fob: row[5].replace(/,/g, ''),\r\n\t          submitted_at: parseDate(row[6]),\r\n\t          validated_at: parseDate(row[7])\r\n\t        })\r\n\t      }\r\n\t    })\r\n\r\n\t    UploadFormM.save({\r\n\t      uploaded: uploaded,\r\n\t      likely_duplicates: true\r\n\t    })\r\n\t      .$promise\r\n\t      .then(formMCreatedSuccess, formMCreatedError)\r\n\r\n\t    function formMCreatedSuccess(data) {\r\n\t      var creationResult = data.created_data,\r\n\t        numCreatedNow = creationResult.length,\r\n\t        numCreatedPreviously = uploaded.length - numCreatedNow\r\n\r\n\t      vm.uploadIndicationText = 'Done Upload form Ms\\n' +\r\n\t                                '=========================\\n' +\r\n\t                                'Total new form Ms created: ' + numCreatedNow + '\\n'\r\n\t      if (numCreatedPreviously) {\r\n\t        vm.uploadIndicationText += ('Total not created (because uploaded previously): ' + numCreatedPreviously)\r\n\t      }\r\n\r\n\t      $timeout(function() {\r\n\t        initial()\r\n\t      }, 4500)\r\n\t    }\r\n\r\n\t    function formMCreatedError(xhr) {\r\n\t      console.log(xhr);\r\n\t    }\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"upload-form-m-tab-content\\\"><form class=\\\"upload-form-m-form\\\" role=\\\"form\\\" name=\\\"uploadFormMForm\\\" ng-submit=\\\"uploadFormM.uploadFormM(uploadFormM.uploadFormMText)\\\"><div class=\\\"form-group upload-form-m-text-group\\\"><pre class=\\\"upload-form-m-indicator\\\" ng-show=\\\"uploadFormM.formMIsUploading\\\">\\r\\n        {$uploadFormM.uploadIndicationText$}\\r\\n      </pre><label for=\\\"upload-form-m\\\" class=\\\"control-label sr-only\\\">Copy and paste form M</label> <textarea name=\\\"upload-form-m\\\" id=\\\"upload-form-m\\\" required=\\\"\\\" ng-model=\\\"uploadFormM.uploadFormMText\\\" ng-class=\\\"['form-control', 'upload-form-m', {'form-m-is-uploading':uploadFormM.formMIsUploading}]\\\" ng-readonly=\\\"uploadFormM.formMIsUploading\\\"></textarea></div><div class=\\\"upload-form-m-submit\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-success\\\" ng-disabled=\\\"uploadFormMForm.$invalid || uploadFormM.formMIsUploading\\\">Upload</button></div></form></div>\";\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('list-form-m',\r\n\t  ['rootApp',\r\n\t   'ui.router',\r\n\t   'form-m-service',\r\n\t   'form-m-search',\r\n\t   'model-table',\r\n\t   'customer',\r\n\t   'add-form-m'\r\n\t  ])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(formMListURLConfig)\r\n\tformMListURLConfig.$inject = ['$stateProvider']\r\n\tfunction formMListURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('form_m.list', {\r\n\t      kanmiiTitle: 'Form M List',\r\n\r\n\t      views: {\r\n\t        'listFormM': {\r\n\t          template: __webpack_require__(24),\r\n\r\n\t          controller: 'FormMListController as formMList'\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('FormMListController', FormMListController)\r\n\tFormMListController.$inject = ['FormM', '$scope', 'formMModelManager', '$http', '$state']\r\n\tfunction FormMListController(FormM, scope, formMModelManager, $http, $state) {\r\n\t  var vm = this\r\n\r\n\t  /**\r\n\t   * The model manager will be used by the 'model-table' directive to manage the collection of form Ms retrieved\r\n\t   * from the server\r\n\t   * @type {[]}\r\n\t   */\r\n\t  vm.modelManager = formMModelManager\r\n\r\n\t  vm.modelRowDblClick = function modelRowDblClick(formM) {\r\n\t    $state.go('form_m.add', {detailedFormM: formM})\r\n\t    scope.tabs.addFormM.active = true\r\n\t  }\r\n\r\n\t  /**\r\n\t   * Update the form Ms collection and pagination hooks\r\n\t   * @param {object} data\r\n\t   */\r\n\t  function updateFormMs(data) {\r\n\t    vm.formMs = data.results\r\n\r\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\r\n\t  }\r\n\r\n\t  /**\r\n\t   * The object containing the hooks for paging through the form Ms collection\r\n\t   * @type {Array}\r\n\t   */\r\n\t  vm.paginationHooks = []\r\n\r\n\t  /**\r\n\t   * The form Ms retrieved from backend. Will contain a list of form Ms and pagination hooks for\r\n\t   * retrieving the next and previous sets of form Ms. This model is used by the display directive\r\n\t   * to display the form Ms in a table\r\n\t   * @type {[]}\r\n\t   */\r\n\t  vm.formMs = []\r\n\t  FormM.getNoLcAttached().$promise.then(function(data) {\r\n\t    updateFormMs(data)\r\n\t  })\r\n\r\n\t  /**\r\n\t   * The table caption for the 'model-table' directive\r\n\t   * @type {string}\r\n\t   */\r\n\t  vm.tableCaption = 'Form M (LC Not Established)'\r\n\r\n\t  vm.getFormMCollectionOnNavigation = getFormMCollectionOnNavigation\r\n\t  /**\r\n\t   * when we navigate through the form Ms, we make an http request to the link contained in the navigation ui\r\n\t   * @param {string} linkUrl - the url (href) of the link clicked by user\r\n\t   */\r\n\t  function getFormMCollectionOnNavigation(linkUrl) {\r\n\t    $http.get(linkUrl).then(function(response) {\r\n\t      updateFormMs(response.data)\r\n\t    })\r\n\t  }\r\n\r\n\t  /**\r\n\t   * When the search-form-m directive returns, the result is propagated into this model\r\n\t   * @type {null|object}\r\n\t   */\r\n\t  vm.searchedFormMResult = null\r\n\r\n\t  scope.$watch(function getNewFormM() {return vm.searchedFormMResult}, function(searchedFormMResult) {\r\n\t    if (searchedFormMResult) updateFormMs(searchedFormMResult)\r\n\t  })\r\n\t}\r\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"manage-form-m-tab-content\\\"><div class=\\\"action-buttons pull-right\\\"><button class=\\\"btn btn-info\\\" search-form-m=\\\"\\\" search-form-m-result=\\\"formMList.searchedFormMResult\\\">Search Form M</button></div><div model-table=\\\"\\\" model-collection=\\\"formMList.formMs\\\" table-model-manager=\\\"::formMList.modelManager\\\" table-caption=\\\"::formMList.tableCaption\\\" pagination-size=\\\"20\\\" update-collection=\\\"formMList.getFormMCollectionOnNavigation(linkUrl)\\\" pager-object=\\\"formMList.paginationHooks\\\" on-row-dbl-click-callback=\\\"formMList.modelRowDblClick(rowModel)\\\"></div></div>\";\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('form-m',\r\n\t  ['rootApp',\r\n\t    'ui.router',\r\n\t    'list-form-m',\r\n\t    'upload-form-m',\r\n\t    'add-form-m'\r\n\t  ])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(formMURLConfig)\r\n\tformMURLConfig.$inject = ['$stateProvider']\r\n\tfunction formMURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('form_m', {\r\n\t      url: '/form-m',\r\n\r\n\t      kanmiiTitle: 'Form M',\r\n\r\n\t      template: __webpack_require__(26),\r\n\r\n\t      controller: 'FormMController as formMHome'\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('FormMController', FormMController)\r\n\tFormMController.$inject = ['$state', '$scope']\r\n\tfunction FormMController($state, $scope) {\r\n\t  //var vm = this\r\n\r\n\t  var uploadFormMTab = {\r\n\t    title: 'Upload Form M',\r\n\t    viewName: 'uploadFormM',\r\n\t    select: function () {\r\n\t      $scope.updateAddFormMTitle()\r\n\t      $state.go('form_m.upload')\r\n\t    }\r\n\t  }\r\n\r\n\t  var listFormMTab = {\r\n\t    title: 'List Form M',\r\n\t    viewName: 'listFormM',\r\n\t    select: function () {\r\n\t      $scope.updateAddFormMTitle()\r\n\t      $state.go('form_m.list')\r\n\t    }\r\n\t  }\r\n\r\n\t  var addFormMTitle = 'Add Form M'\r\n\r\n\t  var addFormMTab = {\r\n\t    title: addFormMTitle,\r\n\t    active: true,\r\n\t    viewName: 'addFormM',\r\n\t    select: function () { $state.go('form_m.add')}\r\n\t  }\r\n\r\n\t  var reportsTab = {\r\n\t    title: 'Reports',\r\n\t    active: false,\r\n\t    viewName: 'formMReports',\r\n\t    select: function () {\r\n\t      $scope.updateAddFormMTitle()\r\n\t      $state.go('form_m.add')\r\n\t    }\r\n\t  }\r\n\r\n\t  $scope.tabs = {\r\n\t    uploadFormM: uploadFormMTab,\r\n\t    listFormM: listFormMTab,\r\n\t    addFormM: addFormMTab,\r\n\t    reportsTab: reportsTab\r\n\t  }\r\n\r\n\t  $scope.updateAddFormMTitle = function (formM) {\r\n\t    $scope.tabs.addFormM.title = formM ? 'Details of \"' + formM.number + '\"' : addFormMTitle\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div uib-tabset=\\\"\\\"><div uib-tab=\\\"\\\" ng-repeat=\\\"(key, tab) in tabs\\\" heading=\\\"{$tab.title$}\\\" active=\\\"tab.active\\\" select=\\\"tab.select()\\\"><div class=\\\"\\\" ui-view=\\\"{$tab.viewName$}\\\"></div></div></div></div>\";\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('lc', [\r\n\t  'ui.router',\r\n\t  'model-table',\r\n\t  'rootApp',\r\n\t  'search-lc',\r\n\t  'lc-detail'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(bidURLConfig)\r\n\tbidURLConfig.$inject = ['$stateProvider']\r\n\tfunction bidURLConfig($stateProvider) {\r\n\t  $stateProvider\r\n\t    .state('lc', {\r\n\t      url: '/lc',\r\n\r\n\t      kanmiiTitle: 'Letter of credit',\r\n\r\n\t      templateUrl: __webpack_require__(2).buildUrl('lc/lc.html'),\r\n\r\n\t      controller: 'LetterOfCreditController as lcHome'\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('LetterOfCreditController', LetterOfCreditController)\r\n\tLetterOfCreditController.$inject = ['SearchLc', '$state']\r\n\tfunction LetterOfCreditController(SearchLc, $state) {\r\n\t  var vm = this\r\n\r\n\t  vm.searchLc = function searchLc() {\r\n\t    SearchLc.searchWithModal().then(function(data) {\r\n\t      var results = data.results\r\n\r\n\t      if (results.length) {\r\n\t        if (results.length === 1) {\r\n\t          var lc = results[0]\r\n\t          $state.go('lc_detail', {lc_number: lc.lc_number, lc: lc})\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar rootCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('lc-detail', [\r\n\t  'ui.router',\r\n\t  'rootApp',\r\n\t  'lc-service',\r\n\t  'lc-issue-service',\r\n\t  'kanmii-underscore',\r\n\t  'customer'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(bidURLConfig)\r\n\r\n\tbidURLConfig.$inject = ['$stateProvider']\r\n\r\n\tfunction bidURLConfig($stateProvider) {\r\n\t  $stateProvider\r\n\t    .state('lc_detail', {\r\n\t      url: '/lc/:lc_number',\r\n\r\n\t      params: {lc: null},\r\n\r\n\t      kanmiiTitle: 'Letter of credit',\r\n\r\n\t      templateUrl: __webpack_require__(2).buildUrl('lc/lc-detail/lc-detail.html'),\r\n\r\n\t      controller: 'LetterOfCreditDetailController as lcDetail'\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('LetterOfCreditDetailController', LetterOfCreditDetailController)\r\n\r\n\tLetterOfCreditDetailController.$inject = [\r\n\t  '$stateParams',\r\n\t  'LetterOfCredit',\r\n\t  '$state',\r\n\t  'getTypeAheadCustomer',\r\n\t  '$filter',\r\n\t  'getTypeAheadLCIssue',\r\n\t  'LCIssueConcrete',\r\n\t  'kanmiiUnderscore',\r\n\t  'xhrErrorDisplay',\r\n\t  'formatDate',\r\n\t  'Customer',\r\n\t  'formMAttributesVerboseNames'\r\n\t]\r\n\r\n\tfunction LetterOfCreditDetailController($stateParams, LetterOfCredit, $state, getTypeAheadCustomer, $filter,\r\n\t  getTypeAheadLCIssue, LCIssueConcrete, kanmiiUnderscore, xhrErrorDisplay, formatDate, Customer,\r\n\t  formMAttributesVerboseNames) {\r\n\t  var vm = this\r\n\r\n\t  initialize()\r\n\r\n\t  function initialize() {\r\n\t    if ($stateParams.lc) {\r\n\t      vm.lc = $stateParams.lc\r\n\t      vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\r\n\t    }\r\n\r\n\t    else {\r\n\t      LetterOfCredit.getPaginated({lc_number: $stateParams.lc_number}).$promise.then(function(data) {\r\n\t        if (data.count) {\r\n\t          vm.lc = data.results[0]\r\n\t          vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\r\n\t        }\r\n\r\n\t        else $state.go('lc')\r\n\t      })\r\n\t    }\r\n\r\n\t    vm.lcForm = {}\r\n\t    vm.alertIsShown = false\r\n\t    vm.issue = {}\r\n\r\n\t    function getIssuesNotClosed(issues) {\r\n\t      if (!issues) return []\r\n\r\n\t      return issues.filter(function(issue) {\r\n\t        return !issue.closed_at\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.issueDateGetterSetter = function issueDateGetterSetter() {\r\n\t    if (vm.lc && vm.lc.estb_date) return $filter('date')(vm.lc.estb_date, 'dd-MMM-yyyy')\r\n\t  }\r\n\r\n\t  vm.expiryDateGetterSetter = function expiryDateGetterSetter() {\r\n\t    if (vm.lc && vm.lc.expiry_date) return $filter('date')(vm.lc.expiry_date, 'dd-MMM-yyyy')\r\n\t  }\r\n\r\n\t  vm.saveIssue = function saveIssue(issue, form) {\r\n\t    if (issue && !kanmiiUnderscore.isEmpty(issue)) {\r\n\t      var postData = {\r\n\t        issue: issue.issue.url,\r\n\t        mf: vm.lc.mf,\r\n\t        lc_number: vm.lc.lc_number,\r\n\t        get_or_create_form_m: true\r\n\t      }\r\n\r\n\t      var applicant = issue.applicant\r\n\r\n\t      if (applicant && !kanmiiUnderscore.isEmpty(applicant)) {\r\n\t        postData.form_m_data = {\r\n\t          applicant: applicant.url,\r\n\t          currency: vm.lc.ccy_data.url,\r\n\t          amount: vm.lc.lc_amt_org_ccy,\r\n\t          lc: vm.lc.url,\r\n\t          number: vm.lc.mf\r\n\t        }\r\n\r\n\t      }\r\n\r\n\t      LCIssueConcrete.save(postData).$promise.then(saveSuccess, saveError)\r\n\t    }\r\n\r\n\t    function saveSuccess(data) {\r\n\t      vm.lcIssues.unshift({\r\n\t        issue_text: data.issue_text,\r\n\t        issue: data.issue,\r\n\t        id: data.id,\r\n\t        mf: data.mf\r\n\t      })\r\n\r\n\t      vm.issue = {}\r\n\r\n\t      if (!vm.lc.applicant_data) { vm.lc.applicant_data = applicant}\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\r\n\t    function saveError(xhr) {\r\n\t      var transform = null\r\n\t      if (xhr.data.form_m_creation_errors) {\r\n\t        transform = formMAttributesVerboseNames\r\n\t        delete xhr.data.form_m_creation_errors\r\n\t      }\r\n\t      xhrErrorDisplay(xhr, transform)\r\n\t    }\r\n\r\n\t  }\r\n\r\n\t  vm.closeIssue = function closeIssue(issue) {\r\n\t    issue.closed_at = formatDate(new Date())\r\n\t    LCIssueConcrete.put(issue).$promise.then(function() {\r\n\r\n\t      vm.lcIssues = vm.lcIssues.filter(function(anIssue) {\r\n\t        return anIssue.id !== issue.id\r\n\t      })\r\n\r\n\t    }, function(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.replaceLc = function replaceLc(newLcNumber) {\r\n\t    LetterOfCredit.getPaginated({lc_number: newLcNumber}).$promise.then(function(data) {\r\n\t      if (data.count) {\r\n\t        var lc = data.results[0]\r\n\r\n\t        $state.go('.', {lc_number: lc.lc_number, lc: lc})\r\n\r\n\t      } else vm.alertIsShown = true\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.replaceLcFormInvalid = function replaceLcFormInvalid(formInvalid, newLcNumber) {\r\n\t    return formInvalid || vm.lc.lc_number.toLowerCase().indexOf(newLcNumber.toLowerCase()) !== -1\r\n\t  }\r\n\r\n\t  vm.customerAdded = function customerAdded(customer) {\r\n\t    vm.issue.applicant = customer\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\r\n\t  vm.getIssue = function getIssue(text) {\r\n\t    return getTypeAheadLCIssue({text: text, exclude_form_m_issues: vm.lc.mf})\r\n\t  }\r\n\r\n\t  vm.addCustomer = function addCustomer() {\r\n\t    Customer.save({name: vm.lc.applicant}).$promise.then(function(data) {\r\n\t      vm.issue.applicant = data\r\n\t      vm.lc.applicant_data = data\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.closeAlert = function closeAlert() {\r\n\t    vm.alertIsShown = false\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('search-lc', [\r\n\t  'kanmii-underscore',\r\n\t  'toggle-dim-element',\r\n\t  'form-m-service',\r\n\t  'lc-service'\r\n\t])\r\n\r\n\tapp.factory('SearchLc', SearchLc)\r\n\tSearchLc.$inject = [\r\n\t  'xhrErrorDisplay',\r\n\t  'ModalService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$q',\r\n\t  'ToggleDimElement',\r\n\t  'LetterOfCredit'\r\n\t]\r\n\tfunction SearchLc(xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement, LetterOfCredit) {\r\n\r\n\t  function searchLc(submittedSearchParams) {\r\n\t    var deferred = $q.defer()\r\n\t    var searchParams = angular.copy(submittedSearchParams)\r\n\r\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\r\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\r\n\r\n\t    LetterOfCredit.getPaginated(searchParams).$promise.then(searchLcSuccess, searchLcError)\r\n\r\n\t    function searchLcSuccess(data) {\r\n\t      deferred.resolve(data)\r\n\t    }\r\n\r\n\t    function searchLcError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t      deferred.reject(xhr)\r\n\t    }\r\n\r\n\t    return deferred.promise\r\n\t  }\r\n\r\n\t  function SearchService() {\r\n\t    var service = this\r\n\r\n\t    service.searchWithModal = searchWithModal\r\n\t    function searchWithModal(config) {\r\n\t      var deferred = $q.defer()\r\n\t      config = config || {}\r\n\r\n\t      ModalService.showModal({\r\n\t        templateUrl: __webpack_require__(2).buildUrl('lc/search-lc/search-lc.html'),\r\n\t        controller: 'SearchLcModalCtrl as searchLcModal',\r\n\t        inputs: {\r\n\t          uiOptions: config.uiOptions\r\n\t        }\r\n\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          dialogClass: 'no-close',\r\n\t          modal: true,\r\n\t          minWidth: 600,\r\n\t          minHeight: 450,\r\n\t          title: 'Search Letter of credit',\r\n\r\n\t          open: function() {\r\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb)\r\n\t          },\r\n\r\n\t          close: function() {\r\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(submittedSearchParams) {\r\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t            deferred.resolve(searchLc(submittedSearchParams))\r\n\t          }\r\n\r\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\r\n\t        })\r\n\t      })\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new SearchService()\r\n\t}\r\n\r\n\tapp.controller('SearchLcModalCtrl', SearchLcModalCtrl)\r\n\tSearchLcModalCtrl.$inject = [\r\n\t  'close',\r\n\t  'resetForm',\r\n\t  '$element',\r\n\t  'getTypeAheadCustomer',\r\n\t  'getTypeAheadCurrency'\r\n\t]\r\n\tfunction SearchLcModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\r\n\t  vm.submitSearchParams = submitSearchParams\r\n\t  function submitSearchParams(searchParams) {\r\n\t    close(searchParams)\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\t  vm.getCurrency = getTypeAheadCurrency\r\n\t}\r\n\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"form-m-home-action-buttons btn-group-vertical\\\" role=\\\"group\\\"><a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"lc\\\">Letter of credit</a> <a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"form_m\\\">Form M</a> <a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"bid\\\">Bid Request</a></div></div>\";\n\n/***/ }\n/******/ ]);"],"sourceRoot":"/source/"}