{"version":3,"sources":["letter_of_credit/static/letter_of_credit/js/app/app.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","formMRootAppURLConfig","$stateProvider","$urlRouterProvider","otherwise","state","url","kanmiiTitle","template","rootCommons","app","angular","config","interpolateProviderConfig","run","$rootScope","$state","$stateParams","$inject","formMURLConfig","controller","FormMController","$scope","listFormMTab","title","viewName","select","updateAddFormMTitle","go","addFormMTitle","addFormMGoTo","addFormMTab","active","reportsTab","bidsTab","tabs","listFormM","addFormM","bids","reports","formM","number","goToFormM","transitionTo","detailedFormM","formMStateURLConfig","params","showSummary","views","templateUrl","buildUrl","AddFormMStateController","getTypeAheadCustomer","getTypeAheadCurrency","SearchDetailedOrUploadedFormMService","kanmiiUnderscore","formatDate","xhrErrorDisplay","formMAttributesVerboseNames","FormM","$filter","resetForm2","confirmationDialog","formMObject","initialize","form","init","vm","fieldIsEditable","currency","applicant","date_received","amount","searchFormM","formMSavedSuccessMessage","$setPristine","$setUntouched","summary","showDialog","text","infoOnly","disableSubmitBtn","newFormMForm","$invalid","has","coverForm","bidForm","issuesForm","showEditBid","compared","compareFormMs","all","bid","goods_description","isEmpty","cover","selectedIssues","length","reset","addFormMForm","elements","this","copy","enableFieldEdit","field","validators","test","isObject","getApplicant","getCurrency","datePickerFormat","datePickerIsOpen","openDatePicker","getUploadedFormM","searchWithModal","then","data","detailed","uploaded","mf","cost_freight","ccy","submit","saveFormM","xhr","LcBidRequest","LCIssueConcrete","FormMCover","getTypeAheadLCIssue","$q","Factory","setBids","getPaginated","self","$promise","count","results","existingBids","console","log","setIssues","query","form_m_number","forEach","issue","closed_at","closedIssues","push","nonClosedIssues","setCovers","covers","cb","setInitialProperties","showBidForm","showIssueForm","showCoverForm","Date","form_m_issues","applicant_data","currency_data","Number","formatIssueText","replace","closeIssue","$index","issueClosedSuccess","issue_text","splice","issueClosedError","answer","put","createIssuesMessage","issues","concat","issuesText","each","index","createFormMMessage","header","name","code","getFreshIssues","_ids","x","URL_REGEXP","RegExp","exec","exclude_issue_ids","join","formMSavedSuccess","new_issues","formMToSave","deferred","resolve","formMSavedError","reject","cover_type","defer","do_not_update","$put","$save","promise","otherFormM","equals","factory","lcIssueDirective","restrict","scope","bindToController","onIssuesChanged","LcIssueDirectiveController","clearFormField","issueSelected","$item","$model","deleteIssue","toggleShow","$watch","issueForm","$validate","directive","require","link","elm","atts","ctrl","lcIssue","$validators","Boolean","fsPath","lcCommons","appName","staticPrefix","setStaticPrefix","addIconSrc","$interpolateProvider","startSymbol","endSymbol","rootAppName","onCoverChanged","LcCoverDirectiveController","formMCoverTypes","formFieldIsValid","coverTypes","isValid","validity","amountGetterSetter","val","arguments","lcBidDirective","LcBidDirectiveController","bidToEdit","bidNotModified","editBidInvalid","onBidDblClick","trashBid","bidDeleteSuccess","editBid","doEdit","requested_at","bidURLConfig","BidRequestController","$http","kanmiiUri","urls","$timeout","newBid","searchedBidResult","selectedBids","selectedDownloadedBids","bidRequests","paginationHooks","pending","updateBids","getBidsOnNavigation","linkUrl","get","response","next","previous","onSelectedBidsChanged","newSelections","checked","bidId","getBidFromId","downloaded","rowDblClickCb","tableCaption","lcBidRequestDownloadUrl","downloadUrl","search","selection","bid_ids","toString","downloadBtnDisabled","any","selectionVal","markRequestedBtnDisabled","anyNoneDownloadedChecked","markRequested","editedBids","refreshPage","displayPendingBidDirective","lcAppCommons","updateCollection","pager","onDblClick","paginationSize","displayPendingBidDirectiveCtrl","pagerNavSetUpLinks","setUpLinks","prev","numLinks","Math","ceil","linkProperties","nextPageLink","prevPageLink","linkUrls","currentLink","rowIndexOffset","onUpdateCollection","deselectAllBids","highlighted","modelRowClicked","model","onRowDblClick","bidIndex","toggleAll","toggleAllClicked","formMListURLConfig","FormMListController","formMModelManager","updateFormMs","formMs","getFormMCollectionOnNavigation","modelManager","modelRowDblClick","getNoLcAttached","searchedFormMResult","UploadFormM","ModalService","submittedSearchParams","searchFormMSuccess","searchFormMError","SearchService","showModal","modal","element","dialog","dialogClass","minWidth","minHeight","close","service","SearchDetailedOrUploadedFormMServiceModalCtrl","resetForm","initForm","searchParams","$error","SearchFormMService","ToggleDimElement","inputs","uiOptions","open","dim","parent","dimCb","unDim","unDimCb","SearchFormMServiceModalCtrl","showLcIssueContainer","searchLcIssuesTitle","selectedLcIssues","toggleShowLcIssueContainer","submitSearchParams","displayLcIssueUI","searchFormMDirective","attributes","css","cursor","bind","searchFormMResult","SearchFormMDirectiveCtrl","SearchFormMModalCtrl","uploadFormMURLConfig","uploadFormM","UploadFormMController","initial","formMIsUploading","uploadIndicationText","uploadFormMText","parseDate","dt","slice","formMCreatedSuccess","creationResult","created_data","numCreatedNow","numCreatedPreviously","formMCreatedError","row","Papa","parse","delimiter","step","ba","fob","submitted_at","validated_at","save","likely_duplicates","SearchUploadedFormMService","SearchUploadedFormMServiceModalCtrl","LetterOfCreditController","SearchLc","searchLc","lc","lc_number","LetterOfCreditDetailController","LetterOfCredit","Customer","getIssuesNotClosed","filter","lcIssues","lcForm","alertIsShown","issueDateGetterSetter","estb_date","expiryDateGetterSetter","expiry_date","saveIssue","saveSuccess","unshift","saveError","transform","form_m_creation_errors","postData","get_or_create_form_m","form_m_data","ccy_data","lc_amt_org_ccy","anIssue","replaceLc","newLcNumber","replaceLcFormInvalid","formInvalid","toLowerCase","indexOf","customerAdded","customer","getIssue","exclude_form_m_issues","addCustomer","closeAlert","searchLcSuccess","searchLcError","SearchLcModalCtrl"],"mappings":"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","file":"letter_of_credit/static/letter_of_credit/js/app/app.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t__webpack_require__(1)\n\t__webpack_require__(23)\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('lc-root-app',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'form-m',\n\t   'lc'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\n\t  $rootScope.$state = $state\n\t  $rootScope.$stateParams = $stateParams\n\t}])\n\n\tapp.config(formMRootAppURLConfig)\n\tformMRootAppURLConfig.$inject = ['$stateProvider', '$urlRouterProvider']\n\tfunction formMRootAppURLConfig($stateProvider, $urlRouterProvider) {\n\t  $urlRouterProvider\n\t    .otherwise('/')\n\n\t  $stateProvider\n\t    .state('home', {\n\t      url: '/',\n\n\t      kanmiiTitle: 'Home',\n\n\t      template: __webpack_require__(26)\n\t    })\n\t}\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(2)\n\t__webpack_require__(10)\n\t__webpack_require__(13)\n\t__webpack_require__(15)\n\t__webpack_require__(16)\n\t__webpack_require__(17)\n\t__webpack_require__(19)\n\n\tvar app = angular.module('form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'list-form-m',\n\t   'upload-form-m',\n\t   'add-form-m',\n\t   'form-m-bids'\n\t  ])\n\n\tapp.config(formMURLConfig)\n\tformMURLConfig.$inject = ['$stateProvider']\n\tfunction formMURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m', {\n\t      url: '/form-m',\n\n\t      kanmiiTitle: 'Form M',\n\n\t      template: __webpack_require__(22),\n\n\t      controller: 'FormMController as formMHome'\n\t    })\n\t}\n\n\tapp.controller('FormMController', FormMController)\n\tFormMController.$inject = ['$state', '$scope']\n\tfunction FormMController($state, $scope) {\n\n\t  var listFormMTab = {\n\t    title: 'List Form M',\n\t    viewName: 'listFormM',\n\t    select: function () {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.list')\n\t    }\n\t  }\n\n\t  var addFormMTitle = 'Form M'\n\t  /** Angular uib tab executes 'select' function which invokes $state.go. However, if we are transiting to this state\n\t   from a place outside angular uib tab, this will result in the state transition function been called twice (see\n\t   \"$scope.goToFormM\" function below for example) - one for the calling position and another for angular uib tab. This\n\t   flag keeps track of whether state transition function had been called and thus helps to avoid duplicate call. A\n\t   consequence of the duplicate call is that the controller for the addFormMTab is called twice with all sorts of\n\t   unintended consequences.\n\t   */\n\t  var addFormMGoTo = true\n\t  var addFormMTab = {\n\t    title: addFormMTitle,\n\t    active: true,\n\t    viewName: 'addFormM',\n\t    select: function () {\n\t      if (addFormMGoTo) $state.go('form_m.add')\n\t      addFormMGoTo = true\n\t    }\n\t  }\n\n\t  var reportsTab = {\n\t    title: 'Reports',\n\t    active: false,\n\t    viewName: 'formMReports',\n\t    select: function () {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.add')\n\t    }\n\t  }\n\n\t  var bidsTab = {\n\t    title: 'Pending Bids',\n\t    active: false,\n\t    viewName: 'bids',\n\t    select: function () {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.bids')\n\t    }\n\t  }\n\n\t  $scope.tabs = {\n\t    listFormM: listFormMTab,\n\t    addFormM: addFormMTab,\n\t    bids: bidsTab,\n\t    reports: reportsTab\n\t  }\n\n\t  $scope.updateAddFormMTitle = function (formM) {\n\t    $scope.tabs.addFormM.title = formM ? 'Details of \"' + formM.number + '\"' : addFormMTitle\n\t  }\n\n\t  $scope.goToFormM = function goToFormM(formM) {\n\t    addFormMGoTo = false\n\t    $state.transitionTo('form_m.add', {detailedFormM: formM})\n\t    $scope.tabs.addFormM.active = true\n\t  }\n\t}\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(3)\n\t__webpack_require__(4)\n\t__webpack_require__(8)\n\n\tvar app = angular.module('add-form-m', [\n\t  'ui.router',\n\t  'rootApp',\n\t  'kanmii-underscore',\n\t  'customer',\n\t  'search-detailed-or-uploaded-form-m',\n\t  'form-m-service',\n\t  'lc-cover',\n\t  'lc-issue',\n\t  'lc-bid-request',\n\t  'confirmation-dialog',\n\t  'add-form-m-form-m-object'\n\t])\n\n\tapp.config(formMStateURLConfig)\n\n\tformMStateURLConfig.$inject = ['$stateProvider']\n\n\tfunction formMStateURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('form_m.add', {\n\t      kanmiiTitle: 'Add form M',\n\n\t      params: {detailedFormM: null, showSummary: null},\n\n\t      views: {\n\t        addFormM: {\n\t          templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/add-form-m.html'),\n\n\t          controller: 'AddFormMStateController as addFormMState'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('AddFormMStateController', AddFormMStateController)\n\n\tAddFormMStateController.$inject = [\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency',\n\t  'SearchDetailedOrUploadedFormMService',\n\t  'kanmiiUnderscore',\n\t  'formatDate',\n\t  'xhrErrorDisplay',\n\t  'formMAttributesVerboseNames',\n\t  'FormM',\n\t  '$filter',\n\t  '$stateParams',\n\t  'resetForm2',\n\t  '$state',\n\t  '$scope',\n\t  'confirmationDialog',\n\t  'formMObject'\n\t]\n\n\tfunction AddFormMStateController(getTypeAheadCustomer, getTypeAheadCurrency, SearchDetailedOrUploadedFormMService,\n\t  kanmiiUnderscore, formatDate, xhrErrorDisplay, formMAttributesVerboseNames, FormM, $filter, $stateParams, resetForm2,\n\t  $state, $scope, confirmationDialog, formMObject) {\n\t  var vm = this\n\n\t  //1. fix summary for issues when form M saved\n\n\t  vm.detailedFormM = angular.copy($stateParams.detailedFormM)\n\t  $stateParams.detailedFormM = null\n\n\t  initialize()\n\t  function initialize(form) {\n\t    formMObject.init(vm.detailedFormM, function (formM) {\n\t      vm.formM = formM\n\n\t      if (vm.formM.number) {\n\t        $scope.updateAddFormMTitle(formM)\n\t        vm.fieldIsEditable = {\n\t          number: false,\n\t          currency: false,\n\t          applicant: false,\n\t          date_received: false,\n\t          amount: false\n\t        }\n\n\t      } else {\n\t        $scope.updateAddFormMTitle()\n\t        vm.fieldIsEditable = {\n\t          number: true,\n\t          currency: true,\n\t          applicant: true,\n\t          date_received: true,\n\t          amount: true\n\t        }\n\t      }\n\t    })\n\n\t    vm.searchFormM = {}\n\t    formMSavedSuccessMessage()\n\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\t  }\n\n\t  function formMSavedSuccessMessage() {\n\t    var summary = $stateParams.showSummary\n\t    $stateParams.showSummary = null\n\n\t    if (summary) {\n\t      confirmationDialog.showDialog({\n\t        title: '\"' + vm.formM.number + '\" successfully saved',\n\t        text: summary,\n\t        infoOnly: true\n\t      })\n\t    }\n\t  }\n\n\t  vm.enableFieldEdit = function enableFieldEdit(field) {\n\t    vm.fieldIsEditable[field] = vm.detailedFormM ? !vm.fieldIsEditable[field] : false\n\t  }\n\n\t  vm.validators = {\n\t    applicant: {\n\t      test: function () {\n\t        return kanmiiUnderscore.isObject(vm.formM.applicant)\n\t      }\n\t    },\n\n\t    currency: {\n\t      test: function () {\n\t        return kanmiiUnderscore.isObject(vm.formM.currency)\n\t      }\n\t    }\n\t  }\n\n\t  vm.disableSubmitBtn = disableSubmitBtn\n\t  function disableSubmitBtn() {\n\t    if ($scope.newFormMForm.$invalid) return true\n\n\t    if (kanmiiUnderscore.has(vm.formM.coverForm, '$invalid') && vm.formM.coverForm.$invalid) return true\n\n\t    if (kanmiiUnderscore.has(vm.formM.bidForm, '$invalid') && vm.formM.bidForm.$invalid) return true\n\n\t    if (kanmiiUnderscore.has(vm.formM.issuesForm, '$invalid') && vm.formM.issuesForm.$invalid) return true\n\n\t    if (formMObject.showEditBid) return true\n\n\t    var compared = formMObject.compareFormMs(vm.detailedFormM)\n\n\t    if (!compared) return false\n\n\t    if (kanmiiUnderscore.all(compared)) {\n\t      if (formMObject.bid.goods_description && formMObject.bid.amount) return false\n\t      if (!kanmiiUnderscore.isEmpty(vm.formM.cover)) return false\n\t      return !vm.formM.selectedIssues.length\n\t    }\n\n\t    return false\n\t  }\n\n\t  vm.reset = reset\n\t  function reset(addFormMForm) {\n\t    vm.detailedFormM = null\n\n\t    resetForm2(addFormMForm, [\n\t      {\n\t        form: $scope.newFormMForm, elements: ['applicant', 'currency']\n\t      }\n\t    ])\n\n\t    initialize()\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\n\t  vm.datePickerFormat = 'dd-MMM-yyyy'\n\t  vm.datePickerIsOpen = false\n\t  vm.openDatePicker = function openDatePicker() {\n\t    vm.datePickerIsOpen = true\n\t  }\n\n\t  vm.getUploadedFormM = function getUploadedFormM() {\n\t    vm.detailedFormM = null\n\t    initialize()\n\n\t    SearchDetailedOrUploadedFormMService.searchWithModal().then(function (data) {\n\t      if (data.detailed) {\n\t        vm.detailedFormM = data.detailed\n\t        initialize()\n\n\t      } else {\n\t        var formM = data.uploaded\n\t        vm.searchFormM = formM\n\t        vm.formM.number = formM.mf\n\t        vm.formM.amount = formM.cost_freight\n\t        vm.formM.goods_description = formM.goods_description\n\n\t        getTypeAheadCurrency(formM.ccy).then(function (ccy) {\n\t          vm.formM.currency = ccy[0]\n\t        })\n\t      }\n\t    })\n\t  }\n\n\t  vm.submit = function submit(formM) {\n\t    formMObject.saveFormM(formM, vm.detailedFormM).then(function saveFormMSuccess(data) {\n\t      $state.go('form_m.add', data)\n\n\t    }, function saveFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    })\n\t  }\n\t}\n\n\t__webpack_require__(9)\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\"\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('add-form-m-form-m-object', [\r\n\t  'rootApp',\r\n\t  'lc-issue-service',\r\n\t  'lc-cover-service',\r\n\t  'form-m-service'\r\n\t])\r\n\r\n\tapp.factory('formMObject', formMObject)\r\n\r\n\tformMObject.$inject = [\r\n\t  'LcBidRequest',\r\n\t  'LCIssueConcrete',\r\n\t  'FormMCover',\r\n\t  'confirmationDialog',\r\n\t  'formatDate',\r\n\t  'xhrErrorDisplay',\r\n\t  'kanmiiUnderscore',\r\n\t  '$filter',\r\n\t  'getTypeAheadLCIssue',\r\n\t  'FormM',\r\n\t  '$q'\r\n\t]\r\n\r\n\tfunction formMObject(LcBidRequest, LCIssueConcrete, FormMCover, confirmationDialog, formatDate, xhrErrorDisplay,\r\n\t  kanmiiUnderscore, $filter, getTypeAheadLCIssue, FormM, $q) {\r\n\t  function Factory() {\r\n\t    var self = this\r\n\r\n\t    function setBids() {\r\n\t      LcBidRequest.getPaginated({mf: self.number}).$promise.then(function (data) {\r\n\r\n\t        if (data.count) {\r\n\t          var results = data.results\r\n\r\n\t          if (results.length) {\r\n\t            self.existingBids = results\r\n\t          }\r\n\t        }\r\n\r\n\t      }, function (xhr) {\r\n\t        console.log('xhr = ', xhr)\r\n\t      })\r\n\t    }\r\n\r\n\t    function setIssues() {\r\n\t      LCIssueConcrete.query({form_m_number: self.number}).$promise.then(function (data) {\r\n\t        data.forEach(function (issue) {\r\n\t          if (!issue.closed_at) self.nonClosedIssues.push(issue)\r\n\t          else self.closedIssues.push(issue)\r\n\t        })\r\n\t      })\r\n\t    }\r\n\r\n\t    function setCovers() {\r\n\t      FormMCover.query({form_m_number: self.number}).$promise.then(function (data) {\r\n\t        self.covers = data\r\n\t      }, function (xhr) {\r\n\t        console.log(xhr)\r\n\t      })\r\n\t    }\r\n\r\n\t    self.init = function init(detailedFormM, cb) {\r\n\t      setInitialProperties()\r\n\t      function setInitialProperties(){\r\n\t        /*\r\n\t         *@param {angular.form.model} will hold data for bid we wish to create or edit\r\n\t         */\r\n\t        self.bid = {}\r\n\r\n\t        /**\r\n\t         * Flag that determines whether we are editing bid and will show an edit bid button.\r\n\t         * @type {boolean}\r\n\t         */\r\n\t        self.showEditBid = false\r\n\r\n\t        /**\r\n\t         * Flag that controls whether to show bid form\r\n\t         * @type {boolean}\r\n\t         */\r\n\t        self.showBidForm = false\r\n\r\n\t        /**\r\n\t         * Bids that already exist for this form M. These bids can be edited.\r\n\t         * @type {Array}\r\n\t         */\r\n\t        self.existingBids = []\r\n\r\n\t        /**\r\n\t         * Issues already created for this form M that user has closed. They are merely for display.\r\n\t         * @type {Array}\r\n\t         */\r\n\t        self.closedIssues = []\r\n\r\n\t        /**\r\n\t         * Issues already created for this form M that are open. User can use this interface to close them\r\n\t         * @type {Array}\r\n\t         */\r\n\t        self.nonClosedIssues = []\r\n\r\n\t        /**\r\n\t         * Fresh issues that user wishes to create. Will be appended to open issues when created.\r\n\t         * @type {Array}\r\n\t         */\r\n\t        self.selectedIssues = []\r\n\r\n\t        /**\r\n\t         * The issue that user is currently selecting. Will be pushed into self.selectedIssues\r\n\t         * @type {null|{}}\r\n\t         */\r\n\t        self.issue = null\r\n\r\n\t        /**\r\n\t         * Flag that controls whether issue form is displayed or hidden.\r\n\t         * @type {boolean}\r\n\t         */\r\n\t        self.showIssueForm = false\r\n\r\n\t        self.covers = []\r\n\t        self.cover = {}\r\n\t        self.showCoverForm = false\r\n\r\n\t        self.date_received = new Date()\r\n\t        self.number = null\r\n\t        self.applicant = null\r\n\t        self.currency = null\r\n\t        self.amount = null\r\n\t        self.goods_description = null\r\n\t        self.form_m_issues = null\r\n\t        self.url = null\r\n\t      }\r\n\r\n\t      if (detailedFormM) {\r\n\t        self.date_received = new Date(detailedFormM.date_received)\r\n\t        self.number = detailedFormM.number\r\n\t        self.applicant = detailedFormM.applicant_data\r\n\t        self.currency = detailedFormM.currency_data\r\n\t        self.amount = Number(detailedFormM.amount)\r\n\t        self.goods_description = detailedFormM.goods_description\r\n\t        self.form_m_issues = detailedFormM.form_m_issues\r\n\t        self.url = detailedFormM.url\r\n\r\n\t        setBids()\r\n\t        setIssues()\r\n\t        setCovers()\r\n\t      }\r\n\r\n\t      cb(self)\r\n\t    }\r\n\r\n\t    self.formatIssueText = function formatIssueText(text) {return text.replace(/:ISSUE$/i, '')}\r\n\r\n\t    self.closeIssue = function closeIssue(issue, $index) {\r\n\t      var text = 'Sure you want to close issue:\\n\"' + self.formatIssueText(issue.issue_text) + '\"?'\r\n\t      confirmationDialog.showDialog({title: 'Close issue', text: text}).then(function (answer) {\r\n\t        if (answer) {\r\n\t          issue.closed_at = formatDate(new Date())\r\n\t          LCIssueConcrete.put(issue).$promise.then(issueClosedSuccess, issueClosedError)\r\n\t        }\r\n\t      })\r\n\r\n\t      function issueClosedSuccess() {\r\n\t        var text = 'Issue closed successfully:\\n' + self.formatIssueText(issue.issue_text)\r\n\t        confirmationDialog.showDialog({title: 'Close issue', text: text, infoOnly: true})\r\n\t        self.nonClosedIssues.splice($index, 1)\r\n\t        self.closedIssues.push(issue)\r\n\t      }\r\n\r\n\t      function issueClosedError(xhr) {xhrErrorDisplay(xhr)}\r\n\t    }\r\n\r\n\t    self.createIssuesMessage = function createIssuesMessage(issues) {\r\n\t      issues = self.nonClosedIssues.concat((issues && issues.length) ? issues : [])\r\n\r\n\t      if (!issues.length) return ''\r\n\r\n\t      var issuesText = '\\n\\n\\nPlease note the following issues which must be regularized before the LC ' +\r\n\t        'request can be treated:\\n'\r\n\r\n\t      kanmiiUnderscore.each(issues, function (issue, index) {\r\n\t        ++index\r\n\t        issuesText += ('(' + index + ') ' + self.formatIssueText(issue.issue_text) + '\\n')\r\n\t      })\r\n\r\n\t      return issuesText\r\n\t    }\r\n\r\n\t    self.createFormMMessage = function createFormMMessage() {\r\n\t      var number = $filter('number')(self.amount, 2)\r\n\t      var header = self.applicant.name + ' - ' + self.number + ' - ' + self.currency.code + ' ' + number\r\n\t      return header + '\\n\\nForm M Number : ' + self.number + '\\n' +\r\n\t        'Value         : ' + self.currency.code + ' ' +\r\n\t        number + '\\n' +\r\n\t        'Applicant     : ' + self.applicant.name\r\n\t    }\r\n\r\n\t    self.showSummary = function showSummary() {\r\n\t      confirmationDialog.showDialog({\r\n\t        title: self.number,\r\n\t        text: self.createFormMMessage() + self.createIssuesMessage(),\r\n\t        infoOnly: true\r\n\t      })\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Fresh in the sense that they have not been attached to this form M either has newly selected issues or closed\r\n\t     * issues or non-closed issues\r\n\t     * @param {string} text - the text of the issue to get\r\n\t     * @returns {[]} - an array of fresh issues for this form M\r\n\t     */\r\n\t    self.getFreshIssues = function getFreshIssues(text) {\r\n\t      var _ids = []\r\n\r\n\t      self.selectedIssues.forEach(function (issue) {\r\n\t        _ids.push(issue.id)\r\n\t      })\r\n\r\n\t      var x = []\r\n\t      var URL_REGEXP = new RegExp(\".+/(\\\\d+)$\")\r\n\r\n\t      x.concat(self.nonClosedIssues).concat(self.closedIssues).forEach(function (issue) {\r\n\t        _ids.push(URL_REGEXP.exec(issue.issue)[1])\r\n\t      })\r\n\r\n\t      return getTypeAheadLCIssue({text: text, exclude_issue_ids: _ids.join(',')})\r\n\t    }\r\n\r\n\t    self.saveFormM = function saveFormM(formM, detailedFormM) {\r\n\t      var formMToSave = {\r\n\t        applicant: formM.applicant.url,\r\n\t        currency: formM.currency.url,\r\n\t        date_received: formatDate(formM.date_received),\r\n\t        amount: formM.amount,\r\n\t        number: formM.number,\r\n\t        goods_description: formM.goods_description\r\n\t      }\r\n\r\n\t      if (formM.bid.amount && formM.bid.goods_description) {\r\n\t        formMToSave.goods_description = formM.bid.goods_description\r\n\t        formMToSave.bid = {amount: formM.bid.amount}\r\n\t        // In case user changed goods_description via bid directive\r\n\t        self.goods_description = formM.bid.goods_description\r\n\t        formM.goods_description = formM.bid.goods_description\r\n\t      }\r\n\r\n\t      if (formM.selectedIssues.length) formMToSave.issues = formM.selectedIssues\r\n\r\n\t      if (!kanmiiUnderscore.isEmpty(formM.cover)) {\r\n\t        formMToSave.cover = {\r\n\t          amount: formM.cover.amount,\r\n\t          cover_type: formM.cover.cover_type[0]\r\n\t        }\r\n\t      }\r\n\r\n\t      var deferred = $q.defer()\r\n\r\n\t      if (!detailedFormM) new FormM(formMToSave).$save(formMSavedSuccess, formMSavedError)\r\n\r\n\t      else {\r\n\t        //if we did not edit the main form M i.e detailedFormM = formM, then there is no need for database update\r\n\t        //we store some attributes of formM that we care about in formMToSave because this will now become detailed\r\n\t        //form M when we return from server.\r\n\t        if (kanmiiUnderscore.all(self.compareFormMs(detailedFormM, formM))) {\r\n\t          formMToSave.do_not_update = 'do_not_update'\r\n\t          formMToSave.applicant_data = formM.applicant\r\n\t          formMToSave.currency_data = formM.currency\r\n\t          formMToSave.url = formM.url\r\n\t        }\r\n\t        formMToSave.id = detailedFormM.id\r\n\t        new FormM(formMToSave).$put(formMSavedSuccess, formMSavedError)\r\n\t      }\r\n\r\n\t      function formMSavedSuccess(data) {\r\n\t        console.log('data = ', data.new_issues)\r\n\t        var summary = self.createFormMMessage() + self.createIssuesMessage(data.new_issues)\r\n\r\n\t        if (formMToSave.bid) {\r\n\t          summary += '\\n\\nBid Amount     : ' + data.currency_data.code + ' ' + $filter('number')(formMToSave.bid.amount, 2)\r\n\t        }\r\n\r\n\t        delete data.new_issues\r\n\t        deferred.resolve({detailedFormM: data, showSummary: summary})\r\n\t      }\r\n\r\n\t      function formMSavedError(xhr) {\r\n\t        deferred.reject(xhr)\r\n\t      }\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\r\n\t    /**\r\n\t     * Compare certain attributes of two form Ms and returns an object with the attribute as key and equalities of the\r\n\t     * values of the attributes in the two form Ms as values.\r\n\t     *\r\n\t     * @param {{}} formM - first form M to compare. If this is null, then there is no point doing comparison\r\n\t     * @param {null|{}} otherFormM - optional second form M to compare. If this is not given, then we compare first\r\n\t     *   form M with self\r\n\t     * @returns {{}} - an object of form Ms attributes' values equalities\r\n\t     */\r\n\t    self.compareFormMs = function compareFormMs(formM, otherFormM) {\r\n\t      if (!formM) return false\r\n\r\n\t      if (otherFormM) {\r\n\t        return {\r\n\t          number: otherFormM.number && angular.equals(otherFormM.number, formM.number),\r\n\t          date_received: angular.equals(otherFormM.date_received, new Date(formM.date_received)),\r\n\t          amount: otherFormM.amount && angular.equals(otherFormM.amount, Number(formM.amount)),\r\n\t          currency: otherFormM.currency && (otherFormM.currency.code === formM.currency_data.code),\r\n\t          applicant: otherFormM.applicant && (otherFormM.applicant.name === formM.applicant_data.name),\r\n\t          goods_description: otherFormM.goods_description === formM.goods_description\r\n\t        }\r\n\t      }\r\n\r\n\t      return {\r\n\t        number: self.number && angular.equals(self.number, formM.number),\r\n\t        date_received: angular.equals(self.date_received, new Date(formM.date_received)),\r\n\t        amount: self.amount && angular.equals(self.amount, Number(formM.amount)),\r\n\t        currency: self.currency && (self.currency.code === formM.currency_data.code),\r\n\t        applicant: self.applicant && (self.applicant.name === formM.applicant_data.name),\r\n\t        goods_description: self.goods_description === formM.goods_description\r\n\t      }\r\n\t    }\r\n\t  }\r\n\r\n\t  return new Factory()\r\n\t}\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('lc-issue', [\n\t  'rootApp',\n\t  'add-form-m-form-m-object'\n\t])\n\n\tapp.directive('lcIssue', lcIssueDirective)\n\n\tlcIssueDirective.$inject = []\n\n\tfunction lcIssueDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-issue/lc-issue.html'),\n\t    scope: true,\n\t    bindToController: {\n\t      onIssuesChanged: '&'\n\t    },\n\t    controller: 'LcIssueDirectiveController as lcIssue'\n\t  }\n\t}\n\n\tapp.controller('LcIssueDirectiveController', LcIssueDirectiveController)\n\n\tLcIssueDirectiveController.$inject = [\n\t  '$scope',\n\t  'resetForm2',\n\t  'clearFormField',\n\t  'formMObject'\n\t]\n\n\tfunction LcIssueDirectiveController($scope, resetForm2, clearFormField, formMObject) {\n\t  var vm = this\n\t  vm.formM = formMObject\n\t  var title = 'Add Letter Of Credit Issues'\n\n\t  init()\n\t  function init(form) {\n\t    vm.title = title\n\t    formMObject.selectedIssues = []\n\t    formMObject.issue = null\n\n\t    if (form) resetForm2(form, [\n\t      {form: form, elements: ['issue']}\n\t    ])\n\t  }\n\n\t  vm.issueSelected = function issueSelected($item, $model) {\n\t    formMObject.selectedIssues.push($model)\n\t    formMObject.issue = null\n\t    clearFormField($scope.issuesForm, 'issue')\n\t  }\n\n\t  vm.deleteIssue = function deleteIssue(index) {\n\t    vm.formM.selectedIssues.splice(index, 1)\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    formMObject.showIssueForm = vm.formM.amount && vm.formM.number && !formMObject.showIssueForm\n\n\t    if (!formMObject.showIssueForm) init(form)\n\t    else vm.title = 'Dismiss'\n\t  }\n\n\t  $scope.$watch(function getFormM() {return vm.formM}, function (formM) {\n\t    vm.formM.issuesForm = $scope.issuesForm\n\n\t    if (formM) {\n\t      if (!formM.amount || !formM.number) {\n\t        init(formMObject.issueForm)\n\t      }\n\t    }\n\t  }, true)\n\n\t  $scope.$watch(function getShowContainer() {return formMObject.showIssueForm}, function onUpdateShowContainer() {\n\t    $scope.issuesForm.issue.$validate()\n\t  })\n\t}\n\n\tapp.directive('validateIssues', function validateIssues() {\n\t  return {\n\t    restrict: 'A',\n\t    require: 'ngModel',\n\t    link: function ($scope, elm, atts, ctrl) {\n\t      var vm = $scope.lcIssue\n\t      ctrl.$validators.issues = function () {\n\t        return !vm.formM.showIssueForm || Boolean(vm.formM.selectedIssues.length)\n\t      }\n\t    }\n\t  }\n\t})\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar lcCommons = __webpack_require__(6)\n\n\t/**\n\t * @description\n\t *\n\t * @param {String} fsPath - the path relative to the form-m directory\n\t * @returns {*|string}\n\t */\n\tfunction buildUrl(fsPath) {\n\t  return lcCommons.buildUrl('app') + '/' + fsPath\n\t}\n\n\tmodule.exports = {\n\t  buildUrl: buildUrl\n\t}\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar appName = 'letter_of_credit'\n\n\tfunction buildUrl(fsPath) {\n\t  return rootCommons.buildUrl(appName, fsPath)\n\t}\n\n\tmodule.exports = {\n\t  buildUrl: buildUrl,\n\t  appName: appName\n\t}\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tvar interpolateProviderConfig = ['$interpolateProvider', function ($interpolateProvider) {\n\t  $interpolateProvider.startSymbol('{$');\n\t  $interpolateProvider.endSymbol('$}');\n\t}];\n\n\t/**\n\t * Takes a file system path to a file (most likely a template path) and returns the server compatible path\n\t *\n\t * @param {string} appName - the name of the django app\n\t * @param {string} fsPath - relative path to a file resource on disk. The path must be relative to appName/js directory\n\t *   path\n\t * @returns {string} - a server compatible path\n\t */\n\tfunction buildUrl(appName, fsPath) {\n\t  return staticPrefix + appName + '/js/' + fsPath\n\t}\n\n\t/**\n\t * sets the static root on an angular app - so we can use a variable in our views rather hard-coding the static root\n\t * value\n\t * @param {angular.module} app the angular module on which we wish to set the static root\n\t */\n\tfunction setStaticPrefix(app) {\n\t  app.run(['$rootScope', function ($rootScope) {\n\t    $rootScope.staticPrefix = staticPrefix\n\t    $rootScope.addIconSrc = staticPrefix + 'core_recons/css/images/icon_addposting.gif'\n\t  }])\n\t}\n\n\tmodule.exports = {\n\t  interpolateProviderConfig: interpolateProviderConfig,\n\n\t  buildUrl: buildUrl,\n\n\t  rootAppName: 'core_recons',\n\n\t  setStaticPrefix: setStaticPrefix\n\t}\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar app = angular.module('lc-cover', [\n\t  'rootApp',\n\t  'add-form-m-form-m-object'\n\t])\n\n\tapp.directive('lcCover', lcIssueDirective)\n\n\tlcIssueDirective.$inject = []\n\n\tfunction lcIssueDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-cover/lc-cover.html'),\n\t    scope: true,\n\t    bindToController: {\n\t      formM: '=mfContext',\n\t      cover: '=',\n\t      onCoverChanged: '&'\n\t    },\n\t    controller: 'LcCoverDirectiveController as lcCover'\n\t  }\n\t}\n\n\tapp.controller('LcCoverDirectiveController', LcCoverDirectiveController)\n\n\tLcCoverDirectiveController.$inject = [\n\t  '$scope',\n\t  'formMCoverTypes',\n\t  '$filter',\n\t  'formFieldIsValid',\n\t  'formMObject'\n\t]\n\n\tfunction LcCoverDirectiveController($scope, formMCoverTypes, $filter, formFieldIsValid, formMObject) {\n\t  var vm = this\n\t  vm.formM = formMObject\n\t  var title = 'Register Cover'\n\t  init()\n\n\t  function init(form) {\n\t    vm.title = title\n\t    vm.coverTypes = null\n\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\t  }\n\n\t  vm.isValid = function isValid(name, validity) {\n\t    return formFieldIsValid($scope, 'coverForm', name, validity)\n\t  }\n\n\t  vm.amountGetterSetter = function (val) {\n\t    if (arguments.length) {\n\t      if (!/[\\d,\\.]+/.test(val)) formMObject.cover.amount = null\n\t      else formMObject.cover.amount = Number(val.replace(/,/g, ''))\n\t    } else return formMObject.cover.amount ? $filter('number')(formMObject.cover.amount, 2) : ''\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    formMObject.showCoverForm = vm.formM.amount && vm.formM.number && !formMObject.showCoverForm\n\n\t    if (!formMObject.showCoverForm) {\n\t      init(form)\n\t    }\n\t    else {\n\t      vm.title = 'Dismiss'\n\t      vm.coverTypes = formMCoverTypes\n\t      formMObject.cover.amount = vm.formM.amount\n\t    }\n\t  }\n\n\t  $scope.$watch(function getFormM() {return vm.formM}, function (formM) {\n\t    formMObject.coverForm = $scope.coverForm\n\t    if (formM) {\n\t      if (!formM.amount || !formM.number) {\n\t        init(formMObject.coverForm)\n\t      }\n\t    }\n\t  }, true)\n\t}\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('add-form-m')\n\n\tapp.directive('lcBid', lcBidDirective)\n\n\tlcBidDirective.$inject = []\n\n\tfunction lcBidDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-bid/lc-bid.html'),\n\t    scope: true,\n\t    controller: 'LcBidDirectiveController as lcBid'\n\t  }\n\t}\n\n\tapp.controller('LcBidDirectiveController', LcBidDirectiveController)\n\n\tLcBidDirectiveController.$inject = [\n\t  '$scope',\n\t  '$filter',\n\t  'formFieldIsValid',\n\t  'kanmiiUnderscore',\n\t  'LcBidRequest',\n\t  'xhrErrorDisplay',\n\t  'confirmationDialog',\n\t  'formMObject',\n\t  'resetForm2'\n\t]\n\n\tfunction LcBidDirectiveController($scope, $filter, formFieldIsValid, kanmiiUnderscore, LcBidRequest, xhrErrorDisplay,\n\t  confirmationDialog, formMObject, resetForm2) {\n\t  var vm = this\n\t  vm.formM = formMObject\n\t  var title = 'Make Bid Request'\n\t  init()\n\n\t  function init(form) {\n\t    vm.title = title\n\t    vm.formM.showBidForm = false\n\t    vm.formM.showEditBid = false\n\t    vm.bidToEdit = null\n\t    formMObject.bid = {}\n\n\t    if (form) resetForm2(form)\n\t  }\n\n\t  vm.isValid = function (name, validity) {\n\t    return formFieldIsValid($scope, 'bidForm', name, validity)\n\t  }\n\n\t  vm.amountGetterSetter = function (val) {\n\t    if (arguments.length) {\n\t      if (!/[\\d,\\.]+/.test(val)) vm.formM.bid.amount = null\n\t      else vm.formM.bid.amount = Number(val.replace(/,/g, ''))\n\n\t    } else return vm.formM.bid.amount ? $filter('number')(vm.formM.bid.amount, 2) : null\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    vm.formM.showBidForm = vm.formM.amount && vm.formM.number && !vm.formM.showBidForm\n\n\t    if (!vm.formM.showBidForm) {\n\t      init(form)\n\t    }\n\t    else {\n\t      vm.title = 'Dismiss'\n\t      formMObject.bid.goods_description = formMObject.goods_description\n\t      vm.formM.bid.amount = !vm.formM.existingBids.length ? formMObject.amount : null\n\t    }\n\t  }\n\n\t  vm.editBidInvalid = function editBidInvalid(form) {\n\t    if (kanmiiUnderscore.isEmpty(vm.bidToEdit)) return true\n\n\t    if (form.$invalid) return true\n\n\t    return kanmiiUnderscore.all(bidNotModified())\n\t  }\n\n\t  vm.onBidDblClick = function onBidDblClick(bid, $index) {\n\t    vm.formM.showEditBid = true\n\t    vm.formM.showBidForm = false\n\t    vm.toggleShow()\n\t    vm.bidToEdit = angular.copy(bid)\n\t    vm.bidToEdit.amount = Number(vm.bidToEdit.amount)\n\t    vm.bidToEdit.$index = $index\n\t    vm.formM.bid.amount = vm.bidToEdit.amount\n\t  }\n\n\t  vm.trashBid = function trashBid(bid, $index) {\n\t    var text = '\\n\\nApplicant: ' + bid.applicant +\n\t      '\\nForm M: ' + bid.form_m_number +\n\t      '\\nBid Amount: ' + bid.currency + ' ' + $filter('number')(bid.amount, 2)\n\n\t    var mf = '\"' + bid.form_m_number + '\"'\n\n\t    confirmationDialog.showDialog({\n\t      text: 'Sure you want to delete bid:' + text, title: 'Delete bid for ' + mf\n\t    }).then(function (answer) {\n\t      if (answer) {\n\t        LcBidRequest.delete(bid).$promise.then(bidDeleteSuccess, function bidDeleteFailure(xhr) {\n\t          xhrErrorDisplay(xhr)\n\t        })\n\t      }\n\t    })\n\n\t    function bidDeleteSuccess() {\n\t      confirmationDialog.showDialog({\n\t        text: 'Bid delete successfully:' + text,\n\t        title: 'Bid for ' + mf + ' deleted successfully',\n\t        infoOnly: true\n\t      })\n\n\t      vm.formM.existingBids.splice($index, 1)\n\t    }\n\t  }\n\n\t  vm.editBid = function editBid() {\n\t    var title = 'Edit bid \"' + vm.bidToEdit.form_m_number + '\"'\n\n\t    var ccy = formMObject.currency.code\n\t    var text = '\\n\\nForm M:           ' + vm.bidToEdit.form_m_number +\n\t      '\\nBid Amount' +\n\t      '\\n  before edit:    ' + ccy + $filter('number')(vm.bidToEdit.amount, 2) +\n\t      '\\n  after edit:     ' + ccy + $filter('number')(vm.formM.bid.amount, 2) +\n\t      '\\nGoods description' +\n\t      '\\n  before edit:    ' + vm.bidToEdit.goods_description +\n\t      '\\n\\n  after edit:     ' + vm.formM.bid.goods_description\n\n\t    confirmationDialog.showDialog({\n\t      title: title,\n\t      text: 'Are you sure you want to edit Bid:' + text\n\t    }).then(function (answer) {\n\t      if (answer) doEdit()\n\t    })\n\n\t    function doEdit() {\n\t      var bid = angular.copy(vm.bidToEdit)\n\t      bid.amount = vm.formM.bid.amount\n\t      bid.goods_description = formMObject.bid.goods_description\n\n\t      //we need to do this so this bid can show up at the bid list interface in case user wishes to download and\n\t      //send the bid to treasury\n\t      bid.requested_at = null\n\n\t      LcBidRequest.put(bid).$promise.then(function () {\n\t        confirmationDialog.showDialog({title: title, text: 'Edit successful: ' + text, infoOnly: true})\n\t        vm.formM.existingBids.splice(bid.$index, 1, bid)\n\t        init()\n\t      }, function (xhr) {\n\t        xhrErrorDisplay(xhr)\n\t      })\n\t    }\n\t  }\n\n\t  function bidNotModified() {\n\t    return {\n\t      amount: vm.bidToEdit.amount === formMObject.bid.amount,\n\t      goods_description: vm.bidToEdit.goods_description === formMObject.bid.goods_description\n\t    }\n\t  }\n\n\t  $scope.$watch(function () {return formMObject}, function onFormMObjectChanged(formM) {\n\t    formMObject.bidForm = $scope.bidForm\n\n\t    if(formM){\n\t      if (!formM.amount || !formM.number) {\n\t        init(formMObject.bidForm)\n\t      }\n\t    }\n\t  }, true)\n\t}\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('form-m-bids', [\n\t  'ui.router',\n\t  'lc-bid-request',\n\t  'rootApp',\n\t  'kanmii-URI',\n\t  'kanmii-underscore',\n\t  'form-m-service'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\tbidURLConfig.$inject = ['$stateProvider']\n\tfunction bidURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.bids', {\n\n\t      kanmiiTitle: 'Bids',\n\n\t      views: {\n\t        bids: {\n\t          template: __webpack_require__(11),\n\n\t          controller: 'BidRequestController as bidHome'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('BidRequestController', BidRequestController)\n\tBidRequestController.$inject = [\n\t  'LcBidRequest',\n\t  '$scope',\n\t  '$http',\n\t  'kanmiiUri',\n\t  'urls',\n\t  'kanmiiUnderscore',\n\t  'formatDate',\n\t  '$timeout',\n\t  '$q',\n\t  'FormM'\n\t]\n\tfunction BidRequestController(LcBidRequest, $scope, $http, kanmiiUri, urls, kanmiiUnderscore, formatDate, $timeout, $q,\n\t  FormM) {\n\t  var vm = this;\n\n\t  initialize()\n\t  function initialize() {\n\t    vm.newBid = null\n\n\t    /**\n\t     * When the search-bid directive returns, the result is propagated into this model\n\t     * @type {null|object}\n\t     */\n\t    vm.searchedBidResult = null\n\n\t    vm.selectedBids = {}\n\n\t    vm.selectedDownloadedBids = {}\n\n\t    /**\n\t     * The bids retrieved from backend. Will contain a list of bids and pagination hooks for\n\t     * retrieving the next and previous sets of bids. This model is used by the display directive\n\t     * to display the bids in a table\n\t     * @type {object}\n\t     */\n\t    vm.bidRequests = []\n\t    vm.paginationHooks = {}\n\t    LcBidRequest.pending().$promise.then(function(data) {\n\t      updateBids(data)\n\t    })\n\t  }\n\n\t  /**\n\t   * When a row of the pending bids table is clicked, this function is invoked with the bid at that row\n\t   * @param {{}} bid - the bid object at the row that was double clicked\n\t   */\n\t  vm.rowDblClickCb = function rowDblClickCb(bid) {\n\t    FormM.getPaginated({number: bid.form_m_number}).$promise.then(function(data) {\n\t      var results = data.results\n\t      if (results.length && results.length === 1) {\n\t        $scope.goToFormM(results[0])\n\t      }\n\t    })\n\t  }\n\n\t  /**\n\t   * The table caption for the 'model-table' directive\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Pending Bids'\n\n\t  /**\n\t   * Will be invoked when any of the pager links is clicked in other to get the bids at the pager url\n\t   * @type {getBidsOnNavigation}\n\t   */\n\t  vm.getBidsOnNavigation = getBidsOnNavigation\n\t  function getBidsOnNavigation(linkUrl) {\n\t    $http.get(linkUrl).then(function(response) {\n\t      updateBids(response.data)\n\t    })\n\t  }\n\n\t  $scope.$watch(function searchedBidResult() {return vm.searchedBidResult},\n\t                function searchedBidResultChanged(searchedBidResult) {\n\t                  if (searchedBidResult) {\n\t                    updateBids(searchedBidResult)\n\t                  }\n\t                })\n\n\t  /**\n\t   * Update the bid collection and pagination hooks\n\t   * @param {object} data\n\t   */\n\t  function updateBids(data) {\n\t    vm.bidRequests = data.results\n\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\n\t  }\n\n\t  var url = kanmiiUri(urls.lcBidRequestDownloadUrl)\n\t  vm.downloadUrl = function downloadUrl() {\n\t    if (!kanmiiUnderscore.isEmpty(vm.selectedBids)) {\n\t      var search = []\n\n\t      kanmiiUnderscore.each(vm.selectedBids, function(selection, bidId) {\n\t        if (selection === true) search.push(bidId)\n\t      })\n\n\t      return url.search({bid_ids: search}).toString()\n\t    }\n\t  }\n\n\t  vm.downloadBtnDisabled = function downloadBtnDisabled() {\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedBids)) return true\n\n\t    return !kanmiiUnderscore.any(vm.selectedBids, function(selectionVal) {\n\t      return selectionVal === true\n\t    })\n\t  }\n\n\t  vm.onSelectedBidsChanged = onSelectedBidsChanged\n\t  function onSelectedBidsChanged(newSelections) {\n\t    if (newSelections && !kanmiiUnderscore.isEmpty(newSelections)) {\n\t      kanmiiUnderscore.each(newSelections, function(checked, bidId) {\n\t        var bid = getBidFromId(bidId)\n\n\t        if (bid && bid.downloaded) vm.selectedDownloadedBids[bidId] = checked\n\t      })\n\t    }\n\t  }\n\n\t  vm.markRequestedBtnDisabled = function markRequestedBtnDisabled() {\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedDownloadedBids)) return true\n\n\t    //return true if un-downloaded bid is checked\n\t    //return false if there is at least one downloaded bid checked\n\t    var anyNoneDownloadedChecked = kanmiiUnderscore.any(vm.selectedBids, function(checked, bidId) {\n\t      return !kanmiiUnderscore.has(vm.selectedDownloadedBids, bidId) && checked === true\n\t    })\n\n\t    if (anyNoneDownloadedChecked) return true\n\t    else return !kanmiiUnderscore.any(vm.selectedDownloadedBids, function(checked) {\n\t      return checked === true\n\t    })\n\t  }\n\n\t  vm.markRequested = function markRequested() {\n\t    var editedBids = []\n\n\t    kanmiiUnderscore.each(vm.selectedDownloadedBids, function(checked, bidId) {\n\t      if (!checked) return\n\n\t      var bid = getBidFromId(bidId)\n\t      if (bid) {\n\t        bid.requested_at = formatDate(new Date())\n\t        //LcBidRequest.put(bid).$promise.then(bidEditSuccess, bidEditFailure)\n\t        editedBids.push(LcBidRequest.put(bid).$promise)\n\t      }\n\t    })\n\n\t    if (editedBids.length) {\n\t      $q.all(editedBids).then(function() {\n\t        initialize()\n\t      })\n\t    }\n\t  }\n\n\t  vm.refreshPage = function refreshPage() {\n\t    $timeout(function() {initialize()}, 3000)\n\t  }\n\n\t  function getBidFromId(bidId) {\n\t    for (var index = 0; index < vm.bidRequests.length; index++) {\n\t      var bid = vm.bidRequests[index]\n\t      if (bid.id === +bidId) return bid\n\t    }\n\n\t    return null\n\t  }\n\t}\n\n\t__webpack_require__(12)\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"action-buttons\\\" style=\\\"text-align: right;margin-bottom: 30px;\\\"><button class=\\\"btn btn-info\\\" ng-click=\\\"bidHome.searchBids()\\\">Search Bid Requests</button> <a class=\\\"btn btn-success\\\" ng-href=\\\"{$bidHome.downloadUrl()$}\\\" ng-disabled=\\\"bidHome.downloadBtnDisabled()\\\" ng-click=\\\"bidHome.refreshPage()\\\">Download</a> <button type=\\\"button\\\" name=\\\"bid-home-mark-as-requested-btn\\\" class=\\\"btn btn-success\\\" ng-click=\\\"bidHome.markRequested()\\\" ng-disabled=\\\"bidHome.markRequestedBtnDisabled()\\\">Mark as requested</button></div><div display-pending-bid=\\\"\\\" pending-bids=\\\"bidHome.bidRequests\\\" pager-object=\\\"bidHome.paginationHooks\\\" update-collection=\\\"bidHome.getBidsOnNavigation(linkUrl)\\\" pagination-size=\\\"20\\\" selected-bids=\\\"bidHome.selectedBids\\\" on-selected-bids-changed=\\\"bidHome.onSelectedBidsChanged(newSelections)\\\" on-row-dbl-click=\\\"bidHome.rowDblClickCb(bid)\\\"></div></div>\";\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar lcAppCommons = __webpack_require__(5)\n\n\tvar app = angular.module('form-m-bids')\n\n\tapp.directive('displayPendingBid', displayPendingBidDirective)\n\tfunction displayPendingBidDirective() {\n\t  return {\n\t    restrict: 'EA',\n\n\t    templateUrl: lcAppCommons.buildUrl('form-m/bids/display-pending-bid/display-pending-bid.html'),\n\n\t    scope: true,\n\n\t    bindToController: {\n\t      bids: '=pendingBids',\n\n\t      updateCollection: '&',\n\n\t      onSelectedBidsChanged: '&',\n\n\t      pager: '=pagerObject',\n\n\t      onDblClick: '&onRowDblClick',\n\n\t      paginationSize: '=',\n\n\t      selectedBids: '='\n\t    },\n\n\t    controller: 'displayPendingBidDirectiveCtrl as bidTable'\n\t  }\n\t}\n\n\tapp.controller('displayPendingBidDirectiveCtrl', displayPendingBidDirectiveCtrl)\n\n\tdisplayPendingBidDirectiveCtrl.$inject = [\n\t  'pagerNavSetUpLinks',\n\t  '$scope',\n\t  'kanmiiUnderscore'\n\t]\n\n\tfunction displayPendingBidDirectiveCtrl(pagerNavSetUpLinks, scope, kanmiiUnderscore) {\n\t  var vm = this //jshint -W040\n\n\t  vm.selectedBids = {}\n\n\t  function setUpLinks(next, prev, count) {\n\n\t    var numLinks = Math.ceil(count / vm.paginationSize)\n\n\t    var linkProperties = pagerNavSetUpLinks(next, prev, numLinks)\n\n\t    vm.nextPageLink = next\n\t    vm.prevPageLink = prev\n\n\t    vm.linkUrls = linkProperties.linkUrls\n\t    vm.currentLink = linkProperties.currentLink\n\n\t    /**\n\t     * The row index offset. The row begin at one so in the view, we do `$index + 1` for row number. However, as we\n\t     * move from page to page, the `$index` view value is reset back to zero, so that row number always begin at 1.\n\t     * Since we know what the page number is (this.currentLink), we calculate the offset for the row (as an arithmetic\n\t     * progression)\n\t     * @type {number}\n\t     */\n\t    vm.rowIndexOffset = (vm.currentLink - 1) * vm.paginationSize\n\t  }\n\n\t  vm.onUpdateCollection = onUpdateCollection\n\t  function onUpdateCollection(linkUrl) {\n\t    vm.updateCollection({linkUrl: linkUrl})\n\t  }\n\n\t  scope.$watch(function getPager() {return vm.pager}, function updatedPager(pager) {\n\t    if (pager && !kanmiiUnderscore.isEmpty(pager)) {\n\t      setUpLinks(pager.next, pager.previous, pager.count)\n\t    }\n\t  })\n\n\t  function deselectAllBids() {\n\t    vm.bids.forEach(function(bid) {\n\t      bid.highlighted = false\n\t    })\n\t  }\n\n\t  vm.modelRowClicked = modelRowClicked\n\t  function modelRowClicked(model) {\n\t    if (!model.downloaded) {\n\t      deselectAllBids()\n\n\t      //only highlight a row if no row is checked and the row model is not downloaded previously\n\t      model.highlighted = !kanmiiUnderscore.any(vm.bids, function(bid) {\n\t        return bid.checked\n\t      })\n\t    }\n\t  }\n\n\t  vm.onRowDblClick = function onRowDblClick(bid) {\n\t    vm.onDblClick({bid: bid})\n\t  }\n\n\t  scope.$watch(function getSelectedBids() {return vm.selectedBids}, function updatedSelectedBids(selectedBids) {\n\t    vm.onSelectedBidsChanged({newSelections: selectedBids})\n\n\t    if (selectedBids && !kanmiiUnderscore.isEmpty(selectedBids)) {\n\n\t      kanmiiUnderscore.each(selectedBids, function(checked, id) {\n\n\t        for (var bidIndex = 0; bidIndex < vm.bids.length; bidIndex++) {\n\t          var bid = vm.bids[bidIndex]\n\t          if (bid.id === +id) {\n\t            bid.checked = checked\n\t          }\n\t        }\n\n\t      })\n\n\t      vm.toggleAll = kanmiiUnderscore.all(vm.bids, function(bid) {\n\t        return bid.checked === true\n\t      })\n\t    }\n\t  }, true)\n\n\t  vm.toggleAll = false\n\n\t  vm.toggleAllClicked = function toggleAllClicked() {\n\t    vm.bids.forEach(function(bid) {\n\t      vm.selectedBids[bid.id] = vm.toggleAll\n\t    })\n\t  }\n\t}\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('list-form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'form-m-service',\n\t   'form-m-search',\n\t   'model-table',\n\t   'customer',\n\t   'add-form-m'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(formMListURLConfig)\n\tformMListURLConfig.$inject = ['$stateProvider']\n\tfunction formMListURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.list', {\n\t      kanmiiTitle: 'Form M List',\n\n\t      views: {\n\t        'listFormM': {\n\t          template: __webpack_require__(14),\n\n\t          controller: 'FormMListController as formMList'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('FormMListController', FormMListController)\n\tFormMListController.$inject = ['FormM', '$scope', 'formMModelManager', '$http']\n\tfunction FormMListController(FormM, scope, formMModelManager, $http) {\n\t  var vm = this\n\n\t  /**\n\t   * The model manager will be used by the 'model-table' directive to manage the collection of form Ms retrieved\n\t   * from the server\n\t   * @type {[]}\n\t   */\n\t  vm.modelManager = formMModelManager\n\n\t  vm.modelRowDblClick = function modelRowDblClick(formM) {\n\t    scope.goToFormM(formM)\n\t  }\n\n\t  /**\n\t   * Update the form Ms collection and pagination hooks\n\t   * @param {object} data\n\t   */\n\t  function updateFormMs(data) {\n\t    vm.formMs = data.results\n\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\n\t  }\n\n\t  /**\n\t   * The object containing the hooks for paging through the form Ms collection\n\t   * @type {Array}\n\t   */\n\t  vm.paginationHooks = []\n\n\t  /**\n\t   * The form Ms retrieved from backend. Will contain a list of form Ms and pagination hooks for\n\t   * retrieving the next and previous sets of form Ms. This model is used by the display directive\n\t   * to display the form Ms in a table\n\t   * @type {[]}\n\t   */\n\t  vm.formMs = []\n\t  FormM.getNoLcAttached().$promise.then(function(data) {\n\t    updateFormMs(data)\n\t  })\n\n\t  /**\n\t   * The table caption for the 'model-table' directive\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Form M (LC Not Established)'\n\n\t  vm.getFormMCollectionOnNavigation = getFormMCollectionOnNavigation\n\t  /**\n\t   * when we navigate through the form Ms, we make an http request to the link contained in the navigation ui\n\t   * @param {string} linkUrl - the url (href) of the link clicked by user\n\t   */\n\t  function getFormMCollectionOnNavigation(linkUrl) {\n\t    $http.get(linkUrl).then(function(response) {\n\t      updateFormMs(response.data)\n\t    })\n\t  }\n\n\t  /**\n\t   * When the search-form-m directive returns, the result is propagated into this model\n\t   * @type {null|object}\n\t   */\n\t  vm.searchedFormMResult = null\n\n\t  scope.$watch(function getNewFormM() {return vm.searchedFormMResult}, function(searchedFormMResult) {\n\t    if (searchedFormMResult) updateFormMs(searchedFormMResult)\n\t  })\n\t}\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"manage-form-m-tab-content\\\"><div class=\\\"action-buttons pull-right\\\"><button class=\\\"btn btn-info\\\" search-form-m=\\\"\\\" search-form-m-result=\\\"formMList.searchedFormMResult\\\">Search Form M</button></div><div model-table=\\\"\\\" model-collection=\\\"formMList.formMs\\\" table-model-manager=\\\"::formMList.modelManager\\\" table-caption=\\\"::formMList.tableCaption\\\" pagination-size=\\\"20\\\" update-collection=\\\"formMList.getFormMCollectionOnNavigation(linkUrl)\\\" pager-object=\\\"formMList.paginationHooks\\\" on-row-dbl-click-callback=\\\"formMList.modelRowDblClick(rowModel)\\\"></div></div>\";\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-detailed-or-uploaded-form-m', [\n\t  'kanmii-underscore',\n\t  'upload-form-m-service',\n\t  'toggle-dim-element',\n\t  'form-m-service'\n\t])\n\n\tapp.factory('SearchDetailedOrUploadedFormMService', SearchDetailedOrUploadedFormMService)\n\tSearchDetailedOrUploadedFormMService.$inject = [\n\t  'UploadFormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'FormM'\n\t]\n\tfunction SearchDetailedOrUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, FormM) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var mf = submittedSearchParams.mf\n\n\t    FormM.getPaginated({number: mf}).$promise.then(function(data) {\n\t      if (data.count === 1) {\n\t        deferred.resolve({detailed: data.results[0]})\n\n\t      } else UploadFormM.query({mf: mf}).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    }, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      if (data.length === 1) deferred.resolve({uploaded: data[0]})\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal() {\n\t      var deferred = $q.defer()\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl(\n\t          'form-m/search-detailed-or-uploaded-form-m/search-detailed-or-uploaded-form-m-modal.html'),\n\n\t        controller: 'SearchDetailedOrUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 500,\n\t          minHeight: 200,\n\t          title: 'Search Form M',\n\n\t          close: function() {\n\t            modal.close.then()\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchDetailedOrUploadedFormMServiceModalCtrl', SearchDetailedOrUploadedFormMServiceModalCtrl)\n\tSearchDetailedOrUploadedFormMServiceModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element'\n\t]\n\tfunction SearchDetailedOrUploadedFormMServiceModalCtrl(close, resetForm, element) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\t}\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('form-m-search-service', ['kanmii-underscore', 'toggle-dim-element'])\n\n\tapp.factory('SearchFormMService', SearchFormMService)\n\tSearchFormMService.$inject = [\n\t  'FormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'ToggleDimElement'\n\t]\n\tfunction SearchFormMService(FormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal(config) {\n\t      var deferred = $q.defer()\n\t      config = config || {}\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl('form-m/search-form-m-service/search-form-m-modal.html'),\n\t        controller: 'SearchFormMServiceModalCtrl as searchFormMModal',\n\t        inputs: {\n\t          uiOptions: config.uiOptions\n\t        }\n\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 450,\n\t          title: 'Search Form M',\n\n\t          open: function() {\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb) //jshint -W030\n\t          },\n\n\t          close: function() {\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchFormMServiceModalCtrl', SearchFormMServiceModalCtrl)\n\tSearchFormMServiceModalCtrl.$inject = [\n\t  'uiOptions',\n\t  'close',\n\t  'resetForm',\n\t  '$element',\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency'\n\t]\n\tfunction SearchFormMServiceModalCtrl(uiOptions, close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  vm.displayLcIssueUI = false\n\n\t  if (uiOptions) {\n\t    vm.displayLcIssueUI = uiOptions.displayLcIssueUI\n\t  }\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t    vm.showLcIssueContainer = false\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\n\t    vm.selectedLcIssues = {}\n\t  }\n\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\n\t  function toggleShowLcIssueContainer() {\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\n\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('form-m-search', ['kanmii-underscore'])\n\n\tapp.directive('searchFormM', searchFormMDirective)\n\tsearchFormMDirective.$inject = ['ModalService', 'kanmiiUnderscore']\n\tfunction searchFormMDirective(ModalService, kanmiiUnderscore) {\n\t  return {\n\t    restrict: 'A',\n\n\t    link: function(scope, elm, attributes, self) {\n\t      elm\n\t        .css({cursor: 'pointer'})\n\t        .bind('click', function() {\n\t                ModalService.showModal({\n\t                  template: __webpack_require__(18),\n\n\t                  controller: 'SearchFormMModalCtrl as searchFormMModal'\n\n\t                }).then(function(modal) {\n\t                  modal.element.dialog({\n\t                    dialogClass: 'no-close',\n\t                    modal: true,\n\t                    minWidth: 600,\n\t                    minHeight: 450,\n\t                    title: 'Search Form M'\n\t                  })\n\n\t                  modal.close.then(function(submittedSearchParams) {\n\t                    if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t                      self.searchFormM(submittedSearchParams)\n\t                    }\n\t                  })\n\t                })\n\t              })\n\t    },\n\n\t    controller: 'SearchFormMDirectiveCtrl as searchFormM',\n\n\t    scope: {},\n\n\t    bindToController: {\n\t      searchFormMResult: '='\n\t    }\n\t  }\n\t}\n\n\tapp.controller('SearchFormMDirectiveCtrl', SearchFormMDirectiveCtrl)\n\tSearchFormMDirectiveCtrl.$inject = ['FormM', 'xhrErrorDisplay']\n\tfunction SearchFormMDirectiveCtrl(FormM, xhrErrorDisplay) {\n\t  var vm = this\n\n\t  vm.searchFormM = searchFormM\n\t  function searchFormM(submittedSearchParams) {\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      vm.searchFormMResult = data\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    }\n\t  }\n\t}\n\n\tapp.controller('SearchFormMModalCtrl', SearchFormMModalCtrl)\n\tSearchFormMModalCtrl.$inject = ['close', 'resetForm', '$element', 'getTypeAheadCustomer', 'getTypeAheadCurrency']\n\tfunction SearchFormMModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t    vm.showLcIssueContainer = false\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\n\t    vm.selectedLcIssues = {}\n\t  }\n\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\n\t  function toggleShowLcIssueContainer() {\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\n\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=\\\"search-form-m-root-container\\\" class=\\\"search-form-m-root-container\\\"><form novalidate=\\\"\\\" class=\\\"form-horizontal\\\" ng-submit=\\\"searchFormMModal.submitSearchParams(searchFormMModal.searchParams)\\\" name=\\\"searchFormMModalForm\\\"><fieldset class=\\\"search-form-m-container\\\" style=\\\"position: relative; padding: 7px;\\\"><div class=\\\"form-group form-m-number-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"form-m-number\\\">Form M Number</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" maxlength=\\\"13\\\" id=\\\"form-m-number\\\" min=\\\"0\\\" ng-pattern=\\\"/(?:mf)?\\\\d{4,11}/i\\\" ng-model=\\\"searchFormMModal.searchParams.number\\\"></div></div><div class=\\\"form-group applicant-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"applicant\\\">Applicant</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" min=\\\"3\\\" id=\\\"applicant\\\" ng-model=\\\"searchFormMModal.searchParams.applicant\\\" typeahead-min-length=\\\"3\\\" uib-typeahead=\\\"applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)\\\"></div></div><div class=\\\"form-group currency-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"currency\\\">Currency</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"currency\\\" maxlength=\\\"3\\\" ng-model=\\\"searchFormMModal.searchParams.currency\\\" uib-typeahead=\\\"currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)\\\" typeahead-min-length=\\\"2\\\"></div></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"amount\\\">Amount</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"amount\\\" min=\\\"0\\\" ng-model=\\\"searchFormMModal.searchParams.amount\\\" number-format=\\\"\\\" ng-pattern=\\\"/^\\\\d[\\\\d,]*(?:\\\\.\\\\d*)?$/\\\"></div></div></fieldset><div class=\\\"form-m-lc-issue-container\\\"><span ng-click=\\\"searchFormMModal.toggleShowLcIssueContainer()\\\" class=\\\"form-m-lc-issue-toggle-show\\\"><span ng-class=\\\"['glyphicon', {'glyphicon-chevron-down': !searchFormMModal.showLcIssueContainer, 'glyphicon-chevron-up': searchFormMModal.showLcIssueContainer}]\\\"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class=\\\"form-m-search-lc-issue\\\" ng-show=\\\"searchFormMModal.showLcIssueContainer\\\"><lc-issue lc-issue-show=\\\"searchFormMModal.showLcIssueContainer\\\" lc-issues-selected=\\\"searchFormMModal.selectedLcIssues\\\"></lc-issue></div></div><div class=\\\"row search-form-m-form-control\\\"><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: left\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.reset(searchFormMModalForm)\\\">Reset</span></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"searchFormMModalForm.$invalid\\\">Search Form M</button></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: right\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.close()\\\">Close</span></div></div></form></div>\";\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(20)\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('upload-form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'upload-form-m-service'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(uploadFormMURLConfig)\n\tuploadFormMURLConfig.$inject = ['$stateProvider']\n\tfunction uploadFormMURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.upload', {\n\t      kanmiiTitle: 'Form M Upload',\n\n\t      views: {\n\t        'uploadFormM': {\n\t          template: __webpack_require__(21),\n\n\t          controller: 'UploadFormMController as uploadFormM'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('UploadFormMController', UploadFormMController)\n\n\tUploadFormMController.$inject = ['UploadFormM', '$timeout']\n\n\tfunction UploadFormMController(UploadFormM, $timeout) {\n\t  var vm = this\n\n\t  initial()\n\t  function initial() {\n\t    vm.formMIsUploading = false\n\t    vm.uploadIndicationText = 'Uploading Form Ms.........please wait'\n\t    vm.uploadFormMText = ''\n\t  }\n\n\t  vm.uploadFormM = function uploadFormM(text) {\n\t    vm.formMIsUploading = true\n\n\t    var uploaded = [],\n\t      row\n\n\t    function parseDate(dt) {\n\t      return '20' + dt.slice(6) + '-' + dt.slice(3, 5) + '-' + dt.slice(0, 2)\n\t    }\n\n\t    Papa.parse(text, {\n\t      delimiter: '\\t',\n\t      header: false,\n\t      step: function(data) {\n\t        row = data.data[0]\n\n\t        uploaded.push({\n\t          ba: row[0],\n\t          mf: row[1],\n\t          ccy: row[2],\n\t          applicant: row[3],\n\t          fob: row[5].replace(/,/g, ''),\n\t          submitted_at: parseDate(row[6]),\n\t          validated_at: parseDate(row[7])\n\t        })\n\t      }\n\t    })\n\n\t    UploadFormM.save({\n\t      uploaded: uploaded,\n\t      likely_duplicates: true\n\t    })\n\t      .$promise\n\t      .then(formMCreatedSuccess, formMCreatedError)\n\n\t    function formMCreatedSuccess(data) {\n\t      var creationResult = data.created_data,\n\t        numCreatedNow = creationResult.length,\n\t        numCreatedPreviously = uploaded.length - numCreatedNow\n\n\t      vm.uploadIndicationText = 'Done Upload form Ms\\n' +\n\t                                '=========================\\n' +\n\t                                'Total new form Ms created: ' + numCreatedNow + '\\n'\n\t      if (numCreatedPreviously) {\n\t        vm.uploadIndicationText += ('Total not created (because uploaded previously): ' + numCreatedPreviously)\n\t      }\n\n\t      $timeout(function() {\n\t        initial()\n\t      }, 4500)\n\t    }\n\n\t    function formMCreatedError(xhr) {\n\t      console.log(xhr);\n\t    }\n\t  }\n\t}\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-uploaded-form-m', [\n\t  'kanmii-underscore',\n\t  'upload-form-m-service',\n\t  'toggle-dim-element'\n\t])\n\n\tapp.factory('SearchUploadedFormMService', SearchUploadedFormMService)\n\tSearchUploadedFormMService.$inject = [\n\t  'UploadFormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q'\n\t]\n\tfunction SearchUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    UploadFormM.query(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal() {\n\t      var deferred = $q.defer()\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl(\n\t          'form-m/upload-form-m/search-uploaded-form-m/search-uploaded-form-m-modal.html'),\n\n\t        controller: 'SearchUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 250,\n\t          title: 'Search Uploaded Form M',\n\n\t          close: function() {\n\t            modal.close.then()\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchUploadedFormMServiceModalCtrl', SearchUploadedFormMServiceModalCtrl)\n\tSearchUploadedFormMServiceModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element'\n\t]\n\tfunction SearchUploadedFormMServiceModalCtrl(close, resetForm, element) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\t}\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"upload-form-m-tab-content\\\"><form class=\\\"upload-form-m-form\\\" role=\\\"form\\\" name=\\\"uploadFormMForm\\\" ng-submit=\\\"uploadFormM.uploadFormM(uploadFormM.uploadFormMText)\\\"><div class=\\\"form-group upload-form-m-text-group\\\"><pre class=\\\"upload-form-m-indicator\\\" ng-show=\\\"uploadFormM.formMIsUploading\\\">\\n        {$uploadFormM.uploadIndicationText$}\\n      </pre><label for=\\\"upload-form-m\\\" class=\\\"control-label sr-only\\\">Copy and paste form M</label> <textarea name=\\\"upload-form-m\\\" id=\\\"upload-form-m\\\" required=\\\"\\\" ng-model=\\\"uploadFormM.uploadFormMText\\\" ng-class=\\\"['form-control', 'upload-form-m', {'form-m-is-uploading':uploadFormM.formMIsUploading}]\\\" ng-readonly=\\\"uploadFormM.formMIsUploading\\\"></textarea></div><div class=\\\"upload-form-m-submit\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-success\\\" ng-disabled=\\\"uploadFormMForm.$invalid || uploadFormM.formMIsUploading\\\">Upload</button></div></form></div>\";\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div uib-tabset=\\\"\\\"><div uib-tab=\\\"\\\" ng-repeat=\\\"(key, tab) in tabs\\\" heading=\\\"{$tab.title$}\\\" active=\\\"tab.active\\\" select=\\\"tab.select()\\\"><div class=\\\"\\\" ui-view=\\\"{$tab.viewName$}\\\"></div></div></div></div>\";\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('lc', [\n\t  'ui.router',\n\t  'model-table',\n\t  'rootApp',\n\t  'search-lc',\n\t  'lc-detail'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\tbidURLConfig.$inject = ['$stateProvider']\n\tfunction bidURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('lc', {\n\t      url: '/lc',\n\n\t      kanmiiTitle: 'Letter of credit',\n\n\t      templateUrl: __webpack_require__(5).buildUrl('lc/lc.html'),\n\n\t      controller: 'LetterOfCreditController as lcHome'\n\t    })\n\t}\n\n\tapp.controller('LetterOfCreditController', LetterOfCreditController)\n\tLetterOfCreditController.$inject = ['SearchLc', '$state']\n\tfunction LetterOfCreditController(SearchLc, $state) {\n\t  var vm = this\n\n\t  vm.searchLc = function searchLc() {\n\t    SearchLc.searchWithModal().then(function(data) {\n\t      var results = data.results\n\n\t      if (results.length) {\n\t        if (results.length === 1) {\n\t          var lc = results[0]\n\t          $state.go('lc_detail', {lc_number: lc.lc_number, lc: lc})\n\t        }\n\t      }\n\t    })\n\t  }\n\t}\n\n\n\t__webpack_require__(24)\n\t__webpack_require__(25)\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('lc-detail', [\n\t  'ui.router',\n\t  'rootApp',\n\t  'lc-service',\n\t  'lc-issue-service',\n\t  'kanmii-underscore',\n\t  'customer'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\n\tbidURLConfig.$inject = ['$stateProvider']\n\n\tfunction bidURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('lc_detail', {\n\t      url: '/lc/:lc_number',\n\n\t      params: {lc: null},\n\n\t      kanmiiTitle: 'Letter of credit',\n\n\t      templateUrl: __webpack_require__(5).buildUrl('lc/lc-detail/lc-detail.html'),\n\n\t      controller: 'LetterOfCreditDetailController as lcDetail'\n\t    })\n\t}\n\n\tapp.controller('LetterOfCreditDetailController', LetterOfCreditDetailController)\n\n\tLetterOfCreditDetailController.$inject = [\n\t  '$stateParams',\n\t  'LetterOfCredit',\n\t  '$state',\n\t  'getTypeAheadCustomer',\n\t  '$filter',\n\t  'getTypeAheadLCIssue',\n\t  'LCIssueConcrete',\n\t  'kanmiiUnderscore',\n\t  'xhrErrorDisplay',\n\t  'formatDate',\n\t  'Customer',\n\t  'formMAttributesVerboseNames'\n\t]\n\n\tfunction LetterOfCreditDetailController($stateParams, LetterOfCredit, $state, getTypeAheadCustomer, $filter,\n\t  getTypeAheadLCIssue, LCIssueConcrete, kanmiiUnderscore, xhrErrorDisplay, formatDate, Customer,\n\t  formMAttributesVerboseNames) {\n\t  var vm = this\n\n\t  initialize()\n\n\t  function initialize() {\n\t    if ($stateParams.lc) {\n\t      vm.lc = $stateParams.lc\n\t      vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\n\t    }\n\n\t    else {\n\t      LetterOfCredit.getPaginated({lc_number: $stateParams.lc_number}).$promise.then(function(data) {\n\t        if (data.count) {\n\t          vm.lc = data.results[0]\n\t          vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\n\t        }\n\n\t        else $state.go('lc')\n\t      })\n\t    }\n\n\t    vm.lcForm = {}\n\t    vm.alertIsShown = false\n\t    vm.issue = {}\n\n\t    function getIssuesNotClosed(issues) {\n\t      if (!issues) return []\n\n\t      return issues.filter(function(issue) {\n\t        return !issue.closed_at\n\t      })\n\t    }\n\t  }\n\n\t  vm.issueDateGetterSetter = function issueDateGetterSetter() {\n\t    if (vm.lc && vm.lc.estb_date) return $filter('date')(vm.lc.estb_date, 'dd-MMM-yyyy')\n\t  }\n\n\t  vm.expiryDateGetterSetter = function expiryDateGetterSetter() {\n\t    if (vm.lc && vm.lc.expiry_date) return $filter('date')(vm.lc.expiry_date, 'dd-MMM-yyyy')\n\t  }\n\n\t  vm.saveIssue = function saveIssue(issue, form) {\n\t    if (issue && !kanmiiUnderscore.isEmpty(issue)) {\n\t      var postData = {\n\t        issue: issue.issue.url,\n\t        mf: vm.lc.mf,\n\t        lc_number: vm.lc.lc_number,\n\t        get_or_create_form_m: true\n\t      }\n\n\t      var applicant = issue.applicant\n\n\t      if (applicant && !kanmiiUnderscore.isEmpty(applicant)) {\n\t        postData.form_m_data = {\n\t          applicant: applicant.url,\n\t          currency: vm.lc.ccy_data.url,\n\t          amount: vm.lc.lc_amt_org_ccy,\n\t          lc: vm.lc.url,\n\t          number: vm.lc.mf\n\t        }\n\n\t      }\n\n\t      LCIssueConcrete.save(postData).$promise.then(saveSuccess, saveError)\n\t    }\n\n\t    function saveSuccess(data) {\n\t      vm.lcIssues.unshift({\n\t        issue_text: data.issue_text,\n\t        issue: data.issue,\n\t        id: data.id,\n\t        mf: data.mf\n\t      })\n\n\t      vm.issue = {}\n\n\t      if (!vm.lc.applicant_data) { vm.lc.applicant_data = applicant}\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    function saveError(xhr) {\n\t      var transform = null\n\t      if (xhr.data.form_m_creation_errors) {\n\t        transform = formMAttributesVerboseNames\n\t        delete xhr.data.form_m_creation_errors\n\t      }\n\t      xhrErrorDisplay(xhr, transform)\n\t    }\n\n\t  }\n\n\t  vm.closeIssue = function closeIssue(issue) {\n\t    issue.closed_at = formatDate(new Date())\n\t    LCIssueConcrete.put(issue).$promise.then(function() {\n\n\t      vm.lcIssues = vm.lcIssues.filter(function(anIssue) {\n\t        return anIssue.id !== issue.id\n\t      })\n\n\t    }, function(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    })\n\t  }\n\n\t  vm.replaceLc = function replaceLc(newLcNumber) {\n\t    LetterOfCredit.getPaginated({lc_number: newLcNumber}).$promise.then(function(data) {\n\t      if (data.count) {\n\t        var lc = data.results[0]\n\n\t        $state.go('.', {lc_number: lc.lc_number, lc: lc})\n\n\t      } else vm.alertIsShown = true\n\t    })\n\t  }\n\n\t  vm.replaceLcFormInvalid = function replaceLcFormInvalid(formInvalid, newLcNumber) {\n\t    return formInvalid || vm.lc.lc_number.toLowerCase().indexOf(newLcNumber.toLowerCase()) !== -1\n\t  }\n\n\t  vm.customerAdded = function customerAdded(customer) {\n\t    vm.issue.applicant = customer\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\n\t  vm.getIssue = function getIssue(text) {\n\t    return getTypeAheadLCIssue({text: text, exclude_form_m_issues: vm.lc.mf})\n\t  }\n\n\t  vm.addCustomer = function addCustomer() {\n\t    Customer.save({name: vm.lc.applicant}).$promise.then(function(data) {\n\t      vm.issue.applicant = data\n\t      vm.lc.applicant_data = data\n\t    })\n\t  }\n\n\t  vm.closeAlert = function closeAlert() {\n\t    vm.alertIsShown = false\n\t  }\n\t}\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-lc', [\n\t  'kanmii-underscore',\n\t  'toggle-dim-element',\n\t  'form-m-service',\n\t  'lc-service'\n\t])\n\n\tapp.factory('SearchLc', SearchLc)\n\tSearchLc.$inject = [\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'ToggleDimElement',\n\t  'LetterOfCredit'\n\t]\n\tfunction SearchLc(xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement, LetterOfCredit) {\n\n\t  function searchLc(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    LetterOfCredit.getPaginated(searchParams).$promise.then(searchLcSuccess, searchLcError)\n\n\t    function searchLcSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchLcError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal(config) {\n\t      var deferred = $q.defer()\n\t      config = config || {}\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl('lc/search-lc/search-lc.html'),\n\t        controller: 'SearchLcModalCtrl as searchLcModal',\n\t        inputs: {\n\t          uiOptions: config.uiOptions\n\t        }\n\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 450,\n\t          title: 'Search Letter of credit',\n\n\t          open: function() {\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb)\n\t          },\n\n\t          close: function() {\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchLc(submittedSearchParams))\n\t          }\n\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchLcModalCtrl', SearchLcModalCtrl)\n\tSearchLcModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element',\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency'\n\t]\n\tfunction SearchLcModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"form-m-home-action-buttons btn-group-vertical\\\" role=\\\"group\\\"><a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"lc\\\">Letter of credit</a> <a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"form_m\\\">Form M</a></div></div>\";\n\n/***/ }\n/******/ ]);"],"sourceRoot":"/source/"}