{"version":3,"sources":["app.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","formMRootAppURLConfig","$stateProvider","$urlRouterProvider","otherwise","state","url","kanmiiTitle","template","rootCommons","app","angular","config","interpolateProviderConfig","run","$rootScope","$state","$stateParams","$inject","buildUrl","appName","fsPath","staticPrefix","setStaticPrefix","addIconSrc","$interpolateProvider","startSymbol","endSymbol","rootAppName","lcCommons","formMStateURLConfig","params","detailedFormM","showSummary","views","addFormM","templateUrl","controller","AddFormMStateController","getTypeAheadCustomer","getTypeAheadCurrency","SearchDetailedOrUploadedFormMService","kanmiiUnderscore","formatDate","xhrErrorDisplay","formMAttributesVerboseNames","FormM","$timeout","$filter","resetForm2","$scope","LcBidRequest","initialize","form","vm","initDetailedFormM","updateAddFormMTitle","formM","date_received","Date","fieldsEdit","number","currency","applicant","amount","closedIssues","nonClosedIssues","existingBids","searchFormM","initFormMSavingIndicator","$setPristine","$setUntouched","cover","bid","issues","applicant_data","currency_data","Number","goods_description","form_m_issues","covers","getPaginated","mf","$promise","then","data","count","results","length","summary","savingFormMIndicator","formMIsSaving","disableSubmitBtn","newFormMForm","$invalid","coverForm","bidForm","issuesForm","compared","compareDetailedFormMWithForm","all","isEmpty","reset","addFormMForm","elements","showFormMMessage","header","name","code","showIssuesMessage","issuesText","index","each","issue","formatIssueText","text","equals","this","copy","onCoverChanged","onIssuesChanged","onNonClosedIssuesChanged","enableFieldEdit","field","validators","test","isObject","getApplicant","getCurrency","datePickerFormat","datePickerIsOpen","openDatePicker","getUploadedFormM","searchWithModal","detailed","uploaded","ccy","submit","formMSavedSuccess","push","go","formMSavedError","xhr","formMToSave","cover_type","do_not_update","$put","$save","replace","lcBidDirective","restrict","scope","bindToController","LcBidDirectiveController","formFieldIsValid","init","title","show","addFormMState","isValid","validity","amountGetterSetter","val","arguments","undefined","toggleShow","directive","lcIssueDirective","LcIssueDirectiveController","LCIssueConcrete","getTypeAheadLCIssue","clearFormField","$window","initExistingIssues","initContainerVars","showContainer","closeIssue","$index","issueClosedSuccess","splice","closed_at","closedAt","issueClosedError","confirm","put","issueSelected","$item","$model","deleteIssue","getIssue","_ids","forEach","x","concat","exclude_issue_ids","join","downloadIssues","$watch","newFormM","formMIssues","newIssues","$validate","require","link","elm","atts","ctrl","lcIssue","$validators","Boolean","LcCoverDirectiveController","formMCoverTypes","coverTypes","newCover","UploadFormM","ModalService","$q","submittedSearchParams","searchFormMSuccess","deferred","resolve","searchFormMError","reject","defer","query","promise","SearchService","showModal","modal","element","dialog","dialogClass","minWidth","minHeight","close","service","SearchDetailedOrUploadedFormMServiceModalCtrl","resetForm","initForm","searchParams","$error","factory","SearchFormMService","ToggleDimElement","inputs","uiOptions","open","dim","parent","dimCb","unDim","unDimCb","SearchFormMServiceModalCtrl","showLcIssueContainer","searchLcIssuesTitle","selectedLcIssues","toggleShowLcIssueContainer","submitSearchParams","displayLcIssueUI","searchFormMDirective","attributes","self","css","cursor","bind","searchFormMResult","SearchFormMDirectiveCtrl","SearchFormMModalCtrl","SearchUploadedFormMService","SearchUploadedFormMServiceModalCtrl","uploadFormMURLConfig","uploadFormM","UploadFormMController","initial","formMIsUploading","uploadIndicationText","uploadFormMText","parseDate","dt","slice","formMCreatedSuccess","creationResult","created_data","numCreatedNow","numCreatedPreviously","formMCreatedError","console","log","row","Papa","parse","delimiter","step","ba","fob","submitted_at","validated_at","save","likely_duplicates","formMListURLConfig","listFormM","FormMListController","formMModelManager","$http","updateFormMs","formMs","paginationHooks","next","previous","getFormMCollectionOnNavigation","linkUrl","get","response","modelManager","modelRowDblClick","goToFormM","getNoLcAttached","tableCaption","searchedFormMResult","formMURLConfig","FormMController","uploadFormMTab","viewName","select","listFormMTab","addFormMTitle","addFormMTab","active","reportsTab","bidsTab","tabs","bids","reports","bidURLConfig","LetterOfCreditController","SearchLc","searchLc","lc","lc_number","LetterOfCreditDetailController","LetterOfCredit","Customer","getIssuesNotClosed","filter","lcIssues","lcForm","alertIsShown","issueDateGetterSetter","estb_date","expiryDateGetterSetter","expiry_date","saveIssue","saveSuccess","unshift","issue_text","saveError","transform","form_m_creation_errors","postData","get_or_create_form_m","form_m_data","ccy_data","lc_amt_org_ccy","anIssue","replaceLc","newLcNumber","replaceLcFormInvalid","formInvalid","toLowerCase","indexOf","customerAdded","customer","exclude_form_m_issues","addCustomer","closeAlert","searchLcSuccess","searchLcError","SearchLcModalCtrl","BidRequestController","kanmiiUri","urls","newBid","searchedBidResult","selectedBids","selectedDownloadedBids","bidRequests","pending","updateBids","getBidsOnNavigation","onSelectedBidsChanged","newSelections","checked","bidId","getBidFromId","downloaded","rowDblClickCb","form_m_number","lcBidRequestDownloadUrl","downloadUrl","search","selection","bid_ids","toString","downloadBtnDisabled","any","selectionVal","markRequestedBtnDisabled","anyNoneDownloadedChecked","has","markRequested","editedBids","requested_at","refreshPage","displayPendingBidDirective","lcAppCommons","updateCollection","pager","onDblClick","paginationSize","displayPendingBidDirectiveCtrl","pagerNavSetUpLinks","setUpLinks","prev","numLinks","Math","ceil","linkProperties","nextPageLink","prevPageLink","linkUrls","currentLink","rowIndexOffset","onUpdateCollection","deselectAllBids","highlighted","modelRowClicked","model","onRowDblClick","bidIndex","toggleAll","toggleAllClicked"],"mappings":"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","file":"app.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t__webpack_require__(25)\n\t__webpack_require__(27)\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('lc-root-app',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'form-m',\n\t   'lc'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\n\t  $rootScope.$state = $state\n\t  $rootScope.$stateParams = $stateParams\n\t}])\n\n\tapp.config(formMRootAppURLConfig)\n\tformMRootAppURLConfig.$inject = ['$stateProvider', '$urlRouterProvider']\n\tfunction formMRootAppURLConfig($stateProvider, $urlRouterProvider) {\n\t  $urlRouterProvider\n\t    .otherwise('/')\n\n\t  $stateProvider\n\t    .state('home', {\n\t      url: '/',\n\n\t      kanmiiTitle: 'Home',\n\n\t      template: __webpack_require__(30)\n\t    })\n\t}\n\n\n/***/ },\n/* 1 */,\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tvar interpolateProviderConfig = ['$interpolateProvider', function ($interpolateProvider) {\n\t  $interpolateProvider.startSymbol('{$');\n\t  $interpolateProvider.endSymbol('$}');\n\t}];\n\n\t/**\n\t * Takes a file system path to a file (most likely a template path) and returns the server compatible path\n\t *\n\t * @param {string} appName - the name of the django app\n\t * @param {string} fsPath - relative path to a file resource on disk. The path must be relative to appName/js directory\n\t *   path\n\t * @returns {string} - a server compatible path\n\t */\n\tfunction buildUrl(appName, fsPath) {\n\t  return staticPrefix + appName + '/js/' + fsPath\n\t}\n\n\t/**\n\t * sets the static root on an angular app - so we can use a variable in our views rather hard-coding the static root\n\t * value\n\t * @param {angular.module} app the angular module on which we wish to set the static root\n\t */\n\tfunction setStaticPrefix(app) {\n\t  app.run(['$rootScope', function ($rootScope) {\n\t    $rootScope.staticPrefix = staticPrefix\n\t    $rootScope.addIconSrc = staticPrefix + 'core_recons/css/images/icon_addposting.gif'\n\t  }])\n\t}\n\n\tmodule.exports = {\n\t  interpolateProviderConfig: interpolateProviderConfig,\n\n\t  buildUrl: buildUrl,\n\n\t  rootAppName: 'core_recons',\n\n\t  setStaticPrefix: setStaticPrefix\n\t}\n\n\n/***/ },\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar lcCommons = __webpack_require__(6)\n\n\t/**\n\t * @description\n\t *\n\t * @param {String} fsPath - the path relative to the form-m directory\n\t * @returns {*|string}\n\t */\n\tfunction buildUrl(fsPath) {\n\t  return lcCommons.buildUrl('app') + '/' + fsPath\n\t}\n\n\tmodule.exports = {\n\t  buildUrl: buildUrl\n\t}\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar appName = 'letter_of_credit'\n\n\tfunction buildUrl(fsPath) {\n\t  return rootCommons.buildUrl(appName, fsPath)\n\t}\n\n\tmodule.exports = {\n\t  buildUrl: buildUrl,\n\t  appName: appName\n\t}\n\n\n/***/ },\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(13)\n\t__webpack_require__(14)\n\t__webpack_require__(15)\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('add-form-m', [\n\t  'ui.router',\n\t  'rootApp',\n\t  'kanmii-underscore',\n\t  'customer',\n\t  'search-detailed-or-uploaded-form-m',\n\t  'form-m-service',\n\t  'lc-cover',\n\t  'lc-issue',\n\t  'lc-bid',\n\t  'lc-bid-request'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(formMStateURLConfig)\n\n\tformMStateURLConfig.$inject = ['$stateProvider']\n\n\tfunction formMStateURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('form_m.add', {\n\t      kanmiiTitle: 'Add form M',\n\n\t      params: {detailedFormM: null, showSummary: null},\n\n\t      views: {\n\t        addFormM: {\n\t          templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/add-form-m.html'),\n\n\t          controller: 'AddFormMStateController as addFormMState'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('AddFormMStateController', AddFormMStateController)\n\n\tAddFormMStateController.$inject = [\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency',\n\t  'SearchDetailedOrUploadedFormMService',\n\t  'kanmiiUnderscore',\n\t  'formatDate',\n\t  'xhrErrorDisplay',\n\t  'formMAttributesVerboseNames',\n\t  'FormM',\n\t  '$timeout',\n\t  '$filter',\n\t  '$stateParams',\n\t  'resetForm2',\n\t  '$state',\n\t  '$scope',\n\t  'LcBidRequest'\n\t]\n\n\tfunction AddFormMStateController(getTypeAheadCustomer, getTypeAheadCurrency, SearchDetailedOrUploadedFormMService,\n\t  kanmiiUnderscore, formatDate, xhrErrorDisplay, formMAttributesVerboseNames, FormM, $timeout, $filter, $stateParams,\n\t  resetForm2, $state, $scope, LcBidRequest) {\n\t  var vm = this\n\n\t  vm.detailedFormM = angular.copy($stateParams.detailedFormM)\n\t  $stateParams.detailedFormM = null\n\n\t  /*\n\t   *@param {angular.form} the HTML fieldSet element for form M cover\n\t   */\n\t  var coverForm\n\n\t  /*\n\t   *@param {angular.form} the HTML fieldSet element for form M issues\n\t   */\n\t  var issuesForm\n\n\t  initialize()\n\t  function initialize(form) {\n\t    if (vm.detailedFormM) initDetailedFormM()\n\t    else {\n\t      $scope.updateAddFormMTitle()\n\t      vm.formM = {\n\t        date_received: new Date()\n\t      }\n\n\t      vm.fieldsEdit = {\n\t        number: false,\n\t        currency: false,\n\t        applicant: false,\n\t        date_received: false,\n\t        amount: false\n\t      }\n\n\t      vm.closedIssues = []\n\t      vm.nonClosedIssues = []\n\t      vm.existingBids = []\n\t    }\n\n\t    vm.searchFormM = {}\n\t    initFormMSavingIndicator()\n\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    /*\n\t     *@param {angular.form.model} the form M cover model\n\t     */\n\t    vm.cover = null\n\n\t    /*\n\t     *@param {angular.form.model} bid model that we want to create for the form M\n\t     */\n\t    vm.bid = {}\n\n\t    /*\n\t     *@param {angular.form.model} the form M issues model\n\t     */\n\t    vm.issues = []\n\n\t    vm.nonClosedIssues = []\n\t  }\n\n\t  function initDetailedFormM() {\n\t    vm.formM = {\n\t      date_received: new Date(vm.detailedFormM.date_received),\n\t      number: vm.detailedFormM.number,\n\t      applicant: vm.detailedFormM.applicant_data,\n\t      currency: vm.detailedFormM.currency_data,\n\t      amount: Number(vm.detailedFormM.amount),\n\t      goods_description: vm.detailedFormM.goods_description,\n\t      form_m_issues: vm.detailedFormM.form_m_issues,\n\t      url: vm.detailedFormM.url,\n\t      covers: vm.detailedFormM.covers\n\t    }\n\n\t    $scope.updateAddFormMTitle(vm.formM)\n\n\t    LcBidRequest.getPaginated({mf: vm.formM.number}).$promise.then(function(data) {\n\t      if (data.count) {\n\t        var results = data.results\n\n\t        if (results.length) vm.existingBids = results\n\t      }\n\t    })\n\n\t    vm.fieldsEdit = {\n\t      number: true,\n\t      currency: true,\n\t      applicant: true,\n\t      date_received: true,\n\t      amount: true\n\t    }\n\n\t  }\n\n\t  function initFormMSavingIndicator() {\n\t    var summary = $stateParams.showSummary\n\t    $stateParams.showSummary = null\n\n\t    if (summary) {\n\t      vm.savingFormMIndicator = summary\n\t      vm.formMIsSaving = true\n\n\t      $timeout(function() {\n\t        vm.formMIsSaving = false\n\t      }, 120000)\n\t    }\n\n\t    else {\n\t      vm.savingFormMIndicator = 'Creating New Form M...........please wait'\n\t      vm.formMIsSaving = false\n\t    }\n\t  }\n\n\t  vm.onCoverChanged = function onCoverChanged(cover, form) {\n\t    vm.cover = cover\n\t    coverForm = form\n\t  }\n\n\t  vm.onIssuesChanged = function onIssuesChanged(issues, form) {\n\t    vm.issues = issues\n\t    issuesForm = form\n\t  }\n\n\t  vm.onNonClosedIssuesChanged = function onNonClosedIssuesChanged(issues) {\n\t    vm.nonClosedIssues = issues\n\t  }\n\n\t  vm.enableFieldEdit = function enableFieldEdit(field) {\n\t    vm.fieldsEdit[field] = vm.detailedFormM ? !vm.fieldsEdit[field] : false\n\t  }\n\n\t  vm.validators = {\n\t    applicant: {\n\t      test: function() {\n\t        return kanmiiUnderscore.isObject(vm.formM.applicant)\n\t      }\n\t    },\n\n\t    currency: {\n\t      test: function() {\n\t        return kanmiiUnderscore.isObject(vm.formM.currency)\n\t      }\n\t    }\n\t  }\n\n\t  vm.disableSubmitBtn = disableSubmitBtn\n\t  function disableSubmitBtn() {\n\t    if ($scope.newFormMForm.$invalid) return true\n\n\t    if (coverForm && coverForm.$invalid) return true\n\n\t    if ($scope.bidForm.$invalid) return true\n\n\t    if (issuesForm && issuesForm.$invalid) return true\n\n\t    var compared = compareDetailedFormMWithForm()\n\t    if (!compared) return false\n\n\t    if (kanmiiUnderscore.all(compared)) {\n\t      if (!kanmiiUnderscore.isEmpty(vm.bid)) return false\n\t      if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) return false\n\t      return !vm.issues.length\n\t    }\n\n\t    return false\n\t  }\n\n\t  vm.reset = reset\n\t  function reset(addFormMForm) {\n\t    vm.detailedFormM = null\n\n\t    resetForm2(addFormMForm, [\n\t      {\n\t        form: $scope.newFormMForm, elements: ['applicant', 'currency']\n\t      }\n\t    ])\n\n\t    initialize()\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\n\t  vm.datePickerFormat = 'dd-MMM-yyyy'\n\t  vm.datePickerIsOpen = false\n\t  vm.openDatePicker = function openDatePicker() {\n\t    vm.datePickerIsOpen = true\n\t  }\n\n\t  vm.getUploadedFormM = function getUploadedFormM() {\n\t    vm.detailedFormM = null\n\t    initialize()\n\n\t    SearchDetailedOrUploadedFormMService.searchWithModal().then(function(data) {\n\t      if (data.detailed) {\n\t        vm.detailedFormM = data.detailed\n\t        initDetailedFormM()\n\n\t      } else {\n\t        var formM = data.uploaded\n\t        vm.searchFormM = formM\n\t        vm.formM.number = formM.mf\n\n\t        getTypeAheadCurrency(formM.ccy).then(function(ccy) {\n\t          vm.formM.currency = ccy[0]\n\t        })\n\t      }\n\t    })\n\t  }\n\n\t  vm.submit = function submit(formM) {\n\t    var formMToSave = angular.copy(formM)\n\n\t    formMToSave.applicant = formMToSave.applicant.url\n\t    formMToSave.currency = formMToSave.currency.url\n\t    formMToSave.date_received = formatDate(formMToSave.date_received)\n\n\t    if (!kanmiiUnderscore.isEmpty(vm.bid)) {\n\t      formMToSave.goods_description = vm.bid.goods_description\n\t      formMToSave.bid = {amount: vm.bid.amount}\n\t    }\n\n\t    if (vm.issues.length) formMToSave.issues = vm.issues\n\n\t    if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) {\n\t      formMToSave.cover = {\n\t        amount: vm.cover.amount,\n\t        cover_type: vm.cover.cover_type[0]\n\t      }\n\t    }\n\n\t    if (!vm.detailedFormM) new FormM(formMToSave).$save(formMSavedSuccess, formMSavedError)\n\n\t    else {\n\t      if (kanmiiUnderscore.all(compareDetailedFormMWithForm())) {\n\t        formMToSave.do_not_update = 'do_not_update'\n\t        formMToSave.applicant_data = vm.formM.applicant\n\t        formMToSave.currency_data = vm.formM.currency\n\t      }\n\t      formMToSave.id = vm.detailedFormM.id\n\t      new FormM(formMToSave).$put(formMSavedSuccess, formMSavedError)\n\t    }\n\n\t    function formMSavedSuccess(data) {\n\t      var summary = showFormMMessage() + showIssuesMessage()\n\n\t      if (data.bid) {\n\t        summary += '\\n\\nBid Amount     : ' + data.currency_data.code + ' ' + $filter('number')(data.bid.amount, 2)\n\t      }\n\n\t      if (data.cover) data.covers.push(data.cover)\n\n\t      $state.go('form_m.add', {detailedFormM: data, showSummary: summary})\n\t    }\n\n\t    function formMSavedError(xhr) {\n\t      initFormMSavingIndicator()\n\t      xhrErrorDisplay(xhr, formMAttributesVerboseNames)\n\t    }\n\t  }\n\n\t  $scope.showFormMMessage = showFormMMessage\n\t  function showFormMMessage() {\n\t    var number = $filter('number')(vm.formM.amount, 2)\n\t    var header = vm.formM.applicant.name + ' - ' + vm.formM.number + ' - ' + vm.formM.currency.code + ' ' + number\n\t    return header + '\\n\\nForm M Number : ' + vm.formM.number + '\\n' +\n\t           'Value         : ' + vm.formM.currency.code + ' ' +\n\t           number + '\\n' +\n\t           'Applicant     : ' + vm.formM.applicant.name\n\t  }\n\n\t  $scope.showIssuesMessage = showIssuesMessage\n\t  function showIssuesMessage() {\n\t    if (!vm.nonClosedIssues.length) return ''\n\n\t    var issuesText = '\\n\\n\\nPlease note the following issues which must be \\n' +\n\t                     'regularized before the LC ' +\n\t                     'request can be treated:\\n'\n\t    var index = 1\n\n\t    kanmiiUnderscore.each(vm.nonClosedIssues, function(issue) {\n\t      issuesText += ('(' + index++ + ') ' + vm.formatIssueText(issue.issue.text) + '\\n')\n\t    })\n\n\t    return issuesText\n\t  }\n\n\t  vm.formatIssueText = function(text) {\n\t    return text.replace(/:ISSUE$/i, '')\n\t  }\n\n\t  function compareDetailedFormMWithForm() {\n\t    if (!vm.detailedFormM) return false\n\n\t    return {\n\t      number: vm.formM.number && angular.equals(vm.formM.number, vm.detailedFormM.number),\n\n\t      date_received: angular.equals(vm.formM.date_received, new Date(vm.detailedFormM.date_received)),\n\n\t      amount: vm.formM.amount && angular.equals(vm.formM.amount, Number(vm.detailedFormM.amount)),\n\n\t      currency: vm.formM.currency && (vm.formM.currency.code === vm.detailedFormM.currency_data.code),\n\n\t      applicant: vm.formM.applicant && (vm.formM.applicant.name === vm.detailedFormM.applicant_data.name)\n\t    }\n\t  }\n\t}\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('lc-bid', [\n\t  'rootApp'\n\t])\n\n\tapp.directive('lcBid', lcBidDirective)\n\n\tlcBidDirective.$inject = []\n\n\tfunction lcBidDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-bid/lc-bid.html'),\n\t    scope: false,\n\t    bindToController: {\n\t      bid: '='\n\t    },\n\t    controller: 'LcBidDirectiveController as lcBid'\n\t  }\n\t}\n\n\tapp.controller('LcBidDirectiveController', LcBidDirectiveController)\n\n\tLcBidDirectiveController.$inject = ['$scope', '$filter', 'formFieldIsValid']\n\n\tfunction LcBidDirectiveController($scope, $filter, formFieldIsValid) {\n\t  var vm = this\n\t  var title = 'Make Bid Request'\n\t  init()\n\n\t  function init(form) {\n\t    vm.title = title\n\t    vm.show = false\n\t    $scope.addFormMState.bid = {}\n\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\t  }\n\n\t  vm.isValid = function(name, validity) {\n\t    return formFieldIsValid($scope, 'bidForm', name, validity)\n\t  }\n\n\t  vm.amountGetterSetter = function(val) {\n\t    if (arguments.length) {\n\t      if (!/[\\d,\\.]+/.test(val)) $scope.addFormMState.bid.amount = null\n\t      else $scope.addFormMState.bid.amount = Number(val.replace(/,/g, ''))\n\n\t    } else return $scope.addFormMState.bid.amount ? $filter('number')($scope.addFormMState.bid.amount, 2) : undefined\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    vm.show = $scope.addFormMState.formM.amount && $scope.addFormMState.formM.number && !vm.show\n\n\t    if (!vm.show) {\n\t      init(form)\n\t    }\n\t    else {\n\t      vm.title = 'Dismiss'\n\t      $scope.addFormMState.bid.amount = $scope.addFormMState.formM.amount\n\t      $scope.addFormMState.bid.goods_description = $scope.addFormMState.formM.goods_description\n\t    }\n\t  }\n\t}\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('lc-issue', [\n\t  'rootApp',\n\t  'lc-issue-service'\n\t])\n\n\tapp.directive('lcIssue', lcIssueDirective)\n\n\tlcIssueDirective.$inject = []\n\n\tfunction lcIssueDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-issue/lc-issue.html'),\n\t    scope: true,\n\t    bindToController: {\n\t      formM: '=mfContext',\n\t      issues: '=',\n\t      onIssuesChanged: '&',\n\t      onNonClosedIssuesChanged: '&'\n\t    },\n\t    controller: 'LcIssueDirectiveController as lcIssue'\n\t  }\n\t}\n\n\tapp.controller('LcIssueDirectiveController', LcIssueDirectiveController)\n\n\tLcIssueDirectiveController.$inject = [\n\t  '$scope',\n\t  'LCIssueConcrete',\n\t  'getTypeAheadLCIssue',\n\t  'formatDate',\n\t  'xhrErrorDisplay',\n\t  'resetForm2',\n\t  'clearFormField',\n\t  '$window'\n\t]\n\n\tfunction LcIssueDirectiveController($scope, LCIssueConcrete, getTypeAheadLCIssue, formatDate, xhrErrorDisplay,\n\t  resetForm2, clearFormField, $window) {\n\t  var vm = this\n\t  var title = 'Add Letter Of Credit Issues'\n\n\t  initExistingIssues()\n\t  function initExistingIssues() {\n\t    vm.closedIssues = []\n\t    vm.nonClosedIssues = []\n\t  }\n\n\t  initContainerVars()\n\t  function initContainerVars(form) {\n\t    vm.title = title\n\t    vm.showContainer = false\n\n\t    vm.issues = []\n\t    vm.issue = null\n\n\t    if (form) resetForm2(form, [\n\t      {form: form, elements: ['issue']}\n\t    ])\n\t  }\n\n\t  vm.closeIssue = function closeIssue(issue, $index) {\n\t    if ($window.confirm(\n\t        'Sure you want to close issue:\\n\"' +\n\t        $scope.addFormMState.formatIssueText(issue.issue.text) + '\"?')\n\t    ) {\n\t      var closedAt = formatDate(new Date())\n\n\t      LCIssueConcrete.put({\n\t        id: issue.id,\n\t        mf: vm.formM.url,\n\t        issue: issue.issue.url,\n\t        closed_at: closedAt\n\t      }).$promise.then(issueClosedSuccess, issueClosedError)\n\t    }\n\n\t    function issueClosedSuccess() {\n\t      vm.nonClosedIssues.splice($index, 1)\n\t      issue.closed_at = closedAt\n\t      vm.closedIssues.push(issue)\n\t    }\n\n\t    function issueClosedError(xhr) {xhrErrorDisplay(xhr)}\n\t  }\n\n\t  vm.issueSelected = function issueSelected($item, $model) {\n\t    vm.issues.push($model)\n\t    vm.issue = null\n\t    clearFormField($scope.issuesForm, 'issue')\n\t  }\n\n\t  vm.deleteIssue = function deleteIssue(index) {\n\t    vm.issues.splice(index, 1)\n\t  }\n\n\t  vm.getIssue = function getIssue(text) {\n\t    var _ids = []\n\n\t    vm.issues.forEach(function(issue) {\n\t      _ids.push(issue.id)\n\t    })\n\n\t    var x = []\n\n\t    x.concat(vm.nonClosedIssues).concat(vm.closedIssues).forEach(function(issue) {\n\t      _ids.push(issue.issue.id)\n\t    })\n\n\t    return getTypeAheadLCIssue({text: text, exclude_issue_ids: _ids.join(',')})\n\t  }\n\n\t  vm.downloadIssues = function downloadIssues() {\n\t    $scope.addFormMState.savingFormMIndicator = $scope.showFormMMessage() + $scope.showIssuesMessage()\n\n\t    $scope.addFormMState.formMIsSaving = true\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\n\n\t    if (!vm.showContainer) initContainerVars(form)\n\t    else vm.title = 'Dismiss'\n\t  }\n\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\n\t    if (newFormM) {\n\t      var formMIssues = newFormM.form_m_issues\n\t      if (formMIssues && formMIssues.length !== (vm.closedIssues.length + vm.nonClosedIssues.length)) {\n\t        formMIssues.forEach(function(issue) {\n\t          if (!issue.closed_at) {\n\t            vm.nonClosedIssues.push(issue)\n\t            return true\n\t          }\n\t          else {\n\t            vm.closedIssues.push(issue)\n\t            return false\n\t          }\n\t        })\n\t      }\n\n\t      if (!newFormM.number || !newFormM.amount) {\n\t        initExistingIssues()\n\t        initContainerVars()\n\t      }\n\t    }\n\t  }, true)\n\n\t  $scope.$watch(function getIssues() {return vm.issues}, function onUpdateIssues(newIssues) {\n\t    $scope.issuesForm.issue.$validate()\n\t    if (newIssues) vm.onIssuesChanged({issues: newIssues, issuesForm: $scope.issuesForm})\n\t  }, true)\n\n\t  $scope.$watch(function getNonClosedIssues() {return vm.nonClosedIssues}, function onUpdateNonClosedIssues(newIssues) {\n\t    if (newIssues) vm.onNonClosedIssuesChanged({issues: newIssues})\n\t  }, true)\n\n\t  $scope.$watch(function getShowContainer() {return vm.showContainer}, function onUpdateShowContainer() {\n\t    $scope.issuesForm.issue.$validate()\n\t  })\n\t}\n\n\tapp.directive('validateIssues', function validateIssues() {\n\t  return {\n\t    restrict: 'A',\n\t    require: 'ngModel',\n\t    link: function($scope, elm, atts, ctrl) {\n\t      var vm = $scope.lcIssue\n\t      ctrl.$validators.issues = function() {\n\t        return !vm.showContainer || Boolean(vm.issues.length)\n\t      }\n\t    }\n\t  }\n\t})\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('lc-cover', [\r\n\t  'rootApp'\r\n\t])\r\n\r\n\tapp.directive('lcCover', lcIssueDirective)\r\n\r\n\tlcIssueDirective.$inject = []\r\n\r\n\tfunction lcIssueDirective() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-cover/lc-cover.html'),\r\n\t    scope: true,\r\n\t    bindToController: {\r\n\t      formM: '=mfContext',\r\n\t      cover: '=',\r\n\t      onCoverChanged: '&'\r\n\t    },\r\n\t    controller: 'LcCoverDirectiveController as lcCover'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('LcCoverDirectiveController', LcCoverDirectiveController)\r\n\r\n\tLcCoverDirectiveController.$inject = [\r\n\t  '$scope',\r\n\t  'formMCoverTypes',\r\n\t  '$filter',\r\n\t  'formFieldIsValid'\r\n\t]\r\n\r\n\tfunction LcCoverDirectiveController($scope, formMCoverTypes, $filter, formFieldIsValid) {\r\n\t  var vm = this\r\n\t  var title = 'Register Cover'\r\n\t  init()\r\n\r\n\t  function init(form) {\r\n\t    vm.title = title\r\n\t    vm.showContainer = false\r\n\t    vm.cover = {}\r\n\t    vm.coverTypes = null\r\n\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.isValid = function isValid(name, validity) {\r\n\t    return formFieldIsValid($scope, 'coverForm', name, validity)\r\n\t  }\r\n\r\n\t  vm.amountGetterSetter = function(val) {\r\n\t    if (arguments.length) {\r\n\t      if (!/[\\d,\\.]+/.test(val)) vm.cover.amount = null\r\n\t      else vm.cover.amount = Number(val.replace(/,/g, ''))\r\n\t    } else return vm.cover.amount ? $filter('number')(vm.cover.amount, 2) : undefined\r\n\t  }\r\n\r\n\t  vm.toggleShow = function toggleShow(form) {\r\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\r\n\r\n\t    if (!vm.showContainer) {\r\n\t      init(form)\r\n\t    }\r\n\t    else {\r\n\t      vm.title = 'Dismiss'\r\n\t      vm.coverTypes = formMCoverTypes\r\n\t      vm.cover.amount = vm.formM.amount\r\n\t    }\r\n\t  }\r\n\r\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\r\n\t    if (newFormM) {\r\n\t      if (! newFormM.number || !newFormM.amount) init()\r\n\t    }\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getCover() {return vm.cover}, function(newCover) {\r\n\t    vm.onCoverChanged({\r\n\t      cover: newCover, coverForm: $scope.coverForm\r\n\t    })\r\n\r\n\t  }, true)\r\n\t}\r\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-detailed-or-uploaded-form-m', [\n\t  'kanmii-underscore',\n\t  'upload-form-m-service',\n\t  'toggle-dim-element',\n\t  'form-m-service'\n\t])\n\n\tapp.factory('SearchDetailedOrUploadedFormMService', SearchDetailedOrUploadedFormMService)\n\tSearchDetailedOrUploadedFormMService.$inject = [\n\t  'UploadFormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'FormM'\n\t]\n\tfunction SearchDetailedOrUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, FormM) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var mf = submittedSearchParams.mf\n\n\t    FormM.getPaginated({number: mf}).$promise.then(function(data) {\n\t      if (data.count === 1) {\n\t        deferred.resolve({detailed: data.results[0]})\n\n\t      } else UploadFormM.query({mf: mf}).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    }, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      if (data.length === 1) deferred.resolve({uploaded: data[0]})\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal() {\n\t      var deferred = $q.defer()\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl(\n\t          'form-m/search-detailed-or-uploaded-form-m/search-detailed-or-uploaded-form-m-modal.html'),\n\n\t        controller: 'SearchDetailedOrUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 500,\n\t          minHeight: 200,\n\t          title: 'Search Form M',\n\n\t          close: function() {\n\t            modal.close.then()\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchDetailedOrUploadedFormMServiceModalCtrl', SearchDetailedOrUploadedFormMServiceModalCtrl)\n\tSearchDetailedOrUploadedFormMServiceModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element'\n\t]\n\tfunction SearchDetailedOrUploadedFormMServiceModalCtrl(close, resetForm, element) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\t}\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('form-m-search-service', ['kanmii-underscore', 'toggle-dim-element'])\n\n\tapp.factory('SearchFormMService', SearchFormMService)\n\tSearchFormMService.$inject = [\n\t  'FormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'ToggleDimElement'\n\t]\n\tfunction SearchFormMService(FormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal(config) {\n\t      var deferred = $q.defer()\n\t      config = config || {}\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl('form-m/search-form-m-service/search-form-m-modal.html'),\n\t        controller: 'SearchFormMServiceModalCtrl as searchFormMModal',\n\t        inputs: {\n\t          uiOptions: config.uiOptions\n\t        }\n\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 450,\n\t          title: 'Search Form M',\n\n\t          open: function() {\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb) //jshint -W030\n\t          },\n\n\t          close: function() {\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchFormMServiceModalCtrl', SearchFormMServiceModalCtrl)\n\tSearchFormMServiceModalCtrl.$inject = [\n\t  'uiOptions',\n\t  'close',\n\t  'resetForm',\n\t  '$element',\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency'\n\t]\n\tfunction SearchFormMServiceModalCtrl(uiOptions, close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  vm.displayLcIssueUI = false\n\n\t  if (uiOptions) {\n\t    vm.displayLcIssueUI = uiOptions.displayLcIssueUI\n\t  }\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t    vm.showLcIssueContainer = false\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\n\t    vm.selectedLcIssues = {}\n\t  }\n\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\n\t  function toggleShowLcIssueContainer() {\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\n\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('form-m-search', ['kanmii-underscore'])\n\n\tapp.directive('searchFormM', searchFormMDirective)\n\tsearchFormMDirective.$inject = ['ModalService', 'kanmiiUnderscore']\n\tfunction searchFormMDirective(ModalService, kanmiiUnderscore) {\n\t  return {\n\t    restrict: 'A',\n\n\t    link: function(scope, elm, attributes, self) {\n\t      elm\n\t        .css({cursor: 'pointer'})\n\t        .bind('click', function() {\n\t                ModalService.showModal({\n\t                  template: __webpack_require__(19),\n\n\t                  controller: 'SearchFormMModalCtrl as searchFormMModal'\n\n\t                }).then(function(modal) {\n\t                  modal.element.dialog({\n\t                    dialogClass: 'no-close',\n\t                    modal: true,\n\t                    minWidth: 600,\n\t                    minHeight: 450,\n\t                    title: 'Search Form M'\n\t                  })\n\n\t                  modal.close.then(function(submittedSearchParams) {\n\t                    if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t                      self.searchFormM(submittedSearchParams)\n\t                    }\n\t                  })\n\t                })\n\t              })\n\t    },\n\n\t    controller: 'SearchFormMDirectiveCtrl as searchFormM',\n\n\t    scope: {},\n\n\t    bindToController: {\n\t      searchFormMResult: '='\n\t    }\n\t  }\n\t}\n\n\tapp.controller('SearchFormMDirectiveCtrl', SearchFormMDirectiveCtrl)\n\tSearchFormMDirectiveCtrl.$inject = ['FormM', 'xhrErrorDisplay']\n\tfunction SearchFormMDirectiveCtrl(FormM, xhrErrorDisplay) {\n\t  var vm = this\n\n\t  vm.searchFormM = searchFormM\n\t  function searchFormM(submittedSearchParams) {\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      vm.searchFormMResult = data\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    }\n\t  }\n\t}\n\n\tapp.controller('SearchFormMModalCtrl', SearchFormMModalCtrl)\n\tSearchFormMModalCtrl.$inject = ['close', 'resetForm', '$element', 'getTypeAheadCustomer', 'getTypeAheadCurrency']\n\tfunction SearchFormMModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t    vm.showLcIssueContainer = false\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\n\t    vm.selectedLcIssues = {}\n\t  }\n\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\n\t  function toggleShowLcIssueContainer() {\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\n\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=\\\"search-form-m-root-container\\\" class=\\\"search-form-m-root-container\\\"><form novalidate=\\\"\\\" class=\\\"form-horizontal\\\" ng-submit=\\\"searchFormMModal.submitSearchParams(searchFormMModal.searchParams)\\\" name=\\\"searchFormMModalForm\\\"><fieldset class=\\\"search-form-m-container\\\" style=\\\"position: relative; padding: 7px;\\\"><div class=\\\"form-group form-m-number-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"form-m-number\\\">Form M Number</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" maxlength=\\\"13\\\" id=\\\"form-m-number\\\" min=\\\"0\\\" ng-pattern=\\\"/(?:mf)?\\\\d{4,11}/i\\\" ng-model=\\\"searchFormMModal.searchParams.number\\\"></div></div><div class=\\\"form-group applicant-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"applicant\\\">Applicant</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" min=\\\"3\\\" id=\\\"applicant\\\" ng-model=\\\"searchFormMModal.searchParams.applicant\\\" typeahead-min-length=\\\"3\\\" uib-typeahead=\\\"applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)\\\"></div></div><div class=\\\"form-group currency-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"currency\\\">Currency</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"currency\\\" maxlength=\\\"3\\\" ng-model=\\\"searchFormMModal.searchParams.currency\\\" uib-typeahead=\\\"currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)\\\" typeahead-min-length=\\\"2\\\"></div></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"amount\\\">Amount</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"amount\\\" min=\\\"0\\\" ng-model=\\\"searchFormMModal.searchParams.amount\\\" number-format=\\\"\\\" ng-pattern=\\\"/^\\\\d[\\\\d,]*(?:\\\\.\\\\d*)?$/\\\"></div></div></fieldset><div class=\\\"form-m-lc-issue-container\\\"><span ng-click=\\\"searchFormMModal.toggleShowLcIssueContainer()\\\" class=\\\"form-m-lc-issue-toggle-show\\\"><span ng-class=\\\"['glyphicon', {'glyphicon-chevron-down': !searchFormMModal.showLcIssueContainer, 'glyphicon-chevron-up': searchFormMModal.showLcIssueContainer}]\\\"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class=\\\"form-m-search-lc-issue\\\" ng-show=\\\"searchFormMModal.showLcIssueContainer\\\"><lc-issue lc-issue-show=\\\"searchFormMModal.showLcIssueContainer\\\" lc-issues-selected=\\\"searchFormMModal.selectedLcIssues\\\"></lc-issue></div></div><div class=\\\"row search-form-m-form-control\\\"><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: left\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.reset(searchFormMModalForm)\\\">Reset</span></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"searchFormMModalForm.$invalid\\\">Search Form M</button></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: right\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.close()\\\">Close</span></div></div></form></div>\";\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-uploaded-form-m', [\n\t  'kanmii-underscore',\n\t  'upload-form-m-service',\n\t  'toggle-dim-element'\n\t])\n\n\tapp.factory('SearchUploadedFormMService', SearchUploadedFormMService)\n\tSearchUploadedFormMService.$inject = [\n\t  'UploadFormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q'\n\t]\n\tfunction SearchUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    UploadFormM.query(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal() {\n\t      var deferred = $q.defer()\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl(\n\t          'form-m/upload-form-m/search-uploaded-form-m/search-uploaded-form-m-modal.html'),\n\n\t        controller: 'SearchUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 250,\n\t          title: 'Search Uploaded Form M',\n\n\t          close: function() {\n\t            modal.close.then()\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchUploadedFormMServiceModalCtrl', SearchUploadedFormMServiceModalCtrl)\n\tSearchUploadedFormMServiceModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element'\n\t]\n\tfunction SearchUploadedFormMServiceModalCtrl(close, resetForm, element) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\t}\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(20)\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('upload-form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'upload-form-m-service'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(uploadFormMURLConfig)\n\tuploadFormMURLConfig.$inject = ['$stateProvider']\n\tfunction uploadFormMURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.upload', {\n\t      kanmiiTitle: 'Form M Upload',\n\n\t      views: {\n\t        'uploadFormM': {\n\t          template: __webpack_require__(22),\n\n\t          controller: 'UploadFormMController as uploadFormM'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('UploadFormMController', UploadFormMController)\n\n\tUploadFormMController.$inject = ['UploadFormM', '$timeout']\n\n\tfunction UploadFormMController(UploadFormM, $timeout) {\n\t  var vm = this\n\n\t  initial()\n\t  function initial() {\n\t    vm.formMIsUploading = false\n\t    vm.uploadIndicationText = 'Uploading Form Ms.........please wait'\n\t    vm.uploadFormMText = ''\n\t  }\n\n\t  vm.uploadFormM = function uploadFormM(text) {\n\t    vm.formMIsUploading = true\n\n\t    var uploaded = [],\n\t      row\n\n\t    function parseDate(dt) {\n\t      return '20' + dt.slice(6) + '-' + dt.slice(3, 5) + '-' + dt.slice(0, 2)\n\t    }\n\n\t    Papa.parse(text, {\n\t      delimiter: '\\t',\n\t      header: false,\n\t      step: function(data) {\n\t        row = data.data[0]\n\n\t        uploaded.push({\n\t          ba: row[0],\n\t          mf: row[1],\n\t          ccy: row[2],\n\t          applicant: row[3],\n\t          fob: row[5].replace(/,/g, ''),\n\t          submitted_at: parseDate(row[6]),\n\t          validated_at: parseDate(row[7])\n\t        })\n\t      }\n\t    })\n\n\t    UploadFormM.save({\n\t      uploaded: uploaded,\n\t      likely_duplicates: true\n\t    })\n\t      .$promise\n\t      .then(formMCreatedSuccess, formMCreatedError)\n\n\t    function formMCreatedSuccess(data) {\n\t      var creationResult = data.created_data,\n\t        numCreatedNow = creationResult.length,\n\t        numCreatedPreviously = uploaded.length - numCreatedNow\n\n\t      vm.uploadIndicationText = 'Done Upload form Ms\\n' +\n\t                                '=========================\\n' +\n\t                                'Total new form Ms created: ' + numCreatedNow + '\\n'\n\t      if (numCreatedPreviously) {\n\t        vm.uploadIndicationText += ('Total not created (because uploaded previously): ' + numCreatedPreviously)\n\t      }\n\n\t      $timeout(function() {\n\t        initial()\n\t      }, 4500)\n\t    }\n\n\t    function formMCreatedError(xhr) {\n\t      console.log(xhr);\n\t    }\n\t  }\n\t}\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"upload-form-m-tab-content\\\"><form class=\\\"upload-form-m-form\\\" role=\\\"form\\\" name=\\\"uploadFormMForm\\\" ng-submit=\\\"uploadFormM.uploadFormM(uploadFormM.uploadFormMText)\\\"><div class=\\\"form-group upload-form-m-text-group\\\"><pre class=\\\"upload-form-m-indicator\\\" ng-show=\\\"uploadFormM.formMIsUploading\\\">\\n        {$uploadFormM.uploadIndicationText$}\\n      </pre><label for=\\\"upload-form-m\\\" class=\\\"control-label sr-only\\\">Copy and paste form M</label> <textarea name=\\\"upload-form-m\\\" id=\\\"upload-form-m\\\" required=\\\"\\\" ng-model=\\\"uploadFormM.uploadFormMText\\\" ng-class=\\\"['form-control', 'upload-form-m', {'form-m-is-uploading':uploadFormM.formMIsUploading}]\\\" ng-readonly=\\\"uploadFormM.formMIsUploading\\\"></textarea></div><div class=\\\"upload-form-m-submit\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-success\\\" ng-disabled=\\\"uploadFormMForm.$invalid || uploadFormM.formMIsUploading\\\">Upload</button></div></form></div>\";\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('list-form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'form-m-service',\n\t   'form-m-search',\n\t   'model-table',\n\t   'customer',\n\t   'add-form-m'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(formMListURLConfig)\n\tformMListURLConfig.$inject = ['$stateProvider']\n\tfunction formMListURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.list', {\n\t      kanmiiTitle: 'Form M List',\n\n\t      views: {\n\t        'listFormM': {\n\t          template: __webpack_require__(24),\n\n\t          controller: 'FormMListController as formMList'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('FormMListController', FormMListController)\n\tFormMListController.$inject = ['FormM', '$scope', 'formMModelManager', '$http']\n\tfunction FormMListController(FormM, scope, formMModelManager, $http) {\n\t  var vm = this\n\n\t  /**\n\t   * The model manager will be used by the 'model-table' directive to manage the collection of form Ms retrieved\n\t   * from the server\n\t   * @type {[]}\n\t   */\n\t  vm.modelManager = formMModelManager\n\n\t  vm.modelRowDblClick = function modelRowDblClick(formM) {\n\t    scope.goToFormM(formM)\n\t  }\n\n\t  /**\n\t   * Update the form Ms collection and pagination hooks\n\t   * @param {object} data\n\t   */\n\t  function updateFormMs(data) {\n\t    vm.formMs = data.results\n\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\n\t  }\n\n\t  /**\n\t   * The object containing the hooks for paging through the form Ms collection\n\t   * @type {Array}\n\t   */\n\t  vm.paginationHooks = []\n\n\t  /**\n\t   * The form Ms retrieved from backend. Will contain a list of form Ms and pagination hooks for\n\t   * retrieving the next and previous sets of form Ms. This model is used by the display directive\n\t   * to display the form Ms in a table\n\t   * @type {[]}\n\t   */\n\t  vm.formMs = []\n\t  FormM.getNoLcAttached().$promise.then(function(data) {\n\t    updateFormMs(data)\n\t  })\n\n\t  /**\n\t   * The table caption for the 'model-table' directive\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Form M (LC Not Established)'\n\n\t  vm.getFormMCollectionOnNavigation = getFormMCollectionOnNavigation\n\t  /**\n\t   * when we navigate through the form Ms, we make an http request to the link contained in the navigation ui\n\t   * @param {string} linkUrl - the url (href) of the link clicked by user\n\t   */\n\t  function getFormMCollectionOnNavigation(linkUrl) {\n\t    $http.get(linkUrl).then(function(response) {\n\t      updateFormMs(response.data)\n\t    })\n\t  }\n\n\t  /**\n\t   * When the search-form-m directive returns, the result is propagated into this model\n\t   * @type {null|object}\n\t   */\n\t  vm.searchedFormMResult = null\n\n\t  scope.$watch(function getNewFormM() {return vm.searchedFormMResult}, function(searchedFormMResult) {\n\t    if (searchedFormMResult) updateFormMs(searchedFormMResult)\n\t  })\n\t}\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"manage-form-m-tab-content\\\"><div class=\\\"action-buttons pull-right\\\"><button class=\\\"btn btn-info\\\" search-form-m=\\\"\\\" search-form-m-result=\\\"formMList.searchedFormMResult\\\">Search Form M</button></div><div model-table=\\\"\\\" model-collection=\\\"formMList.formMs\\\" table-model-manager=\\\"::formMList.modelManager\\\" table-caption=\\\"::formMList.tableCaption\\\" pagination-size=\\\"20\\\" update-collection=\\\"formMList.getFormMCollectionOnNavigation(linkUrl)\\\" pager-object=\\\"formMList.paginationHooks\\\" on-row-dbl-click-callback=\\\"formMList.modelRowDblClick(rowModel)\\\"></div></div>\";\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(12)\n\t__webpack_require__(31)\n\t__webpack_require__(23)\n\t__webpack_require__(16)\n\t__webpack_require__(17)\n\t__webpack_require__(18)\n\t__webpack_require__(21)\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'list-form-m',\n\t   'upload-form-m',\n\t   'add-form-m',\n\t   'form-m-bids'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(formMURLConfig)\n\tformMURLConfig.$inject = ['$stateProvider']\n\tfunction formMURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m', {\n\t      url: '/form-m',\n\n\t      kanmiiTitle: 'Form M',\n\n\t      template: __webpack_require__(26),\n\n\t      controller: 'FormMController as formMHome'\n\t    })\n\t}\n\n\tapp.controller('FormMController', FormMController)\n\tFormMController.$inject = ['$state', '$scope']\n\tfunction FormMController($state, $scope) {\n\t  //var vm = this\n\n\t  var uploadFormMTab = {\n\t    title: 'Upload Form M',\n\t    viewName: 'uploadFormM',\n\t    select: function() {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.upload')\n\t    }\n\t  }\n\n\t  var listFormMTab = {\n\t    title: 'List Form M',\n\t    viewName: 'listFormM',\n\t    select: function() {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.list')\n\t    }\n\t  }\n\n\t  var addFormMTitle = 'Add Form M'\n\n\t  var addFormMTab = {\n\t    title: addFormMTitle,\n\t    active: true,\n\t    viewName: 'addFormM',\n\t    select: function() { $state.go('form_m.add')}\n\t  }\n\n\t  var reportsTab = {\n\t    title: 'Reports',\n\t    active: false,\n\t    viewName: 'formMReports',\n\t    select: function() {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.add')\n\t    }\n\t  }\n\n\t  var bidsTab = {\n\t    title: 'Pending Bids',\n\t    active: false,\n\t    viewName: 'bids',\n\t    select: function() {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.bids')\n\t    }\n\t  }\n\n\t  $scope.tabs = {\n\t    uploadFormM: uploadFormMTab,\n\t    listFormM: listFormMTab,\n\t    addFormM: addFormMTab,\n\t    bids: bidsTab,\n\t    reports: reportsTab\n\t  }\n\n\t  $scope.updateAddFormMTitle = function(formM) {\n\t    $scope.tabs.addFormM.title = formM ? 'Details of \"' + formM.number + '\"' : addFormMTitle\n\t  }\n\n\t  $scope.goToFormM = function goToFormM(formM) {\n\t    $state.go('form_m.add', {detailedFormM: formM})\n\t    $scope.tabs.addFormM.active = true\n\t  }\n\t}\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div uib-tabset=\\\"\\\"><div uib-tab=\\\"\\\" ng-repeat=\\\"(key, tab) in tabs\\\" heading=\\\"{$tab.title$}\\\" active=\\\"tab.active\\\" select=\\\"tab.select()\\\"><div class=\\\"\\\" ui-view=\\\"{$tab.viewName$}\\\"></div></div></div></div>\";\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('lc', [\n\t  'ui.router',\n\t  'model-table',\n\t  'rootApp',\n\t  'search-lc',\n\t  'lc-detail'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\tbidURLConfig.$inject = ['$stateProvider']\n\tfunction bidURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('lc', {\n\t      url: '/lc',\n\n\t      kanmiiTitle: 'Letter of credit',\n\n\t      templateUrl: __webpack_require__(5).buildUrl('lc/lc.html'),\n\n\t      controller: 'LetterOfCreditController as lcHome'\n\t    })\n\t}\n\n\tapp.controller('LetterOfCreditController', LetterOfCreditController)\n\tLetterOfCreditController.$inject = ['SearchLc', '$state']\n\tfunction LetterOfCreditController(SearchLc, $state) {\n\t  var vm = this\n\n\t  vm.searchLc = function searchLc() {\n\t    SearchLc.searchWithModal().then(function(data) {\n\t      var results = data.results\n\n\t      if (results.length) {\n\t        if (results.length === 1) {\n\t          var lc = results[0]\n\t          $state.go('lc_detail', {lc_number: lc.lc_number, lc: lc})\n\t        }\n\t      }\n\t    })\n\t  }\n\t}\n\n\n\t__webpack_require__(28)\n\t__webpack_require__(29)\n\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('lc-detail', [\n\t  'ui.router',\n\t  'rootApp',\n\t  'lc-service',\n\t  'lc-issue-service',\n\t  'kanmii-underscore',\n\t  'customer'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\n\tbidURLConfig.$inject = ['$stateProvider']\n\n\tfunction bidURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('lc_detail', {\n\t      url: '/lc/:lc_number',\n\n\t      params: {lc: null},\n\n\t      kanmiiTitle: 'Letter of credit',\n\n\t      templateUrl: __webpack_require__(5).buildUrl('lc/lc-detail/lc-detail.html'),\n\n\t      controller: 'LetterOfCreditDetailController as lcDetail'\n\t    })\n\t}\n\n\tapp.controller('LetterOfCreditDetailController', LetterOfCreditDetailController)\n\n\tLetterOfCreditDetailController.$inject = [\n\t  '$stateParams',\n\t  'LetterOfCredit',\n\t  '$state',\n\t  'getTypeAheadCustomer',\n\t  '$filter',\n\t  'getTypeAheadLCIssue',\n\t  'LCIssueConcrete',\n\t  'kanmiiUnderscore',\n\t  'xhrErrorDisplay',\n\t  'formatDate',\n\t  'Customer',\n\t  'formMAttributesVerboseNames'\n\t]\n\n\tfunction LetterOfCreditDetailController($stateParams, LetterOfCredit, $state, getTypeAheadCustomer, $filter,\n\t  getTypeAheadLCIssue, LCIssueConcrete, kanmiiUnderscore, xhrErrorDisplay, formatDate, Customer,\n\t  formMAttributesVerboseNames) {\n\t  var vm = this\n\n\t  initialize()\n\n\t  function initialize() {\n\t    if ($stateParams.lc) {\n\t      vm.lc = $stateParams.lc\n\t      vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\n\t    }\n\n\t    else {\n\t      LetterOfCredit.getPaginated({lc_number: $stateParams.lc_number}).$promise.then(function(data) {\n\t        if (data.count) {\n\t          vm.lc = data.results[0]\n\t          vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\n\t        }\n\n\t        else $state.go('lc')\n\t      })\n\t    }\n\n\t    vm.lcForm = {}\n\t    vm.alertIsShown = false\n\t    vm.issue = {}\n\n\t    function getIssuesNotClosed(issues) {\n\t      if (!issues) return []\n\n\t      return issues.filter(function(issue) {\n\t        return !issue.closed_at\n\t      })\n\t    }\n\t  }\n\n\t  vm.issueDateGetterSetter = function issueDateGetterSetter() {\n\t    if (vm.lc && vm.lc.estb_date) return $filter('date')(vm.lc.estb_date, 'dd-MMM-yyyy')\n\t  }\n\n\t  vm.expiryDateGetterSetter = function expiryDateGetterSetter() {\n\t    if (vm.lc && vm.lc.expiry_date) return $filter('date')(vm.lc.expiry_date, 'dd-MMM-yyyy')\n\t  }\n\n\t  vm.saveIssue = function saveIssue(issue, form) {\n\t    if (issue && !kanmiiUnderscore.isEmpty(issue)) {\n\t      var postData = {\n\t        issue: issue.issue.url,\n\t        mf: vm.lc.mf,\n\t        lc_number: vm.lc.lc_number,\n\t        get_or_create_form_m: true\n\t      }\n\n\t      var applicant = issue.applicant\n\n\t      if (applicant && !kanmiiUnderscore.isEmpty(applicant)) {\n\t        postData.form_m_data = {\n\t          applicant: applicant.url,\n\t          currency: vm.lc.ccy_data.url,\n\t          amount: vm.lc.lc_amt_org_ccy,\n\t          lc: vm.lc.url,\n\t          number: vm.lc.mf\n\t        }\n\n\t      }\n\n\t      LCIssueConcrete.save(postData).$promise.then(saveSuccess, saveError)\n\t    }\n\n\t    function saveSuccess(data) {\n\t      vm.lcIssues.unshift({\n\t        issue_text: data.issue_text,\n\t        issue: data.issue,\n\t        id: data.id,\n\t        mf: data.mf\n\t      })\n\n\t      vm.issue = {}\n\n\t      if (!vm.lc.applicant_data) { vm.lc.applicant_data = applicant}\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    function saveError(xhr) {\n\t      var transform = null\n\t      if (xhr.data.form_m_creation_errors) {\n\t        transform = formMAttributesVerboseNames\n\t        delete xhr.data.form_m_creation_errors\n\t      }\n\t      xhrErrorDisplay(xhr, transform)\n\t    }\n\n\t  }\n\n\t  vm.closeIssue = function closeIssue(issue) {\n\t    issue.closed_at = formatDate(new Date())\n\t    LCIssueConcrete.put(issue).$promise.then(function() {\n\n\t      vm.lcIssues = vm.lcIssues.filter(function(anIssue) {\n\t        return anIssue.id !== issue.id\n\t      })\n\n\t    }, function(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    })\n\t  }\n\n\t  vm.replaceLc = function replaceLc(newLcNumber) {\n\t    LetterOfCredit.getPaginated({lc_number: newLcNumber}).$promise.then(function(data) {\n\t      if (data.count) {\n\t        var lc = data.results[0]\n\n\t        $state.go('.', {lc_number: lc.lc_number, lc: lc})\n\n\t      } else vm.alertIsShown = true\n\t    })\n\t  }\n\n\t  vm.replaceLcFormInvalid = function replaceLcFormInvalid(formInvalid, newLcNumber) {\n\t    return formInvalid || vm.lc.lc_number.toLowerCase().indexOf(newLcNumber.toLowerCase()) !== -1\n\t  }\n\n\t  vm.customerAdded = function customerAdded(customer) {\n\t    vm.issue.applicant = customer\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\n\t  vm.getIssue = function getIssue(text) {\n\t    return getTypeAheadLCIssue({text: text, exclude_form_m_issues: vm.lc.mf})\n\t  }\n\n\t  vm.addCustomer = function addCustomer() {\n\t    Customer.save({name: vm.lc.applicant}).$promise.then(function(data) {\n\t      vm.issue.applicant = data\n\t      vm.lc.applicant_data = data\n\t    })\n\t  }\n\n\t  vm.closeAlert = function closeAlert() {\n\t    vm.alertIsShown = false\n\t  }\n\t}\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-lc', [\n\t  'kanmii-underscore',\n\t  'toggle-dim-element',\n\t  'form-m-service',\n\t  'lc-service'\n\t])\n\n\tapp.factory('SearchLc', SearchLc)\n\tSearchLc.$inject = [\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'ToggleDimElement',\n\t  'LetterOfCredit'\n\t]\n\tfunction SearchLc(xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement, LetterOfCredit) {\n\n\t  function searchLc(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    LetterOfCredit.getPaginated(searchParams).$promise.then(searchLcSuccess, searchLcError)\n\n\t    function searchLcSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchLcError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal(config) {\n\t      var deferred = $q.defer()\n\t      config = config || {}\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl('lc/search-lc/search-lc.html'),\n\t        controller: 'SearchLcModalCtrl as searchLcModal',\n\t        inputs: {\n\t          uiOptions: config.uiOptions\n\t        }\n\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 450,\n\t          title: 'Search Letter of credit',\n\n\t          open: function() {\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb)\n\t          },\n\n\t          close: function() {\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchLc(submittedSearchParams))\n\t          }\n\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchLcModalCtrl', SearchLcModalCtrl)\n\tSearchLcModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element',\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency'\n\t]\n\tfunction SearchLcModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"form-m-home-action-buttons btn-group-vertical\\\" role=\\\"group\\\"><a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"lc\\\">Letter of credit</a> <a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"form_m\\\">Form M</a></div></div>\";\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('form-m-bids', [\n\t  'ui.router',\n\t  'lc-bid-request',\n\t  'rootApp',\n\t  'kanmii-URI',\n\t  'kanmii-underscore',\n\t  'form-m-service'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\tbidURLConfig.$inject = ['$stateProvider']\n\tfunction bidURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.bids', {\n\n\t      kanmiiTitle: 'Bids',\n\n\t      views: {\n\t        bids: {\n\t          template: __webpack_require__(32),\n\n\t          controller: 'BidRequestController as bidHome'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('BidRequestController', BidRequestController)\n\tBidRequestController.$inject = [\n\t  'LcBidRequest',\n\t  '$scope',\n\t  '$http',\n\t  'kanmiiUri',\n\t  'urls',\n\t  'kanmiiUnderscore',\n\t  'formatDate',\n\t  '$timeout',\n\t  '$q',\n\t  'FormM'\n\t]\n\tfunction BidRequestController(LcBidRequest, $scope, $http, kanmiiUri, urls, kanmiiUnderscore, formatDate, $timeout, $q,\n\t  FormM) {\n\t  var vm = this;\n\n\t  initialize()\n\t  function initialize() {\n\t    vm.newBid = null\n\n\t    /**\n\t     * When the search-bid directive returns, the result is propagated into this model\n\t     * @type {null|object}\n\t     */\n\t    vm.searchedBidResult = null\n\n\t    vm.selectedBids = {}\n\n\t    vm.selectedDownloadedBids = {}\n\n\t    /**\n\t     * The bids retrieved from backend. Will contain a list of bids and pagination hooks for\n\t     * retrieving the next and previous sets of bids. This model is used by the display directive\n\t     * to display the bids in a table\n\t     * @type {object}\n\t     */\n\t    vm.bidRequests = []\n\t    vm.paginationHooks = {}\n\t    LcBidRequest.pending().$promise.then(function(data) {\n\t      updateBids(data)\n\t    })\n\t  }\n\n\t  /**\n\t   * When a row of the pending bids table is clicked, this function is invoked with the bid at that row\n\t   * @param {{}} bid - the bid object at the row that was double clicked\n\t   */\n\t  vm.rowDblClickCb = function rowDblClickCb(bid) {\n\t    FormM.getPaginated({number: bid.form_m_number}).$promise.then(function(data) {\n\t      var results = data.results\n\t      if (results.length && results.length === 1) {\n\t        $scope.goToFormM(results[0])\n\t      }\n\t    })\n\t  }\n\n\t  /**\n\t   * The table caption for the 'model-table' directive\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Pending Bids'\n\n\t  /**\n\t   * Will be invoked when any of the pager links is clicked in other to get the bids at the pager url\n\t   * @type {getBidsOnNavigation}\n\t   */\n\t  vm.getBidsOnNavigation = getBidsOnNavigation\n\t  function getBidsOnNavigation(linkUrl) {\n\t    $http.get(linkUrl).then(function(response) {\n\t      updateBids(response.data)\n\t    })\n\t  }\n\n\t  $scope.$watch(function searchedBidResult() {return vm.searchedBidResult},\n\t               function searchedBidResultChanged(searchedBidResult) {\n\t                 if (searchedBidResult) {\n\t                   updateBids(searchedBidResult)\n\t                 }\n\t               })\n\n\t  /**\n\t   * Update the bid collection and pagination hooks\n\t   * @param {object} data\n\t   */\n\t  function updateBids(data) {\n\t    vm.bidRequests = data.results\n\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\n\t  }\n\n\t  var url = kanmiiUri(urls.lcBidRequestDownloadUrl)\n\t  vm.downloadUrl = function downloadUrl() {\n\t    if (!kanmiiUnderscore.isEmpty(vm.selectedBids)) {\n\t      var search = []\n\n\t      kanmiiUnderscore.each(vm.selectedBids, function(selection, bidId) {\n\t        if (selection === true) search.push(bidId)\n\t      })\n\n\t      return url.search({bid_ids: search}).toString()\n\t    }\n\t  }\n\n\t  vm.downloadBtnDisabled = function downloadBtnDisabled() {\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedBids)) return true\n\n\t    return !kanmiiUnderscore.any(vm.selectedBids, function(selectionVal) {\n\t      return selectionVal === true\n\t    })\n\t  }\n\n\t  vm.onSelectedBidsChanged = onSelectedBidsChanged\n\t  function onSelectedBidsChanged(newSelections) {\n\t    if (newSelections && !kanmiiUnderscore.isEmpty(newSelections)) {\n\t      kanmiiUnderscore.each(newSelections, function(checked, bidId) {\n\t        var bid = getBidFromId(bidId)\n\n\t        if (bid && bid.downloaded) vm.selectedDownloadedBids[bidId] = checked\n\t      })\n\t    }\n\t  }\n\n\t  vm.markRequestedBtnDisabled = function markRequestedBtnDisabled() {\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedDownloadedBids)) return true\n\n\t    //return true if un-downloaded bid is checked\n\t    //return false if there is at least one downloaded bid checked\n\t    var anyNoneDownloadedChecked = kanmiiUnderscore.any(vm.selectedBids, function(checked, bidId) {\n\t      return !kanmiiUnderscore.has(vm.selectedDownloadedBids, bidId) && checked === true\n\t    })\n\n\t    if (anyNoneDownloadedChecked) return true\n\t    else return !kanmiiUnderscore.any(vm.selectedDownloadedBids, function(checked) {\n\t      return checked === true\n\t    })\n\t  }\n\n\t  vm.markRequested = function markRequested() {\n\t    var editedBids = []\n\n\t    kanmiiUnderscore.each(vm.selectedDownloadedBids, function(checked, bidId) {\n\t      if (!checked) return\n\n\t      var bid = getBidFromId(bidId)\n\t      if (bid) {\n\t        bid.requested_at = formatDate(new Date())\n\t        //LcBidRequest.put(bid).$promise.then(bidEditSuccess, bidEditFailure)\n\t        editedBids.push(LcBidRequest.put(bid).$promise)\n\t      }\n\t    })\n\n\t    if (editedBids.length) {\n\t      $q.all(editedBids).then(function() {\n\t        initialize()\n\t      })\n\t    }\n\t  }\n\n\t  vm.refreshPage = function refreshPage() {\n\t    $timeout(function() {initialize()}, 3000)\n\t  }\n\n\t  function getBidFromId(bidId) {\n\t    for (var index = 0; index < vm.bidRequests.length; index++) {\n\t      var bid = vm.bidRequests[index]\n\t      if (bid.id === +bidId) return bid\n\t    }\n\n\t    return null\n\t  }\n\t}\n\n\t__webpack_require__(33)\n\n\n/***/ },\n/* 32 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"action-buttons\\\" style=\\\"text-align: right;margin-bottom: 30px;\\\"><button class=\\\"btn btn-info\\\" ng-click=\\\"bidHome.searchBids()\\\">Search Bid Requests</button> <a class=\\\"btn btn-success\\\" ng-href=\\\"{$bidHome.downloadUrl()$}\\\" ng-disabled=\\\"bidHome.downloadBtnDisabled()\\\" ng-click=\\\"bidHome.refreshPage()\\\">Download</a> <button type=\\\"button\\\" name=\\\"bid-home-mark-as-requested-btn\\\" class=\\\"btn btn-success\\\" ng-click=\\\"bidHome.markRequested()\\\" ng-disabled=\\\"bidHome.markRequestedBtnDisabled()\\\">Mark as requested</button></div><div display-pending-bid=\\\"\\\" pending-bids=\\\"bidHome.bidRequests\\\" pager-object=\\\"bidHome.paginationHooks\\\" update-collection=\\\"bidHome.getBidsOnNavigation(linkUrl)\\\" pagination-size=\\\"20\\\" selected-bids=\\\"bidHome.selectedBids\\\" on-selected-bids-changed=\\\"bidHome.onSelectedBidsChanged(newSelections)\\\" on-row-dbl-click=\\\"bidHome.rowDblClickCb(bid)\\\"></div></div>\";\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar lcAppCommons = __webpack_require__(5)\n\n\tvar app = angular.module('form-m-bids')\n\n\tapp.directive('displayPendingBid', displayPendingBidDirective)\n\tfunction displayPendingBidDirective() {\n\t  return {\n\t    restrict: 'EA',\n\n\t    templateUrl: lcAppCommons.buildUrl('form-m/bids/display-pending-bid/display-pending-bid.html'),\n\n\t    scope: true,\n\n\t    bindToController: {\n\t      bids: '=pendingBids',\n\n\t      updateCollection: '&',\n\n\t      onSelectedBidsChanged: '&',\n\n\t      pager: '=pagerObject',\n\n\t      onDblClick: '&onRowDblClick',\n\n\t      paginationSize: '=',\n\n\t      selectedBids: '='\n\t    },\n\n\t    controller: 'displayPendingBidDirectiveCtrl as bidTable'\n\t  }\n\t}\n\n\tapp.controller('displayPendingBidDirectiveCtrl', displayPendingBidDirectiveCtrl)\n\n\tdisplayPendingBidDirectiveCtrl.$inject = [\n\t  'pagerNavSetUpLinks',\n\t  '$scope',\n\t  'kanmiiUnderscore'\n\t]\n\n\tfunction displayPendingBidDirectiveCtrl(pagerNavSetUpLinks, scope, kanmiiUnderscore) {\n\t  var vm = this //jshint -W040\n\n\t  vm.selectedBids = {}\n\n\t  function setUpLinks(next, prev, count) {\n\n\t    var numLinks = Math.ceil(count / vm.paginationSize)\n\n\t    var linkProperties = pagerNavSetUpLinks(next, prev, numLinks)\n\n\t    vm.nextPageLink = next\n\t    vm.prevPageLink = prev\n\n\t    vm.linkUrls = linkProperties.linkUrls\n\t    vm.currentLink = linkProperties.currentLink\n\n\t    /**\n\t     * The row index offset. The row begin at one so in the view, we do `$index + 1` for row number. However, as we\n\t     * move from page to page, the `$index` view value is reset back to zero, so that row number always begin at 1.\n\t     * Since we know what the page number is (this.currentLink), we calculate the offset for the row (as an arithmetic\n\t     * progression)\n\t     * @type {number}\n\t     */\n\t    vm.rowIndexOffset = (vm.currentLink - 1) * vm.paginationSize\n\t  }\n\n\t  vm.onUpdateCollection = onUpdateCollection\n\t  function onUpdateCollection(linkUrl) {\n\t    vm.updateCollection({linkUrl: linkUrl})\n\t  }\n\n\t  scope.$watch(function getPager() {return vm.pager}, function updatedPager(pager) {\n\t    if (pager && !kanmiiUnderscore.isEmpty(pager)) {\n\t      setUpLinks(pager.next, pager.previous, pager.count)\n\t    }\n\t  })\n\n\t  function deselectAllBids() {\n\t    vm.bids.forEach(function(bid) {\n\t      bid.highlighted = false\n\t    })\n\t  }\n\n\t  vm.modelRowClicked = modelRowClicked\n\t  function modelRowClicked(model) {\n\t    if (!model.downloaded) {\n\t      deselectAllBids()\n\n\t      //only highlight a row if no row is checked and the row model is not downloaded previously\n\t      model.highlighted = !kanmiiUnderscore.any(vm.bids, function(bid) {\n\t        return bid.checked\n\t      })\n\t    }\n\t  }\n\n\t  vm.onRowDblClick = function onRowDblClick(bid) {\n\t    vm.onDblClick({bid: bid})\n\t  }\n\n\t  scope.$watch(function getSelectedBids() {return vm.selectedBids}, function updatedSelectedBids(selectedBids) {\n\t    vm.onSelectedBidsChanged({newSelections: selectedBids})\n\n\t    if (selectedBids && !kanmiiUnderscore.isEmpty(selectedBids)) {\n\n\t      kanmiiUnderscore.each(selectedBids, function(checked, id) {\n\n\t        for (var bidIndex = 0; bidIndex < vm.bids.length; bidIndex++) {\n\t          var bid = vm.bids[bidIndex]\n\t          if (bid.id === +id) {\n\t            bid.checked = checked\n\t          }\n\t        }\n\n\t      })\n\n\t      vm.toggleAll = kanmiiUnderscore.all(vm.bids, function(bid) {\n\t        return bid.checked === true\n\t      })\n\t    }\n\t  }, true)\n\n\t  vm.toggleAll = false\n\n\t  vm.toggleAllClicked = function toggleAllClicked() {\n\t    vm.bids.forEach(function(bid) {\n\t      vm.selectedBids[bid.id] = vm.toggleAll\n\t    })\n\t  }\n\t}\n\n\n/***/ }\n/******/ ]);"],"sourceRoot":"/source/"}