{"version":3,"sources":["letter_of_credit/static/letter_of_credit/js/app/app.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","formMRootAppURLConfig","$stateProvider","$urlRouterProvider","otherwise","state","url","kanmiiTitle","template","rootCommons","app","angular","config","interpolateProviderConfig","run","$rootScope","$state","$stateParams","$inject","formMURLConfig","controller","FormMController","$scope","listFormMTab","title","viewName","select","updateAddFormMTitle","go","addFormMTitle","addFormMTab","active","reportsTab","bidsTab","tabs","listFormM","addFormM","bids","reports","formM","number","goToFormM","detailedFormM","formMStateURLConfig","params","showSummary","views","templateUrl","buildUrl","AddFormMStateController","getTypeAheadCustomer","getTypeAheadCurrency","SearchDetailedOrUploadedFormMService","kanmiiUnderscore","formatDate","xhrErrorDisplay","formMAttributesVerboseNames","FormM","$timeout","$filter","resetForm2","LcBidRequest","confirmationDialog","initialize","form","vm","existingBids","initDetailedFormM","date_received","Date","fieldsEdit","currency","applicant","amount","closedIssues","nonClosedIssues","showEditBid","showBidForm","searchFormM","initFormMSavingIndicator","$setPristine","$setUntouched","cover","bid","issues","applicant_data","currency_data","Number","goods_description","form_m_issues","covers","getPaginated","mf","$promise","then","data","count","results","length","summary","showDialog","text","infoOnly","disableSubmitBtn","newFormMForm","$invalid","coverForm","bidForm","issuesForm","compared","compareDetailedFormMWithForm","all","isEmpty","reset","addFormMForm","elements","showFormMMessage","header","name","code","showIssuesMessage","issuesText","each","issue","index","formatIssueText","equals","compareDetailedFormMWithForm1","this","copy","onCoverChanged","onIssuesChanged","onNonClosedIssuesChanged","enableFieldEdit","field","validators","test","isObject","getApplicant","getCurrency","datePickerFormat","datePickerIsOpen","openDatePicker","getUploadedFormM","searchWithModal","detailed","uploaded","cost_freight","ccy","submit","formMSavedSuccess","filter","closed_at","push","formMSavedError","xhr","formMToSave","cover_type","do_not_update","$put","$save","downloadSummary","replace","lcIssueDirective","restrict","scope","bindToController","LcIssueDirectiveController","LCIssueConcrete","getTypeAheadLCIssue","clearFormField","initExistingIssues","initContainerVars","showContainer","closeIssue","$index","issueClosedSuccess","addFormMState","splice","closedAt","issueClosedError","answer","put","issueSelected","$item","$model","deleteIssue","getIssue","_ids","forEach","x","concat","exclude_issue_ids","join","toggleShow","$watch","newFormM","formMIssues","newIssues","$validate","directive","require","link","elm","atts","ctrl","lcIssue","$validators","Boolean","fsPath","lcCommons","appName","staticPrefix","setStaticPrefix","addIconSrc","$interpolateProvider","startSymbol","endSymbol","rootAppName","LcCoverDirectiveController","formMCoverTypes","formFieldIsValid","init","coverTypes","isValid","validity","amountGetterSetter","val","arguments","undefined","newCover","lcBidDirective","LcBidDirectiveController","bidToEdit","bidNotModified","goods","editBidInvalid","onBidDblClick","trashBid","bidDeleteSuccess","form_m_number","editBid","doEdit","requested_at","bidURLConfig","BidRequestController","$http","kanmiiUri","urls","$q","newBid","searchedBidResult","selectedBids","selectedDownloadedBids","bidRequests","paginationHooks","pending","updateBids","getBidsOnNavigation","linkUrl","get","response","next","previous","onSelectedBidsChanged","newSelections","checked","bidId","getBidFromId","downloaded","rowDblClickCb","tableCaption","lcBidRequestDownloadUrl","downloadUrl","search","selection","bid_ids","toString","downloadBtnDisabled","any","selectionVal","markRequestedBtnDisabled","anyNoneDownloadedChecked","has","markRequested","editedBids","refreshPage","displayPendingBidDirective","lcAppCommons","updateCollection","pager","onDblClick","paginationSize","displayPendingBidDirectiveCtrl","pagerNavSetUpLinks","setUpLinks","prev","numLinks","Math","ceil","linkProperties","nextPageLink","prevPageLink","linkUrls","currentLink","rowIndexOffset","onUpdateCollection","deselectAllBids","highlighted","modelRowClicked","model","onRowDblClick","bidIndex","toggleAll","toggleAllClicked","formMListURLConfig","FormMListController","formMModelManager","updateFormMs","formMs","getFormMCollectionOnNavigation","modelManager","modelRowDblClick","getNoLcAttached","searchedFormMResult","UploadFormM","ModalService","submittedSearchParams","searchFormMSuccess","deferred","resolve","searchFormMError","reject","defer","query","promise","SearchService","showModal","modal","element","dialog","dialogClass","minWidth","minHeight","close","service","SearchDetailedOrUploadedFormMServiceModalCtrl","resetForm","initForm","searchParams","$error","factory","SearchFormMService","ToggleDimElement","inputs","uiOptions","open","dim","parent","dimCb","unDim","unDimCb","SearchFormMServiceModalCtrl","showLcIssueContainer","searchLcIssuesTitle","selectedLcIssues","toggleShowLcIssueContainer","submitSearchParams","displayLcIssueUI","searchFormMDirective","attributes","self","css","cursor","bind","searchFormMResult","SearchFormMDirectiveCtrl","SearchFormMModalCtrl","uploadFormMURLConfig","uploadFormM","UploadFormMController","initial","formMIsUploading","uploadIndicationText","uploadFormMText","parseDate","dt","slice","formMCreatedSuccess","creationResult","created_data","numCreatedNow","numCreatedPreviously","formMCreatedError","console","log","row","Papa","parse","delimiter","step","ba","fob","submitted_at","validated_at","save","likely_duplicates","SearchUploadedFormMService","SearchUploadedFormMServiceModalCtrl","LetterOfCreditController","SearchLc","searchLc","lc","lc_number","LetterOfCreditDetailController","LetterOfCredit","Customer","getIssuesNotClosed","lcIssues","lcForm","alertIsShown","issueDateGetterSetter","estb_date","expiryDateGetterSetter","expiry_date","saveIssue","saveSuccess","unshift","issue_text","saveError","transform","form_m_creation_errors","postData","get_or_create_form_m","form_m_data","ccy_data","lc_amt_org_ccy","anIssue","replaceLc","newLcNumber","replaceLcFormInvalid","formInvalid","toLowerCase","indexOf","customerAdded","customer","exclude_form_m_issues","addCustomer","closeAlert","searchLcSuccess","searchLcError","SearchLcModalCtrl"],"mappings":"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","file":"letter_of_credit/static/letter_of_credit/js/app/app.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t__webpack_require__(1)\r\n\t__webpack_require__(22)\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar app = angular.module('lc-root-app',\r\n\t  ['rootApp',\r\n\t   'ui.router',\r\n\t   'form-m',\r\n\t   'lc'\r\n\t  ])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\r\n\t  $rootScope.$state = $state\r\n\t  $rootScope.$stateParams = $stateParams\r\n\t}])\r\n\r\n\tapp.config(formMRootAppURLConfig)\r\n\tformMRootAppURLConfig.$inject = ['$stateProvider', '$urlRouterProvider']\r\n\tfunction formMRootAppURLConfig($stateProvider, $urlRouterProvider) {\r\n\t  $urlRouterProvider\r\n\t    .otherwise('/')\r\n\r\n\t  $stateProvider\r\n\t    .state('home', {\r\n\t      url: '/',\r\n\r\n\t      kanmiiTitle: 'Home',\r\n\r\n\t      template: __webpack_require__(25)\r\n\t    })\r\n\t}\r\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\t__webpack_require__(2)\r\n\t__webpack_require__(9)\r\n\t__webpack_require__(12)\r\n\t__webpack_require__(14)\r\n\t__webpack_require__(15)\r\n\t__webpack_require__(16)\r\n\t__webpack_require__(18)\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar app = angular.module('form-m',\r\n\t  ['rootApp',\r\n\t   'ui.router',\r\n\t   'list-form-m',\r\n\t   'upload-form-m',\r\n\t   'add-form-m',\r\n\t   'form-m-bids'\r\n\t  ])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(formMURLConfig)\r\n\tformMURLConfig.$inject = ['$stateProvider']\r\n\tfunction formMURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('form_m', {\r\n\t      url: '/form-m',\r\n\r\n\t      kanmiiTitle: 'Form M',\r\n\r\n\t      template: __webpack_require__(21),\r\n\r\n\t      controller: 'FormMController as formMHome'\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('FormMController', FormMController)\r\n\tFormMController.$inject = ['$state', '$scope']\r\n\tfunction FormMController($state, $scope) {\r\n\r\n\t  var listFormMTab = {\r\n\t    title: 'List Form M',\r\n\t    viewName: 'listFormM',\r\n\t    select: function() {\r\n\t      $scope.updateAddFormMTitle()\r\n\t      $state.go('form_m.list')\r\n\t    }\r\n\t  }\r\n\r\n\t  var addFormMTitle = 'Form M'\r\n\r\n\t  var addFormMTab = {\r\n\t    title: addFormMTitle,\r\n\t    active: true,\r\n\t    viewName: 'addFormM',\r\n\t    select: function() { $state.go('form_m.add')}\r\n\t  }\r\n\r\n\t  var reportsTab = {\r\n\t    title: 'Reports',\r\n\t    active: false,\r\n\t    viewName: 'formMReports',\r\n\t    select: function() {\r\n\t      $scope.updateAddFormMTitle()\r\n\t      $state.go('form_m.add')\r\n\t    }\r\n\t  }\r\n\r\n\t  var bidsTab = {\r\n\t    title: 'Pending Bids',\r\n\t    active: false,\r\n\t    viewName: 'bids',\r\n\t    select: function() {\r\n\t      $scope.updateAddFormMTitle()\r\n\t      $state.go('form_m.bids')\r\n\t    }\r\n\t  }\r\n\r\n\t  $scope.tabs = {\r\n\t    listFormM: listFormMTab,\r\n\t    addFormM: addFormMTab,\r\n\t    bids: bidsTab,\r\n\t    reports: reportsTab\r\n\t  }\r\n\r\n\t  $scope.updateAddFormMTitle = function(formM) {\r\n\t    $scope.tabs.addFormM.title = formM ? 'Details of \"' + formM.number + '\"' : addFormMTitle\r\n\t  }\r\n\r\n\t  $scope.goToFormM = function goToFormM(formM) {\r\n\t    $state.go('form_m.add', {detailedFormM: formM})\r\n\t    $scope.tabs.addFormM.active = true\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\t__webpack_require__(3)\r\n\t__webpack_require__(7)\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar app = angular.module('add-form-m', [\r\n\t  'ui.router',\r\n\t  'rootApp',\r\n\t  'kanmii-underscore',\r\n\t  'customer',\r\n\t  'search-detailed-or-uploaded-form-m',\r\n\t  'form-m-service',\r\n\t  'lc-cover',\r\n\t  'lc-issue',\r\n\t  'lc-bid-request',\r\n\t  'confirmation-dialog'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(formMStateURLConfig)\r\n\r\n\tformMStateURLConfig.$inject = ['$stateProvider']\r\n\r\n\tfunction formMStateURLConfig($stateProvider) {\r\n\t  $stateProvider\r\n\t    .state('form_m.add', {\r\n\t      kanmiiTitle: 'Add form M',\r\n\r\n\t      params: {detailedFormM: null, showSummary: null},\r\n\r\n\t      views: {\r\n\t        addFormM: {\r\n\t          templateUrl: __webpack_require__(4).buildUrl('form-m/add-form-m/add-form-m.html'),\r\n\r\n\t          controller: 'AddFormMStateController as addFormMState'\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('AddFormMStateController', AddFormMStateController)\r\n\r\n\tAddFormMStateController.$inject = [\r\n\t  'getTypeAheadCustomer',\r\n\t  'getTypeAheadCurrency',\r\n\t  'SearchDetailedOrUploadedFormMService',\r\n\t  'kanmiiUnderscore',\r\n\t  'formatDate',\r\n\t  'xhrErrorDisplay',\r\n\t  'formMAttributesVerboseNames',\r\n\t  'FormM',\r\n\t  '$timeout',\r\n\t  '$filter',\r\n\t  '$stateParams',\r\n\t  'resetForm2',\r\n\t  '$state',\r\n\t  '$scope',\r\n\t  'LcBidRequest',\r\n\t  'confirmationDialog'\r\n\t]\r\n\r\n\tfunction AddFormMStateController(getTypeAheadCustomer, getTypeAheadCurrency, SearchDetailedOrUploadedFormMService,\r\n\t  kanmiiUnderscore, formatDate, xhrErrorDisplay, formMAttributesVerboseNames, FormM, $timeout, $filter, $stateParams,\r\n\t  resetForm2, $state, $scope, LcBidRequest, confirmationDialog) {\r\n\t  var vm = this\r\n\r\n\t  vm.detailedFormM = angular.copy($stateParams.detailedFormM)\r\n\t  $stateParams.detailedFormM = null\r\n\r\n\t  /*\r\n\t   *@param {angular.form} the HTML fieldSet element for form M cover\r\n\t   */\r\n\t  var coverForm\r\n\r\n\t  /*\r\n\t   *@param {angular.form} the HTML fieldSet element for form M issues\r\n\t   */\r\n\t  var issuesForm\r\n\r\n\t  initialize()\r\n\t  function initialize(form) {\r\n\t    vm.existingBids = []\r\n\r\n\t    if (vm.detailedFormM) initDetailedFormM()\r\n\t    else {\r\n\t      $scope.updateAddFormMTitle()\r\n\t      vm.formM = {\r\n\t        date_received: new Date()\r\n\t      }\r\n\r\n\t      vm.fieldsEdit = {\r\n\t        number: false,\r\n\t        currency: false,\r\n\t        applicant: false,\r\n\t        date_received: false,\r\n\t        amount: false\r\n\t      }\r\n\r\n\t      vm.closedIssues = []\r\n\t      vm.nonClosedIssues = []\r\n\t    }\r\n\r\n\t    vm.showEditBid = false\r\n\t    vm.showBidForm = false\r\n\t    vm.searchFormM = {}\r\n\t    initFormMSavingIndicator()\r\n\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\r\n\t    /*\r\n\t     *@param {angular.form.model} the form M cover model\r\n\t     */\r\n\t    vm.cover = null\r\n\r\n\t    /*\r\n\t     *@param {angular.form.model} bid model that we want to create for the form M\r\n\t     */\r\n\t    vm.bid = {}\r\n\r\n\t    /*\r\n\t     *@param {angular.form.model} the form M issues model\r\n\t     */\r\n\t    vm.issues = []\r\n\r\n\t    vm.nonClosedIssues = []\r\n\t  }\r\n\r\n\t  function initDetailedFormM() {\r\n\t    vm.formM = {\r\n\t      date_received: new Date(vm.detailedFormM.date_received),\r\n\t      number: vm.detailedFormM.number,\r\n\t      applicant: vm.detailedFormM.applicant_data,\r\n\t      currency: vm.detailedFormM.currency_data,\r\n\t      amount: Number(vm.detailedFormM.amount),\r\n\t      goods_description: vm.detailedFormM.goods_description,\r\n\t      form_m_issues: vm.detailedFormM.form_m_issues,\r\n\t      url: vm.detailedFormM.url,\r\n\t      covers: vm.detailedFormM.covers\r\n\t    }\r\n\r\n\t    $scope.updateAddFormMTitle(vm.formM)\r\n\r\n\t    LcBidRequest.getPaginated({mf: vm.formM.number}).$promise.then(function(data) {\r\n\t      if (data.count) {\r\n\t        var results = data.results\r\n\r\n\t        if (results.length) vm.existingBids = results\r\n\t      }\r\n\t    })\r\n\r\n\t    vm.fieldsEdit = {\r\n\t      number: true,\r\n\t      currency: true,\r\n\t      applicant: true,\r\n\t      date_received: true,\r\n\t      amount: true\r\n\t    }\r\n\r\n\t  }\r\n\r\n\t  function initFormMSavingIndicator() {\r\n\t    var summary = $stateParams.showSummary\r\n\t    $stateParams.showSummary = null\r\n\r\n\t    if (summary) {\r\n\t      confirmationDialog.showDialog({\r\n\t                                      title: '\"' + vm.formM.number + '\" successfully saved',\r\n\t                                      text: summary,\r\n\t                                      infoOnly: true\r\n\t                                    })\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.onCoverChanged = function onCoverChanged(cover, form) {\r\n\t    vm.cover = cover\r\n\t    coverForm = form\r\n\t  }\r\n\r\n\t  vm.onIssuesChanged = function onIssuesChanged(issues, form) {\r\n\t    vm.issues = issues\r\n\t    issuesForm = form\r\n\t  }\r\n\r\n\t  vm.onNonClosedIssuesChanged = function onNonClosedIssuesChanged(issues) {\r\n\t    vm.nonClosedIssues = issues\r\n\t  }\r\n\r\n\t  vm.enableFieldEdit = function enableFieldEdit(field) {\r\n\t    vm.fieldsEdit[field] = vm.detailedFormM ? !vm.fieldsEdit[field] : false\r\n\t  }\r\n\r\n\t  vm.validators = {\r\n\t    applicant: {\r\n\t      test: function() {\r\n\t        return kanmiiUnderscore.isObject(vm.formM.applicant)\r\n\t      }\r\n\t    },\r\n\r\n\t    currency: {\r\n\t      test: function() {\r\n\t        return kanmiiUnderscore.isObject(vm.formM.currency)\r\n\t      }\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.disableSubmitBtn = disableSubmitBtn\r\n\t  function disableSubmitBtn() {\r\n\t    if ($scope.newFormMForm.$invalid) return true\r\n\r\n\t    if (coverForm && coverForm.$invalid) return true\r\n\r\n\t    if ($scope.bidForm.$invalid) return true\r\n\r\n\t    if (issuesForm && issuesForm.$invalid) return true\r\n\r\n\t    if (vm.showEditBid) return true\r\n\r\n\t    var compared = compareDetailedFormMWithForm()\r\n\r\n\t    if (!compared) return false\r\n\r\n\t    if (kanmiiUnderscore.all(compared)) {\r\n\t      if (!kanmiiUnderscore.isEmpty(vm.bid) && vm.bid.goods_description && vm.bid.amount) return false\r\n\t      if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) return false\r\n\t      return !vm.issues.length\r\n\t    }\r\n\r\n\t    return false\r\n\t  }\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(addFormMForm) {\r\n\t    vm.detailedFormM = null\r\n\r\n\t    resetForm2(addFormMForm, [\r\n\t      {\r\n\t        form: $scope.newFormMForm, elements: ['applicant', 'currency']\r\n\t      }\r\n\t    ])\r\n\r\n\t    initialize()\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\t  vm.getCurrency = getTypeAheadCurrency\r\n\r\n\t  vm.datePickerFormat = 'dd-MMM-yyyy'\r\n\t  vm.datePickerIsOpen = false\r\n\t  vm.openDatePicker = function openDatePicker() {\r\n\t    vm.datePickerIsOpen = true\r\n\t  }\r\n\r\n\t  vm.getUploadedFormM = function getUploadedFormM() {\r\n\t    vm.detailedFormM = null\r\n\t    initialize()\r\n\r\n\t    SearchDetailedOrUploadedFormMService.searchWithModal().then(function(data) {\r\n\t      if (data.detailed) {\r\n\t        vm.detailedFormM = data.detailed\r\n\t        initDetailedFormM()\r\n\r\n\t      } else {\r\n\t        var formM = data.uploaded\r\n\t        vm.searchFormM = formM\r\n\t        vm.formM.number = formM.mf\r\n\t        vm.formM.amount = formM.cost_freight\r\n\t        vm.formM.goods_description = formM.goods_description\r\n\r\n\t        getTypeAheadCurrency(formM.ccy).then(function(ccy) {\r\n\t          vm.formM.currency = ccy[0]\r\n\t        })\r\n\t      }\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.submit = function submit(formM) {\r\n\t    var formMToSave = angular.copy(formM)\r\n\r\n\t    formMToSave.applicant = formMToSave.applicant.url\r\n\t    formMToSave.currency = formMToSave.currency.url\r\n\t    formMToSave.date_received = formatDate(formMToSave.date_received)\r\n\r\n\t    if (!kanmiiUnderscore.isEmpty(vm.bid)) {\r\n\t      formMToSave.goods_description = vm.bid.goods_description\r\n\t      formMToSave.bid = {amount: vm.bid.amount}\r\n\t    }\r\n\r\n\t    if (vm.issues.length) formMToSave.issues = vm.issues\r\n\r\n\t    if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) {\r\n\t      formMToSave.cover = {\r\n\t        amount: vm.cover.amount,\r\n\t        cover_type: vm.cover.cover_type[0]\r\n\t      }\r\n\t    }\r\n\r\n\t    if (!vm.detailedFormM) new FormM(formMToSave).$save(formMSavedSuccess, formMSavedError)\r\n\r\n\t    else {\r\n\t      if (kanmiiUnderscore.all(compareDetailedFormMWithForm1(formMToSave))) {\r\n\t        formMToSave.do_not_update = 'do_not_update'\r\n\t        formMToSave.applicant_data = vm.formM.applicant\r\n\t        formMToSave.currency_data = vm.formM.currency\r\n\t      }\r\n\t      formMToSave.id = vm.detailedFormM.id\r\n\t      new FormM(formMToSave).$put(formMSavedSuccess, formMSavedError)\r\n\t    }\r\n\r\n\t    function formMSavedSuccess(data) {\r\n\t      //even though non-closed issues will be set in the lc-issue directive, we need to read them off data received\r\n\t      //from server so we can display them as part of summary to users. :TODO find a better implementation\r\n\t      vm.nonClosedIssues = data.form_m_issues.filter(function(issue) {\r\n\t        return !issue.closed_at\r\n\t      })\r\n\r\n\t      var summary = showFormMMessage() + showIssuesMessage()\r\n\r\n\t      if (data.bid) {\r\n\t        summary += '\\n\\nBid Amount     : ' + data.currency_data.code + ' ' + $filter('number')(data.bid.amount, 2)\r\n\t      }\r\n\r\n\t      if (data.cover) data.covers.push(data.cover)\r\n\r\n\t      $state.go('form_m.add', {detailedFormM: data, showSummary: summary})\r\n\t    }\r\n\r\n\t    function formMSavedError(xhr) {\r\n\t      xhrErrorDisplay(xhr, formMAttributesVerboseNames)\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.downloadSummary = function downloadSummary() {\r\n\t    confirmationDialog.showDialog({\r\n\t      title: vm.formM.number,\r\n\t      text: $scope.showFormMMessage() + $scope.showIssuesMessage(),\r\n\t      infoOnly: true\r\n\t    })\r\n\t  }\r\n\r\n\t  $scope.showFormMMessage = showFormMMessage\r\n\t  function showFormMMessage() {\r\n\t    var number = $filter('number')(vm.formM.amount, 2)\r\n\t    var header = vm.formM.applicant.name + ' - ' + vm.formM.number + ' - ' + vm.formM.currency.code + ' ' + number\r\n\t    return header + '\\n\\nForm M Number : ' + vm.formM.number + '\\n' +\r\n\t           'Value         : ' + vm.formM.currency.code + ' ' +\r\n\t           number + '\\n' +\r\n\t           'Applicant     : ' + vm.formM.applicant.name\r\n\t  }\r\n\r\n\t  $scope.showIssuesMessage = showIssuesMessage\r\n\t  function showIssuesMessage() {\r\n\t    if (!vm.nonClosedIssues.length) return ''\r\n\r\n\t    var issuesText = '\\n\\n\\nPlease note the following issues which must be regularized before the LC ' +\r\n\t                     'request can be treated:\\n'\r\n\r\n\t    kanmiiUnderscore.each(vm.nonClosedIssues, function(issue, index) {\r\n\t      ++index\r\n\t      issuesText += ('(' + index + ') ' + vm.formatIssueText(issue.text || issue.issue.text) + '\\n')\r\n\t    })\r\n\r\n\t    return issuesText\r\n\t  }\r\n\r\n\t  vm.formatIssueText = function(text) {\r\n\t    return text.replace(/:ISSUE$/i, '')\r\n\t  }\r\n\r\n\t  function compareDetailedFormMWithForm() {\r\n\t    if (!vm.detailedFormM) return false\r\n\r\n\t    return {\r\n\t      number: vm.formM.number && angular.equals(vm.formM.number, vm.detailedFormM.number),\r\n\r\n\t      date_received: angular.equals(vm.formM.date_received, new Date(vm.detailedFormM.date_received)),\r\n\r\n\t      amount: vm.formM.amount && angular.equals(vm.formM.amount, Number(vm.detailedFormM.amount)),\r\n\r\n\t      currency: vm.formM.currency && (vm.formM.currency.code === vm.detailedFormM.currency_data.code),\r\n\r\n\t      applicant: vm.formM.applicant && (vm.formM.applicant.name === vm.detailedFormM.applicant_data.name)\r\n\t    }\r\n\t  }\r\n\r\n\t  function compareDetailedFormMWithForm1(formM) {\r\n\t    if (!vm.detailedFormM) return false\r\n\r\n\t    return {\r\n\t      number: formM.number && angular.equals(formM.number, vm.detailedFormM.number),\r\n\r\n\t      date_received: angular.equals(formM.date_received, new Date(vm.detailedFormM.date_received)),\r\n\r\n\t      amount: formM.amount && angular.equals(formM.amount, Number(vm.detailedFormM.amount)),\r\n\r\n\t      currency: formM.currency && (formM.currency.code === vm.detailedFormM.currency_data.code),\r\n\r\n\t      applicant: formM.applicant && (formM.applicant.name === vm.detailedFormM.applicant_data.name)\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\t__webpack_require__(8)\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('lc-issue', [\r\n\t  'rootApp',\r\n\t  'lc-issue-service'\r\n\t])\r\n\r\n\tapp.directive('lcIssue', lcIssueDirective)\r\n\r\n\tlcIssueDirective.$inject = []\r\n\r\n\tfunction lcIssueDirective() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    templateUrl: __webpack_require__(4).buildUrl('form-m/add-form-m/lc-issue/lc-issue.html'),\r\n\t    scope: true,\r\n\t    bindToController: {\r\n\t      formM: '=mfContext',\r\n\t      issues: '=',\r\n\t      onIssuesChanged: '&',\r\n\t      onNonClosedIssuesChanged: '&'\r\n\t    },\r\n\t    controller: 'LcIssueDirectiveController as lcIssue'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('LcIssueDirectiveController', LcIssueDirectiveController)\r\n\r\n\tLcIssueDirectiveController.$inject = [\r\n\t  '$scope',\r\n\t  'LCIssueConcrete',\r\n\t  'getTypeAheadLCIssue',\r\n\t  'formatDate',\r\n\t  'xhrErrorDisplay',\r\n\t  'resetForm2',\r\n\t  'clearFormField',\r\n\t  'confirmationDialog'\r\n\t]\r\n\r\n\tfunction LcIssueDirectiveController($scope, LCIssueConcrete, getTypeAheadLCIssue, formatDate, xhrErrorDisplay,\r\n\t  resetForm2, clearFormField, confirmationDialog) {\r\n\t  var vm = this\r\n\t  var title = 'Add Letter Of Credit Issues'\r\n\r\n\t  initExistingIssues()\r\n\t  function initExistingIssues() {\r\n\t    vm.closedIssues = []\r\n\t    vm.nonClosedIssues = []\r\n\t  }\r\n\r\n\t  initContainerVars()\r\n\t  function initContainerVars(form) {\r\n\t    vm.title = title\r\n\t    vm.showContainer = false\r\n\r\n\t    vm.issues = []\r\n\t    vm.issue = null\r\n\r\n\t    if (form) resetForm2(form, [\r\n\t      {form: form, elements: ['issue']}\r\n\t    ])\r\n\t  }\r\n\r\n\t  vm.closeIssue = function closeIssue(issue, $index) {\r\n\t    var closedAt = formatDate(new Date())\r\n\r\n\t    var text = 'Sure you want to close issue:\\n\"' +\r\n\t               $scope.addFormMState.formatIssueText(issue.issue.text) + '\"?'\r\n\r\n\t    confirmationDialog.showDialog({title: 'Close issue', text: text}).then(function(answer) {\r\n\t      if (answer) {\r\n\t        LCIssueConcrete.put({\r\n\t          id: issue.id,\r\n\t          mf: vm.formM.url,\r\n\t          issue: issue.issue.url,\r\n\t          closed_at: closedAt\r\n\t        }).$promise.then(issueClosedSuccess, issueClosedError)\r\n\t      }\r\n\t    })\r\n\r\n\t    function issueClosedSuccess() {\r\n\t      var text = 'Issue closed successfully:\\n' + $scope.addFormMState.formatIssueText(issue.issue.text)\r\n\t      confirmationDialog.showDialog({title: 'Close issue', text: text, infoOnly: true})\r\n\t      vm.nonClosedIssues.splice($index, 1)\r\n\t      issue.closed_at = closedAt\r\n\t      vm.closedIssues.push(issue)\r\n\t    }\r\n\r\n\t    function issueClosedError(xhr) {xhrErrorDisplay(xhr)}\r\n\t  }\r\n\r\n\t  vm.issueSelected = function issueSelected($item, $model) {\r\n\t    vm.issues.push($model)\r\n\t    vm.issue = null\r\n\t    clearFormField($scope.issuesForm, 'issue')\r\n\t  }\r\n\r\n\t  vm.deleteIssue = function deleteIssue(index) {\r\n\t    vm.issues.splice(index, 1)\r\n\t  }\r\n\r\n\t  vm.getIssue = function getIssue(text) {\r\n\t    var _ids = []\r\n\r\n\t    vm.issues.forEach(function(issue) {\r\n\t      _ids.push(issue.id)\r\n\t    })\r\n\r\n\t    var x = []\r\n\r\n\t    x.concat(vm.nonClosedIssues).concat(vm.closedIssues).forEach(function(issue) {\r\n\t      _ids.push(issue.issue.id)\r\n\t    })\r\n\r\n\t    return getTypeAheadLCIssue({text: text, exclude_issue_ids: _ids.join(',')})\r\n\t  }\r\n\r\n\t  vm.toggleShow = function toggleShow(form) {\r\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\r\n\r\n\t    if (!vm.showContainer) initContainerVars(form)\r\n\t    else vm.title = 'Dismiss'\r\n\t  }\r\n\r\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\r\n\t    if (newFormM) {\r\n\t      var formMIssues = newFormM.form_m_issues\r\n\t      if (formMIssues && formMIssues.length !== (vm.closedIssues.length + vm.nonClosedIssues.length)) {\r\n\t        formMIssues.forEach(function(issue) {\r\n\t          if (!issue.closed_at) {\r\n\t            vm.nonClosedIssues.push(issue)\r\n\t            return true\r\n\t          }\r\n\t          else {\r\n\t            vm.closedIssues.push(issue)\r\n\t            return false\r\n\t          }\r\n\t        })\r\n\t      }\r\n\r\n\t      if (!newFormM.number || !newFormM.amount) {\r\n\t        initExistingIssues()\r\n\t        initContainerVars()\r\n\t      }\r\n\t    }\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getIssues() {return vm.issues}, function onUpdateIssues(newIssues) {\r\n\t    $scope.issuesForm.issue.$validate()\r\n\t    if (newIssues) vm.onIssuesChanged({issues: newIssues, issuesForm: $scope.issuesForm})\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getNonClosedIssues() {return vm.nonClosedIssues}, function onUpdateNonClosedIssues(newIssues) {\r\n\t    if (newIssues) vm.onNonClosedIssuesChanged({issues: newIssues})\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getShowContainer() {return vm.showContainer}, function onUpdateShowContainer() {\r\n\t    $scope.issuesForm.issue.$validate()\r\n\t  })\r\n\t}\r\n\r\n\tapp.directive('validateIssues', function validateIssues() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    require: 'ngModel',\r\n\t    link: function($scope, elm, atts, ctrl) {\r\n\t      var vm = $scope.lcIssue\r\n\t      ctrl.$validators.issues = function() {\r\n\t        return !vm.showContainer || Boolean(vm.issues.length)\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t})\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar lcCommons = __webpack_require__(5)\r\n\r\n\t/**\r\n\t * @description\r\n\t *\r\n\t * @param {String} fsPath - the path relative to the form-m directory\r\n\t * @returns {*|string}\r\n\t */\r\n\tfunction buildUrl(fsPath) {\r\n\t  return lcCommons.buildUrl('app') + '/' + fsPath\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t  buildUrl: buildUrl\r\n\t}\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar appName = 'letter_of_credit'\r\n\r\n\tfunction buildUrl(fsPath) {\r\n\t  return rootCommons.buildUrl(appName, fsPath)\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t  buildUrl: buildUrl,\r\n\t  appName: appName\r\n\t}\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\r\n\tvar interpolateProviderConfig = ['$interpolateProvider', function ($interpolateProvider) {\r\n\t  $interpolateProvider.startSymbol('{$');\r\n\t  $interpolateProvider.endSymbol('$}');\r\n\t}];\r\n\r\n\t/**\r\n\t * Takes a file system path to a file (most likely a template path) and returns the server compatible path\r\n\t *\r\n\t * @param {string} appName - the name of the django app\r\n\t * @param {string} fsPath - relative path to a file resource on disk. The path must be relative to appName/js directory\r\n\t *   path\r\n\t * @returns {string} - a server compatible path\r\n\t */\r\n\tfunction buildUrl(appName, fsPath) {\r\n\t  return staticPrefix + appName + '/js/' + fsPath\r\n\t}\r\n\r\n\t/**\r\n\t * sets the static root on an angular app - so we can use a variable in our views rather hard-coding the static root\r\n\t * value\r\n\t * @param {angular.module} app the angular module on which we wish to set the static root\r\n\t */\r\n\tfunction setStaticPrefix(app) {\r\n\t  app.run(['$rootScope', function ($rootScope) {\r\n\t    $rootScope.staticPrefix = staticPrefix\r\n\t    $rootScope.addIconSrc = staticPrefix + 'core_recons/css/images/icon_addposting.gif'\r\n\t  }])\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t  interpolateProviderConfig: interpolateProviderConfig,\r\n\r\n\t  buildUrl: buildUrl,\r\n\r\n\t  rootAppName: 'core_recons',\r\n\r\n\t  setStaticPrefix: setStaticPrefix\r\n\t}\r\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar app = angular.module('lc-cover', [\r\n\t  'rootApp'\r\n\t])\r\n\r\n\tapp.directive('lcCover', lcIssueDirective)\r\n\r\n\tlcIssueDirective.$inject = []\r\n\r\n\tfunction lcIssueDirective() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    templateUrl: __webpack_require__(4).buildUrl('form-m/add-form-m/lc-cover/lc-cover.html'),\r\n\t    scope: true,\r\n\t    bindToController: {\r\n\t      formM: '=mfContext',\r\n\t      cover: '=',\r\n\t      onCoverChanged: '&'\r\n\t    },\r\n\t    controller: 'LcCoverDirectiveController as lcCover'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('LcCoverDirectiveController', LcCoverDirectiveController)\r\n\r\n\tLcCoverDirectiveController.$inject = [\r\n\t  '$scope',\r\n\t  'formMCoverTypes',\r\n\t  '$filter',\r\n\t  'formFieldIsValid'\r\n\t]\r\n\r\n\tfunction LcCoverDirectiveController($scope, formMCoverTypes, $filter, formFieldIsValid) {\r\n\t  var vm = this\r\n\t  var title = 'Register Cover'\r\n\t  init()\r\n\r\n\t  function init(form) {\r\n\t    vm.title = title\r\n\t    vm.showContainer = false\r\n\t    vm.cover = {}\r\n\t    vm.coverTypes = null\r\n\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.isValid = function isValid(name, validity) {\r\n\t    return formFieldIsValid($scope, 'coverForm', name, validity)\r\n\t  }\r\n\r\n\t  vm.amountGetterSetter = function(val) {\r\n\t    if (arguments.length) {\r\n\t      if (!/[\\d,\\.]+/.test(val)) vm.cover.amount = null\r\n\t      else vm.cover.amount = Number(val.replace(/,/g, ''))\r\n\t    } else return vm.cover.amount ? $filter('number')(vm.cover.amount, 2) : undefined\r\n\t  }\r\n\r\n\t  vm.toggleShow = function toggleShow(form) {\r\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\r\n\r\n\t    if (!vm.showContainer) {\r\n\t      init(form)\r\n\t    }\r\n\t    else {\r\n\t      vm.title = 'Dismiss'\r\n\t      vm.coverTypes = formMCoverTypes\r\n\t      vm.cover.amount = vm.formM.amount\r\n\t    }\r\n\t  }\r\n\r\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\r\n\t    if (newFormM) {\r\n\t      if (! newFormM.number || !newFormM.amount) init()\r\n\t    }\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getCover() {return vm.cover}, function(newCover) {\r\n\t    vm.onCoverChanged({\r\n\t      cover: newCover, coverForm: $scope.coverForm\r\n\t    })\r\n\r\n\t  }, true)\r\n\t}\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('add-form-m')\r\n\r\n\tapp.directive('lcBid', lcBidDirective)\r\n\r\n\tlcBidDirective.$inject = []\r\n\r\n\tfunction lcBidDirective() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    templateUrl: __webpack_require__(4).buildUrl('form-m/add-form-m/lc-bid/lc-bid.html'),\r\n\t    scope: false,\r\n\t    bindToController: {\r\n\t      bid: '='\r\n\t    },\r\n\t    controller: 'LcBidDirectiveController as lcBid'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('LcBidDirectiveController', LcBidDirectiveController)\r\n\r\n\tLcBidDirectiveController.$inject = [\r\n\t  '$scope',\r\n\t  '$filter',\r\n\t  'formFieldIsValid',\r\n\t  'kanmiiUnderscore',\r\n\t  'LcBidRequest',\r\n\t  'xhrErrorDisplay',\r\n\t  'confirmationDialog'\r\n\t]\r\n\r\n\tfunction LcBidDirectiveController($scope, $filter, formFieldIsValid, kanmiiUnderscore, LcBidRequest, xhrErrorDisplay,\r\n\t  confirmationDialog) {\r\n\t  var vm = this\r\n\t  var title = 'Make Bid Request'\r\n\t  init()\r\n\r\n\t  function init(form) {\r\n\t    vm.title = title\r\n\t    $scope.addFormMState.showBidForm = false\r\n\t    $scope.addFormMState.bid = {}\r\n\r\n\t    $scope.addFormMState.showEditBid = false\r\n\t    vm.bidToEdit = null\r\n\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.isValid = function(name, validity) {\r\n\t    return formFieldIsValid($scope, 'bidForm', name, validity)\r\n\t  }\r\n\r\n\t  vm.amountGetterSetter = function(val) {\r\n\t    if (arguments.length) {\r\n\t      if (!/[\\d,\\.]+/.test(val)) $scope.addFormMState.bid.amount = null\r\n\t      else $scope.addFormMState.bid.amount = Number(val.replace(/,/g, ''))\r\n\r\n\t    } else return $scope.addFormMState.bid.amount ? $filter('number')($scope.addFormMState.bid.amount, 2) : undefined\r\n\t  }\r\n\r\n\t  vm.toggleShow = function toggleShow(form) {\r\n\t    $scope.addFormMState.showBidForm = $scope.addFormMState.formM.amount && $scope.addFormMState.formM.number && !$scope.addFormMState.showBidForm\r\n\r\n\t    if (!$scope.addFormMState.showBidForm) {\r\n\t      init(form)\r\n\t    }\r\n\t    else {\r\n\t      vm.title = 'Dismiss'\r\n\t      var goods = $scope.addFormMState.formM.goods_description\r\n\t      if (goods) $scope.addFormMState.bid.goods_description = goods\r\n\r\n\t      $scope.addFormMState.bid.amount = !$scope.addFormMState.existingBids.length ?\r\n\t                                        $scope.addFormMState.formM.amount : null\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.editBidInvalid = function editBidInvalid() {\r\n\t    if (kanmiiUnderscore.isEmpty(vm.bidToEdit)) return true\r\n\r\n\t    if ($scope.bidForm.$invalid) return true\r\n\r\n\t    return kanmiiUnderscore.all(bidNotModified())\r\n\t  }\r\n\r\n\t  vm.onBidDblClick = function onBidDblClick(bid, $index) {\r\n\t    $scope.addFormMState.showEditBid = true\r\n\t    $scope.addFormMState.showBidForm = false\r\n\t    vm.toggleShow()\r\n\t    vm.bidToEdit = angular.copy(bid)\r\n\t    vm.bidToEdit.amount = Number(vm.bidToEdit.amount)\r\n\t    vm.bidToEdit.$index = $index\r\n\t    $scope.addFormMState.bid.amount = vm.bidToEdit.amount\r\n\t  }\r\n\r\n\t  vm.trashBid = function trashBid(bid, $index) {\r\n\t    var text = '\\n\\nApplicant: ' + bid.applicant +\r\n\t               '\\nForm M: ' + bid.form_m_number +\r\n\t               '\\nBid Amount: ' + bid.currency + ' ' + $filter('number')(bid.amount, 2)\r\n\r\n\t    var mf = '\"' + bid.form_m_number + '\"'\r\n\r\n\t    confirmationDialog.showDialog({\r\n\t                                    text: 'Sure you want to delete bid:' + text, title: 'Delete bid for ' + mf\r\n\t                                  }).then(function(answer) {\r\n\t      if (answer) {\r\n\t        LcBidRequest.delete(bid).$promise.then(bidDeleteSuccess, function bidDeleteFailure(xhr) {\r\n\t          xhrErrorDisplay(xhr)\r\n\t        })\r\n\t      }\r\n\t    })\r\n\r\n\t    function bidDeleteSuccess() {\r\n\t      confirmationDialog.showDialog({\r\n\t                                      text: 'Bid delete successfully:' + text,\r\n\t                                      title: 'Bid for ' + mf + ' deleted successfully',\r\n\t                                      infoOnly: true\r\n\t                                    })\r\n\r\n\t      $scope.addFormMState.existingBids.splice($index, 1)\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.editBid = function editBid() {\r\n\t    var title = 'Edit bid \"' + vm.bidToEdit.form_m_number + '\"'\r\n\r\n\t    var ccy = $scope.addFormMState.formM.currency.code\r\n\t    var text = '\\n\\nForm M:           ' + vm.bidToEdit.form_m_number +\r\n\t               '\\nBid Amount' +\r\n\t               '\\n  before edit:    ' + ccy + $filter('number')(vm.bidToEdit.amount, 2) +\r\n\t               '\\n  after edit:     ' + ccy + $filter('number')($scope.addFormMState.bid.amount, 2) +\r\n\t               '\\nGoods description' +\r\n\t               '\\n  before edit:    ' + vm.bidToEdit.goods_description +\r\n\t               '\\n\\n  after edit:     ' + $scope.addFormMState.bid.goods_description\r\n\r\n\t    confirmationDialog.showDialog({\r\n\t                                    title: title,\r\n\t                                    text: 'Are you sure you want to edit Bid:' + text\r\n\t                                  }).then(function(answer) {\r\n\t      if (answer) doEdit()\r\n\t    })\r\n\r\n\t    function doEdit() {\r\n\t      var bid = angular.copy(vm.bidToEdit)\r\n\t      bid.amount = $scope.addFormMState.bid.amount\r\n\t      bid.goods_description = $scope.addFormMState.bid.goods_description\r\n\r\n\t      //we need to do this so this bid can show up at the bid list interface in case user wishes to download and\r\n\t      //send the bid to treasury\r\n\t      bid.requested_at = null\r\n\r\n\t      LcBidRequest.put(bid).$promise.then(function() {\r\n\t        confirmationDialog.showDialog({title: title, text: 'Edit successful: ' + text, infoOnly: true})\r\n\t        $scope.addFormMState.existingBids.splice(bid.$index, 1, bid)\r\n\t        init()\r\n\t      }, function(xhr) {\r\n\t        xhrErrorDisplay(xhr)\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  function bidNotModified() {\r\n\t    return {\r\n\t      amount: vm.bidToEdit.amount === $scope.addFormMState.bid.amount,\r\n\t      goods_description: vm.bidToEdit.goods_description === $scope.addFormMState.bid.goods_description\r\n\t    }\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar app = angular.module('form-m-bids', [\r\n\t  'ui.router',\r\n\t  'lc-bid-request',\r\n\t  'rootApp',\r\n\t  'kanmii-URI',\r\n\t  'kanmii-underscore',\r\n\t  'form-m-service'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(bidURLConfig)\r\n\tbidURLConfig.$inject = ['$stateProvider']\r\n\tfunction bidURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('form_m.bids', {\r\n\r\n\t      kanmiiTitle: 'Bids',\r\n\r\n\t      views: {\r\n\t        bids: {\r\n\t          template: __webpack_require__(10),\r\n\r\n\t          controller: 'BidRequestController as bidHome'\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('BidRequestController', BidRequestController)\r\n\tBidRequestController.$inject = [\r\n\t  'LcBidRequest',\r\n\t  '$scope',\r\n\t  '$http',\r\n\t  'kanmiiUri',\r\n\t  'urls',\r\n\t  'kanmiiUnderscore',\r\n\t  'formatDate',\r\n\t  '$timeout',\r\n\t  '$q',\r\n\t  'FormM'\r\n\t]\r\n\tfunction BidRequestController(LcBidRequest, $scope, $http, kanmiiUri, urls, kanmiiUnderscore, formatDate, $timeout, $q,\r\n\t  FormM) {\r\n\t  var vm = this;\r\n\r\n\t  initialize()\r\n\t  function initialize() {\r\n\t    vm.newBid = null\r\n\r\n\t    /**\r\n\t     * When the search-bid directive returns, the result is propagated into this model\r\n\t     * @type {null|object}\r\n\t     */\r\n\t    vm.searchedBidResult = null\r\n\r\n\t    vm.selectedBids = {}\r\n\r\n\t    vm.selectedDownloadedBids = {}\r\n\r\n\t    /**\r\n\t     * The bids retrieved from backend. Will contain a list of bids and pagination hooks for\r\n\t     * retrieving the next and previous sets of bids. This model is used by the display directive\r\n\t     * to display the bids in a table\r\n\t     * @type {object}\r\n\t     */\r\n\t    vm.bidRequests = []\r\n\t    vm.paginationHooks = {}\r\n\t    LcBidRequest.pending().$promise.then(function(data) {\r\n\t      updateBids(data)\r\n\t    })\r\n\t  }\r\n\r\n\t  /**\r\n\t   * When a row of the pending bids table is clicked, this function is invoked with the bid at that row\r\n\t   * @param {{}} bid - the bid object at the row that was double clicked\r\n\t   */\r\n\t  vm.rowDblClickCb = function rowDblClickCb(bid) {\r\n\t    FormM.getPaginated({number: bid.form_m_number}).$promise.then(function(data) {\r\n\t      var results = data.results\r\n\t      if (results.length && results.length === 1) {\r\n\t        $scope.goToFormM(results[0])\r\n\t      }\r\n\t    })\r\n\t  }\r\n\r\n\t  /**\r\n\t   * The table caption for the 'model-table' directive\r\n\t   * @type {string}\r\n\t   */\r\n\t  vm.tableCaption = 'Pending Bids'\r\n\r\n\t  /**\r\n\t   * Will be invoked when any of the pager links is clicked in other to get the bids at the pager url\r\n\t   * @type {getBidsOnNavigation}\r\n\t   */\r\n\t  vm.getBidsOnNavigation = getBidsOnNavigation\r\n\t  function getBidsOnNavigation(linkUrl) {\r\n\t    $http.get(linkUrl).then(function(response) {\r\n\t      updateBids(response.data)\r\n\t    })\r\n\t  }\r\n\r\n\t  $scope.$watch(function searchedBidResult() {return vm.searchedBidResult},\r\n\t                function searchedBidResultChanged(searchedBidResult) {\r\n\t                  if (searchedBidResult) {\r\n\t                    updateBids(searchedBidResult)\r\n\t                  }\r\n\t                })\r\n\r\n\t  /**\r\n\t   * Update the bid collection and pagination hooks\r\n\t   * @param {object} data\r\n\t   */\r\n\t  function updateBids(data) {\r\n\t    vm.bidRequests = data.results\r\n\r\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\r\n\t  }\r\n\r\n\t  var url = kanmiiUri(urls.lcBidRequestDownloadUrl)\r\n\t  vm.downloadUrl = function downloadUrl() {\r\n\t    if (!kanmiiUnderscore.isEmpty(vm.selectedBids)) {\r\n\t      var search = []\r\n\r\n\t      kanmiiUnderscore.each(vm.selectedBids, function(selection, bidId) {\r\n\t        if (selection === true) search.push(bidId)\r\n\t      })\r\n\r\n\t      return url.search({bid_ids: search}).toString()\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.downloadBtnDisabled = function downloadBtnDisabled() {\r\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedBids)) return true\r\n\r\n\t    return !kanmiiUnderscore.any(vm.selectedBids, function(selectionVal) {\r\n\t      return selectionVal === true\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.onSelectedBidsChanged = onSelectedBidsChanged\r\n\t  function onSelectedBidsChanged(newSelections) {\r\n\t    if (newSelections && !kanmiiUnderscore.isEmpty(newSelections)) {\r\n\t      kanmiiUnderscore.each(newSelections, function(checked, bidId) {\r\n\t        var bid = getBidFromId(bidId)\r\n\r\n\t        if (bid && bid.downloaded) vm.selectedDownloadedBids[bidId] = checked\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.markRequestedBtnDisabled = function markRequestedBtnDisabled() {\r\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedDownloadedBids)) return true\r\n\r\n\t    //return true if un-downloaded bid is checked\r\n\t    //return false if there is at least one downloaded bid checked\r\n\t    var anyNoneDownloadedChecked = kanmiiUnderscore.any(vm.selectedBids, function(checked, bidId) {\r\n\t      return !kanmiiUnderscore.has(vm.selectedDownloadedBids, bidId) && checked === true\r\n\t    })\r\n\r\n\t    if (anyNoneDownloadedChecked) return true\r\n\t    else return !kanmiiUnderscore.any(vm.selectedDownloadedBids, function(checked) {\r\n\t      return checked === true\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.markRequested = function markRequested() {\r\n\t    var editedBids = []\r\n\r\n\t    kanmiiUnderscore.each(vm.selectedDownloadedBids, function(checked, bidId) {\r\n\t      if (!checked) return\r\n\r\n\t      var bid = getBidFromId(bidId)\r\n\t      if (bid) {\r\n\t        bid.requested_at = formatDate(new Date())\r\n\t        //LcBidRequest.put(bid).$promise.then(bidEditSuccess, bidEditFailure)\r\n\t        editedBids.push(LcBidRequest.put(bid).$promise)\r\n\t      }\r\n\t    })\r\n\r\n\t    if (editedBids.length) {\r\n\t      $q.all(editedBids).then(function() {\r\n\t        initialize()\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.refreshPage = function refreshPage() {\r\n\t    $timeout(function() {initialize()}, 3000)\r\n\t  }\r\n\r\n\t  function getBidFromId(bidId) {\r\n\t    for (var index = 0; index < vm.bidRequests.length; index++) {\r\n\t      var bid = vm.bidRequests[index]\r\n\t      if (bid.id === +bidId) return bid\r\n\t    }\r\n\r\n\t    return null\r\n\t  }\r\n\t}\r\n\r\n\t__webpack_require__(11)\r\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"action-buttons\\\" style=\\\"text-align: right;margin-bottom: 30px;\\\"><button class=\\\"btn btn-info\\\" ng-click=\\\"bidHome.searchBids()\\\">Search Bid Requests</button> <a class=\\\"btn btn-success\\\" ng-href=\\\"{$bidHome.downloadUrl()$}\\\" ng-disabled=\\\"bidHome.downloadBtnDisabled()\\\" ng-click=\\\"bidHome.refreshPage()\\\">Download</a> <button type=\\\"button\\\" name=\\\"bid-home-mark-as-requested-btn\\\" class=\\\"btn btn-success\\\" ng-click=\\\"bidHome.markRequested()\\\" ng-disabled=\\\"bidHome.markRequestedBtnDisabled()\\\">Mark as requested</button></div><div display-pending-bid=\\\"\\\" pending-bids=\\\"bidHome.bidRequests\\\" pager-object=\\\"bidHome.paginationHooks\\\" update-collection=\\\"bidHome.getBidsOnNavigation(linkUrl)\\\" pagination-size=\\\"20\\\" selected-bids=\\\"bidHome.selectedBids\\\" on-selected-bids-changed=\\\"bidHome.onSelectedBidsChanged(newSelections)\\\" on-row-dbl-click=\\\"bidHome.rowDblClickCb(bid)\\\"></div></div>\";\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar lcAppCommons = __webpack_require__(4)\r\n\r\n\tvar app = angular.module('form-m-bids')\r\n\r\n\tapp.directive('displayPendingBid', displayPendingBidDirective)\r\n\tfunction displayPendingBidDirective() {\r\n\t  return {\r\n\t    restrict: 'EA',\r\n\r\n\t    templateUrl: lcAppCommons.buildUrl('form-m/bids/display-pending-bid/display-pending-bid.html'),\r\n\r\n\t    scope: true,\r\n\r\n\t    bindToController: {\r\n\t      bids: '=pendingBids',\r\n\r\n\t      updateCollection: '&',\r\n\r\n\t      onSelectedBidsChanged: '&',\r\n\r\n\t      pager: '=pagerObject',\r\n\r\n\t      onDblClick: '&onRowDblClick',\r\n\r\n\t      paginationSize: '=',\r\n\r\n\t      selectedBids: '='\r\n\t    },\r\n\r\n\t    controller: 'displayPendingBidDirectiveCtrl as bidTable'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('displayPendingBidDirectiveCtrl', displayPendingBidDirectiveCtrl)\r\n\r\n\tdisplayPendingBidDirectiveCtrl.$inject = [\r\n\t  'pagerNavSetUpLinks',\r\n\t  '$scope',\r\n\t  'kanmiiUnderscore'\r\n\t]\r\n\r\n\tfunction displayPendingBidDirectiveCtrl(pagerNavSetUpLinks, scope, kanmiiUnderscore) {\r\n\t  var vm = this //jshint -W040\r\n\r\n\t  vm.selectedBids = {}\r\n\r\n\t  function setUpLinks(next, prev, count) {\r\n\r\n\t    var numLinks = Math.ceil(count / vm.paginationSize)\r\n\r\n\t    var linkProperties = pagerNavSetUpLinks(next, prev, numLinks)\r\n\r\n\t    vm.nextPageLink = next\r\n\t    vm.prevPageLink = prev\r\n\r\n\t    vm.linkUrls = linkProperties.linkUrls\r\n\t    vm.currentLink = linkProperties.currentLink\r\n\r\n\t    /**\r\n\t     * The row index offset. The row begin at one so in the view, we do `$index + 1` for row number. However, as we\r\n\t     * move from page to page, the `$index` view value is reset back to zero, so that row number always begin at 1.\r\n\t     * Since we know what the page number is (this.currentLink), we calculate the offset for the row (as an arithmetic\r\n\t     * progression)\r\n\t     * @type {number}\r\n\t     */\r\n\t    vm.rowIndexOffset = (vm.currentLink - 1) * vm.paginationSize\r\n\t  }\r\n\r\n\t  vm.onUpdateCollection = onUpdateCollection\r\n\t  function onUpdateCollection(linkUrl) {\r\n\t    vm.updateCollection({linkUrl: linkUrl})\r\n\t  }\r\n\r\n\t  scope.$watch(function getPager() {return vm.pager}, function updatedPager(pager) {\r\n\t    if (pager && !kanmiiUnderscore.isEmpty(pager)) {\r\n\t      setUpLinks(pager.next, pager.previous, pager.count)\r\n\t    }\r\n\t  })\r\n\r\n\t  function deselectAllBids() {\r\n\t    vm.bids.forEach(function(bid) {\r\n\t      bid.highlighted = false\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.modelRowClicked = modelRowClicked\r\n\t  function modelRowClicked(model) {\r\n\t    if (!model.downloaded) {\r\n\t      deselectAllBids()\r\n\r\n\t      //only highlight a row if no row is checked and the row model is not downloaded previously\r\n\t      model.highlighted = !kanmiiUnderscore.any(vm.bids, function(bid) {\r\n\t        return bid.checked\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.onRowDblClick = function onRowDblClick(bid) {\r\n\t    vm.onDblClick({bid: bid})\r\n\t  }\r\n\r\n\t  scope.$watch(function getSelectedBids() {return vm.selectedBids}, function updatedSelectedBids(selectedBids) {\r\n\t    vm.onSelectedBidsChanged({newSelections: selectedBids})\r\n\r\n\t    if (selectedBids && !kanmiiUnderscore.isEmpty(selectedBids)) {\r\n\r\n\t      kanmiiUnderscore.each(selectedBids, function(checked, id) {\r\n\r\n\t        for (var bidIndex = 0; bidIndex < vm.bids.length; bidIndex++) {\r\n\t          var bid = vm.bids[bidIndex]\r\n\t          if (bid.id === +id) {\r\n\t            bid.checked = checked\r\n\t          }\r\n\t        }\r\n\r\n\t      })\r\n\r\n\t      vm.toggleAll = kanmiiUnderscore.all(vm.bids, function(bid) {\r\n\t        return bid.checked === true\r\n\t      })\r\n\t    }\r\n\t  }, true)\r\n\r\n\t  vm.toggleAll = false\r\n\r\n\t  vm.toggleAllClicked = function toggleAllClicked() {\r\n\t    vm.bids.forEach(function(bid) {\r\n\t      vm.selectedBids[bid.id] = vm.toggleAll\r\n\t    })\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar app = angular.module('list-form-m',\r\n\t  ['rootApp',\r\n\t   'ui.router',\r\n\t   'form-m-service',\r\n\t   'form-m-search',\r\n\t   'model-table',\r\n\t   'customer',\r\n\t   'add-form-m'\r\n\t  ])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(formMListURLConfig)\r\n\tformMListURLConfig.$inject = ['$stateProvider']\r\n\tfunction formMListURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('form_m.list', {\r\n\t      kanmiiTitle: 'Form M List',\r\n\r\n\t      views: {\r\n\t        'listFormM': {\r\n\t          template: __webpack_require__(13),\r\n\r\n\t          controller: 'FormMListController as formMList'\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('FormMListController', FormMListController)\r\n\tFormMListController.$inject = ['FormM', '$scope', 'formMModelManager', '$http']\r\n\tfunction FormMListController(FormM, scope, formMModelManager, $http) {\r\n\t  var vm = this\r\n\r\n\t  /**\r\n\t   * The model manager will be used by the 'model-table' directive to manage the collection of form Ms retrieved\r\n\t   * from the server\r\n\t   * @type {[]}\r\n\t   */\r\n\t  vm.modelManager = formMModelManager\r\n\r\n\t  vm.modelRowDblClick = function modelRowDblClick(formM) {\r\n\t    scope.goToFormM(formM)\r\n\t  }\r\n\r\n\t  /**\r\n\t   * Update the form Ms collection and pagination hooks\r\n\t   * @param {object} data\r\n\t   */\r\n\t  function updateFormMs(data) {\r\n\t    vm.formMs = data.results\r\n\r\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\r\n\t  }\r\n\r\n\t  /**\r\n\t   * The object containing the hooks for paging through the form Ms collection\r\n\t   * @type {Array}\r\n\t   */\r\n\t  vm.paginationHooks = []\r\n\r\n\t  /**\r\n\t   * The form Ms retrieved from backend. Will contain a list of form Ms and pagination hooks for\r\n\t   * retrieving the next and previous sets of form Ms. This model is used by the display directive\r\n\t   * to display the form Ms in a table\r\n\t   * @type {[]}\r\n\t   */\r\n\t  vm.formMs = []\r\n\t  FormM.getNoLcAttached().$promise.then(function(data) {\r\n\t    updateFormMs(data)\r\n\t  })\r\n\r\n\t  /**\r\n\t   * The table caption for the 'model-table' directive\r\n\t   * @type {string}\r\n\t   */\r\n\t  vm.tableCaption = 'Form M (LC Not Established)'\r\n\r\n\t  vm.getFormMCollectionOnNavigation = getFormMCollectionOnNavigation\r\n\t  /**\r\n\t   * when we navigate through the form Ms, we make an http request to the link contained in the navigation ui\r\n\t   * @param {string} linkUrl - the url (href) of the link clicked by user\r\n\t   */\r\n\t  function getFormMCollectionOnNavigation(linkUrl) {\r\n\t    $http.get(linkUrl).then(function(response) {\r\n\t      updateFormMs(response.data)\r\n\t    })\r\n\t  }\r\n\r\n\t  /**\r\n\t   * When the search-form-m directive returns, the result is propagated into this model\r\n\t   * @type {null|object}\r\n\t   */\r\n\t  vm.searchedFormMResult = null\r\n\r\n\t  scope.$watch(function getNewFormM() {return vm.searchedFormMResult}, function(searchedFormMResult) {\r\n\t    if (searchedFormMResult) updateFormMs(searchedFormMResult)\r\n\t  })\r\n\t}\r\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"manage-form-m-tab-content\\\"><div class=\\\"action-buttons pull-right\\\"><button class=\\\"btn btn-info\\\" search-form-m=\\\"\\\" search-form-m-result=\\\"formMList.searchedFormMResult\\\">Search Form M</button></div><div model-table=\\\"\\\" model-collection=\\\"formMList.formMs\\\" table-model-manager=\\\"::formMList.modelManager\\\" table-caption=\\\"::formMList.tableCaption\\\" pagination-size=\\\"20\\\" update-collection=\\\"formMList.getFormMCollectionOnNavigation(linkUrl)\\\" pager-object=\\\"formMList.paginationHooks\\\" on-row-dbl-click-callback=\\\"formMList.modelRowDblClick(rowModel)\\\"></div></div>\";\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('search-detailed-or-uploaded-form-m', [\r\n\t  'kanmii-underscore',\r\n\t  'upload-form-m-service',\r\n\t  'toggle-dim-element',\r\n\t  'form-m-service'\r\n\t])\r\n\r\n\tapp.factory('SearchDetailedOrUploadedFormMService', SearchDetailedOrUploadedFormMService)\r\n\tSearchDetailedOrUploadedFormMService.$inject = [\r\n\t  'UploadFormM',\r\n\t  'xhrErrorDisplay',\r\n\t  'ModalService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$q',\r\n\t  'FormM'\r\n\t]\r\n\tfunction SearchDetailedOrUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, FormM) {\r\n\r\n\t  function searchFormM(submittedSearchParams) {\r\n\t    var deferred = $q.defer()\r\n\t    var mf = submittedSearchParams.mf\r\n\r\n\t    FormM.getPaginated({number: mf}).$promise.then(function(data) {\r\n\t      if (data.count === 1) {\r\n\t        deferred.resolve({detailed: data.results[0]})\r\n\r\n\t      } else UploadFormM.query({mf: mf}).$promise.then(searchFormMSuccess, searchFormMError)\r\n\r\n\t    }, searchFormMError)\r\n\r\n\t    function searchFormMSuccess(data) {\r\n\t      if (data.length === 1) deferred.resolve({uploaded: data[0]})\r\n\t    }\r\n\r\n\t    function searchFormMError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t      deferred.reject(xhr)\r\n\t    }\r\n\r\n\t    return deferred.promise\r\n\t  }\r\n\r\n\t  function SearchService() {\r\n\t    var service = this\r\n\r\n\t    service.searchWithModal = searchWithModal\r\n\t    function searchWithModal() {\r\n\t      var deferred = $q.defer()\r\n\r\n\t      ModalService.showModal({\r\n\t        templateUrl: __webpack_require__(4).buildUrl(\r\n\t          'form-m/search-detailed-or-uploaded-form-m/search-detailed-or-uploaded-form-m-modal.html'),\r\n\r\n\t        controller: 'SearchDetailedOrUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          dialogClass: 'no-close',\r\n\t          modal: true,\r\n\t          minWidth: 500,\r\n\t          minHeight: 200,\r\n\t          title: 'Search Form M',\r\n\r\n\t          close: function() {\r\n\t            modal.close.then()\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(submittedSearchParams) {\r\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t            deferred.resolve(searchFormM(submittedSearchParams))\r\n\t          }\r\n\t        })\r\n\t      })\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new SearchService()\r\n\t}\r\n\r\n\tapp.controller('SearchDetailedOrUploadedFormMServiceModalCtrl', SearchDetailedOrUploadedFormMServiceModalCtrl)\r\n\tSearchDetailedOrUploadedFormMServiceModalCtrl.$inject = [\r\n\t  'close',\r\n\t  'resetForm',\r\n\t  '$element'\r\n\t]\r\n\tfunction SearchDetailedOrUploadedFormMServiceModalCtrl(close, resetForm, element) {\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('form-m-search-service', ['kanmii-underscore', 'toggle-dim-element'])\r\n\r\n\tapp.factory('SearchFormMService', SearchFormMService)\r\n\tSearchFormMService.$inject = [\r\n\t  'FormM',\r\n\t  'xhrErrorDisplay',\r\n\t  'ModalService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$q',\r\n\t  'ToggleDimElement'\r\n\t]\r\n\tfunction SearchFormMService(FormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement) {\r\n\r\n\t  function searchFormM(submittedSearchParams) {\r\n\t    var deferred = $q.defer()\r\n\t    var searchParams = angular.copy(submittedSearchParams)\r\n\r\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\r\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\r\n\r\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\r\n\r\n\t    function searchFormMSuccess(data) {\r\n\t      deferred.resolve(data)\r\n\t    }\r\n\r\n\t    function searchFormMError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t      deferred.reject(xhr)\r\n\t    }\r\n\r\n\t    return deferred.promise\r\n\t  }\r\n\r\n\t  function SearchService() {\r\n\t    var service = this\r\n\r\n\t    service.searchWithModal = searchWithModal\r\n\t    function searchWithModal(config) {\r\n\t      var deferred = $q.defer()\r\n\t      config = config || {}\r\n\r\n\t      ModalService.showModal({\r\n\t        templateUrl: __webpack_require__(4).buildUrl('form-m/search-form-m-service/search-form-m-modal.html'),\r\n\t        controller: 'SearchFormMServiceModalCtrl as searchFormMModal',\r\n\t        inputs: {\r\n\t          uiOptions: config.uiOptions\r\n\t        }\r\n\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          dialogClass: 'no-close',\r\n\t          modal: true,\r\n\t          minWidth: 600,\r\n\t          minHeight: 450,\r\n\t          title: 'Search Form M',\r\n\r\n\t          open: function() {\r\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb) //jshint -W030\r\n\t          },\r\n\r\n\t          close: function() {\r\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(submittedSearchParams) {\r\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t            deferred.resolve(searchFormM(submittedSearchParams))\r\n\t          }\r\n\r\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\r\n\t        })\r\n\t      })\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new SearchService()\r\n\t}\r\n\r\n\tapp.controller('SearchFormMServiceModalCtrl', SearchFormMServiceModalCtrl)\r\n\tSearchFormMServiceModalCtrl.$inject = [\r\n\t  'uiOptions',\r\n\t  'close',\r\n\t  'resetForm',\r\n\t  '$element',\r\n\t  'getTypeAheadCustomer',\r\n\t  'getTypeAheadCurrency'\r\n\t]\r\n\tfunction SearchFormMServiceModalCtrl(uiOptions, close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\r\n\t  var vm = this\r\n\r\n\t  vm.displayLcIssueUI = false\r\n\r\n\t  if (uiOptions) {\r\n\t    vm.displayLcIssueUI = uiOptions.displayLcIssueUI\r\n\t  }\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t    vm.showLcIssueContainer = false\r\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\r\n\t    vm.selectedLcIssues = {}\r\n\t  }\r\n\r\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\r\n\t  function toggleShowLcIssueContainer() {\r\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\r\n\r\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\r\n\t  vm.submitSearchParams = submitSearchParams\r\n\t  function submitSearchParams(searchParams) {\r\n\t    close(searchParams)\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\t  vm.getCurrency = getTypeAheadCurrency\r\n\t}\r\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('form-m-search', ['kanmii-underscore'])\r\n\r\n\tapp.directive('searchFormM', searchFormMDirective)\r\n\tsearchFormMDirective.$inject = ['ModalService', 'kanmiiUnderscore']\r\n\tfunction searchFormMDirective(ModalService, kanmiiUnderscore) {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\r\n\t    link: function(scope, elm, attributes, self) {\r\n\t      elm\r\n\t        .css({cursor: 'pointer'})\r\n\t        .bind('click', function() {\r\n\t                ModalService.showModal({\r\n\t                  template: __webpack_require__(17),\r\n\r\n\t                  controller: 'SearchFormMModalCtrl as searchFormMModal'\r\n\r\n\t                }).then(function(modal) {\r\n\t                  modal.element.dialog({\r\n\t                    dialogClass: 'no-close',\r\n\t                    modal: true,\r\n\t                    minWidth: 600,\r\n\t                    minHeight: 450,\r\n\t                    title: 'Search Form M'\r\n\t                  })\r\n\r\n\t                  modal.close.then(function(submittedSearchParams) {\r\n\t                    if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t                      self.searchFormM(submittedSearchParams)\r\n\t                    }\r\n\t                  })\r\n\t                })\r\n\t              })\r\n\t    },\r\n\r\n\t    controller: 'SearchFormMDirectiveCtrl as searchFormM',\r\n\r\n\t    scope: {},\r\n\r\n\t    bindToController: {\r\n\t      searchFormMResult: '='\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('SearchFormMDirectiveCtrl', SearchFormMDirectiveCtrl)\r\n\tSearchFormMDirectiveCtrl.$inject = ['FormM', 'xhrErrorDisplay']\r\n\tfunction SearchFormMDirectiveCtrl(FormM, xhrErrorDisplay) {\r\n\t  var vm = this\r\n\r\n\t  vm.searchFormM = searchFormM\r\n\t  function searchFormM(submittedSearchParams) {\r\n\t    var searchParams = angular.copy(submittedSearchParams)\r\n\r\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\r\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\r\n\r\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\r\n\r\n\t    function searchFormMSuccess(data) {\r\n\t      vm.searchFormMResult = data\r\n\t    }\r\n\r\n\t    function searchFormMError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('SearchFormMModalCtrl', SearchFormMModalCtrl)\r\n\tSearchFormMModalCtrl.$inject = ['close', 'resetForm', '$element', 'getTypeAheadCustomer', 'getTypeAheadCurrency']\r\n\tfunction SearchFormMModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t    vm.showLcIssueContainer = false\r\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\r\n\t    vm.selectedLcIssues = {}\r\n\t  }\r\n\r\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\r\n\t  function toggleShowLcIssueContainer() {\r\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\r\n\r\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\r\n\t  vm.submitSearchParams = submitSearchParams\r\n\t  function submitSearchParams(searchParams) {\r\n\t    close(searchParams)\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\t  vm.getCurrency = getTypeAheadCurrency\r\n\t}\r\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=\\\"search-form-m-root-container\\\" class=\\\"search-form-m-root-container\\\"><form novalidate=\\\"\\\" class=\\\"form-horizontal\\\" ng-submit=\\\"searchFormMModal.submitSearchParams(searchFormMModal.searchParams)\\\" name=\\\"searchFormMModalForm\\\"><fieldset class=\\\"search-form-m-container\\\" style=\\\"position: relative; padding: 7px;\\\"><div class=\\\"form-group form-m-number-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"form-m-number\\\">Form M Number</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" maxlength=\\\"13\\\" id=\\\"form-m-number\\\" min=\\\"0\\\" ng-pattern=\\\"/(?:mf)?\\\\d{4,11}/i\\\" ng-model=\\\"searchFormMModal.searchParams.number\\\"></div></div><div class=\\\"form-group applicant-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"applicant\\\">Applicant</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" min=\\\"3\\\" id=\\\"applicant\\\" ng-model=\\\"searchFormMModal.searchParams.applicant\\\" typeahead-min-length=\\\"3\\\" uib-typeahead=\\\"applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)\\\"></div></div><div class=\\\"form-group currency-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"currency\\\">Currency</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"currency\\\" maxlength=\\\"3\\\" ng-model=\\\"searchFormMModal.searchParams.currency\\\" uib-typeahead=\\\"currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)\\\" typeahead-min-length=\\\"2\\\"></div></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"amount\\\">Amount</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"amount\\\" min=\\\"0\\\" ng-model=\\\"searchFormMModal.searchParams.amount\\\" number-format=\\\"\\\" ng-pattern=\\\"/^\\\\d[\\\\d,]*(?:\\\\.\\\\d*)?$/\\\"></div></div></fieldset><div class=\\\"form-m-lc-issue-container\\\"><span ng-click=\\\"searchFormMModal.toggleShowLcIssueContainer()\\\" class=\\\"form-m-lc-issue-toggle-show\\\"><span ng-class=\\\"['glyphicon', {'glyphicon-chevron-down': !searchFormMModal.showLcIssueContainer, 'glyphicon-chevron-up': searchFormMModal.showLcIssueContainer}]\\\"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class=\\\"form-m-search-lc-issue\\\" ng-show=\\\"searchFormMModal.showLcIssueContainer\\\"><lc-issue lc-issue-show=\\\"searchFormMModal.showLcIssueContainer\\\" lc-issues-selected=\\\"searchFormMModal.selectedLcIssues\\\"></lc-issue></div></div><div class=\\\"row search-form-m-form-control\\\"><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: left\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.reset(searchFormMModalForm)\\\">Reset</span></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"searchFormMModalForm.$invalid\\\">Search Form M</button></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: right\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.close()\\\">Close</span></div></div></form></div>\";\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\t__webpack_require__(19)\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar app = angular.module('upload-form-m',\r\n\t  ['rootApp',\r\n\t   'ui.router',\r\n\t   'upload-form-m-service'\r\n\t  ])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(uploadFormMURLConfig)\r\n\tuploadFormMURLConfig.$inject = ['$stateProvider']\r\n\tfunction uploadFormMURLConfig($stateProvider) {\r\n\r\n\t  $stateProvider\r\n\t    .state('form_m.upload', {\r\n\t      kanmiiTitle: 'Form M Upload',\r\n\r\n\t      views: {\r\n\t        'uploadFormM': {\r\n\t          template: __webpack_require__(20),\r\n\r\n\t          controller: 'UploadFormMController as uploadFormM'\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('UploadFormMController', UploadFormMController)\r\n\r\n\tUploadFormMController.$inject = ['UploadFormM', '$timeout']\r\n\r\n\tfunction UploadFormMController(UploadFormM, $timeout) {\r\n\t  var vm = this\r\n\r\n\t  initial()\r\n\t  function initial() {\r\n\t    vm.formMIsUploading = false\r\n\t    vm.uploadIndicationText = 'Uploading Form Ms.........please wait'\r\n\t    vm.uploadFormMText = ''\r\n\t  }\r\n\r\n\t  vm.uploadFormM = function uploadFormM(text) {\r\n\t    vm.formMIsUploading = true\r\n\r\n\t    var uploaded = [],\r\n\t      row\r\n\r\n\t    function parseDate(dt) {\r\n\t      return '20' + dt.slice(6) + '-' + dt.slice(3, 5) + '-' + dt.slice(0, 2)\r\n\t    }\r\n\r\n\t    Papa.parse(text, {\r\n\t      delimiter: '\\t',\r\n\t      header: false,\r\n\t      step: function(data) {\r\n\t        row = data.data[0]\r\n\r\n\t        uploaded.push({\r\n\t          ba: row[0],\r\n\t          mf: row[1],\r\n\t          ccy: row[2],\r\n\t          applicant: row[3],\r\n\t          fob: row[5].replace(/,/g, ''),\r\n\t          submitted_at: parseDate(row[6]),\r\n\t          validated_at: parseDate(row[7])\r\n\t        })\r\n\t      }\r\n\t    })\r\n\r\n\t    UploadFormM.save({\r\n\t      uploaded: uploaded,\r\n\t      likely_duplicates: true\r\n\t    })\r\n\t      .$promise\r\n\t      .then(formMCreatedSuccess, formMCreatedError)\r\n\r\n\t    function formMCreatedSuccess(data) {\r\n\t      var creationResult = data.created_data,\r\n\t        numCreatedNow = creationResult.length,\r\n\t        numCreatedPreviously = uploaded.length - numCreatedNow\r\n\r\n\t      vm.uploadIndicationText = 'Done Upload form Ms\\n' +\r\n\t                                '=========================\\n' +\r\n\t                                'Total new form Ms created: ' + numCreatedNow + '\\n'\r\n\t      if (numCreatedPreviously) {\r\n\t        vm.uploadIndicationText += ('Total not created (because uploaded previously): ' + numCreatedPreviously)\r\n\t      }\r\n\r\n\t      $timeout(function() {\r\n\t        initial()\r\n\t      }, 4500)\r\n\t    }\r\n\r\n\t    function formMCreatedError(xhr) {\r\n\t      console.log(xhr);\r\n\t    }\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('search-uploaded-form-m', [\r\n\t  'kanmii-underscore',\r\n\t  'upload-form-m-service',\r\n\t  'toggle-dim-element'\r\n\t])\r\n\r\n\tapp.factory('SearchUploadedFormMService', SearchUploadedFormMService)\r\n\tSearchUploadedFormMService.$inject = [\r\n\t  'UploadFormM',\r\n\t  'xhrErrorDisplay',\r\n\t  'ModalService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$q'\r\n\t]\r\n\tfunction SearchUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q) {\r\n\r\n\t  function searchFormM(submittedSearchParams) {\r\n\t    var deferred = $q.defer()\r\n\t    var searchParams = angular.copy(submittedSearchParams)\r\n\r\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\r\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\r\n\r\n\t    UploadFormM.query(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\r\n\r\n\t    function searchFormMSuccess(data) {\r\n\t      deferred.resolve(data)\r\n\t    }\r\n\r\n\t    function searchFormMError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t      deferred.reject(xhr)\r\n\t    }\r\n\r\n\t    return deferred.promise\r\n\t  }\r\n\r\n\t  function SearchService() {\r\n\t    var service = this\r\n\r\n\t    service.searchWithModal = searchWithModal\r\n\t    function searchWithModal() {\r\n\t      var deferred = $q.defer()\r\n\r\n\t      ModalService.showModal({\r\n\t        templateUrl: __webpack_require__(4).buildUrl(\r\n\t          'form-m/upload-form-m/search-uploaded-form-m/search-uploaded-form-m-modal.html'),\r\n\r\n\t        controller: 'SearchUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          dialogClass: 'no-close',\r\n\t          modal: true,\r\n\t          minWidth: 600,\r\n\t          minHeight: 250,\r\n\t          title: 'Search Uploaded Form M',\r\n\r\n\t          close: function() {\r\n\t            modal.close.then()\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(submittedSearchParams) {\r\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t            deferred.resolve(searchFormM(submittedSearchParams))\r\n\t          }\r\n\t        })\r\n\t      })\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new SearchService()\r\n\t}\r\n\r\n\tapp.controller('SearchUploadedFormMServiceModalCtrl', SearchUploadedFormMServiceModalCtrl)\r\n\tSearchUploadedFormMServiceModalCtrl.$inject = [\r\n\t  'close',\r\n\t  'resetForm',\r\n\t  '$element'\r\n\t]\r\n\tfunction SearchUploadedFormMServiceModalCtrl(close, resetForm, element) {\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\r\n\t  vm.submitSearchParams = submitSearchParams\r\n\t  function submitSearchParams(searchParams) {\r\n\t    close(searchParams)\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"upload-form-m-tab-content\\\"><form class=\\\"upload-form-m-form\\\" role=\\\"form\\\" name=\\\"uploadFormMForm\\\" ng-submit=\\\"uploadFormM.uploadFormM(uploadFormM.uploadFormMText)\\\"><div class=\\\"form-group upload-form-m-text-group\\\"><pre class=\\\"upload-form-m-indicator\\\" ng-show=\\\"uploadFormM.formMIsUploading\\\">\\r\\n        {$uploadFormM.uploadIndicationText$}\\r\\n      </pre><label for=\\\"upload-form-m\\\" class=\\\"control-label sr-only\\\">Copy and paste form M</label> <textarea name=\\\"upload-form-m\\\" id=\\\"upload-form-m\\\" required=\\\"\\\" ng-model=\\\"uploadFormM.uploadFormMText\\\" ng-class=\\\"['form-control', 'upload-form-m', {'form-m-is-uploading':uploadFormM.formMIsUploading}]\\\" ng-readonly=\\\"uploadFormM.formMIsUploading\\\"></textarea></div><div class=\\\"upload-form-m-submit\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-success\\\" ng-disabled=\\\"uploadFormMForm.$invalid || uploadFormM.formMIsUploading\\\">Upload</button></div></form></div>\";\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div uib-tabset=\\\"\\\"><div uib-tab=\\\"\\\" ng-repeat=\\\"(key, tab) in tabs\\\" heading=\\\"{$tab.title$}\\\" active=\\\"tab.active\\\" select=\\\"tab.select()\\\"><div class=\\\"\\\" ui-view=\\\"{$tab.viewName$}\\\"></div></div></div></div>\";\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar app = angular.module('lc', [\r\n\t  'ui.router',\r\n\t  'model-table',\r\n\t  'rootApp',\r\n\t  'search-lc',\r\n\t  'lc-detail'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(bidURLConfig)\r\n\tbidURLConfig.$inject = ['$stateProvider']\r\n\tfunction bidURLConfig($stateProvider) {\r\n\t  $stateProvider\r\n\t    .state('lc', {\r\n\t      url: '/lc',\r\n\r\n\t      kanmiiTitle: 'Letter of credit',\r\n\r\n\t      templateUrl: __webpack_require__(4).buildUrl('lc/lc.html'),\r\n\r\n\t      controller: 'LetterOfCreditController as lcHome'\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('LetterOfCreditController', LetterOfCreditController)\r\n\tLetterOfCreditController.$inject = ['SearchLc', '$state']\r\n\tfunction LetterOfCreditController(SearchLc, $state) {\r\n\t  var vm = this\r\n\r\n\t  vm.searchLc = function searchLc() {\r\n\t    SearchLc.searchWithModal().then(function(data) {\r\n\t      var results = data.results\r\n\r\n\t      if (results.length) {\r\n\t        if (results.length === 1) {\r\n\t          var lc = results[0]\r\n\t          $state.go('lc_detail', {lc_number: lc.lc_number, lc: lc})\r\n\t        }\r\n\t      }\r\n\t    })\r\n\t  }\r\n\t}\r\n\r\n\r\n\t__webpack_require__(23)\r\n\t__webpack_require__(24)\r\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar rootCommons = __webpack_require__(6)\r\n\r\n\tvar app = angular.module('lc-detail', [\r\n\t  'ui.router',\r\n\t  'rootApp',\r\n\t  'lc-service',\r\n\t  'lc-issue-service',\r\n\t  'kanmii-underscore',\r\n\t  'customer'\r\n\t])\r\n\r\n\tapp.config(rootCommons.interpolateProviderConfig)\r\n\r\n\tapp.config(bidURLConfig)\r\n\r\n\tbidURLConfig.$inject = ['$stateProvider']\r\n\r\n\tfunction bidURLConfig($stateProvider) {\r\n\t  $stateProvider\r\n\t    .state('lc_detail', {\r\n\t      url: '/lc/:lc_number',\r\n\r\n\t      params: {lc: null},\r\n\r\n\t      kanmiiTitle: 'Letter of credit',\r\n\r\n\t      templateUrl: __webpack_require__(4).buildUrl('lc/lc-detail/lc-detail.html'),\r\n\r\n\t      controller: 'LetterOfCreditDetailController as lcDetail'\r\n\t    })\r\n\t}\r\n\r\n\tapp.controller('LetterOfCreditDetailController', LetterOfCreditDetailController)\r\n\r\n\tLetterOfCreditDetailController.$inject = [\r\n\t  '$stateParams',\r\n\t  'LetterOfCredit',\r\n\t  '$state',\r\n\t  'getTypeAheadCustomer',\r\n\t  '$filter',\r\n\t  'getTypeAheadLCIssue',\r\n\t  'LCIssueConcrete',\r\n\t  'kanmiiUnderscore',\r\n\t  'xhrErrorDisplay',\r\n\t  'formatDate',\r\n\t  'Customer',\r\n\t  'formMAttributesVerboseNames'\r\n\t]\r\n\r\n\tfunction LetterOfCreditDetailController($stateParams, LetterOfCredit, $state, getTypeAheadCustomer, $filter,\r\n\t  getTypeAheadLCIssue, LCIssueConcrete, kanmiiUnderscore, xhrErrorDisplay, formatDate, Customer,\r\n\t  formMAttributesVerboseNames) {\r\n\t  var vm = this\r\n\r\n\t  initialize()\r\n\r\n\t  function initialize() {\r\n\t    if ($stateParams.lc) {\r\n\t      vm.lc = $stateParams.lc\r\n\t      vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\r\n\t    }\r\n\r\n\t    else {\r\n\t      LetterOfCredit.getPaginated({lc_number: $stateParams.lc_number}).$promise.then(function(data) {\r\n\t        if (data.count) {\r\n\t          vm.lc = data.results[0]\r\n\t          vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\r\n\t        }\r\n\r\n\t        else $state.go('lc')\r\n\t      })\r\n\t    }\r\n\r\n\t    vm.lcForm = {}\r\n\t    vm.alertIsShown = false\r\n\t    vm.issue = {}\r\n\r\n\t    function getIssuesNotClosed(issues) {\r\n\t      if (!issues) return []\r\n\r\n\t      return issues.filter(function(issue) {\r\n\t        return !issue.closed_at\r\n\t      })\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.issueDateGetterSetter = function issueDateGetterSetter() {\r\n\t    if (vm.lc && vm.lc.estb_date) return $filter('date')(vm.lc.estb_date, 'dd-MMM-yyyy')\r\n\t  }\r\n\r\n\t  vm.expiryDateGetterSetter = function expiryDateGetterSetter() {\r\n\t    if (vm.lc && vm.lc.expiry_date) return $filter('date')(vm.lc.expiry_date, 'dd-MMM-yyyy')\r\n\t  }\r\n\r\n\t  vm.saveIssue = function saveIssue(issue, form) {\r\n\t    if (issue && !kanmiiUnderscore.isEmpty(issue)) {\r\n\t      var postData = {\r\n\t        issue: issue.issue.url,\r\n\t        mf: vm.lc.mf,\r\n\t        lc_number: vm.lc.lc_number,\r\n\t        get_or_create_form_m: true\r\n\t      }\r\n\r\n\t      var applicant = issue.applicant\r\n\r\n\t      if (applicant && !kanmiiUnderscore.isEmpty(applicant)) {\r\n\t        postData.form_m_data = {\r\n\t          applicant: applicant.url,\r\n\t          currency: vm.lc.ccy_data.url,\r\n\t          amount: vm.lc.lc_amt_org_ccy,\r\n\t          lc: vm.lc.url,\r\n\t          number: vm.lc.mf\r\n\t        }\r\n\r\n\t      }\r\n\r\n\t      LCIssueConcrete.save(postData).$promise.then(saveSuccess, saveError)\r\n\t    }\r\n\r\n\t    function saveSuccess(data) {\r\n\t      vm.lcIssues.unshift({\r\n\t        issue_text: data.issue_text,\r\n\t        issue: data.issue,\r\n\t        id: data.id,\r\n\t        mf: data.mf\r\n\t      })\r\n\r\n\t      vm.issue = {}\r\n\r\n\t      if (!vm.lc.applicant_data) { vm.lc.applicant_data = applicant}\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\r\n\t    function saveError(xhr) {\r\n\t      var transform = null\r\n\t      if (xhr.data.form_m_creation_errors) {\r\n\t        transform = formMAttributesVerboseNames\r\n\t        delete xhr.data.form_m_creation_errors\r\n\t      }\r\n\t      xhrErrorDisplay(xhr, transform)\r\n\t    }\r\n\r\n\t  }\r\n\r\n\t  vm.closeIssue = function closeIssue(issue) {\r\n\t    issue.closed_at = formatDate(new Date())\r\n\t    LCIssueConcrete.put(issue).$promise.then(function() {\r\n\r\n\t      vm.lcIssues = vm.lcIssues.filter(function(anIssue) {\r\n\t        return anIssue.id !== issue.id\r\n\t      })\r\n\r\n\t    }, function(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.replaceLc = function replaceLc(newLcNumber) {\r\n\t    LetterOfCredit.getPaginated({lc_number: newLcNumber}).$promise.then(function(data) {\r\n\t      if (data.count) {\r\n\t        var lc = data.results[0]\r\n\r\n\t        $state.go('.', {lc_number: lc.lc_number, lc: lc})\r\n\r\n\t      } else vm.alertIsShown = true\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.replaceLcFormInvalid = function replaceLcFormInvalid(formInvalid, newLcNumber) {\r\n\t    return formInvalid || vm.lc.lc_number.toLowerCase().indexOf(newLcNumber.toLowerCase()) !== -1\r\n\t  }\r\n\r\n\t  vm.customerAdded = function customerAdded(customer) {\r\n\t    vm.issue.applicant = customer\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\r\n\t  vm.getIssue = function getIssue(text) {\r\n\t    return getTypeAheadLCIssue({text: text, exclude_form_m_issues: vm.lc.mf})\r\n\t  }\r\n\r\n\t  vm.addCustomer = function addCustomer() {\r\n\t    Customer.save({name: vm.lc.applicant}).$promise.then(function(data) {\r\n\t      vm.issue.applicant = data\r\n\t      vm.lc.applicant_data = data\r\n\t    })\r\n\t  }\r\n\r\n\t  vm.closeAlert = function closeAlert() {\r\n\t    vm.alertIsShown = false\r\n\t  }\r\n\t}\r\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('search-lc', [\r\n\t  'kanmii-underscore',\r\n\t  'toggle-dim-element',\r\n\t  'form-m-service',\r\n\t  'lc-service'\r\n\t])\r\n\r\n\tapp.factory('SearchLc', SearchLc)\r\n\tSearchLc.$inject = [\r\n\t  'xhrErrorDisplay',\r\n\t  'ModalService',\r\n\t  'kanmiiUnderscore',\r\n\t  '$q',\r\n\t  'ToggleDimElement',\r\n\t  'LetterOfCredit'\r\n\t]\r\n\tfunction SearchLc(xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement, LetterOfCredit) {\r\n\r\n\t  function searchLc(submittedSearchParams) {\r\n\t    var deferred = $q.defer()\r\n\t    var searchParams = angular.copy(submittedSearchParams)\r\n\r\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\r\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\r\n\r\n\t    LetterOfCredit.getPaginated(searchParams).$promise.then(searchLcSuccess, searchLcError)\r\n\r\n\t    function searchLcSuccess(data) {\r\n\t      deferred.resolve(data)\r\n\t    }\r\n\r\n\t    function searchLcError(xhr) {\r\n\t      xhrErrorDisplay(xhr)\r\n\t      deferred.reject(xhr)\r\n\t    }\r\n\r\n\t    return deferred.promise\r\n\t  }\r\n\r\n\t  function SearchService() {\r\n\t    var service = this\r\n\r\n\t    service.searchWithModal = searchWithModal\r\n\t    function searchWithModal(config) {\r\n\t      var deferred = $q.defer()\r\n\t      config = config || {}\r\n\r\n\t      ModalService.showModal({\r\n\t        templateUrl: __webpack_require__(4).buildUrl('lc/search-lc/search-lc.html'),\r\n\t        controller: 'SearchLcModalCtrl as searchLcModal',\r\n\t        inputs: {\r\n\t          uiOptions: config.uiOptions\r\n\t        }\r\n\r\n\t      }).then(function(modal) {\r\n\t        modal.element.dialog({\r\n\t          dialogClass: 'no-close',\r\n\t          modal: true,\r\n\t          minWidth: 600,\r\n\t          minHeight: 450,\r\n\t          title: 'Search Letter of credit',\r\n\r\n\t          open: function() {\r\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb)\r\n\t          },\r\n\r\n\t          close: function() {\r\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\r\n\t          }\r\n\t        })\r\n\r\n\t        modal.close.then(function(submittedSearchParams) {\r\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\r\n\t            deferred.resolve(searchLc(submittedSearchParams))\r\n\t          }\r\n\r\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\r\n\t        })\r\n\t      })\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new SearchService()\r\n\t}\r\n\r\n\tapp.controller('SearchLcModalCtrl', SearchLcModalCtrl)\r\n\tSearchLcModalCtrl.$inject = [\r\n\t  'close',\r\n\t  'resetForm',\r\n\t  '$element',\r\n\t  'getTypeAheadCustomer',\r\n\t  'getTypeAheadCurrency'\r\n\t]\r\n\tfunction SearchLcModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\r\n\t  var vm = this\r\n\r\n\t  initForm()\r\n\t  function initForm() {\r\n\t    vm.searchParams = {}\r\n\t  }\r\n\r\n\t  vm.close = close\r\n\r\n\t  vm.reset = reset\r\n\t  function reset(form) {\r\n\t    resetForm(form, element, '.form-control', initForm)\r\n\t    form.$invalid = false\r\n\t    form.$error = {}\r\n\t  }\r\n\r\n\t  vm.submitSearchParams = submitSearchParams\r\n\t  function submitSearchParams(searchParams) {\r\n\t    close(searchParams)\r\n\t  }\r\n\r\n\t  vm.getApplicant = getTypeAheadCustomer\r\n\t  vm.getCurrency = getTypeAheadCurrency\r\n\t}\r\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"form-m-home-action-buttons btn-group-vertical\\\" role=\\\"group\\\"><a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"lc\\\">Letter of credit</a> <a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"form_m\\\">Form M</a></div></div>\";\n\n/***/ }\n/******/ ]);"],"sourceRoot":"/source/"}