{"version":3,"sources":["letter_of_credit/static/letter_of_credit/js/app/app.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","formMRootAppURLConfig","$stateProvider","$urlRouterProvider","otherwise","state","url","kanmiiTitle","template","rootCommons","app","angular","config","interpolateProviderConfig","run","$rootScope","$state","$stateParams","$inject","formMURLConfig","controller","FormMController","$scope","listFormMTab","title","viewName","select","updateAddFormMTitle","go","addFormMTitle","addFormMTab","active","reportsTab","bidsTab","tabs","listFormM","addFormM","bids","reports","formM","number","goToFormM","transitionTo","detailedFormM","formMStateURLConfig","params","showSummary","views","templateUrl","buildUrl","AddFormMStateController","getTypeAheadCustomer","getTypeAheadCurrency","SearchDetailedOrUploadedFormMService","kanmiiUnderscore","formatDate","xhrErrorDisplay","formMAttributesVerboseNames","FormM","$filter","resetForm2","confirmationDialog","formMObject","initialize","form","init","vm","fieldIsEditable","currency","applicant","date_received","amount","searchFormM","formMSavedSuccessMessage","$setPristine","$setUntouched","cover","bid","bidObj","issues","closedIssues","nonClosedIssues","summary","showDialog","text","infoOnly","disableSubmitBtn","newFormMForm","$invalid","coverForm","has","bidForm","issuesForm","showEditBid","compared","compareDetailedFormMWithForm","all","isEmpty","goods_description","length","reset","addFormMForm","elements","showFormMMessage","header","name","code","showIssuesMessage","issuesText","each","issue","index","formatIssueText","equals","Date","Number","currency_data","applicant_data","compareDetailedFormMWithForm1","this","copy","onCoverChanged","onIssuesChanged","onNonClosedIssuesChanged","enableFieldEdit","field","validators","test","isObject","getApplicant","getCurrency","datePickerFormat","datePickerIsOpen","openDatePicker","getUploadedFormM","searchWithModal","then","data","detailed","uploaded","mf","cost_freight","ccy","submit","formMSavedSuccess","form_m_issues","filter","closed_at","covers","push","formMSavedError","xhr","formMToSave","cover_type","do_not_update","$put","$save","downloadSummary","replace","LcBidRequest","$q","Factory","self","cb","existingBids","showBidForm","getPaginated","$promise","count","results","console","log","initBids","deferred","defer","resolve","promise","factory","lcIssueDirective","restrict","scope","bindToController","LcIssueDirectiveController","LCIssueConcrete","getTypeAheadLCIssue","clearFormField","initExistingIssues","initContainerVars","showContainer","closeIssue","$index","issueClosedSuccess","addFormMState","splice","closedAt","issueClosedError","answer","put","issueSelected","$item","$model","deleteIssue","getIssue","_ids","forEach","x","concat","exclude_issue_ids","join","toggleShow","$watch","newFormM","formMIssues","newIssues","$validate","directive","require","link","elm","atts","ctrl","lcIssue","$validators","Boolean","fsPath","lcCommons","appName","staticPrefix","setStaticPrefix","addIconSrc","$interpolateProvider","startSymbol","endSymbol","rootAppName","LcCoverDirectiveController","formMCoverTypes","formFieldIsValid","coverTypes","isValid","validity","amountGetterSetter","val","arguments","undefined","newCover","lcBidDirective","LcBidDirectiveController","bidToEdit","bidNotModified","goods","editBidInvalid","onBidDblClick","trashBid","bidDeleteSuccess","form_m_number","editBid","doEdit","requested_at","bidURLConfig","BidRequestController","$http","kanmiiUri","urls","$timeout","newBid","searchedBidResult","selectedBids","selectedDownloadedBids","bidRequests","paginationHooks","pending","updateBids","getBidsOnNavigation","linkUrl","get","response","next","previous","onSelectedBidsChanged","newSelections","checked","bidId","getBidFromId","downloaded","rowDblClickCb","tableCaption","lcBidRequestDownloadUrl","downloadUrl","search","selection","bid_ids","toString","downloadBtnDisabled","any","selectionVal","markRequestedBtnDisabled","anyNoneDownloadedChecked","markRequested","editedBids","refreshPage","displayPendingBidDirective","lcAppCommons","updateCollection","pager","onDblClick","paginationSize","displayPendingBidDirectiveCtrl","pagerNavSetUpLinks","setUpLinks","prev","numLinks","Math","ceil","linkProperties","nextPageLink","prevPageLink","linkUrls","currentLink","rowIndexOffset","onUpdateCollection","deselectAllBids","highlighted","modelRowClicked","model","onRowDblClick","bidIndex","toggleAll","toggleAllClicked","formMListURLConfig","FormMListController","formMModelManager","updateFormMs","formMs","getFormMCollectionOnNavigation","modelManager","modelRowDblClick","getNoLcAttached","searchedFormMResult","UploadFormM","ModalService","submittedSearchParams","searchFormMSuccess","searchFormMError","reject","query","SearchService","showModal","modal","element","dialog","dialogClass","minWidth","minHeight","close","service","SearchDetailedOrUploadedFormMServiceModalCtrl","resetForm","initForm","searchParams","$error","SearchFormMService","ToggleDimElement","inputs","uiOptions","open","dim","parent","dimCb","unDim","unDimCb","SearchFormMServiceModalCtrl","showLcIssueContainer","searchLcIssuesTitle","selectedLcIssues","toggleShowLcIssueContainer","submitSearchParams","displayLcIssueUI","searchFormMDirective","attributes","css","cursor","bind","searchFormMResult","SearchFormMDirectiveCtrl","SearchFormMModalCtrl","uploadFormMURLConfig","uploadFormM","UploadFormMController","initial","formMIsUploading","uploadIndicationText","uploadFormMText","parseDate","dt","slice","formMCreatedSuccess","creationResult","created_data","numCreatedNow","numCreatedPreviously","formMCreatedError","row","Papa","parse","delimiter","step","ba","fob","submitted_at","validated_at","save","likely_duplicates","SearchUploadedFormMService","SearchUploadedFormMServiceModalCtrl","LetterOfCreditController","SearchLc","searchLc","lc","lc_number","LetterOfCreditDetailController","LetterOfCredit","Customer","getIssuesNotClosed","lcIssues","lcForm","alertIsShown","issueDateGetterSetter","estb_date","expiryDateGetterSetter","expiry_date","saveIssue","saveSuccess","unshift","issue_text","saveError","transform","form_m_creation_errors","postData","get_or_create_form_m","form_m_data","ccy_data","lc_amt_org_ccy","anIssue","replaceLc","newLcNumber","replaceLcFormInvalid","formInvalid","toLowerCase","indexOf","customerAdded","customer","exclude_form_m_issues","addCustomer","closeAlert","searchLcSuccess","searchLcError","SearchLcModalCtrl"],"mappings":"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","file":"letter_of_credit/static/letter_of_credit/js/app/app.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t__webpack_require__(1)\n\t__webpack_require__(23)\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('lc-root-app',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'form-m',\n\t   'lc'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\n\t  $rootScope.$state = $state\n\t  $rootScope.$stateParams = $stateParams\n\t}])\n\n\tapp.config(formMRootAppURLConfig)\n\tformMRootAppURLConfig.$inject = ['$stateProvider', '$urlRouterProvider']\n\tfunction formMRootAppURLConfig($stateProvider, $urlRouterProvider) {\n\t  $urlRouterProvider\n\t    .otherwise('/')\n\n\t  $stateProvider\n\t    .state('home', {\n\t      url: '/',\n\n\t      kanmiiTitle: 'Home',\n\n\t      template: __webpack_require__(26)\n\t    })\n\t}\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(2)\n\t__webpack_require__(10)\n\t__webpack_require__(13)\n\t__webpack_require__(15)\n\t__webpack_require__(16)\n\t__webpack_require__(17)\n\t__webpack_require__(19)\n\n\tvar app = angular.module('form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'list-form-m',\n\t   'upload-form-m',\n\t   'add-form-m',\n\t   'form-m-bids'\n\t  ])\n\n\tapp.config(formMURLConfig)\n\tformMURLConfig.$inject = ['$stateProvider']\n\tfunction formMURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m', {\n\t      url: '/form-m',\n\n\t      kanmiiTitle: 'Form M',\n\n\t      template: __webpack_require__(22),\n\n\t      controller: 'FormMController as formMHome'\n\t    })\n\t}\n\n\tapp.controller('FormMController', FormMController)\n\tFormMController.$inject = ['$state', '$scope']\n\tfunction FormMController($state, $scope) {\n\n\t  var listFormMTab = {\n\t    title: 'List Form M',\n\t    viewName: 'listFormM',\n\t    select: function() {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.list')\n\t    }\n\t  }\n\n\t  var addFormMTitle = 'Form M'\n\n\t  var addFormMTab = {\n\t    title: addFormMTitle,\n\t    active: true,\n\t    viewName: 'addFormM',\n\t    select: function() { $state.go('form_m.add')}\n\t  }\n\n\t  var reportsTab = {\n\t    title: 'Reports',\n\t    active: false,\n\t    viewName: 'formMReports',\n\t    select: function() {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.add')\n\t    }\n\t  }\n\n\t  var bidsTab = {\n\t    title: 'Pending Bids',\n\t    active: false,\n\t    viewName: 'bids',\n\t    select: function() {\n\t      $scope.updateAddFormMTitle()\n\t      $state.go('form_m.bids')\n\t    }\n\t  }\n\n\t  $scope.tabs = {\n\t    listFormM: listFormMTab,\n\t    addFormM: addFormMTab,\n\t    bids: bidsTab,\n\t    reports: reportsTab\n\t  }\n\n\t  $scope.updateAddFormMTitle = function(formM) {\n\t    $scope.tabs.addFormM.title = formM ? 'Details of \"' + formM.number + '\"' : addFormMTitle\n\t  }\n\n\t  $scope.goToFormM = function goToFormM(formM) {\n\t    $state.transitionTo('form_m.add', {detailedFormM: formM})\n\t    $scope.tabs.addFormM.active = true\n\t  }\n\t}\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(3)\n\t__webpack_require__(4)\n\t__webpack_require__(8)\n\n\tvar app = angular.module('add-form-m', [\n\t  'ui.router',\n\t  'rootApp',\n\t  'kanmii-underscore',\n\t  'customer',\n\t  'search-detailed-or-uploaded-form-m',\n\t  'form-m-service',\n\t  'lc-cover',\n\t  'lc-issue',\n\t  'lc-bid-request',\n\t  'confirmation-dialog',\n\t  'add-form-m-form-m-object'\n\t])\n\n\tapp.config(formMStateURLConfig)\n\n\tformMStateURLConfig.$inject = ['$stateProvider']\n\n\tfunction formMStateURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('form_m.add', {\n\t      kanmiiTitle: 'Add form M',\n\n\t      params: {detailedFormM: null, showSummary: null},\n\n\t      views: {\n\t        addFormM: {\n\t          templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/add-form-m.html'),\n\n\t          controller: 'AddFormMStateController as addFormMState'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('AddFormMStateController', AddFormMStateController)\n\n\tAddFormMStateController.$inject = [\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency',\n\t  'SearchDetailedOrUploadedFormMService',\n\t  'kanmiiUnderscore',\n\t  'formatDate',\n\t  'xhrErrorDisplay',\n\t  'formMAttributesVerboseNames',\n\t  'FormM',\n\t  '$filter',\n\t  '$stateParams',\n\t  'resetForm2',\n\t  '$state',\n\t  '$scope',\n\t  'confirmationDialog',\n\t  'formMObject'\n\t]\n\n\tfunction AddFormMStateController(getTypeAheadCustomer, getTypeAheadCurrency, SearchDetailedOrUploadedFormMService,\n\t  kanmiiUnderscore, formatDate, xhrErrorDisplay, formMAttributesVerboseNames, FormM, $filter, $stateParams, resetForm2,\n\t  $state, $scope, confirmationDialog, formMObject) {\n\t  var vm = this\n\n\t  vm.detailedFormM = angular.copy($stateParams.detailedFormM)\n\t  $stateParams.detailedFormM = null\n\n\t  /*\n\t   *@param {angular.form} the HTML fieldSet element for form M cover\n\t   */\n\t  var coverForm\n\n\t  /*\n\t   *@param {angular.form} the HTML fieldSet element for form M issues\n\t   */\n\t  var issuesForm\n\n\t  initialize()\n\t  function initialize(form) {\n\t    formMObject.init(vm.detailedFormM, function (formM) {\n\t      vm.formM = formM\n\n\t      if (vm.formM.number) {\n\t        $scope.updateAddFormMTitle(formM)\n\t        vm.fieldIsEditable = {\n\t          number: false,\n\t          currency: false,\n\t          applicant: false,\n\t          date_received: false,\n\t          amount: false\n\t        }\n\n\t      } else  {\n\t        $scope.updateAddFormMTitle()\n\t        vm.fieldIsEditable = {\n\t          number: true,\n\t          currency: true,\n\t          applicant: true,\n\t          date_received: true,\n\t          amount: true\n\t        }\n\t      }\n\t    })\n\n\t    vm.searchFormM = {}\n\t    formMSavedSuccessMessage()\n\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    /*\n\t     *@param {angular.form.model} the form M cover model\n\t     */\n\t    vm.cover = null\n\n\t    vm.bid = formMObject.bidObj\n\n\t    /*\n\t     *@param {angular.form.model} the form M issues model\n\t     */\n\t    vm.issues = []\n\t    vm.closedIssues = []\n\t    vm.nonClosedIssues = []\n\t  }\n\n\t  function formMSavedSuccessMessage() {\n\t    var summary = $stateParams.showSummary\n\t    $stateParams.showSummary = null\n\n\t    if (summary) {\n\t      confirmationDialog.showDialog({\n\t        title: '\"' + vm.formM.number + '\" successfully saved',\n\t        text: summary,\n\t        infoOnly: true\n\t      })\n\t    }\n\t  }\n\n\t  vm.onCoverChanged = function onCoverChanged(cover, form) {\n\t    vm.cover = cover\n\t    coverForm = form\n\t  }\n\n\t  vm.onIssuesChanged = function onIssuesChanged(issues, form) {\n\t    vm.issues = issues\n\t    issuesForm = form\n\t  }\n\n\t  vm.onNonClosedIssuesChanged = function onNonClosedIssuesChanged(issues) {\n\t    vm.nonClosedIssues = issues\n\t  }\n\n\t  vm.enableFieldEdit = function enableFieldEdit(field) {\n\t    vm.fieldIsEditable[field] = vm.detailedFormM ? !vm.fieldIsEditable[field] : false\n\t  }\n\n\t  vm.validators = {\n\t    applicant: {\n\t      test: function () {\n\t        return kanmiiUnderscore.isObject(vm.formM.applicant)\n\t      }\n\t    },\n\n\t    currency: {\n\t      test: function () {\n\t        return kanmiiUnderscore.isObject(vm.formM.currency)\n\t      }\n\t    }\n\t  }\n\n\t  vm.disableSubmitBtn = disableSubmitBtn\n\t  function disableSubmitBtn() {\n\t    if ($scope.newFormMForm.$invalid) return true\n\n\t    if (coverForm && coverForm.$invalid) return true\n\n\t    if (kanmiiUnderscore.has(vm.formM.bidForm, '$invalid') && vm.formM.bidForm.$invalid) return true\n\n\t    if (issuesForm && issuesForm.$invalid) return true\n\n\t    if (vm.showEditBid) return true\n\n\t    var compared = compareDetailedFormMWithForm()\n\n\t    if (!compared) return false\n\n\t    if (kanmiiUnderscore.all(compared)) {\n\t      if (!kanmiiUnderscore.isEmpty(vm.bid) && vm.bid.goods_description && vm.bid.amount) return false\n\t      if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) return false\n\t      return !vm.issues.length\n\t    }\n\n\t    return false\n\t  }\n\n\t  vm.reset = reset\n\t  function reset(addFormMForm) {\n\t    vm.detailedFormM = null\n\n\t    resetForm2(addFormMForm, [\n\t      {\n\t        form: $scope.newFormMForm, elements: ['applicant', 'currency']\n\t      }\n\t    ])\n\n\t    initialize()\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\n\t  vm.datePickerFormat = 'dd-MMM-yyyy'\n\t  vm.datePickerIsOpen = false\n\t  vm.openDatePicker = function openDatePicker() {\n\t    vm.datePickerIsOpen = true\n\t  }\n\n\t  vm.getUploadedFormM = function getUploadedFormM() {\n\t    vm.detailedFormM = null\n\t    initialize()\n\n\t    SearchDetailedOrUploadedFormMService.searchWithModal().then(function (data) {\n\t      if (data.detailed) {\n\t        vm.detailedFormM = data.detailed\n\t        initialize()\n\n\t      } else {\n\t        var formM = data.uploaded\n\t        vm.searchFormM = formM\n\t        vm.formM.number = formM.mf\n\t        vm.formM.amount = formM.cost_freight\n\t        vm.formM.goods_description = formM.goods_description\n\n\t        getTypeAheadCurrency(formM.ccy).then(function (ccy) {\n\t          vm.formM.currency = ccy[0]\n\t        })\n\t      }\n\t    })\n\t  }\n\n\t  vm.submit = function submit(formM) {\n\t    var formMToSave = angular.copy(formM)\n\n\t    formMToSave.applicant = formMToSave.applicant.url\n\t    formMToSave.currency = formMToSave.currency.url\n\t    formMToSave.date_received = formatDate(formMToSave.date_received)\n\n\t    if (!kanmiiUnderscore.isEmpty(vm.bid) && vm.bid.amount && vm.bid.goods_description) {\n\t      formMToSave.goods_description = vm.bid.goods_description\n\t      formMToSave.bid = {amount: vm.bid.amount}\n\t    }\n\n\t    if (vm.issues.length) formMToSave.issues = vm.issues\n\n\t    if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) {\n\t      formMToSave.cover = {\n\t        amount: vm.cover.amount,\n\t        cover_type: vm.cover.cover_type[0]\n\t      }\n\t    }\n\n\t    if (!vm.detailedFormM) new FormM(formMToSave).$save(formMSavedSuccess, formMSavedError)\n\n\t    else {\n\t      if (kanmiiUnderscore.all(compareDetailedFormMWithForm1(formMToSave))) {\n\t        formMToSave.do_not_update = 'do_not_update'\n\t        formMToSave.applicant_data = vm.formM.applicant\n\t        formMToSave.currency_data = vm.formM.currency\n\t      }\n\t      formMToSave.id = vm.detailedFormM.id\n\t      new FormM(formMToSave).$put(formMSavedSuccess, formMSavedError)\n\t    }\n\n\t    function formMSavedSuccess(data) {\n\t      //even though non-closed issues will be set in the lc-issue directive, we need to read them off data received\n\t      //from server so we can display them as part of summary to users. :TODO find a better implementation\n\t      vm.nonClosedIssues = data.form_m_issues.filter(function (issue) {\n\t        return !issue.closed_at\n\t      })\n\n\t      var summary = showFormMMessage() + showIssuesMessage()\n\n\t      if (data.bid) {\n\t        summary += '\\n\\nBid Amount     : ' + data.currency_data.code + ' ' + $filter('number')(data.bid.amount, 2)\n\t      }\n\n\t      if (data.cover) data.covers.push(data.cover)\n\n\t      $state.go('form_m.add', {detailedFormM: data, showSummary: summary})\n\t    }\n\n\t    function formMSavedError(xhr) {\n\t      xhrErrorDisplay(xhr, formMAttributesVerboseNames)\n\t    }\n\t  }\n\n\t  vm.downloadSummary = function downloadSummary() {\n\t    confirmationDialog.showDialog({\n\t      title: vm.formM.number,\n\t      text: $scope.showFormMMessage() + $scope.showIssuesMessage(),\n\t      infoOnly: true\n\t    })\n\t  }\n\n\t  $scope.showFormMMessage = showFormMMessage\n\t  function showFormMMessage() {\n\t    var number = $filter('number')(vm.formM.amount, 2)\n\t    var header = vm.formM.applicant.name + ' - ' + vm.formM.number + ' - ' + vm.formM.currency.code + ' ' + number\n\t    return header + '\\n\\nForm M Number : ' + vm.formM.number + '\\n' +\n\t      'Value         : ' + vm.formM.currency.code + ' ' +\n\t      number + '\\n' +\n\t      'Applicant     : ' + vm.formM.applicant.name\n\t  }\n\n\t  $scope.showIssuesMessage = showIssuesMessage\n\t  function showIssuesMessage() {\n\t    if (!vm.nonClosedIssues.length) return ''\n\n\t    var issuesText = '\\n\\n\\nPlease note the following issues which must be regularized before the LC ' +\n\t      'request can be treated:\\n'\n\n\t    kanmiiUnderscore.each(vm.nonClosedIssues, function (issue, index) {\n\t      ++index\n\t      issuesText += ('(' + index + ') ' + vm.formatIssueText(issue.text || issue.issue.text) + '\\n')\n\t    })\n\n\t    return issuesText\n\t  }\n\n\t  vm.formatIssueText = function (text) {\n\t    return text.replace(/:ISSUE$/i, '')\n\t  }\n\n\t  function compareDetailedFormMWithForm() {\n\t    if (!vm.detailedFormM) return false\n\n\t    return {\n\t      number: vm.formM.number && angular.equals(vm.formM.number, vm.detailedFormM.number),\n\n\t      date_received: angular.equals(vm.formM.date_received, new Date(vm.detailedFormM.date_received)),\n\n\t      amount: vm.formM.amount && angular.equals(vm.formM.amount, Number(vm.detailedFormM.amount)),\n\n\t      currency: vm.formM.currency && (vm.formM.currency.code === vm.detailedFormM.currency_data.code),\n\n\t      applicant: vm.formM.applicant && (vm.formM.applicant.name === vm.detailedFormM.applicant_data.name)\n\t    }\n\t  }\n\n\t  function compareDetailedFormMWithForm1(formM) {\n\t    if (!vm.detailedFormM) return false\n\n\t    return {\n\t      number: formM.number && angular.equals(formM.number, vm.detailedFormM.number),\n\n\t      date_received: angular.equals(formM.date_received, new Date(vm.detailedFormM.date_received)),\n\n\t      amount: formM.amount && angular.equals(formM.amount, Number(vm.detailedFormM.amount)),\n\n\t      currency: formM.currency && (formM.currency.code === vm.detailedFormM.currency_data.code),\n\n\t      applicant: formM.applicant && (formM.applicant.name === vm.detailedFormM.applicant_data.name)\n\t    }\n\t  }\n\t}\n\n\t__webpack_require__(9)\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\"\r\n\r\n\t/*jshint camelcase:false*/\r\n\r\n\tvar app = angular.module('add-form-m-form-m-object', [])\r\n\r\n\tapp.factory('formMObject', formMObject)\r\n\r\n\tformMObject.$inject = ['LcBidRequest', '$q']\r\n\r\n\tfunction formMObject(LcBidRequest, $q) {\r\n\t  function Factory() {\r\n\t    var self = this\r\n\r\n\t    self.init = function init(detailedFormM, cb) {\r\n\t      /*\r\n\t       *@param {angular.form.model} bid model that we want to create for the form M\r\n\t       */\r\n\t      self.bidObj = {}\r\n\r\n\t      self.existingBids = []\r\n\r\n\t      self.showEditBid = false\r\n\t      self.showBidForm = false\r\n\r\n\t      if (detailedFormM) {\r\n\t        self.date_received = new Date(detailedFormM.date_received)\r\n\t        self.number = detailedFormM.number\r\n\t        self.applicant = detailedFormM.applicant_data\r\n\t        self.currency = detailedFormM.currency_data\r\n\t        self.amount = Number(detailedFormM.amount)\r\n\t        self.goods_description = detailedFormM.goods_description\r\n\t        self.form_m_issues = detailedFormM.form_m_issues\r\n\t        self.url = detailedFormM.url\r\n\t        self.covers = detailedFormM.covers\r\n\r\n\t        LcBidRequest.getPaginated({mf: self.number}).$promise.then(function (data) {\r\n\r\n\t          if (data.count) {\r\n\t            var results = data.results\r\n\r\n\t            if (results.length) {\r\n\t              self.existingBids = results\r\n\t            }\r\n\t          }\r\n\r\n\t        }, function (xhr) {\r\n\t          console.log('xhr = ', xhr)\r\n\t        })\r\n\r\n\t      } else {\r\n\t        self.date_received = new Date()\r\n\t        self.number = null\r\n\t        self.applicant = null\r\n\t        self.currency = null\r\n\t        self.amount = null\r\n\t        self.goods_description = null\r\n\t        self.form_m_issues = null\r\n\t        self.url = null\r\n\t        self.covers = null\r\n\t      }\r\n\r\n\t      cb(self)\r\n\t    }\r\n\r\n\t    self.initBids = function initBids() {\r\n\t      var deferred = $q.defer()\r\n\r\n\t      if (self.number) {\r\n\r\n\t      } else deferred.resolve(self)\r\n\r\n\t      return deferred.promise\r\n\t    }\r\n\t  }\r\n\r\n\t  return new Factory()\r\n\t}\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('lc-issue', [\n\t  'rootApp',\n\t  'lc-issue-service',\n\t  'add-form-m-form-m-object'\n\t])\n\n\tapp.directive('lcIssue', lcIssueDirective)\n\n\tlcIssueDirective.$inject = []\n\n\tfunction lcIssueDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-issue/lc-issue.html'),\n\t    scope: true,\n\t    bindToController: {\n\t      formM: '=mfContext',\n\t      issues: '=',\n\t      onIssuesChanged: '&',\n\t      onNonClosedIssuesChanged: '&'\n\t    },\n\t    controller: 'LcIssueDirectiveController as lcIssue'\n\t  }\n\t}\n\n\tapp.controller('LcIssueDirectiveController', LcIssueDirectiveController)\n\n\tLcIssueDirectiveController.$inject = [\n\t  '$scope',\n\t  'LCIssueConcrete',\n\t  'getTypeAheadLCIssue',\n\t  'formatDate',\n\t  'xhrErrorDisplay',\n\t  'resetForm2',\n\t  'clearFormField',\n\t  'confirmationDialog',\n\t  'formMObject'\n\t]\n\n\tfunction LcIssueDirectiveController($scope, LCIssueConcrete, getTypeAheadLCIssue, formatDate, xhrErrorDisplay,\n\t  resetForm2, clearFormField, confirmationDialog, formMObject) {\n\t  var vm = this\n\t  var title = 'Add Letter Of Credit Issues'\n\n\t  initExistingIssues()\n\t  function initExistingIssues() {\n\t    vm.closedIssues = []\n\t    vm.nonClosedIssues = []\n\t  }\n\n\t  initContainerVars()\n\t  function initContainerVars(form) {\n\t    vm.title = title\n\t    vm.showContainer = false\n\n\t    vm.issues = []\n\t    vm.issue = null\n\n\t    if (form) resetForm2(form, [\n\t      {form: form, elements: ['issue']}\n\t    ])\n\t  }\n\n\t  vm.closeIssue = function closeIssue(issue, $index) {\n\t    var closedAt = formatDate(new Date())\n\n\t    var text = 'Sure you want to close issue:\\n\"' +\n\t      $scope.addFormMState.formatIssueText(issue.issue.text) + '\"?'\n\n\t    confirmationDialog.showDialog({title: 'Close issue', text: text}).then(function (answer) {\n\t      if (answer) {\n\t        LCIssueConcrete.put({\n\t          id: issue.id,\n\t          mf: vm.formM.url,\n\t          issue: issue.issue.url,\n\t          closed_at: closedAt\n\t        }).$promise.then(issueClosedSuccess, issueClosedError)\n\t      }\n\t    })\n\n\t    function issueClosedSuccess() {\n\t      var text = 'Issue closed successfully:\\n' + $scope.addFormMState.formatIssueText(issue.issue.text)\n\t      confirmationDialog.showDialog({title: 'Close issue', text: text, infoOnly: true})\n\t      vm.nonClosedIssues.splice($index, 1)\n\t      issue.closed_at = closedAt\n\t      vm.closedIssues.push(issue)\n\t    }\n\n\t    function issueClosedError(xhr) {xhrErrorDisplay(xhr)}\n\t  }\n\n\t  vm.issueSelected = function issueSelected($item, $model) {\n\t    vm.issues.push($model)\n\t    vm.issue = null\n\t    clearFormField($scope.issuesForm, 'issue')\n\t  }\n\n\t  vm.deleteIssue = function deleteIssue(index) {\n\t    vm.issues.splice(index, 1)\n\t  }\n\n\t  vm.getIssue = function getIssue(text) {\n\t    var _ids = []\n\n\t    vm.issues.forEach(function (issue) {\n\t      _ids.push(issue.id)\n\t    })\n\n\t    var x = []\n\n\t    x.concat(vm.nonClosedIssues).concat(vm.closedIssues).forEach(function (issue) {\n\t      _ids.push(issue.issue.id)\n\t    })\n\n\t    return getTypeAheadLCIssue({text: text, exclude_issue_ids: _ids.join(',')})\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\n\n\t    if (!vm.showContainer) initContainerVars(form)\n\t    else vm.title = 'Dismiss'\n\t  }\n\n\t  $scope.$watch(function getFormM() {return vm.formM}, function (newFormM) {\n\t    if (newFormM) {\n\t      var formMIssues = newFormM.form_m_issues\n\t      if (formMIssues && formMIssues.length !== (vm.closedIssues.length + vm.nonClosedIssues.length)) {\n\t        formMIssues.forEach(function (issue) {\n\t          if (!issue.closed_at) {\n\t            vm.nonClosedIssues.push(issue)\n\t            return true\n\t          }\n\t          else {\n\t            vm.closedIssues.push(issue)\n\t            return false\n\t          }\n\t        })\n\t      }\n\n\t      if (!newFormM.number || !newFormM.amount) {\n\t        initExistingIssues()\n\t        initContainerVars()\n\t      }\n\t    }\n\t  }, true)\n\n\t  $scope.$watch(function getIssues() {return vm.issues}, function onUpdateIssues(newIssues) {\n\t    $scope.issuesForm.issue.$validate()\n\t    if (newIssues) vm.onIssuesChanged({issues: newIssues, issuesForm: $scope.issuesForm})\n\t  }, true)\n\n\t  $scope.$watch(function getNonClosedIssues() {return vm.nonClosedIssues}, function onUpdateNonClosedIssues(newIssues) {\n\t    if (newIssues) vm.onNonClosedIssuesChanged({issues: newIssues})\n\t  }, true)\n\n\t  $scope.$watch(function getShowContainer() {return vm.showContainer}, function onUpdateShowContainer() {\n\t    $scope.issuesForm.issue.$validate()\n\t  })\n\t}\n\n\tapp.directive('validateIssues', function validateIssues() {\n\t  return {\n\t    restrict: 'A',\n\t    require: 'ngModel',\n\t    link: function ($scope, elm, atts, ctrl) {\n\t      var vm = $scope.lcIssue\n\t      ctrl.$validators.issues = function () {\n\t        return !vm.showContainer || Boolean(vm.issues.length)\n\t      }\n\t    }\n\t  }\n\t})\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar lcCommons = __webpack_require__(6)\n\n\t/**\n\t * @description\n\t *\n\t * @param {String} fsPath - the path relative to the form-m directory\n\t * @returns {*|string}\n\t */\n\tfunction buildUrl(fsPath) {\n\t  return lcCommons.buildUrl('app') + '/' + fsPath\n\t}\n\n\tmodule.exports = {\n\t  buildUrl: buildUrl\n\t}\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar appName = 'letter_of_credit'\n\n\tfunction buildUrl(fsPath) {\n\t  return rootCommons.buildUrl(appName, fsPath)\n\t}\n\n\tmodule.exports = {\n\t  buildUrl: buildUrl,\n\t  appName: appName\n\t}\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tvar interpolateProviderConfig = ['$interpolateProvider', function ($interpolateProvider) {\n\t  $interpolateProvider.startSymbol('{$');\n\t  $interpolateProvider.endSymbol('$}');\n\t}];\n\n\t/**\n\t * Takes a file system path to a file (most likely a template path) and returns the server compatible path\n\t *\n\t * @param {string} appName - the name of the django app\n\t * @param {string} fsPath - relative path to a file resource on disk. The path must be relative to appName/js directory\n\t *   path\n\t * @returns {string} - a server compatible path\n\t */\n\tfunction buildUrl(appName, fsPath) {\n\t  return staticPrefix + appName + '/js/' + fsPath\n\t}\n\n\t/**\n\t * sets the static root on an angular app - so we can use a variable in our views rather hard-coding the static root\n\t * value\n\t * @param {angular.module} app the angular module on which we wish to set the static root\n\t */\n\tfunction setStaticPrefix(app) {\n\t  app.run(['$rootScope', function ($rootScope) {\n\t    $rootScope.staticPrefix = staticPrefix\n\t    $rootScope.addIconSrc = staticPrefix + 'core_recons/css/images/icon_addposting.gif'\n\t  }])\n\t}\n\n\tmodule.exports = {\n\t  interpolateProviderConfig: interpolateProviderConfig,\n\n\t  buildUrl: buildUrl,\n\n\t  rootAppName: 'core_recons',\n\n\t  setStaticPrefix: setStaticPrefix\n\t}\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar app = angular.module('lc-cover', [\n\t  'rootApp'\n\t])\n\n\tapp.directive('lcCover', lcIssueDirective)\n\n\tlcIssueDirective.$inject = []\n\n\tfunction lcIssueDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-cover/lc-cover.html'),\n\t    scope: true,\n\t    bindToController: {\n\t      formM: '=mfContext',\n\t      cover: '=',\n\t      onCoverChanged: '&'\n\t    },\n\t    controller: 'LcCoverDirectiveController as lcCover'\n\t  }\n\t}\n\n\tapp.controller('LcCoverDirectiveController', LcCoverDirectiveController)\n\n\tLcCoverDirectiveController.$inject = [\n\t  '$scope',\n\t  'formMCoverTypes',\n\t  '$filter',\n\t  'formFieldIsValid'\n\t]\n\n\tfunction LcCoverDirectiveController($scope, formMCoverTypes, $filter, formFieldIsValid) {\n\t  console.log('cover init =', 'init')\n\t  var vm = this\n\t  var title = 'Register Cover'\n\t  init()\n\n\t  function init(form) {\n\t    vm.title = title\n\t    vm.showContainer = false\n\t    vm.cover = {}\n\t    vm.coverTypes = null\n\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\t  }\n\n\t  vm.isValid = function isValid(name, validity) {\n\t    return formFieldIsValid($scope, 'coverForm', name, validity)\n\t  }\n\n\t  vm.amountGetterSetter = function(val) {\n\t    if (arguments.length) {\n\t      if (!/[\\d,\\.]+/.test(val)) vm.cover.amount = null\n\t      else vm.cover.amount = Number(val.replace(/,/g, ''))\n\t    } else return vm.cover.amount ? $filter('number')(vm.cover.amount, 2) : undefined\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\n\n\t    if (!vm.showContainer) {\n\t      init(form)\n\t    }\n\t    else {\n\t      vm.title = 'Dismiss'\n\t      vm.coverTypes = formMCoverTypes\n\t      vm.cover.amount = vm.formM.amount\n\t    }\n\t  }\n\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\n\t    if (newFormM) {\n\t      if (! newFormM.number || !newFormM.amount) init()\n\t    }\n\t  }, true)\n\n\t  $scope.$watch(function getCover() {return vm.cover}, function(newCover) {\n\t    vm.onCoverChanged({\n\t      cover: newCover, coverForm: $scope.coverForm\n\t    })\n\n\t  }, true)\n\t}\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('add-form-m')\n\n\tapp.directive('lcBid', lcBidDirective)\n\n\tlcBidDirective.$inject = []\n\n\tfunction lcBidDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/lc-bid/lc-bid.html'),\n\t    scope: true,\n\t    controller: 'LcBidDirectiveController as lcBid'\n\t  }\n\t}\n\n\tapp.controller('LcBidDirectiveController', LcBidDirectiveController)\n\n\tLcBidDirectiveController.$inject = [\n\t  '$scope',\n\t  '$filter',\n\t  'formFieldIsValid',\n\t  'kanmiiUnderscore',\n\t  'LcBidRequest',\n\t  'xhrErrorDisplay',\n\t  'confirmationDialog',\n\t  'formMObject',\n\t  'resetForm2'\n\t]\n\n\tfunction LcBidDirectiveController($scope, $filter, formFieldIsValid, kanmiiUnderscore, LcBidRequest, xhrErrorDisplay,\n\t  confirmationDialog, formMObject, resetForm2) {\n\t  var vm = this\n\t  var title = 'Make Bid Request'\n\t  init()\n\n\t  function init(form) {\n\t    vm.formM = formMObject\n\n\t    vm.title = title\n\t    vm.formM.showBidForm = false\n\t    vm.formM.showEditBid = false\n\t    vm.bidToEdit = null\n\t    vm.formM.bidObj.amount = null\n\n\t    if (form) resetForm2(form)\n\t  }\n\n\t  vm.isValid = function (name, validity) {\n\t    return formFieldIsValid($scope, 'bidForm', name, validity)\n\t  }\n\n\t  vm.amountGetterSetter = function (val) {\n\t    if (arguments.length) {\n\t      if (!/[\\d,\\.]+/.test(val)) vm.formM.bidObj.amount = null\n\t      else vm.formM.bidObj.amount = Number(val.replace(/,/g, ''))\n\n\t    } else return vm.formM.bidObj.amount ? $filter('number')(vm.formM.bidObj.amount, 2) : undefined\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    vm.formM.showBidForm = vm.formM.amount && vm.formM.number && !vm.formM.showBidForm\n\n\t    if (!vm.formM.showBidForm) {\n\t      init(form)\n\t    }\n\t    else {\n\t      vm.title = 'Dismiss'\n\t      var goods = formMObject.goods_description\n\t      if (goods) vm.formM.bidObj.goods_description = goods\n\n\t      vm.formM.bidObj.amount = !vm.formM.existingBids.length ? formMObject.amount : null\n\t    }\n\t  }\n\n\t  vm.editBidInvalid = function editBidInvalid(form) {\n\t    if (kanmiiUnderscore.isEmpty(vm.bidToEdit)) return true\n\n\t    if (form.$invalid) return true\n\n\t    return kanmiiUnderscore.all(bidNotModified())\n\t  }\n\n\t  vm.onBidDblClick = function onBidDblClick(bid, $index) {\n\t    vm.formM.showEditBid = true\n\t    vm.formM.showBidForm = false\n\t    vm.toggleShow()\n\t    vm.bidToEdit = angular.copy(bid)\n\t    vm.bidToEdit.amount = Number(vm.bidToEdit.amount)\n\t    vm.bidToEdit.$index = $index\n\t    vm.formM.bidObj.amount = vm.bidToEdit.amount\n\t  }\n\n\t  vm.trashBid = function trashBid(bid, $index) {\n\t    var text = '\\n\\nApplicant: ' + bid.applicant +\n\t      '\\nForm M: ' + bid.form_m_number +\n\t      '\\nBid Amount: ' + bid.currency + ' ' + $filter('number')(bid.amount, 2)\n\n\t    var mf = '\"' + bid.form_m_number + '\"'\n\n\t    confirmationDialog.showDialog({\n\t      text: 'Sure you want to delete bid:' + text, title: 'Delete bid for ' + mf\n\t    }).then(function (answer) {\n\t      if (answer) {\n\t        LcBidRequest.delete(bid).$promise.then(bidDeleteSuccess, function bidDeleteFailure(xhr) {\n\t          xhrErrorDisplay(xhr)\n\t        })\n\t      }\n\t    })\n\n\t    function bidDeleteSuccess() {\n\t      confirmationDialog.showDialog({\n\t        text: 'Bid delete successfully:' + text,\n\t        title: 'Bid for ' + mf + ' deleted successfully',\n\t        infoOnly: true\n\t      })\n\n\t      vm.formM.existingBids.splice($index, 1)\n\t    }\n\t  }\n\n\t  vm.editBid = function editBid() {\n\t    var title = 'Edit bid \"' + vm.bidToEdit.form_m_number + '\"'\n\n\t    var ccy = formMObject.currency.code\n\t    var text = '\\n\\nForm M:           ' + vm.bidToEdit.form_m_number +\n\t      '\\nBid Amount' +\n\t      '\\n  before edit:    ' + ccy + $filter('number')(vm.bidToEdit.amount, 2) +\n\t      '\\n  after edit:     ' + ccy + $filter('number')(vm.formM.bidObj.amount, 2) +\n\t      '\\nGoods description' +\n\t      '\\n  before edit:    ' + vm.bidToEdit.goods_description +\n\t      '\\n\\n  after edit:     ' + vm.formM.bidObj.goods_description\n\n\t    confirmationDialog.showDialog({\n\t      title: title,\n\t      text: 'Are you sure you want to edit Bid:' + text\n\t    }).then(function (answer) {\n\t      if (answer) doEdit()\n\t    })\n\n\t    function doEdit() {\n\t      var bid = angular.copy(vm.bidToEdit)\n\t      bid.amount = vm.formM.bidObj.amount\n\t      bid.goods_description = vm.formM.bidObj.goods_description\n\n\t      //we need to do this so this bid can show up at the bid list interface in case user wishes to download and\n\t      //send the bid to treasury\n\t      bid.requested_at = null\n\n\t      LcBidRequest.put(bid).$promise.then(function () {\n\t        confirmationDialog.showDialog({title: title, text: 'Edit successful: ' + text, infoOnly: true})\n\t        vm.formM.existingBids.splice(bid.$index, 1, bid)\n\t        init()\n\t      }, function (xhr) {\n\t        xhrErrorDisplay(xhr)\n\t      })\n\t    }\n\t  }\n\n\t  function bidNotModified() {\n\t    return {\n\t      amount: vm.bidToEdit.amount === vm.formM.bidObj.amount,\n\t      goods_description: vm.bidToEdit.goods_description === vm.formM.bidObj.goods_description\n\t    }\n\t  }\n\n\t  $scope.$watch(function () {return formMObject}, function onFormMObjectChanged(formM) {\n\t    if (formM) {\n\t      formMObject.bidForm = $scope.bidForm\n\t      vm.formM = formM\n\t    }\n\t  }, true)\n\t}\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('form-m-bids', [\n\t  'ui.router',\n\t  'lc-bid-request',\n\t  'rootApp',\n\t  'kanmii-URI',\n\t  'kanmii-underscore',\n\t  'form-m-service'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\tbidURLConfig.$inject = ['$stateProvider']\n\tfunction bidURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.bids', {\n\n\t      kanmiiTitle: 'Bids',\n\n\t      views: {\n\t        bids: {\n\t          template: __webpack_require__(11),\n\n\t          controller: 'BidRequestController as bidHome'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('BidRequestController', BidRequestController)\n\tBidRequestController.$inject = [\n\t  'LcBidRequest',\n\t  '$scope',\n\t  '$http',\n\t  'kanmiiUri',\n\t  'urls',\n\t  'kanmiiUnderscore',\n\t  'formatDate',\n\t  '$timeout',\n\t  '$q',\n\t  'FormM'\n\t]\n\tfunction BidRequestController(LcBidRequest, $scope, $http, kanmiiUri, urls, kanmiiUnderscore, formatDate, $timeout, $q,\n\t  FormM) {\n\t  var vm = this;\n\n\t  initialize()\n\t  function initialize() {\n\t    vm.newBid = null\n\n\t    /**\n\t     * When the search-bid directive returns, the result is propagated into this model\n\t     * @type {null|object}\n\t     */\n\t    vm.searchedBidResult = null\n\n\t    vm.selectedBids = {}\n\n\t    vm.selectedDownloadedBids = {}\n\n\t    /**\n\t     * The bids retrieved from backend. Will contain a list of bids and pagination hooks for\n\t     * retrieving the next and previous sets of bids. This model is used by the display directive\n\t     * to display the bids in a table\n\t     * @type {object}\n\t     */\n\t    vm.bidRequests = []\n\t    vm.paginationHooks = {}\n\t    LcBidRequest.pending().$promise.then(function(data) {\n\t      updateBids(data)\n\t    })\n\t  }\n\n\t  /**\n\t   * When a row of the pending bids table is clicked, this function is invoked with the bid at that row\n\t   * @param {{}} bid - the bid object at the row that was double clicked\n\t   */\n\t  vm.rowDblClickCb = function rowDblClickCb(bid) {\n\t    FormM.getPaginated({number: bid.form_m_number}).$promise.then(function(data) {\n\t      var results = data.results\n\t      if (results.length && results.length === 1) {\n\t        $scope.goToFormM(results[0])\n\t      }\n\t    })\n\t  }\n\n\t  /**\n\t   * The table caption for the 'model-table' directive\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Pending Bids'\n\n\t  /**\n\t   * Will be invoked when any of the pager links is clicked in other to get the bids at the pager url\n\t   * @type {getBidsOnNavigation}\n\t   */\n\t  vm.getBidsOnNavigation = getBidsOnNavigation\n\t  function getBidsOnNavigation(linkUrl) {\n\t    $http.get(linkUrl).then(function(response) {\n\t      updateBids(response.data)\n\t    })\n\t  }\n\n\t  $scope.$watch(function searchedBidResult() {return vm.searchedBidResult},\n\t                function searchedBidResultChanged(searchedBidResult) {\n\t                  if (searchedBidResult) {\n\t                    updateBids(searchedBidResult)\n\t                  }\n\t                })\n\n\t  /**\n\t   * Update the bid collection and pagination hooks\n\t   * @param {object} data\n\t   */\n\t  function updateBids(data) {\n\t    vm.bidRequests = data.results\n\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\n\t  }\n\n\t  var url = kanmiiUri(urls.lcBidRequestDownloadUrl)\n\t  vm.downloadUrl = function downloadUrl() {\n\t    if (!kanmiiUnderscore.isEmpty(vm.selectedBids)) {\n\t      var search = []\n\n\t      kanmiiUnderscore.each(vm.selectedBids, function(selection, bidId) {\n\t        if (selection === true) search.push(bidId)\n\t      })\n\n\t      return url.search({bid_ids: search}).toString()\n\t    }\n\t  }\n\n\t  vm.downloadBtnDisabled = function downloadBtnDisabled() {\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedBids)) return true\n\n\t    return !kanmiiUnderscore.any(vm.selectedBids, function(selectionVal) {\n\t      return selectionVal === true\n\t    })\n\t  }\n\n\t  vm.onSelectedBidsChanged = onSelectedBidsChanged\n\t  function onSelectedBidsChanged(newSelections) {\n\t    if (newSelections && !kanmiiUnderscore.isEmpty(newSelections)) {\n\t      kanmiiUnderscore.each(newSelections, function(checked, bidId) {\n\t        var bid = getBidFromId(bidId)\n\n\t        if (bid && bid.downloaded) vm.selectedDownloadedBids[bidId] = checked\n\t      })\n\t    }\n\t  }\n\n\t  vm.markRequestedBtnDisabled = function markRequestedBtnDisabled() {\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedDownloadedBids)) return true\n\n\t    //return true if un-downloaded bid is checked\n\t    //return false if there is at least one downloaded bid checked\n\t    var anyNoneDownloadedChecked = kanmiiUnderscore.any(vm.selectedBids, function(checked, bidId) {\n\t      return !kanmiiUnderscore.has(vm.selectedDownloadedBids, bidId) && checked === true\n\t    })\n\n\t    if (anyNoneDownloadedChecked) return true\n\t    else return !kanmiiUnderscore.any(vm.selectedDownloadedBids, function(checked) {\n\t      return checked === true\n\t    })\n\t  }\n\n\t  vm.markRequested = function markRequested() {\n\t    var editedBids = []\n\n\t    kanmiiUnderscore.each(vm.selectedDownloadedBids, function(checked, bidId) {\n\t      if (!checked) return\n\n\t      var bid = getBidFromId(bidId)\n\t      if (bid) {\n\t        bid.requested_at = formatDate(new Date())\n\t        //LcBidRequest.put(bid).$promise.then(bidEditSuccess, bidEditFailure)\n\t        editedBids.push(LcBidRequest.put(bid).$promise)\n\t      }\n\t    })\n\n\t    if (editedBids.length) {\n\t      $q.all(editedBids).then(function() {\n\t        initialize()\n\t      })\n\t    }\n\t  }\n\n\t  vm.refreshPage = function refreshPage() {\n\t    $timeout(function() {initialize()}, 3000)\n\t  }\n\n\t  function getBidFromId(bidId) {\n\t    for (var index = 0; index < vm.bidRequests.length; index++) {\n\t      var bid = vm.bidRequests[index]\n\t      if (bid.id === +bidId) return bid\n\t    }\n\n\t    return null\n\t  }\n\t}\n\n\t__webpack_require__(12)\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"action-buttons\\\" style=\\\"text-align: right;margin-bottom: 30px;\\\"><button class=\\\"btn btn-info\\\" ng-click=\\\"bidHome.searchBids()\\\">Search Bid Requests</button> <a class=\\\"btn btn-success\\\" ng-href=\\\"{$bidHome.downloadUrl()$}\\\" ng-disabled=\\\"bidHome.downloadBtnDisabled()\\\" ng-click=\\\"bidHome.refreshPage()\\\">Download</a> <button type=\\\"button\\\" name=\\\"bid-home-mark-as-requested-btn\\\" class=\\\"btn btn-success\\\" ng-click=\\\"bidHome.markRequested()\\\" ng-disabled=\\\"bidHome.markRequestedBtnDisabled()\\\">Mark as requested</button></div><div display-pending-bid=\\\"\\\" pending-bids=\\\"bidHome.bidRequests\\\" pager-object=\\\"bidHome.paginationHooks\\\" update-collection=\\\"bidHome.getBidsOnNavigation(linkUrl)\\\" pagination-size=\\\"20\\\" selected-bids=\\\"bidHome.selectedBids\\\" on-selected-bids-changed=\\\"bidHome.onSelectedBidsChanged(newSelections)\\\" on-row-dbl-click=\\\"bidHome.rowDblClickCb(bid)\\\"></div></div>\";\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar lcAppCommons = __webpack_require__(5)\n\n\tvar app = angular.module('form-m-bids')\n\n\tapp.directive('displayPendingBid', displayPendingBidDirective)\n\tfunction displayPendingBidDirective() {\n\t  return {\n\t    restrict: 'EA',\n\n\t    templateUrl: lcAppCommons.buildUrl('form-m/bids/display-pending-bid/display-pending-bid.html'),\n\n\t    scope: true,\n\n\t    bindToController: {\n\t      bids: '=pendingBids',\n\n\t      updateCollection: '&',\n\n\t      onSelectedBidsChanged: '&',\n\n\t      pager: '=pagerObject',\n\n\t      onDblClick: '&onRowDblClick',\n\n\t      paginationSize: '=',\n\n\t      selectedBids: '='\n\t    },\n\n\t    controller: 'displayPendingBidDirectiveCtrl as bidTable'\n\t  }\n\t}\n\n\tapp.controller('displayPendingBidDirectiveCtrl', displayPendingBidDirectiveCtrl)\n\n\tdisplayPendingBidDirectiveCtrl.$inject = [\n\t  'pagerNavSetUpLinks',\n\t  '$scope',\n\t  'kanmiiUnderscore'\n\t]\n\n\tfunction displayPendingBidDirectiveCtrl(pagerNavSetUpLinks, scope, kanmiiUnderscore) {\n\t  var vm = this //jshint -W040\n\n\t  vm.selectedBids = {}\n\n\t  function setUpLinks(next, prev, count) {\n\n\t    var numLinks = Math.ceil(count / vm.paginationSize)\n\n\t    var linkProperties = pagerNavSetUpLinks(next, prev, numLinks)\n\n\t    vm.nextPageLink = next\n\t    vm.prevPageLink = prev\n\n\t    vm.linkUrls = linkProperties.linkUrls\n\t    vm.currentLink = linkProperties.currentLink\n\n\t    /**\n\t     * The row index offset. The row begin at one so in the view, we do `$index + 1` for row number. However, as we\n\t     * move from page to page, the `$index` view value is reset back to zero, so that row number always begin at 1.\n\t     * Since we know what the page number is (this.currentLink), we calculate the offset for the row (as an arithmetic\n\t     * progression)\n\t     * @type {number}\n\t     */\n\t    vm.rowIndexOffset = (vm.currentLink - 1) * vm.paginationSize\n\t  }\n\n\t  vm.onUpdateCollection = onUpdateCollection\n\t  function onUpdateCollection(linkUrl) {\n\t    vm.updateCollection({linkUrl: linkUrl})\n\t  }\n\n\t  scope.$watch(function getPager() {return vm.pager}, function updatedPager(pager) {\n\t    if (pager && !kanmiiUnderscore.isEmpty(pager)) {\n\t      setUpLinks(pager.next, pager.previous, pager.count)\n\t    }\n\t  })\n\n\t  function deselectAllBids() {\n\t    vm.bids.forEach(function(bid) {\n\t      bid.highlighted = false\n\t    })\n\t  }\n\n\t  vm.modelRowClicked = modelRowClicked\n\t  function modelRowClicked(model) {\n\t    if (!model.downloaded) {\n\t      deselectAllBids()\n\n\t      //only highlight a row if no row is checked and the row model is not downloaded previously\n\t      model.highlighted = !kanmiiUnderscore.any(vm.bids, function(bid) {\n\t        return bid.checked\n\t      })\n\t    }\n\t  }\n\n\t  vm.onRowDblClick = function onRowDblClick(bid) {\n\t    vm.onDblClick({bid: bid})\n\t  }\n\n\t  scope.$watch(function getSelectedBids() {return vm.selectedBids}, function updatedSelectedBids(selectedBids) {\n\t    vm.onSelectedBidsChanged({newSelections: selectedBids})\n\n\t    if (selectedBids && !kanmiiUnderscore.isEmpty(selectedBids)) {\n\n\t      kanmiiUnderscore.each(selectedBids, function(checked, id) {\n\n\t        for (var bidIndex = 0; bidIndex < vm.bids.length; bidIndex++) {\n\t          var bid = vm.bids[bidIndex]\n\t          if (bid.id === +id) {\n\t            bid.checked = checked\n\t          }\n\t        }\n\n\t      })\n\n\t      vm.toggleAll = kanmiiUnderscore.all(vm.bids, function(bid) {\n\t        return bid.checked === true\n\t      })\n\t    }\n\t  }, true)\n\n\t  vm.toggleAll = false\n\n\t  vm.toggleAllClicked = function toggleAllClicked() {\n\t    vm.bids.forEach(function(bid) {\n\t      vm.selectedBids[bid.id] = vm.toggleAll\n\t    })\n\t  }\n\t}\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('list-form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'form-m-service',\n\t   'form-m-search',\n\t   'model-table',\n\t   'customer',\n\t   'add-form-m'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(formMListURLConfig)\n\tformMListURLConfig.$inject = ['$stateProvider']\n\tfunction formMListURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.list', {\n\t      kanmiiTitle: 'Form M List',\n\n\t      views: {\n\t        'listFormM': {\n\t          template: __webpack_require__(14),\n\n\t          controller: 'FormMListController as formMList'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('FormMListController', FormMListController)\n\tFormMListController.$inject = ['FormM', '$scope', 'formMModelManager', '$http']\n\tfunction FormMListController(FormM, scope, formMModelManager, $http) {\n\t  var vm = this\n\n\t  /**\n\t   * The model manager will be used by the 'model-table' directive to manage the collection of form Ms retrieved\n\t   * from the server\n\t   * @type {[]}\n\t   */\n\t  vm.modelManager = formMModelManager\n\n\t  vm.modelRowDblClick = function modelRowDblClick(formM) {\n\t    scope.goToFormM(formM)\n\t  }\n\n\t  /**\n\t   * Update the form Ms collection and pagination hooks\n\t   * @param {object} data\n\t   */\n\t  function updateFormMs(data) {\n\t    vm.formMs = data.results\n\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\n\t  }\n\n\t  /**\n\t   * The object containing the hooks for paging through the form Ms collection\n\t   * @type {Array}\n\t   */\n\t  vm.paginationHooks = []\n\n\t  /**\n\t   * The form Ms retrieved from backend. Will contain a list of form Ms and pagination hooks for\n\t   * retrieving the next and previous sets of form Ms. This model is used by the display directive\n\t   * to display the form Ms in a table\n\t   * @type {[]}\n\t   */\n\t  vm.formMs = []\n\t  FormM.getNoLcAttached().$promise.then(function(data) {\n\t    updateFormMs(data)\n\t  })\n\n\t  /**\n\t   * The table caption for the 'model-table' directive\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Form M (LC Not Established)'\n\n\t  vm.getFormMCollectionOnNavigation = getFormMCollectionOnNavigation\n\t  /**\n\t   * when we navigate through the form Ms, we make an http request to the link contained in the navigation ui\n\t   * @param {string} linkUrl - the url (href) of the link clicked by user\n\t   */\n\t  function getFormMCollectionOnNavigation(linkUrl) {\n\t    $http.get(linkUrl).then(function(response) {\n\t      updateFormMs(response.data)\n\t    })\n\t  }\n\n\t  /**\n\t   * When the search-form-m directive returns, the result is propagated into this model\n\t   * @type {null|object}\n\t   */\n\t  vm.searchedFormMResult = null\n\n\t  scope.$watch(function getNewFormM() {return vm.searchedFormMResult}, function(searchedFormMResult) {\n\t    if (searchedFormMResult) updateFormMs(searchedFormMResult)\n\t  })\n\t}\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"manage-form-m-tab-content\\\"><div class=\\\"action-buttons pull-right\\\"><button class=\\\"btn btn-info\\\" search-form-m=\\\"\\\" search-form-m-result=\\\"formMList.searchedFormMResult\\\">Search Form M</button></div><div model-table=\\\"\\\" model-collection=\\\"formMList.formMs\\\" table-model-manager=\\\"::formMList.modelManager\\\" table-caption=\\\"::formMList.tableCaption\\\" pagination-size=\\\"20\\\" update-collection=\\\"formMList.getFormMCollectionOnNavigation(linkUrl)\\\" pager-object=\\\"formMList.paginationHooks\\\" on-row-dbl-click-callback=\\\"formMList.modelRowDblClick(rowModel)\\\"></div></div>\";\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-detailed-or-uploaded-form-m', [\n\t  'kanmii-underscore',\n\t  'upload-form-m-service',\n\t  'toggle-dim-element',\n\t  'form-m-service'\n\t])\n\n\tapp.factory('SearchDetailedOrUploadedFormMService', SearchDetailedOrUploadedFormMService)\n\tSearchDetailedOrUploadedFormMService.$inject = [\n\t  'UploadFormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'FormM'\n\t]\n\tfunction SearchDetailedOrUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, FormM) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var mf = submittedSearchParams.mf\n\n\t    FormM.getPaginated({number: mf}).$promise.then(function(data) {\n\t      if (data.count === 1) {\n\t        deferred.resolve({detailed: data.results[0]})\n\n\t      } else UploadFormM.query({mf: mf}).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    }, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      if (data.length === 1) deferred.resolve({uploaded: data[0]})\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal() {\n\t      var deferred = $q.defer()\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl(\n\t          'form-m/search-detailed-or-uploaded-form-m/search-detailed-or-uploaded-form-m-modal.html'),\n\n\t        controller: 'SearchDetailedOrUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 500,\n\t          minHeight: 200,\n\t          title: 'Search Form M',\n\n\t          close: function() {\n\t            modal.close.then()\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchDetailedOrUploadedFormMServiceModalCtrl', SearchDetailedOrUploadedFormMServiceModalCtrl)\n\tSearchDetailedOrUploadedFormMServiceModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element'\n\t]\n\tfunction SearchDetailedOrUploadedFormMServiceModalCtrl(close, resetForm, element) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\t}\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('form-m-search-service', ['kanmii-underscore', 'toggle-dim-element'])\n\n\tapp.factory('SearchFormMService', SearchFormMService)\n\tSearchFormMService.$inject = [\n\t  'FormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'ToggleDimElement'\n\t]\n\tfunction SearchFormMService(FormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal(config) {\n\t      var deferred = $q.defer()\n\t      config = config || {}\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl('form-m/search-form-m-service/search-form-m-modal.html'),\n\t        controller: 'SearchFormMServiceModalCtrl as searchFormMModal',\n\t        inputs: {\n\t          uiOptions: config.uiOptions\n\t        }\n\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 450,\n\t          title: 'Search Form M',\n\n\t          open: function() {\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb) //jshint -W030\n\t          },\n\n\t          close: function() {\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchFormMServiceModalCtrl', SearchFormMServiceModalCtrl)\n\tSearchFormMServiceModalCtrl.$inject = [\n\t  'uiOptions',\n\t  'close',\n\t  'resetForm',\n\t  '$element',\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency'\n\t]\n\tfunction SearchFormMServiceModalCtrl(uiOptions, close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  vm.displayLcIssueUI = false\n\n\t  if (uiOptions) {\n\t    vm.displayLcIssueUI = uiOptions.displayLcIssueUI\n\t  }\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t    vm.showLcIssueContainer = false\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\n\t    vm.selectedLcIssues = {}\n\t  }\n\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\n\t  function toggleShowLcIssueContainer() {\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\n\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('form-m-search', ['kanmii-underscore'])\n\n\tapp.directive('searchFormM', searchFormMDirective)\n\tsearchFormMDirective.$inject = ['ModalService', 'kanmiiUnderscore']\n\tfunction searchFormMDirective(ModalService, kanmiiUnderscore) {\n\t  return {\n\t    restrict: 'A',\n\n\t    link: function(scope, elm, attributes, self) {\n\t      elm\n\t        .css({cursor: 'pointer'})\n\t        .bind('click', function() {\n\t                ModalService.showModal({\n\t                  template: __webpack_require__(18),\n\n\t                  controller: 'SearchFormMModalCtrl as searchFormMModal'\n\n\t                }).then(function(modal) {\n\t                  modal.element.dialog({\n\t                    dialogClass: 'no-close',\n\t                    modal: true,\n\t                    minWidth: 600,\n\t                    minHeight: 450,\n\t                    title: 'Search Form M'\n\t                  })\n\n\t                  modal.close.then(function(submittedSearchParams) {\n\t                    if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t                      self.searchFormM(submittedSearchParams)\n\t                    }\n\t                  })\n\t                })\n\t              })\n\t    },\n\n\t    controller: 'SearchFormMDirectiveCtrl as searchFormM',\n\n\t    scope: {},\n\n\t    bindToController: {\n\t      searchFormMResult: '='\n\t    }\n\t  }\n\t}\n\n\tapp.controller('SearchFormMDirectiveCtrl', SearchFormMDirectiveCtrl)\n\tSearchFormMDirectiveCtrl.$inject = ['FormM', 'xhrErrorDisplay']\n\tfunction SearchFormMDirectiveCtrl(FormM, xhrErrorDisplay) {\n\t  var vm = this\n\n\t  vm.searchFormM = searchFormM\n\t  function searchFormM(submittedSearchParams) {\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      vm.searchFormMResult = data\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    }\n\t  }\n\t}\n\n\tapp.controller('SearchFormMModalCtrl', SearchFormMModalCtrl)\n\tSearchFormMModalCtrl.$inject = ['close', 'resetForm', '$element', 'getTypeAheadCustomer', 'getTypeAheadCurrency']\n\tfunction SearchFormMModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t    vm.showLcIssueContainer = false\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\n\t    vm.selectedLcIssues = {}\n\t  }\n\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\n\t  function toggleShowLcIssueContainer() {\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\n\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=\\\"search-form-m-root-container\\\" class=\\\"search-form-m-root-container\\\"><form novalidate=\\\"\\\" class=\\\"form-horizontal\\\" ng-submit=\\\"searchFormMModal.submitSearchParams(searchFormMModal.searchParams)\\\" name=\\\"searchFormMModalForm\\\"><fieldset class=\\\"search-form-m-container\\\" style=\\\"position: relative; padding: 7px;\\\"><div class=\\\"form-group form-m-number-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"form-m-number\\\">Form M Number</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" maxlength=\\\"13\\\" id=\\\"form-m-number\\\" min=\\\"0\\\" ng-pattern=\\\"/(?:mf)?\\\\d{4,11}/i\\\" ng-model=\\\"searchFormMModal.searchParams.number\\\"></div></div><div class=\\\"form-group applicant-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"applicant\\\">Applicant</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" min=\\\"3\\\" id=\\\"applicant\\\" ng-model=\\\"searchFormMModal.searchParams.applicant\\\" typeahead-min-length=\\\"3\\\" uib-typeahead=\\\"applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)\\\"></div></div><div class=\\\"form-group currency-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"currency\\\">Currency</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"currency\\\" maxlength=\\\"3\\\" ng-model=\\\"searchFormMModal.searchParams.currency\\\" uib-typeahead=\\\"currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)\\\" typeahead-min-length=\\\"2\\\"></div></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"amount\\\">Amount</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"amount\\\" min=\\\"0\\\" ng-model=\\\"searchFormMModal.searchParams.amount\\\" number-format=\\\"\\\" ng-pattern=\\\"/^\\\\d[\\\\d,]*(?:\\\\.\\\\d*)?$/\\\"></div></div></fieldset><div class=\\\"form-m-lc-issue-container\\\"><span ng-click=\\\"searchFormMModal.toggleShowLcIssueContainer()\\\" class=\\\"form-m-lc-issue-toggle-show\\\"><span ng-class=\\\"['glyphicon', {'glyphicon-chevron-down': !searchFormMModal.showLcIssueContainer, 'glyphicon-chevron-up': searchFormMModal.showLcIssueContainer}]\\\"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class=\\\"form-m-search-lc-issue\\\" ng-show=\\\"searchFormMModal.showLcIssueContainer\\\"><lc-issue lc-issue-show=\\\"searchFormMModal.showLcIssueContainer\\\" lc-issues-selected=\\\"searchFormMModal.selectedLcIssues\\\"></lc-issue></div></div><div class=\\\"row search-form-m-form-control\\\"><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: left\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.reset(searchFormMModalForm)\\\">Reset</span></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"searchFormMModalForm.$invalid\\\">Search Form M</button></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: right\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.close()\\\">Close</span></div></div></form></div>\";\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\t/*jshint camelcase:false*/\n\n\t__webpack_require__(20)\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('upload-form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'upload-form-m-service'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(uploadFormMURLConfig)\n\tuploadFormMURLConfig.$inject = ['$stateProvider']\n\tfunction uploadFormMURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.upload', {\n\t      kanmiiTitle: 'Form M Upload',\n\n\t      views: {\n\t        'uploadFormM': {\n\t          template: __webpack_require__(21),\n\n\t          controller: 'UploadFormMController as uploadFormM'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('UploadFormMController', UploadFormMController)\n\n\tUploadFormMController.$inject = ['UploadFormM', '$timeout']\n\n\tfunction UploadFormMController(UploadFormM, $timeout) {\n\t  var vm = this\n\n\t  initial()\n\t  function initial() {\n\t    vm.formMIsUploading = false\n\t    vm.uploadIndicationText = 'Uploading Form Ms.........please wait'\n\t    vm.uploadFormMText = ''\n\t  }\n\n\t  vm.uploadFormM = function uploadFormM(text) {\n\t    vm.formMIsUploading = true\n\n\t    var uploaded = [],\n\t      row\n\n\t    function parseDate(dt) {\n\t      return '20' + dt.slice(6) + '-' + dt.slice(3, 5) + '-' + dt.slice(0, 2)\n\t    }\n\n\t    Papa.parse(text, {\n\t      delimiter: '\\t',\n\t      header: false,\n\t      step: function(data) {\n\t        row = data.data[0]\n\n\t        uploaded.push({\n\t          ba: row[0],\n\t          mf: row[1],\n\t          ccy: row[2],\n\t          applicant: row[3],\n\t          fob: row[5].replace(/,/g, ''),\n\t          submitted_at: parseDate(row[6]),\n\t          validated_at: parseDate(row[7])\n\t        })\n\t      }\n\t    })\n\n\t    UploadFormM.save({\n\t      uploaded: uploaded,\n\t      likely_duplicates: true\n\t    })\n\t      .$promise\n\t      .then(formMCreatedSuccess, formMCreatedError)\n\n\t    function formMCreatedSuccess(data) {\n\t      var creationResult = data.created_data,\n\t        numCreatedNow = creationResult.length,\n\t        numCreatedPreviously = uploaded.length - numCreatedNow\n\n\t      vm.uploadIndicationText = 'Done Upload form Ms\\n' +\n\t                                '=========================\\n' +\n\t                                'Total new form Ms created: ' + numCreatedNow + '\\n'\n\t      if (numCreatedPreviously) {\n\t        vm.uploadIndicationText += ('Total not created (because uploaded previously): ' + numCreatedPreviously)\n\t      }\n\n\t      $timeout(function() {\n\t        initial()\n\t      }, 4500)\n\t    }\n\n\t    function formMCreatedError(xhr) {\n\t      console.log(xhr);\n\t    }\n\t  }\n\t}\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-uploaded-form-m', [\n\t  'kanmii-underscore',\n\t  'upload-form-m-service',\n\t  'toggle-dim-element'\n\t])\n\n\tapp.factory('SearchUploadedFormMService', SearchUploadedFormMService)\n\tSearchUploadedFormMService.$inject = [\n\t  'UploadFormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q'\n\t]\n\tfunction SearchUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    UploadFormM.query(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal() {\n\t      var deferred = $q.defer()\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl(\n\t          'form-m/upload-form-m/search-uploaded-form-m/search-uploaded-form-m-modal.html'),\n\n\t        controller: 'SearchUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 250,\n\t          title: 'Search Uploaded Form M',\n\n\t          close: function() {\n\t            modal.close.then()\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchUploadedFormMServiceModalCtrl', SearchUploadedFormMServiceModalCtrl)\n\tSearchUploadedFormMServiceModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element'\n\t]\n\tfunction SearchUploadedFormMServiceModalCtrl(close, resetForm, element) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\t}\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"upload-form-m-tab-content\\\"><form class=\\\"upload-form-m-form\\\" role=\\\"form\\\" name=\\\"uploadFormMForm\\\" ng-submit=\\\"uploadFormM.uploadFormM(uploadFormM.uploadFormMText)\\\"><div class=\\\"form-group upload-form-m-text-group\\\"><pre class=\\\"upload-form-m-indicator\\\" ng-show=\\\"uploadFormM.formMIsUploading\\\">\\n        {$uploadFormM.uploadIndicationText$}\\n      </pre><label for=\\\"upload-form-m\\\" class=\\\"control-label sr-only\\\">Copy and paste form M</label> <textarea name=\\\"upload-form-m\\\" id=\\\"upload-form-m\\\" required=\\\"\\\" ng-model=\\\"uploadFormM.uploadFormMText\\\" ng-class=\\\"['form-control', 'upload-form-m', {'form-m-is-uploading':uploadFormM.formMIsUploading}]\\\" ng-readonly=\\\"uploadFormM.formMIsUploading\\\"></textarea></div><div class=\\\"upload-form-m-submit\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-success\\\" ng-disabled=\\\"uploadFormMForm.$invalid || uploadFormM.formMIsUploading\\\">Upload</button></div></form></div>\";\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div uib-tabset=\\\"\\\"><div uib-tab=\\\"\\\" ng-repeat=\\\"(key, tab) in tabs\\\" heading=\\\"{$tab.title$}\\\" active=\\\"tab.active\\\" select=\\\"tab.select()\\\"><div class=\\\"\\\" ui-view=\\\"{$tab.viewName$}\\\"></div></div></div></div>\";\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('lc', [\n\t  'ui.router',\n\t  'model-table',\n\t  'rootApp',\n\t  'search-lc',\n\t  'lc-detail'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\tbidURLConfig.$inject = ['$stateProvider']\n\tfunction bidURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('lc', {\n\t      url: '/lc',\n\n\t      kanmiiTitle: 'Letter of credit',\n\n\t      templateUrl: __webpack_require__(5).buildUrl('lc/lc.html'),\n\n\t      controller: 'LetterOfCreditController as lcHome'\n\t    })\n\t}\n\n\tapp.controller('LetterOfCreditController', LetterOfCreditController)\n\tLetterOfCreditController.$inject = ['SearchLc', '$state']\n\tfunction LetterOfCreditController(SearchLc, $state) {\n\t  var vm = this\n\n\t  vm.searchLc = function searchLc() {\n\t    SearchLc.searchWithModal().then(function(data) {\n\t      var results = data.results\n\n\t      if (results.length) {\n\t        if (results.length === 1) {\n\t          var lc = results[0]\n\t          $state.go('lc_detail', {lc_number: lc.lc_number, lc: lc})\n\t        }\n\t      }\n\t    })\n\t  }\n\t}\n\n\n\t__webpack_require__(24)\n\t__webpack_require__(25)\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(7)\n\n\tvar app = angular.module('lc-detail', [\n\t  'ui.router',\n\t  'rootApp',\n\t  'lc-service',\n\t  'lc-issue-service',\n\t  'kanmii-underscore',\n\t  'customer'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\n\tbidURLConfig.$inject = ['$stateProvider']\n\n\tfunction bidURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('lc_detail', {\n\t      url: '/lc/:lc_number',\n\n\t      params: {lc: null},\n\n\t      kanmiiTitle: 'Letter of credit',\n\n\t      templateUrl: __webpack_require__(5).buildUrl('lc/lc-detail/lc-detail.html'),\n\n\t      controller: 'LetterOfCreditDetailController as lcDetail'\n\t    })\n\t}\n\n\tapp.controller('LetterOfCreditDetailController', LetterOfCreditDetailController)\n\n\tLetterOfCreditDetailController.$inject = [\n\t  '$stateParams',\n\t  'LetterOfCredit',\n\t  '$state',\n\t  'getTypeAheadCustomer',\n\t  '$filter',\n\t  'getTypeAheadLCIssue',\n\t  'LCIssueConcrete',\n\t  'kanmiiUnderscore',\n\t  'xhrErrorDisplay',\n\t  'formatDate',\n\t  'Customer',\n\t  'formMAttributesVerboseNames'\n\t]\n\n\tfunction LetterOfCreditDetailController($stateParams, LetterOfCredit, $state, getTypeAheadCustomer, $filter,\n\t  getTypeAheadLCIssue, LCIssueConcrete, kanmiiUnderscore, xhrErrorDisplay, formatDate, Customer,\n\t  formMAttributesVerboseNames) {\n\t  var vm = this\n\n\t  initialize()\n\n\t  function initialize() {\n\t    if ($stateParams.lc) {\n\t      vm.lc = $stateParams.lc\n\t      vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\n\t    }\n\n\t    else {\n\t      LetterOfCredit.getPaginated({lc_number: $stateParams.lc_number}).$promise.then(function(data) {\n\t        if (data.count) {\n\t          vm.lc = data.results[0]\n\t          vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\n\t        }\n\n\t        else $state.go('lc')\n\t      })\n\t    }\n\n\t    vm.lcForm = {}\n\t    vm.alertIsShown = false\n\t    vm.issue = {}\n\n\t    function getIssuesNotClosed(issues) {\n\t      if (!issues) return []\n\n\t      return issues.filter(function(issue) {\n\t        return !issue.closed_at\n\t      })\n\t    }\n\t  }\n\n\t  vm.issueDateGetterSetter = function issueDateGetterSetter() {\n\t    if (vm.lc && vm.lc.estb_date) return $filter('date')(vm.lc.estb_date, 'dd-MMM-yyyy')\n\t  }\n\n\t  vm.expiryDateGetterSetter = function expiryDateGetterSetter() {\n\t    if (vm.lc && vm.lc.expiry_date) return $filter('date')(vm.lc.expiry_date, 'dd-MMM-yyyy')\n\t  }\n\n\t  vm.saveIssue = function saveIssue(issue, form) {\n\t    if (issue && !kanmiiUnderscore.isEmpty(issue)) {\n\t      var postData = {\n\t        issue: issue.issue.url,\n\t        mf: vm.lc.mf,\n\t        lc_number: vm.lc.lc_number,\n\t        get_or_create_form_m: true\n\t      }\n\n\t      var applicant = issue.applicant\n\n\t      if (applicant && !kanmiiUnderscore.isEmpty(applicant)) {\n\t        postData.form_m_data = {\n\t          applicant: applicant.url,\n\t          currency: vm.lc.ccy_data.url,\n\t          amount: vm.lc.lc_amt_org_ccy,\n\t          lc: vm.lc.url,\n\t          number: vm.lc.mf\n\t        }\n\n\t      }\n\n\t      LCIssueConcrete.save(postData).$promise.then(saveSuccess, saveError)\n\t    }\n\n\t    function saveSuccess(data) {\n\t      vm.lcIssues.unshift({\n\t        issue_text: data.issue_text,\n\t        issue: data.issue,\n\t        id: data.id,\n\t        mf: data.mf\n\t      })\n\n\t      vm.issue = {}\n\n\t      if (!vm.lc.applicant_data) { vm.lc.applicant_data = applicant}\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    function saveError(xhr) {\n\t      var transform = null\n\t      if (xhr.data.form_m_creation_errors) {\n\t        transform = formMAttributesVerboseNames\n\t        delete xhr.data.form_m_creation_errors\n\t      }\n\t      xhrErrorDisplay(xhr, transform)\n\t    }\n\n\t  }\n\n\t  vm.closeIssue = function closeIssue(issue) {\n\t    issue.closed_at = formatDate(new Date())\n\t    LCIssueConcrete.put(issue).$promise.then(function() {\n\n\t      vm.lcIssues = vm.lcIssues.filter(function(anIssue) {\n\t        return anIssue.id !== issue.id\n\t      })\n\n\t    }, function(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    })\n\t  }\n\n\t  vm.replaceLc = function replaceLc(newLcNumber) {\n\t    LetterOfCredit.getPaginated({lc_number: newLcNumber}).$promise.then(function(data) {\n\t      if (data.count) {\n\t        var lc = data.results[0]\n\n\t        $state.go('.', {lc_number: lc.lc_number, lc: lc})\n\n\t      } else vm.alertIsShown = true\n\t    })\n\t  }\n\n\t  vm.replaceLcFormInvalid = function replaceLcFormInvalid(formInvalid, newLcNumber) {\n\t    return formInvalid || vm.lc.lc_number.toLowerCase().indexOf(newLcNumber.toLowerCase()) !== -1\n\t  }\n\n\t  vm.customerAdded = function customerAdded(customer) {\n\t    vm.issue.applicant = customer\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\n\t  vm.getIssue = function getIssue(text) {\n\t    return getTypeAheadLCIssue({text: text, exclude_form_m_issues: vm.lc.mf})\n\t  }\n\n\t  vm.addCustomer = function addCustomer() {\n\t    Customer.save({name: vm.lc.applicant}).$promise.then(function(data) {\n\t      vm.issue.applicant = data\n\t      vm.lc.applicant_data = data\n\t    })\n\t  }\n\n\t  vm.closeAlert = function closeAlert() {\n\t    vm.alertIsShown = false\n\t  }\n\t}\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-lc', [\n\t  'kanmii-underscore',\n\t  'toggle-dim-element',\n\t  'form-m-service',\n\t  'lc-service'\n\t])\n\n\tapp.factory('SearchLc', SearchLc)\n\tSearchLc.$inject = [\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'ToggleDimElement',\n\t  'LetterOfCredit'\n\t]\n\tfunction SearchLc(xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement, LetterOfCredit) {\n\n\t  function searchLc(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    LetterOfCredit.getPaginated(searchParams).$promise.then(searchLcSuccess, searchLcError)\n\n\t    function searchLcSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchLcError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal(config) {\n\t      var deferred = $q.defer()\n\t      config = config || {}\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl('lc/search-lc/search-lc.html'),\n\t        controller: 'SearchLcModalCtrl as searchLcModal',\n\t        inputs: {\n\t          uiOptions: config.uiOptions\n\t        }\n\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 450,\n\t          title: 'Search Letter of credit',\n\n\t          open: function() {\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb)\n\t          },\n\n\t          close: function() {\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchLc(submittedSearchParams))\n\t          }\n\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchLcModalCtrl', SearchLcModalCtrl)\n\tSearchLcModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element',\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency'\n\t]\n\tfunction SearchLcModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"form-m-home-action-buttons btn-group-vertical\\\" role=\\\"group\\\"><a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"lc\\\">Letter of credit</a> <a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"form_m\\\">Form M</a></div></div>\";\n\n/***/ }\n/******/ ]);"],"sourceRoot":"/source/"}