{"version":3,"sources":["app.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","formMRootAppURLConfig","$stateProvider","$urlRouterProvider","otherwise","state","url","kanmiiTitle","template","rootCommons","app","angular","config","interpolateProviderConfig","run","$rootScope","$state","$stateParams","$inject","addBidURLConfig","controller","MakeBidRequestController","SearchFormMService","formMModelManager","kanmiiUnderscore","filter","LcBidRequest","FormM","xhrErrorDisplay","EditBid","formMAttributesVerboseNames","bidAttributesVerboseNames","reset","form","$setPristine","$setUntouched","vm","formMDetailShown","goodsInputIsEditable","bid","mf","amount","submitBid","newBid","saveNewBid","bidToSave","$save","bidSavedSuccess","bidSavedError","data","editWithModal","formM","formMForBid","title","closeCb","editedBid","go","xhr","goods_description","put","$promise","then","onSelectFormM","rowModel","copy","mfGetterSetter","number","amountGetterSetter","dateReceivedGetterSetter","date_received","formMs","toggleEditGoods","this","modelManager","tableCaption","newVal","isEmpty","applicant_data","name","Number","String","replace","val","Date","getFormM","searchWithModal","results","length","paginationHooks","next","previous","count","toggleShowFormMDetail","buildUrl","appName","fsPath","staticPrefix","setStaticPrefix","addIconSrc","$interpolateProvider","startSymbol","endSymbol","rootAppName","displayPendingBidDirective","restrict","templateUrl","lcAppCommons","scope","bindToController","bids","updateCollection","onSelectedBidsChanged","pager","onDblClick","paginationSize","selectedBids","displayPendingBidDirectiveCtrl","pagerNavSetUpLinks","setUpLinks","prev","numLinks","Math","ceil","linkProperties","nextPageLink","prevPageLink","linkUrls","currentLink","rowIndexOffset","onUpdateCollection","linkUrl","deselectAllBids","forEach","highlighted","modelRowClicked","model","downloaded","any","checked","$watch","newSelections","each","bidIndex","toggleAll","all","toggleAllClicked","directive","lcCommons","addBidDirective","ModalService","link","elm","attributes","self","css","cursor","bind","showModal","modal","element","dialog","dialogClass","minWidth","maxHeight","close","submittedData","saveBid","onNewBid","AddBidDirectiveCtrl","dataToSave","AddBidModalCtrl","resetForm","initForm","isDefined","executeAfterDim","find","$el","$","prop","parent","dim","dimCb","unDimCb","formMsFromSearch","bidURLConfig","params","BidRequestController","$http","stateParams","kanmiiUri","urls","formatDate","$timeout","$q","initialize","searchedBidResult","selectedDownloadedBids","bidRequests","pending","updateBids","searchFormMs","console","log","receiveNewBid","unshift","getBidsOnNavigation","get","response","splice","bidId","getBidFromId","index","lcBidRequestDownloadUrl","downloadUrl","search","selection","push","bid_ids","toString","downloadBtnDisabled","selectionVal","markRequestedBtnDisabled","anyNoneDownloadedChecked","has","markRequested","editedBids","requested_at","refreshPage","EditBidService","isObject","Error","inputs","minHeight","form_m_number","noop","bidForEdit","EditBidModalCtrl","toggleEnableEditForm","inputName","formIsEditable","controls","goods","bidAmountGetterSetter","factory","lcBidDirective","onBidChanged","LcBidDirectiveController","$scope","$filter","formFieldIsValid","init","showBidForm","isValid","validity","arguments","test","cover","undefined","toggleShow","newFormM","bidForm","formMStateURLConfig","detailedFormM","showSummary","views","addFormM","AddFormMStateController","getTypeAheadCustomer","getTypeAheadCurrency","SearchDetailedOrUploadedFormMService","resetForm2","initDetailedFormM","fieldsEdit","currency","applicant","closedIssues","nonClosedIssues","searchFormM","initFormMSavingIndicator","issues","currency_data","form_m_issues","covers","summary","savingFormMIndicator","formMIsSaving","disableSubmitBtn","newFormMFormInvalid","coverForm","$invalid","issuesForm","compared","compareDetailedFormMWithForm","addFormMForm","newFormMForm","elements","showFormMMessage","header","code","showIssuesMessage","issuesText","issue","formatIssueText","text","equals","onCoverChanged","onIssuesChanged","onNonClosedIssuesChanged","enableFieldEdit","field","validators","getApplicant","getCurrency","datePickerFormat","datePickerIsOpen","openDatePicker","getUploadedFormM","detailed","uploaded","ccy","submit","formMSavedSuccess","formMSavedError","formMToSave","cover_type","do_not_update","$put","UploadFormM","submittedSearchParams","searchFormMSuccess","deferred","resolve","searchFormMError","reject","defer","getPaginated","query","promise","SearchService","service","SearchDetailedOrUploadedFormMServiceModalCtrl","searchParams","$error","ToggleDimElement","uiOptions","open","unDim","SearchFormMServiceModalCtrl","showLcIssueContainer","searchLcIssuesTitle","selectedLcIssues","toggleShowLcIssueContainer","submitSearchParams","displayLcIssueUI","searchFormMDirective","searchFormMResult","SearchFormMDirectiveCtrl","SearchFormMModalCtrl","SearchUploadedFormMService","SearchUploadedFormMServiceModalCtrl","uploadFormMURLConfig","uploadFormM","UploadFormMController","initial","formMIsUploading","uploadIndicationText","uploadFormMText","parseDate","dt","slice","formMCreatedSuccess","creationResult","created_data","numCreatedNow","numCreatedPreviously","formMCreatedError","row","Papa","parse","delimiter","step","ba","fob","submitted_at","validated_at","save","likely_duplicates","formMListURLConfig","listFormM","FormMListController","updateFormMs","getFormMCollectionOnNavigation","modelRowDblClick","tabs","active","getNoLcAttached","searchedFormMResult","lcIssueDirective","LcIssueDirectiveController","LCIssueConcrete","getTypeAheadLCIssue","clearFormField","initExistingIssues","initContainerVars","showContainer","closeIssue","$index","issueClosedSuccess","closed_at","closedAt","issueClosedError","issueSelected","$item","$model","deleteIssue","getIssue","_ids","x","concat","exclude_issue_ids","join","downloadIssues","addFormMState","formMIssues","newIssues","$validate","require","atts","ctrl","lcIssue","$validators","Boolean","formMURLConfig","FormMController","uploadFormMTab","viewName","select","listFormMTab","addFormMTab","LetterOfCreditController","SearchLc","searchLc","lc","lc_number","LcCoverDirectiveController","formMCoverTypes","coverTypes","newCover","LetterOfCreditDetailController","LetterOfCredit","Customer","getIssuesNotClosed","lcIssues","lcForm","alertIsShown","issueDateGetterSetter","estb_date","expiryDateGetterSetter","expiry_date","saveIssue","saveSuccess","issue_text","saveError","transform","form_m_creation_errors","postData","get_or_create_form_m","form_m_data","ccy_data","lc_amt_org_ccy","anIssue","replaceLc","newLcNumber","replaceLcFormInvalid","formInvalid","toLowerCase","indexOf","customerAdded","customer","exclude_form_m_issues","addCustomer","closeAlert","searchLcSuccess","searchLcError","SearchLcModalCtrl"],"mappings":"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","file":"app.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t__webpack_require__(1)\n\t__webpack_require__(4)\n\t__webpack_require__(7)\n\t__webpack_require__(8)\n\t__webpack_require__(10)\n\t__webpack_require__(12)\n\t__webpack_require__(13)\n\t__webpack_require__(14)\n\t__webpack_require__(15)\n\t__webpack_require__(16)\n\t__webpack_require__(18)\n\t__webpack_require__(19)\n\t__webpack_require__(21)\n\t__webpack_require__(23)\n\t__webpack_require__(24)\n\t__webpack_require__(26)\n\t__webpack_require__(27)\n\t__webpack_require__(28)\n\t__webpack_require__(29)\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('lc-root-app',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'form-m',\n\t   'form-m-bid',\n\t   'lc'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.run(['$rootScope', '$state', '$stateParams', function($rootScope, $state, $stateParams) {\n\t  $rootScope.$state = $state\n\t  $rootScope.$stateParams = $stateParams\n\t}])\n\n\tapp.config(formMRootAppURLConfig)\n\tformMRootAppURLConfig.$inject = ['$stateProvider', '$urlRouterProvider']\n\tfunction formMRootAppURLConfig($stateProvider, $urlRouterProvider) {\n\t  $urlRouterProvider\n\t    .otherwise('/')\n\n\t  $stateProvider\n\t    .state('home', {\n\t      url: '/',\n\n\t      kanmiiTitle: 'Home',\n\n\t      template: __webpack_require__(30)\n\t    })\n\t}\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\t/**\n\t Add bid service\n\t */\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('add-bid', [\n\t  'rootApp',\n\t  'ui.router',\n\t  'model-table',\n\t  'form-m-service',\n\t  'form-m-search-service',\n\t  'kanmii-underscore',\n\t  'lc-bid-request',\n\t  'edit-bid'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(addBidURLConfig)\n\taddBidURLConfig.$inject = ['$stateProvider']\n\tfunction addBidURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('addBid', {\n\t      url: '/bid/add-bid',\n\n\t      kanmiiTitle: 'Make Bid Request',\n\n\t      template: __webpack_require__(3),\n\n\t      controller: 'MakeBidRequestController as makeBidRequest'\n\t    })\n\t}\n\n\tapp.controller('MakeBidRequestController', MakeBidRequestController)\n\tMakeBidRequestController.$inject = [\n\t  'SearchFormMService',\n\t  'formMModelManager',\n\t  'kanmiiUnderscore',\n\t  '$filter',\n\t  'LcBidRequest',\n\t  'FormM',\n\t  'xhrErrorDisplay',\n\t  'EditBid',\n\t  '$state',\n\t  'formMAttributesVerboseNames',\n\t  'bidAttributesVerboseNames'\n\t]\n\tfunction MakeBidRequestController(SearchFormMService, formMModelManager, kanmiiUnderscore, filter, LcBidRequest,\n\t  FormM, xhrErrorDisplay, EditBid, state, formMAttributesVerboseNames, bidAttributesVerboseNames) {\n\n\t  var vm = this\n\n\t  /**\n\t   * The form M we wish to bid for. This will be the form M instance retrieved from server\n\t   * @type {{}}\n\t   */\n\t  var formMForBid = {\n\t    goods_description: null\n\t  }\n\n\t  reset()\n\t  function reset(form) {\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    vm.formMDetailShown = false\n\t    vm.goodsInputIsEditable = false\n\n\t    vm.bid = {\n\t      mf: null,\n\t      amount: ''\n\t    }\n\t  }\n\n\t  vm.reset = reset\n\n\t  /**\n\t   * Required by model table directive to display bids\n\t   * @type {[]}\n\t   */\n\t  vm.modelManager = formMModelManager\n\n\t  /**\n\t   * Required by model table directive as the table caption\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Select form M for bid request'\n\n\t  /**\n\t   * The form Ms collection from which user will make a choice. The chosen form M will be the one for which bid\n\t   * is to be requested\n\t   * @type {Array}\n\t   */\n\t  vm.formMs = []\n\n\t  vm.submitBid = submitBid\n\t  /**\n\t   * We create a new bid from data collected from user. If we have edited the goods description (because we did not\n\t   * provide one while saving the form M initially or we wish to change the goods description prior to creating a new\n\t   * bid) we first update the form M with the edited goods description before creating the bid\n\t   * @param {{}} newBid\n\t   */\n\t  function submitBid(newBid) {\n\n\t    if (formMForBid.goods_description !== newBid.mf.goods_description) {\n\t      formMForBid.goods_description = newBid.mf.goods_description\n\n\t      FormM.put(formMForBid).$promise.then(function(data) {\n\t        saveNewBid()\n\t        formMForBid = data\n\n\t      }, function(xhr) {\n\t        xhrErrorDisplay(xhr, formMAttributesVerboseNames)\n\t      })\n\n\t    } else saveNewBid();\n\n\t    function saveNewBid() {\n\t      var bidToSave = {\n\t        mf: newBid.mf.url,\n\t        amount: newBid.amount\n\t      }\n\n\t      new LcBidRequest(bidToSave).$save(bidSavedSuccess, bidSavedError)\n\t    }\n\n\t    function bidSavedSuccess(data) {\n\t      /**\n\t       * `EditBid` service will display the just saved bid and will allow us to optionally edit the bid in case we\n\t       * made mistake\n\t       */\n\t      EditBid.editWithModal({\n\t        bid: data,\n\t        formM: formMForBid,\n\t        title: 'Bid Save Successful',\n\t        closeCb: function(editedBid) {\n\t          state.go('bid', {newBid: editedBid})\n\t        }\n\t      })\n\t    }\n\n\t    function bidSavedError(xhr) {\n\t      xhrErrorDisplay(xhr, bidAttributesVerboseNames)\n\t    }\n\t  }\n\n\t  vm.mfGetterSetter = function mfGetterSetter(newVal) {\n\t    if (newVal) vm.bid.mf = newVal\n\t    else if (!kanmiiUnderscore.isEmpty(vm.bid.mf)) return vm.bid.mf.number + ': ' + vm.bid.mf.applicant_data.name\n\t    else return ''\n\t  }\n\n\t  vm.amountGetterSetter = function amountGetterSetter(newVal) {\n\t    if (newVal) {\n\t      vm.bid.amount = Number(String(newVal).replace(',', ''))\n\t    }\n\t    else if (vm.bid.amount) return filter('number')(vm.bid.amount, 2)\n\t    else return ''\n\t  }\n\n\t  vm.dateReceivedGetterSetter = function dateReceivedGetterSetter(val) {\n\t    if (val) vm.bid.mf.date_received = new Date(val)\n\t    else if (vm.bid.mf) return filter('date')(vm.bid.mf.date_received, 'dd-MMM-yyyy')\n\t    else return ''\n\t  }\n\n\t  vm.onSelectFormM = onSelectFormM\n\t  function onSelectFormM(rowModel) {\n\t    formMForBid = angular.copy(rowModel)\n\n\t    vm.mfGetterSetter(rowModel)\n\t    if (!vm.bid.number) vm.amountGetterSetter(rowModel.amount)\n\n\t    vm.dateReceivedGetterSetter(rowModel.date_received)\n\n\t    vm.formMs = [rowModel]\n\t  }\n\n\t  vm.getFormM = function getFormM() {\n\n\t    SearchFormMService.searchWithModal().then(function(data) {\n\t      var results = data.results\n\t      if (results.length) {\n\t        if (results.length === 1) {\n\t          vm.onSelectFormM(results[0])\n\n\t        } else {\n\t          vm.formMs = results\n\t          vm.paginationHooks = {\n\t            next: data.next,\n\t            previous: data.previous,\n\t            count: data.count\n\t          }\n\t        }\n\t      }\n\t    })\n\t  }\n\n\t  vm.toggleShowFormMDetail = function toggleShowFormMDetail() {\n\t    vm.formMDetailShown = !vm.formMDetailShown\n\t  }\n\n\t  vm.toggleEditGoods = toggleEditGoods\n\t  function toggleEditGoods() {\n\t    vm.goodsInputIsEditable = !vm.goodsInputIsEditable && vm.bid.mf && vm.bid.mf.number ? true : false\n\t  }\n\t}\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tvar interpolateProviderConfig = ['$interpolateProvider', function ($interpolateProvider) {\n\t  $interpolateProvider.startSymbol('{$');\n\t  $interpolateProvider.endSymbol('$}');\n\t}];\n\n\t/**\n\t * Takes a file system path to a file (most likely a template path) and returns the server compatible path\n\t *\n\t * @param {string} appName - the name of the django app\n\t * @param {string} fsPath - relative path to a file resource on disk. The path must be relative to appName/js directory\n\t *   path\n\t * @returns {string} - a server compatible path\n\t */\n\tfunction buildUrl(appName, fsPath) {\n\t  return staticPrefix + appName + '/js/' + fsPath\n\t}\n\n\t/**\n\t * sets the static root on an angular app - so we can use a variable in our views rather hard-coding the static root\n\t * value\n\t * @param {angular.module} app the angular module on which we wish to set the static root\n\t */\n\tfunction setStaticPrefix(app) {\n\t  app.run(['$rootScope', function ($rootScope) {\n\t    $rootScope.staticPrefix = staticPrefix\n\t    $rootScope.addIconSrc = staticPrefix + 'core_recons/css/images/icon_addposting.gif'\n\t  }])\n\t}\n\n\tmodule.exports = {\n\t  interpolateProviderConfig: interpolateProviderConfig,\n\n\t  buildUrl: buildUrl,\n\n\t  rootAppName: 'core_recons',\n\n\t  setStaticPrefix: setStaticPrefix\n\t}\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"make-bid-request-root-container\\\"><div class=\\\"state-navigate-back\\\"><a ui-sref=\\\"bid\\\"><span class=\\\"glyphicon glyphicon-circle-arrow-left\\\"></span> Pending Bids</a></div><div class=\\\"row\\\" style=\\\"margin-bottom: 45px;\\\"><div class=\\\"bid-request-form col-sm-5 well\\\"><form novalidate=\\\"\\\" ng-submit=\\\"makeBidRequest.submitBid(makeBidRequest.bid)\\\" role=\\\"form\\\" name=\\\"makeBidRequestForm\\\"><div class=\\\"form-group form-m-group\\\"><label for=\\\"form-m\\\">Form M</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\" data-toggle=\\\"tooltip\\\" title=\\\"Search for Form M\\\" ng-dblclick=\\\"makeBidRequest.getFormM()\\\" style=\\\"cursor: pointer;\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"text\\\" class=\\\"form-control\\\" min=\\\"4\\\" id=\\\"form-m\\\" readonly=\\\"\\\" required=\\\"\\\" name=\\\"mf\\\" placeholder=\\\"Double click to search\\\" ng-model=\\\"makeBidRequest.mfGetterSetter\\\" ng-dblclick=\\\"makeBidRequest.getFormM()\\\" ng-pattern=\\\"/^MF\\\\d{11}\\\\: .+/\\\" ng-model-options=\\\"{getterSetter: true}\\\"> <span class=\\\"input-group-addon\\\" data-toggle=\\\"tooltip\\\" ng-show=\\\"makeBidRequest.bid.mf.number\\\" ng-click=\\\"makeBidRequest.toggleShowFormMDetail()\\\" title=\\\"View Form M\\\" style=\\\"cursor:pointer;\\\"><i class=\\\"glyphicon glyphicon-eye-open\\\"></i></span></div></div><div class=\\\"form-group amount-group\\\"><label for=\\\"amount\\\">Bid Amount</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\">{$makeBidRequest.bid.mf.currency_data.code || '@'$}</span> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"amount\\\" required=\\\"\\\" ng-model=\\\"makeBidRequest.amountGetterSetter\\\" ng-model-options=\\\"{getterSetter: true, updateOn: 'blur'}\\\"></div></div><div class=\\\"form-group goods-description-group\\\"><label for=\\\"goods-description\\\">Goods description</label><div class=\\\"input-group\\\"><input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"goods-description\\\" required=\\\"\\\" ng-minlength=\\\"5\\\" to-upper=\\\"\\\" name=\\\"goods-description\\\" ng-model=\\\"makeBidRequest.bid.mf.goods_description\\\" ng-readonly=\\\"!makeBidRequest.goodsInputIsEditable\\\"> <span class=\\\"input-group-addon\\\" style=\\\"cursor:pointer;\\\" ng-click=\\\"makeBidRequest.toggleEditGoods()\\\"><span class=\\\"glyphicon glyphicon-pencil\\\"></span></span></div></div><div class=\\\"form-group add-bid-form-control\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"makeBidRequestForm.$invalid\\\" name=\\\"add-bid-form-control-submit\\\" style=\\\"margin-right: 5%;\\\">Make Request</button> <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"makeBidRequest.reset(makeBidRequestForm)\\\">Reset</button></div></form></div><div class=\\\"form-m-detail-container col-sm-offset-2 col-sm-4\\\" ng-show=\\\"makeBidRequest.formMDetailShown\\\"><span class=\\\"form-m-detail-container-dismiss\\\" ng-click=\\\"makeBidRequest.toggleShowFormMDetail()\\\">&times;</span><div class=\\\"form-group form-m-number-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-number\\\">Form M Number</label> <input class=\\\"form-control\\\" ng-model=\\\"makeBidRequest.bid.mf.number\\\" id=\\\"form-m-detail-number\\\" disabled=\\\"\\\"></div><div class=\\\"form-group applicant-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-applicant\\\">Applicant</label> <input class=\\\"form-control\\\" type=\\\"text\\\" id=\\\"form-m-detail-applicant\\\" ng-model=\\\"makeBidRequest.bid.mf.applicant_data.name\\\" disabled=\\\"\\\"></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-amount\\\">Form M Amount</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\">{$makeBidRequest.bid.mf.currency_data.code$}</span> <input class=\\\"form-control\\\" id=\\\"form-m-detail-amount\\\" required=\\\"\\\" ng-model=\\\"makeBidRequest.amountGetterSetter\\\" disabled=\\\"\\\" ng-model-options=\\\"{getterSetter: true}\\\"></div></div><div class=\\\"form-group goods-description-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-goods-description\\\">Goods Description</label> <input class=\\\"form-control\\\" type=\\\"text\\\" id=\\\"form-m-detail-goods-description\\\" ng-model=\\\"makeBidRequest.bid.mf.goods_description\\\" disabled=\\\"\\\"></div><div class=\\\"form-group received-date-group\\\"><label class=\\\"control-label\\\" for=\\\"form-m-detail-date-received\\\">Date Received</label> <input class=\\\"form-control\\\" id=\\\"form-m-detail-date-received\\\" disabled=\\\"\\\" ng-model=\\\"makeBidRequest.dateReceivedGetterSetter\\\" ng-model-options=\\\"{getterSetter: true}\\\"></div></div></div><model-table model-collection=\\\"makeBidRequest.formMs\\\" table-model-manager=\\\"::makeBidRequest.modelManager\\\" table-caption=\\\"::makeBidRequest.tableCaption\\\" pagination-size=\\\"20\\\" update-collection=\\\"makeBidRequest.getBidsOnNavigation(linkUrl)\\\" pager-object=\\\"makeBidRequest.paginationHooks\\\" on-row-dbl-click-callback=\\\"makeBidRequest.onSelectFormM(rowModel)\\\"></model-table></div>\";\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar lcAppCommons = __webpack_require__(5)\n\n\tvar app = angular.module('display-pending-bid', ['kanmii-underscore'])\n\n\tapp.directive('displayPendingBid', displayPendingBidDirective)\n\tfunction displayPendingBidDirective() {\n\t  return {\n\t    restrict: 'EA',\n\n\t    templateUrl: lcAppCommons.buildUrl('bid-request/display-pending-bid/display-pending-bid.html'),\n\n\t    scope: {},\n\n\t    bindToController: {\n\t      bids: '=pendingBids',\n\n\t      updateCollection: '&',\n\n\t      onSelectedBidsChanged: '&',\n\n\t      pager: '=pagerObject',\n\n\t      onDblClick: '&onRowDblClickCallback',\n\n\t      paginationSize: '=',\n\n\t      selectedBids: '='\n\t    },\n\n\t    controller: 'displayPendingBidDirectiveCtrl as bidTable'\n\t  }\n\t}\n\n\tapp.controller('displayPendingBidDirectiveCtrl', displayPendingBidDirectiveCtrl)\n\tdisplayPendingBidDirectiveCtrl.$inject = [\n\t  'pagerNavSetUpLinks',\n\t  '$scope',\n\t  'kanmiiUnderscore'\n\t]\n\tfunction displayPendingBidDirectiveCtrl(pagerNavSetUpLinks, scope, kanmiiUnderscore) {\n\t  var vm = this //jshint -W040\n\n\t  vm.selectedBids = {}\n\n\t  function setUpLinks(next, prev, count) {\n\n\t    var numLinks = Math.ceil(count / vm.paginationSize)\n\n\t    var linkProperties = pagerNavSetUpLinks(next, prev, numLinks)\n\n\t    vm.nextPageLink = next\n\t    vm.prevPageLink = prev\n\n\t    vm.linkUrls = linkProperties.linkUrls\n\t    vm.currentLink = linkProperties.currentLink\n\n\t    /**\n\t     * The row index offset. The row begin at one so in the view, we do `$index + 1` for row number. However, as we\n\t     * move from page to page, the `$index` view value is reset back to zero, so that row number always begin at 1.\n\t     * Since we know what the page number is (this.currentLink), we calculate the offset for the row (as an arithmetic\n\t     * progression)\n\t     * @type {number}\n\t     */\n\t    vm.rowIndexOffset = (vm.currentLink - 1) * vm.paginationSize\n\t  }\n\n\t  vm.onUpdateCollection = onUpdateCollection\n\t  function onUpdateCollection(linkUrl) {\n\t    vm.updateCollection({linkUrl: linkUrl})\n\t  }\n\n\t  scope.$watch(function getPager() {return vm.pager}, function updatedPager(pager) {\n\t    if (pager && !kanmiiUnderscore.isEmpty(pager)) {\n\t      setUpLinks(pager.next, pager.previous, pager.count)\n\t    }\n\t  })\n\n\t  function deselectAllBids() {\n\t    vm.bids.forEach(function(bid) {\n\t      bid.highlighted = false\n\t    })\n\t  }\n\n\t  vm.modelRowClicked = modelRowClicked\n\t  function modelRowClicked(model) {\n\t    if (!model.downloaded) {\n\t      deselectAllBids()\n\n\t      //only highlight a row if no row is checked and the row model is not downloaded previously\n\t      model.highlighted = !kanmiiUnderscore.any(vm.bids, function(bid) {\n\t        return bid.checked\n\t      })\n\t    }\n\t  }\n\n\t  scope.$watch(function getSelectedBids() {return vm.selectedBids}, function updatedSelectedBids(selectedBids) {\n\t    vm.onSelectedBidsChanged({newSelections: selectedBids})\n\n\t    if (selectedBids && !kanmiiUnderscore.isEmpty(selectedBids)) {\n\n\t      kanmiiUnderscore.each(selectedBids, function(checked, id) {\n\n\t        for (var bidIndex = 0; bidIndex < vm.bids.length; bidIndex++) {\n\t          var bid = vm.bids[bidIndex]\n\t          if (bid.id === +id) {\n\t            bid.checked = checked\n\t          }\n\t        }\n\n\t      })\n\n\t      vm.toggleAll = kanmiiUnderscore.all(vm.bids, function(bid) {\n\t        return bid.checked === true\n\t      })\n\t    }\n\t  }, true)\n\n\t  vm.toggleAll = false\n\n\t  vm.toggleAllClicked = function toggleAllClicked() {\n\t    vm.bids.forEach(function(bid) {\n\t      vm.selectedBids[bid.id] = vm.toggleAll\n\t    })\n\t  }\n\t}\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar lcCommons = __webpack_require__(6)\n\n\t/**\n\t * @description\n\t *\n\t * @param {String} fsPath - the path relative to the form-m directory\n\t * @returns {*|string}\n\t */\n\tfunction buildUrl(fsPath) {\n\t  return lcCommons.buildUrl('app') + '/' + fsPath\n\t}\n\n\tmodule.exports = {\n\t  buildUrl: buildUrl\n\t}\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar appName = 'letter_of_credit'\n\n\tfunction buildUrl(fsPath) {\n\t  return rootCommons.buildUrl(appName, fsPath)\n\t}\n\n\tmodule.exports = {\n\t  buildUrl: buildUrl,\n\t  appName: appName\n\t}\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('add-bid-service', ['rootApp', 'kanmii-underscore', 'form-m-search-service'])\n\n\tapp.directive('addBid', addBidDirective)\n\taddBidDirective.$inject = ['ModalService']\n\tfunction addBidDirective(ModalService) {\n\t  function link(scope, elm, attributes, self) {\n\t    elm\n\t      .css({cursor: 'pointer'})\n\t      .bind('click', function() {\n\t              ModalService.showModal({\n\t                templateUrl: __webpack_require__(5).buildUrl('bid-request/add-bid/add-bid.html'),\n\n\t                controller: 'AddBidModalCtrl as addBidModal'\n\n\t              }).then(function(modal) {\n\t                modal.element.dialog({\n\t                  dialogClass: 'no-close',\n\t                  modal: true,\n\t                  minWidth: 600,\n\t                  maxHeight: 450,\n\t                  title: 'Make Bid Request'\n\t                })\n\n\t                modal.close.then(function(submittedData) {\n\t                  if (submittedData) {\n\t                    self.saveBid(submittedData)\n\t                  }\n\t                })\n\t              })\n\t            })\n\t  }\n\n\t  return {\n\t    restrict: 'A',\n\t    link: link,\n\t    controller: 'AddBidDirectiveCtrl as addBid',\n\t    scope: {},\n\t    bindToController: {\n\t      onNewBid: '&'\n\t    }\n\t  }\n\t}\n\n\tapp.controller('AddBidDirectiveCtrl', AddBidDirectiveCtrl)\n\tAddBidDirectiveCtrl.$inject = [\n\t  'xhrErrorDisplay', 'LcBidRequest'\n\t]\n\tfunction AddBidDirectiveCtrl(xhrErrorDisplay, LcBidRequest) {\n\t  var vm = this\n\n\t  vm.saveBid = saveBid\n\t  function saveBid(submittedData) {\n\t    var dataToSave = {\n\t      amount: submittedData.amount,\n\t      mf: submittedData.mf.url\n\t    }\n\n\t    new LcBidRequest(dataToSave).$save(bidSavedSuccess, bidSavedError)\n\n\t    function bidSavedSuccess(data) {\n\t      vm.onNewBid({newBid: data})\n\t    }\n\n\t    function bidSavedError(xhr) {\n\t      xhrErrorDisplay(xhr, {mf: 'form m', amount: 'amount'})\n\t    }\n\t  }\n\t}\n\n\tapp.controller('AddBidModalCtrl', AddBidModalCtrl)\n\tAddBidModalCtrl.$inject = [\n\t  'resetForm',\n\t  '$element',\n\t  'close',\n\t  'SearchFormMService',\n\t  'kanmiiUnderscore',\n\t  '$state'\n\t]\n\tfunction AddBidModalCtrl(resetForm, element, close, SearchFormMService, kanmiiUnderscore, state) {\n\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.bid = {\n\t      mf: {}\n\t    }\n\t  }\n\n\t  vm.mfGetterSetter = function mfGetterSetter(newVal) {\n\t    if (angular.isDefined(newVal)) vm.bid.mf = newVal\n\t    else if (!kanmiiUnderscore.isEmpty(vm.bid.mf)) return vm.bid.mf.number + ': ' + vm.bid.mf.applicant_data.name\n\t    else return ''\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t  }\n\n\t  vm.submitBid = submitBid\n\t  function submitBid(newBid) {\n\t    close(newBid)\n\t  }\n\n\t  vm.getFormM = function getFormM() {\n\t    function executeAfterDim() {\n\t      element.find('.form-control').each(function() {\n\t        var $el = $(this)\n\t        $el.prop('disabled', !$el.prop('disabled'))\n\t      })\n\t    }\n\n\t    SearchFormMService.searchWithModal({\n\t      parent: element,\n\t      dim: true,\n\t      dimCb: executeAfterDim,\n\t      unDimCb: executeAfterDim\n\t    }).then(function(data) {\n\t      var results = data.results\n\t      if (results.length) {\n\t        if (results.length === 1) vm.mfGetterSetter(results[0])\n\t        else {\n\t          close()\n\t          state.go('addBid', {formMsFromSearch: data})\n\t        }\n\t      }\n\t    })\n\t  }\n\t}\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('form-m-bid', [\n\t  'ui.router',\n\t  'display-pending-bid',\n\t  'add-bid',\n\t  'form-m-search-service',\n\t  'lc-bid-request',\n\t  'rootApp',\n\t  'kanmii-URI',\n\t  'kanmii-underscore'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\tbidURLConfig.$inject = ['$stateProvider']\n\tfunction bidURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('bid', {\n\t      url: '/bid',\n\n\t      params: {newBid: null},\n\n\t      kanmiiTitle: 'Bid Requests',\n\n\t      template: __webpack_require__(9),\n\n\t      controller: 'BidRequestController as bidHome'\n\t    })\n\t}\n\n\tapp.controller('BidRequestController', BidRequestController)\n\tBidRequestController.$inject = [\n\t  'LcBidRequest',\n\t  '$scope',\n\t  'SearchFormMService',\n\t  '$http',\n\t  '$stateParams',\n\t  'kanmiiUri',\n\t  'urls',\n\t  'kanmiiUnderscore',\n\t  'formatDate',\n\t  'xhrErrorDisplay',\n\t  '$timeout',\n\t  '$q'\n\t]\n\tfunction BidRequestController(LcBidRequest, scope, SearchFormMService, $http,\n\t  stateParams, kanmiiUri, urls, kanmiiUnderscore, formatDate, xhrErrorDisplay, $timeout, $q) {\n\t  var vm = this;\n\n\t  initialize()\n\t  function initialize() {\n\t    vm.newBid = null\n\n\t    /**\n\t     * When the search-form-m directive returns, the result is propagated into this model\n\t     * @type {null|object}\n\t     */\n\t    vm.searchedBidResult = null\n\n\t    vm.selectedBids = {}\n\n\t    vm.selectedDownloadedBids = {}\n\n\t    /**\n\t     * The bids retrieved from backend. Will contain a list of bids and pagination hooks for\n\t     * retrieving the next and previous sets of bids. This model is used by the display directive\n\t     * to display the bids in a table\n\t     * @type {object}\n\t     */\n\t    vm.bidRequests = []\n\t    vm.paginationHooks = {}\n\t    LcBidRequest.pending().$promise.then(function(data) {\n\t      updateBids(data)\n\t    })\n\t  }\n\n\t  vm.searchFormMs = searchFormMs\n\t  function searchFormMs() {\n\t    SearchFormMService.searchWithModal().then(function(data) {\n\t      console.log(data);\n\t    })\n\t  }\n\n\t  /**\n\t   * The 'new bid' model. When we create a new bid via the create/add bid directive, the result is\n\t   * propagated from the creation directive into this model\n\t   * @type {null|object}\n\t   */\n\n\t  vm.receiveNewBid = receiveNewBid\n\t  function receiveNewBid(newBid) {\n\t    if (newBid) vm.bidRequests.unshift(newBid)\n\t  }\n\n\t  /**\n\t   * The table caption for the 'model-table' directive\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Pending Bids'\n\n\t  vm.getBidsOnNavigation = getBidsOnNavigation\n\t  function getBidsOnNavigation(linkUrl) {\n\t    $http.get(linkUrl).then(function(response) {\n\t      updateBids(response.data)\n\t    })\n\t  }\n\n\t  scope.$watch(function searchedBidResult() {return vm.searchedBidResult},\n\t               function searchedBidResultChanged(searchedBidResult) {\n\t                 if (searchedBidResult) {\n\t                   updateBids(searchedBidResult)\n\t                 }\n\t               })\n\n\t  /**\n\t   * Update the bid collection and pagination hooks\n\t   * @param {object} data\n\t   */\n\t  function updateBids(data) {\n\n\t    var results = data.results\n\n\t    /**\n\t     * if we are initializing this state with a new bid (because we are coming to this state from 'the create new bid\n\t     * state'), then we first find out if the new bid is among those downloaded from the server. if it is one, we\n\t     * delete it from the collection (because angular will complain if there are duplicate collection elements) and\n\t     * we mark it as pre-selected so that background of the row displaying the new bid can be highlighted\n\t     */\n\t    if (stateParams.newBid) {\n\n\t      for (var bidIndex = 0; bidIndex < results.length; bidIndex++) {\n\n\t        if (results[bidIndex].id === stateParams.newBid.id) {\n\t          results.splice(bidIndex, 1)\n\t          break\n\t        }\n\t      }\n\n\t      stateParams.newBid.highlighted = true\n\t      results.unshift(stateParams.newBid)\n\t      stateParams.newBid = null\n\t    }\n\n\t    vm.bidRequests = results\n\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\n\t  }\n\n\t  var url = kanmiiUri(urls.lcBidRequestDownloadUrl)\n\t  vm.downloadUrl = function downloadUrl() {\n\t    if (!kanmiiUnderscore.isEmpty(vm.selectedBids)) {\n\t      var search = []\n\n\t      kanmiiUnderscore.each(vm.selectedBids, function(selection, bidId) {\n\t        if (selection === true) search.push(bidId)\n\t      })\n\n\t      return url.search({bid_ids: search}).toString()\n\t    }\n\t  }\n\n\t  vm.downloadBtnDisabled = function downloadBtnDisabled() {\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedBids)) return true\n\n\t    return !kanmiiUnderscore.any(vm.selectedBids, function(selectionVal) {\n\t      return selectionVal === true\n\t    })\n\t  }\n\n\t  vm.onSelectedBidsChanged = onSelectedBidsChanged\n\t  function onSelectedBidsChanged(newSelections) {\n\t    if (newSelections && !kanmiiUnderscore.isEmpty(newSelections)) {\n\t      kanmiiUnderscore.each(newSelections, function(checked, bidId) {\n\t        var bid = getBidFromId(bidId)\n\n\t        if (bid && bid.downloaded) vm.selectedDownloadedBids[bidId] = checked\n\t      })\n\t    }\n\t  }\n\n\t  vm.markRequestedBtnDisabled = function markRequestedBtnDisabled() {\n\t    if (kanmiiUnderscore.isEmpty(vm.selectedDownloadedBids)) return true\n\n\t    //return true if un-downloaded bid is checked\n\t    //return false if there is at least one downloaded bid checked\n\t    var anyNoneDownloadedChecked = kanmiiUnderscore.any(vm.selectedBids, function(checked, bidId) {\n\t      return !kanmiiUnderscore.has(vm.selectedDownloadedBids, bidId) && checked === true\n\t    })\n\n\t    if (anyNoneDownloadedChecked) return true\n\t    else return !kanmiiUnderscore.any(vm.selectedDownloadedBids, function(checked) {\n\t      return checked === true\n\t    })\n\t  }\n\n\t  vm.markRequested = function markRequested() {\n\t    var editedBids = []\n\n\t    kanmiiUnderscore.each(vm.selectedDownloadedBids, function(checked, bidId) {\n\t      if (!checked) return\n\n\t      var bid = getBidFromId(bidId)\n\t      if (bid) {\n\t        bid.requested_at = formatDate(new Date())\n\t        //LcBidRequest.put(bid).$promise.then(bidEditSuccess, bidEditFailure)\n\t        editedBids.push(LcBidRequest.put(bid).$promise)\n\t      }\n\t    })\n\n\t    if (editedBids.length) {\n\t      $q.all(editedBids).then(function() {\n\t        initialize()\n\t      })\n\t    }\n\t  }\n\n\t  vm.refreshPage = function refreshPage() {\n\t    $timeout(function() {initialize()}, 3000)\n\t  }\n\n\t  function getBidFromId(bidId) {\n\t    for (var index = 0; index < vm.bidRequests.length; index++) {\n\t      var bid = vm.bidRequests[index]\n\t      if (bid.id === +bidId) return bid\n\t    }\n\n\t    return null\n\t  }\n\t}\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"action-buttons\\\" style=\\\"text-align: right;margin-bottom: 30px;\\\"><button type=\\\"button\\\" class=\\\"btn btn-info\\\" ng-click=\\\"$state.go('addBid')\\\">Add bid request</button> <button class=\\\"btn btn-info\\\" ng-click=\\\"bidHome.searchBids()\\\">Search Bid Requests</button> <a class=\\\"btn btn-success\\\" ng-href=\\\"{$bidHome.downloadUrl()$}\\\" ng-disabled=\\\"bidHome.downloadBtnDisabled()\\\" ng-click=\\\"bidHome.refreshPage()\\\">Download</a> <button type=\\\"button\\\" name=\\\"bid-home-mark-as-requested-btn\\\" class=\\\"btn btn-success\\\" ng-click=\\\"bidHome.markRequested()\\\" ng-disabled=\\\"bidHome.markRequestedBtnDisabled()\\\">Mark as requested</button></div><div display-pending-bid=\\\"\\\" pending-bids=\\\"bidHome.bidRequests\\\" pager-object=\\\"bidHome.paginationHooks\\\" update-collection=\\\"bidHome.getBidsOnNavigation(linkUrl)\\\" pagination-size=\\\"20\\\" selected-bids=\\\"bidHome.selectedBids\\\" on-selected-bids-changed=\\\"bidHome.onSelectedBidsChanged(newSelections)\\\"></div></div>\";\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('edit-bid', ['angularModalService'])\n\n\tapp.factory('EditBid', EditBid)\n\tEditBid.$inject = ['ModalService']\n\tfunction EditBid(ModalService) {\n\t  function EditBidService() {\n\t    var self = this\n\n\t    self.editWithModal = editWithModal\n\t    function editWithModal(config) {\n\t      config = (config && angular.isObject(config)) ? config : {}\n\t      var bid = config.bid\n\n\t      if (!bid) throw new Error('You did not specify the bid to edit')\n\n\t      var formM = config.formM\n\n\t      ModalService.showModal({\n\t        controller: 'EditBidModalCtrl as editBidModal',\n\t        template: __webpack_require__(11),\n\t        inputs: {\n\t          bid: bid,\n\t          formM: formM\n\t        }\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          minWidth: 450,\n\t          minHeight: 400,\n\t          modal: true,\n\t          title: config.title || 'Edit Bid for ' + bid.form_m_number,\n\t          close: function() {\n\t            modal.close.then()\n\t            config.closeCb ? config.closeCb(bid) : angular.noop\n\t          }\n\t        })\n\n\t        modal.close.then(function(bidForEdit) {\n\t          if (bidForEdit) {\n\t            console.log('bidForEdit = ', bidForEdit);\n\t            config.closeCb ? config.closeCb() : angular.noop //jshint -W030\n\t          }\n\t        })\n\t      })\n\t    }\n\t  }\n\n\t  return new EditBidService()\n\t}\n\n\tapp.controller('EditBidModalCtrl', EditBidModalCtrl)\n\tEditBidModalCtrl.$inject = ['bid', 'formM', '$filter']\n\tfunction EditBidModalCtrl(bid, formM, filter) {\n\t  var vm = this\n\n\t  vm.resetForm = function resetForm(form) {\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    vm.formIsEditable = {\n\t      goods: false, amount: false, controls: false\n\t    }\n\t    vm.bid = angular.copy(bid)\n\t    vm.formM = angular.copy(formM)\n\t  }\n\t  vm.resetForm()\n\n\t  vm.bidAmountGetterSetter = function bidAmountGetterSetter(newVal) {\n\t    if (newVal) vm.bid.amount = Number(newVal.replace(',', ''))\n\t    else if (vm.bid.amount) return filter('number')(vm.bid.amount, 2)\n\t    else return ''\n\t  }\n\n\t  vm.toggleEnableEditForm = toggleEnableEditForm\n\t  function toggleEnableEditForm(inputName) {\n\t    vm.formIsEditable[inputName] = !vm.formIsEditable[inputName]\n\t    vm.formIsEditable.controls = vm.formIsEditable.amount || vm.formIsEditable.goods\n\t  }\n\t}\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"bid-edit-modal\\\"><form role=\\\"form\\\" name=\\\"bidEditForm\\\"><div class=\\\"form-group bid-edit-form-m-number\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-form-m-number\\\">Form M Number</label> <input class=\\\"form-control\\\" ng-model=\\\"editBidModal.bid.form_m_number\\\" id=\\\"bid-edit-form-m-number\\\" disabled=\\\"\\\"></div><div class=\\\"form-group customer-name-group\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-customer-name\\\">Customer Name</label> <input class=\\\"form-control\\\" type=\\\"text\\\" id=\\\"bid-edit-customer-name\\\" ng-model=\\\"editBidModal.bid.applicant\\\" disabled=\\\"\\\"></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-form-m-amount\\\">Form M Amount</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\">{$editBidModal.formM.currency_data.code$}</span> <input class=\\\"form-control\\\" id=\\\"bid-edit-form-m-amount\\\" ng-model=\\\"editBidModal.formM.amount\\\" disabled=\\\"\\\" number-format=\\\"\\\"></div></div><div class=\\\"form-group goods-description-group\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-goods-description\\\">Goods Description</label><div class=\\\"input-group\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" id=\\\"bid-edit-goods-description\\\" ng-disabled=\\\"!editBidModal.formIsEditable.goods\\\" ng-model=\\\"editBidModal.bid.goods_description\\\"> <span class=\\\"input-group-addon\\\" style=\\\"cursor:pointer;\\\" ng-click=\\\"editBidModal.toggleEnableEditForm('goods')\\\"><span class=\\\"glyphicon glyphicon-pencil\\\"></span></span></div></div><div class=\\\"form-group bid-amount-group\\\"><label class=\\\"control-label\\\" for=\\\"bid-edit-bid-amount\\\">Bid Amount</label><div class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\">{$editBidModal.formM.currency_data.code$}</span> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"bid-edit-bid-amount\\\" required=\\\"\\\" ng-disabled=\\\"!editBidModal.formIsEditable.amount\\\" ng-model=\\\"editBidModal.bidAmountGetterSetter\\\" ng-model-options=\\\"{getterSetter: true, updateOn: 'blur'}\\\"> <span class=\\\"input-group-addon\\\" style=\\\"cursor:pointer;\\\" ng-click=\\\"editBidModal.toggleEnableEditForm('amount')\\\"><span class=\\\"glyphicon glyphicon-pencil\\\"></span></span></div></div><div class=\\\"edit-bid-form-control\\\" ng-show=\\\"editBidModal.formIsEditable.controls\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"bidEditForm.$invalid\\\">Edit</button> <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"editBidModal.resetForm(bidEditForm)\\\">Reset</button></div></form></div>\";\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('lc-bid', [\n\t  'rootApp'\n\t])\n\n\tapp.directive('lcBid', lcBidDirective)\n\n\tlcBidDirective.$inject = []\n\n\tfunction lcBidDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/lc-bid/lc-bid.html'),\n\t    scope: true,\n\t    bindToController: {\n\t      formM: '=mfContext',\n\t      bid: '=',\n\t      onBidChanged: '&'\n\t    },\n\t    controller: 'LcBidDirectiveController as lcBid'\n\t  }\n\t}\n\n\tapp.controller('LcBidDirectiveController', LcBidDirectiveController)\n\n\tLcBidDirectiveController.$inject = ['$scope', '$filter', 'formFieldIsValid']\n\n\tfunction LcBidDirectiveController($scope, $filter, formFieldIsValid) {\n\t  var vm = this\n\t  var title = 'Make Bid Request'\n\t  init()\n\n\t  function init(form) {\n\t    vm.title = title\n\t    vm.showBidForm = false\n\t    vm.bid = {}\n\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\t  }\n\n\t  vm.isValid = function(name, validity) {\n\t    return formFieldIsValid($scope, 'bidForm', name, validity)\n\t  }\n\n\t  vm.amountGetterSetter = function(val) {\n\t    if (arguments.length) {\n\t      if (!/[\\d,\\.]+/.test(val)) vm.cover.amount = null\n\t      else vm.cover.amount = Number(val.replace(/,/g, ''))\n\t    } else return vm.cover.amount ? $filter('number')(vm.cover.amount, 2) : undefined\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    vm.showBidForm = vm.formM.amount && vm.formM.number && !vm.showBidForm\n\n\t    if (!vm.showBidForm) {\n\t      init(form)\n\t    }\n\t    else {\n\t      vm.title = 'Dismiss'\n\t      vm.bid.amount = vm.formM.amount\n\t      vm.bid.goods_description = vm.formM.goods_description\n\t    }\n\t  }\n\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\n\t    if (newFormM) {\n\t      var number = newFormM.number\n\t      var amount = newFormM.amount\n\n\t      if (!number || !amount) init()\n\t    }\n\t  }, true)\n\n\t  $scope.$watch(function getBid() {return vm.bid}, function(newBid) {\n\t    if (newBid) vm.onBidChanged({bid: newBid, bidForm: $scope.bidForm})\n\n\t  }, true)\n\t}\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('add-form-m', [\n\t  'ui.router',\n\t  'rootApp',\n\t  'kanmii-underscore',\n\t  'customer',\n\t  'search-detailed-or-uploaded-form-m',\n\t  'form-m-service',\n\t  'lc-cover',\n\t  'lc-issue',\n\t  'lc-bid'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(formMStateURLConfig)\n\n\tformMStateURLConfig.$inject = ['$stateProvider']\n\n\tfunction formMStateURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('form_m.add', {\n\t      kanmiiTitle: 'Add form M',\n\n\t      params: {detailedFormM: null, showSummary: null},\n\n\t      views: {\n\t        addFormM: {\n\t          templateUrl: __webpack_require__(5).buildUrl('form-m/add-form-m/add-form-m.html'),\n\n\t          controller: 'AddFormMStateController as addFormMState'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('AddFormMStateController', AddFormMStateController)\n\n\tAddFormMStateController.$inject = [\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency',\n\t  'SearchDetailedOrUploadedFormMService',\n\t  'kanmiiUnderscore',\n\t  'formatDate',\n\t  'xhrErrorDisplay',\n\t  'formMAttributesVerboseNames',\n\t  'FormM',\n\t  '$timeout',\n\t  '$filter',\n\t  '$stateParams',\n\t  'resetForm2',\n\t  '$state',\n\t  '$scope'\n\t]\n\n\tfunction AddFormMStateController(getTypeAheadCustomer, getTypeAheadCurrency, SearchDetailedOrUploadedFormMService,\n\t  kanmiiUnderscore, formatDate, xhrErrorDisplay, formMAttributesVerboseNames, FormM, $timeout, $filter, $stateParams,\n\t  resetForm2, $state, $scope) {\n\t  var vm = this\n\n\t  vm.detailedFormM = angular.copy($stateParams.detailedFormM)\n\t  $stateParams.detailedFormM = null\n\n\t  /*\n\t   *@param {angular.form} the HTML fieldSet element for form M cover\n\t   */\n\t  var coverForm\n\n\t  /*\n\t   *@param {angular.form} the HTML fieldSet element for form M bid\n\t   */\n\t  var bidForm\n\n\t  /*\n\t   *@param {angular.form} the HTML fieldSet element for form M issues\n\t   */\n\t  var issuesForm\n\n\t  initialize()\n\t  function initialize(form) {\n\t    if (vm.detailedFormM) initDetailedFormM()\n\t    else {\n\t      vm.formM = {\n\t        date_received: new Date()\n\t      }\n\n\t      vm.fieldsEdit = {\n\t        number: false,\n\t        currency: false,\n\t        applicant: false,\n\t        date_received: false,\n\t        amount: false\n\t      }\n\n\t      vm.closedIssues = []\n\t      vm.nonClosedIssues = []\n\t    }\n\n\t    vm.searchFormM = {}\n\t    initFormMSavingIndicator()\n\n\t    if (form) {\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    /*\n\t     *@param {angular.form.model} the form M cover model\n\t     */\n\t    vm.cover = null\n\n\t    /*\n\t     *@param {angular.form.model} the form M bid model\n\t     */\n\t    vm.bid = null\n\n\t    /*\n\t     *@param {angular.form.model} the form M issues model\n\t     */\n\t    vm.issues = []\n\n\t    vm.nonClosedIssues = []\n\t  }\n\n\t  function initDetailedFormM() {\n\t    vm.formM = {\n\t      date_received: new Date(vm.detailedFormM.date_received),\n\t      number: vm.detailedFormM.number,\n\t      applicant: vm.detailedFormM.applicant_data,\n\t      currency: vm.detailedFormM.currency_data,\n\t      amount: Number(vm.detailedFormM.amount),\n\t      goods_description: vm.detailedFormM.goods_description,\n\t      form_m_issues: vm.detailedFormM.form_m_issues,\n\t      url: vm.detailedFormM.url,\n\t      covers: vm.detailedFormM.covers\n\t    }\n\n\t    vm.fieldsEdit = {\n\t      number: true,\n\t      currency: true,\n\t      applicant: true,\n\t      date_received: true,\n\t      amount: true\n\t    }\n\n\t  }\n\n\t  function initFormMSavingIndicator() {\n\t    var summary = $stateParams.showSummary\n\t    $stateParams.showSummary = null\n\n\t    if (summary) {\n\t      vm.savingFormMIndicator = summary\n\t      vm.formMIsSaving = true\n\n\t      $timeout(function() {\n\t        vm.formMIsSaving = false\n\t      }, 120000)\n\t    }\n\n\t    else {\n\t      vm.savingFormMIndicator = 'Creating New Form M...........please wait'\n\t      vm.formMIsSaving = false\n\t    }\n\t  }\n\n\t  vm.onCoverChanged = function onCoverChanged(cover, form) {\n\t    vm.cover = cover\n\t    coverForm = form\n\t  }\n\n\t  vm.onBidChanged = function onBidChanged(bid, form) {\n\t    vm.bid = bid\n\t    bidForm = form\n\t  }\n\n\t  vm.onIssuesChanged = function onIssuesChanged(issues, form) {\n\t    vm.issues = issues\n\t    issuesForm = form\n\t  }\n\n\t  vm.onNonClosedIssuesChanged = function onNonClosedIssuesChanged(issues) {\n\t    vm.nonClosedIssues = issues\n\t  }\n\n\t  vm.enableFieldEdit = function enableFieldEdit(field) {\n\t    vm.fieldsEdit[field] = vm.detailedFormM ? !vm.fieldsEdit[field] : false\n\t  }\n\n\t  vm.validators = {\n\t    applicant: {\n\t      test: function() {\n\t        return kanmiiUnderscore.isObject(vm.formM.applicant)\n\t      }\n\t    },\n\n\t    currency: {\n\t      test: function() {\n\t        return kanmiiUnderscore.isObject(vm.formM.currency)\n\t      }\n\t    }\n\t  }\n\n\t  vm.disableSubmitBtn = disableSubmitBtn\n\t  function disableSubmitBtn(newFormMFormInvalid) {\n\t    if (newFormMFormInvalid) return true\n\n\t    if (coverForm && coverForm.$invalid) return true\n\n\t    if (bidForm && bidForm.$invalid) return true\n\n\t    if (issuesForm && issuesForm.$invalid) return true\n\n\t    var compared = compareDetailedFormMWithForm()\n\t    if (!compared) return false\n\n\t    if (kanmiiUnderscore.all(compared)) {\n\t      if (vm.bid && !kanmiiUnderscore.isEmpty(vm.bid)) return false\n\t      if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) return false\n\t      return !vm.issues.length\n\t    }\n\n\t    return false\n\t  }\n\n\t  vm.reset = reset\n\t  function reset(addFormMForm) {\n\t    vm.detailedFormM = null\n\n\t    resetForm2(addFormMForm, [\n\t      {\n\t        form: addFormMForm.newFormMForm, elements: ['applicant', 'currency']\n\t      }\n\t    ])\n\n\t    initialize()\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\n\t  vm.datePickerFormat = 'dd-MMM-yyyy'\n\t  vm.datePickerIsOpen = false\n\t  vm.openDatePicker = function openDatePicker() {\n\t    vm.datePickerIsOpen = true\n\t  }\n\n\t  vm.getUploadedFormM = function getUploadedFormM() {\n\t    vm.detailedFormM = null\n\t    initialize()\n\n\t    SearchDetailedOrUploadedFormMService.searchWithModal().then(function(data) {\n\t      if (data.detailed) {\n\t        vm.detailedFormM = data.detailed\n\t        initDetailedFormM()\n\n\t      } else {\n\t        var formM = data.uploaded\n\t        vm.searchFormM = formM\n\t        vm.formM.number = formM.mf\n\n\t        getTypeAheadCurrency(formM.ccy).then(function(ccy) {\n\t          vm.formM.currency = ccy[0]\n\t        })\n\t      }\n\t    })\n\t  }\n\n\t  vm.submit = function submit(formM) {\n\t    var formMToSave = angular.copy(formM)\n\n\t    formMToSave.applicant = formMToSave.applicant.url\n\t    formMToSave.currency = formMToSave.currency.url\n\t    formMToSave.date_received = formatDate(formMToSave.date_received)\n\n\t    if (vm.bid && !kanmiiUnderscore.isEmpty(vm.bid)) {\n\t      formMToSave.goods_description = vm.bid.goods_description\n\t      formMToSave.bid = {amount: vm.bid.amount}\n\t    }\n\n\t    if (vm.issues.length) formMToSave.issues = vm.issues\n\n\t    if (vm.cover && !kanmiiUnderscore.isEmpty(vm.cover)) {\n\t      formMToSave.cover = {\n\t        amount: vm.cover.amount,\n\t        cover_type: vm.cover.cover_type[0]\n\t      }\n\t    }\n\n\t    if (!vm.detailedFormM) new FormM(formMToSave).$save(formMSavedSuccess, formMSavedError)\n\n\t    else {\n\t      if (kanmiiUnderscore.all(compareDetailedFormMWithForm())) {\n\t        formMToSave.do_not_update = 'do_not_update'\n\t        formMToSave.applicant_data = vm.formM.applicant\n\t        formMToSave.currency_data = vm.formM.currency\n\t      }\n\t      formMToSave.id = vm.detailedFormM.id\n\t      new FormM(formMToSave).$put(formMSavedSuccess, formMSavedError)\n\t    }\n\n\t    function formMSavedSuccess(data) {\n\t      var summary = showFormMMessage() + showIssuesMessage()\n\n\t      if (data.bid) {\n\t        summary += '\\n\\nBid Amount     : ' + data.currency_data.code + ' ' + $filter('number')(data.bid.amount, 2)\n\t      }\n\n\t      if(data.cover) data.covers.push(data.cover)\n\n\t      $state.go('form_m.add', {detailedFormM: data, showSummary: summary})\n\t    }\n\n\t    function formMSavedError(xhr) {\n\t      initFormMSavingIndicator()\n\t      xhrErrorDisplay(xhr, formMAttributesVerboseNames)\n\t    }\n\t  }\n\n\t  $scope.showFormMMessage = showFormMMessage\n\t  function showFormMMessage() {\n\t    var number = $filter('number')(vm.formM.amount, 2)\n\t    var header = vm.formM.applicant.name + ' - ' + vm.formM.number + ' - ' + vm.formM.currency.code + ' ' + number\n\t    return header + '\\n\\nForm M Number : ' + vm.formM.number + '\\n' +\n\t           'Value         : ' + vm.formM.currency.code + ' ' +\n\t           number + '\\n' +\n\t           'Applicant     : ' + vm.formM.applicant.name\n\t  }\n\n\t  $scope.showIssuesMessage = showIssuesMessage\n\t  function showIssuesMessage() {\n\t    if (!vm.nonClosedIssues.length) return ''\n\n\t    var issuesText = '\\n\\n\\nPlease note the following issues which must be \\n' +\n\t                     'regularized before the LC ' +\n\t                     'request can be treated:\\n'\n\t    var index = 1\n\n\t    kanmiiUnderscore.each(vm.nonClosedIssues, function(issue) {\n\t      issuesText += ('(' + index++ + ') ' + vm.formatIssueText(issue.issue.text) + '\\n')\n\t    })\n\n\t    return issuesText\n\t  }\n\n\t  vm.formatIssueText = function(text) {\n\t    return text.replace(/:ISSUE$/i, '')\n\t  }\n\n\t  function compareDetailedFormMWithForm() {\n\t    if (!vm.detailedFormM) return false\n\n\t    return {\n\t      number: vm.formM.number && angular.equals(vm.formM.number, vm.detailedFormM.number),\n\n\t      date_received: angular.equals(vm.formM.date_received, new Date(vm.detailedFormM.date_received)),\n\n\t      amount: vm.formM.amount && angular.equals(vm.formM.amount, Number(vm.detailedFormM.amount)),\n\n\t      currency: vm.formM.currency && (vm.formM.currency.code === vm.detailedFormM.currency_data.code),\n\n\t      applicant: vm.formM.applicant && (vm.formM.applicant.name === vm.detailedFormM.applicant_data.name)\n\t    }\n\t  }\n\t}\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-detailed-or-uploaded-form-m', [\n\t  'kanmii-underscore',\n\t  'upload-form-m-service',\n\t  'toggle-dim-element',\n\t  'form-m-service'\n\t])\n\n\tapp.factory('SearchDetailedOrUploadedFormMService', SearchDetailedOrUploadedFormMService)\n\tSearchDetailedOrUploadedFormMService.$inject = [\n\t  'UploadFormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'FormM'\n\t]\n\tfunction SearchDetailedOrUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, FormM) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var mf = submittedSearchParams.mf\n\n\t    FormM.getPaginated({number: mf}).$promise.then(function(data) {\n\t      if (data.count === 1) {\n\t        deferred.resolve({detailed: data.results[0]})\n\n\t      } else UploadFormM.query({mf: mf}).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    }, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      if (data.length === 1) deferred.resolve({uploaded: data[0]})\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal() {\n\t      var deferred = $q.defer()\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl(\n\t          'form-m/search-detailed-or-uploaded-form-m/search-detailed-or-uploaded-form-m-modal.html'),\n\n\t        controller: 'SearchDetailedOrUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 500,\n\t          minHeight: 200,\n\t          title: 'Search Form M',\n\n\t          close: function() {\n\t            modal.close.then()\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchDetailedOrUploadedFormMServiceModalCtrl', SearchDetailedOrUploadedFormMServiceModalCtrl)\n\tSearchDetailedOrUploadedFormMServiceModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element'\n\t]\n\tfunction SearchDetailedOrUploadedFormMServiceModalCtrl(close, resetForm, element) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\t}\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('form-m-search-service', ['kanmii-underscore', 'toggle-dim-element'])\n\n\tapp.factory('SearchFormMService', SearchFormMService)\n\tSearchFormMService.$inject = [\n\t  'FormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'ToggleDimElement'\n\t]\n\tfunction SearchFormMService(FormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal(config) {\n\t      var deferred = $q.defer()\n\t      config = config || {}\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl('form-m/search-form-m-service/search-form-m-modal.html'),\n\t        controller: 'SearchFormMServiceModalCtrl as searchFormMModal',\n\t        inputs: {\n\t          uiOptions: config.uiOptions\n\t        }\n\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 450,\n\t          title: 'Search Form M',\n\n\t          open: function() {\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb) //jshint -W030\n\t          },\n\n\t          close: function() {\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb) //jshint -W030\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchFormMServiceModalCtrl', SearchFormMServiceModalCtrl)\n\tSearchFormMServiceModalCtrl.$inject = [\n\t  'uiOptions',\n\t  'close',\n\t  'resetForm',\n\t  '$element',\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency'\n\t]\n\tfunction SearchFormMServiceModalCtrl(uiOptions, close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  vm.displayLcIssueUI = false\n\n\t  if (uiOptions) {\n\t    vm.displayLcIssueUI = uiOptions.displayLcIssueUI\n\t  }\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t    vm.showLcIssueContainer = false\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\n\t    vm.selectedLcIssues = {}\n\t  }\n\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\n\t  function toggleShowLcIssueContainer() {\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\n\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('form-m-search', ['kanmii-underscore'])\n\n\tapp.directive('searchFormM', searchFormMDirective)\n\tsearchFormMDirective.$inject = ['ModalService', 'kanmiiUnderscore']\n\tfunction searchFormMDirective(ModalService, kanmiiUnderscore) {\n\t  return {\n\t    restrict: 'A',\n\n\t    link: function(scope, elm, attributes, self) {\n\t      elm\n\t        .css({cursor: 'pointer'})\n\t        .bind('click', function() {\n\t                ModalService.showModal({\n\t                  template: __webpack_require__(17),\n\n\t                  controller: 'SearchFormMModalCtrl as searchFormMModal'\n\n\t                }).then(function(modal) {\n\t                  modal.element.dialog({\n\t                    dialogClass: 'no-close',\n\t                    modal: true,\n\t                    minWidth: 600,\n\t                    minHeight: 450,\n\t                    title: 'Search Form M'\n\t                  })\n\n\t                  modal.close.then(function(submittedSearchParams) {\n\t                    if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t                      self.searchFormM(submittedSearchParams)\n\t                    }\n\t                  })\n\t                })\n\t              })\n\t    },\n\n\t    controller: 'SearchFormMDirectiveCtrl as searchFormM',\n\n\t    scope: {},\n\n\t    bindToController: {\n\t      searchFormMResult: '='\n\t    }\n\t  }\n\t}\n\n\tapp.controller('SearchFormMDirectiveCtrl', SearchFormMDirectiveCtrl)\n\tSearchFormMDirectiveCtrl.$inject = ['FormM', 'xhrErrorDisplay']\n\tfunction SearchFormMDirectiveCtrl(FormM, xhrErrorDisplay) {\n\t  var vm = this\n\n\t  vm.searchFormM = searchFormM\n\t  function searchFormM(submittedSearchParams) {\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    FormM.getPaginated(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      vm.searchFormMResult = data\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    }\n\t  }\n\t}\n\n\tapp.controller('SearchFormMModalCtrl', SearchFormMModalCtrl)\n\tSearchFormMModalCtrl.$inject = ['close', 'resetForm', '$element', 'getTypeAheadCustomer', 'getTypeAheadCurrency']\n\tfunction SearchFormMModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t    vm.showLcIssueContainer = false\n\t    vm.searchLcIssuesTitle = 'Search By Letter Of Credit Issues'\n\t    vm.selectedLcIssues = {}\n\t  }\n\n\t  vm.toggleShowLcIssueContainer = toggleShowLcIssueContainer\n\t  function toggleShowLcIssueContainer() {\n\t    vm.showLcIssueContainer = !vm.showLcIssueContainer\n\n\t    vm.searchLcIssuesTitle = !vm.showLcIssueContainer ? 'Search By Letter Of Credit Issues' : 'Dismiss'\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div id=\\\"search-form-m-root-container\\\" class=\\\"search-form-m-root-container\\\"><form novalidate=\\\"\\\" class=\\\"form-horizontal\\\" ng-submit=\\\"searchFormMModal.submitSearchParams(searchFormMModal.searchParams)\\\" name=\\\"searchFormMModalForm\\\"><fieldset class=\\\"search-form-m-container\\\" style=\\\"position: relative; padding: 7px;\\\"><div class=\\\"form-group form-m-number-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"form-m-number\\\">Form M Number</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" maxlength=\\\"13\\\" id=\\\"form-m-number\\\" min=\\\"0\\\" ng-pattern=\\\"/(?:mf)?\\\\d{4,11}/i\\\" ng-model=\\\"searchFormMModal.searchParams.number\\\"></div></div><div class=\\\"form-group applicant-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"applicant\\\">Applicant</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" min=\\\"3\\\" id=\\\"applicant\\\" ng-model=\\\"searchFormMModal.searchParams.applicant\\\" typeahead-min-length=\\\"3\\\" uib-typeahead=\\\"applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)\\\"></div></div><div class=\\\"form-group currency-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"currency\\\">Currency</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"currency\\\" maxlength=\\\"3\\\" ng-model=\\\"searchFormMModal.searchParams.currency\\\" uib-typeahead=\\\"currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)\\\" typeahead-min-length=\\\"2\\\"></div></div><div class=\\\"form-group amount-group\\\"><label class=\\\"control-label col-md-4 col-lg-4 col-sm-4\\\" for=\\\"amount\\\">Amount</label><div class=\\\"col-md-8 col-lg-8 col-sm-8\\\"><input class=\\\"form-control\\\" id=\\\"amount\\\" min=\\\"0\\\" ng-model=\\\"searchFormMModal.searchParams.amount\\\" number-format=\\\"\\\" ng-pattern=\\\"/^\\\\d[\\\\d,]*(?:\\\\.\\\\d*)?$/\\\"></div></div></fieldset><div class=\\\"form-m-lc-issue-container\\\"><span ng-click=\\\"searchFormMModal.toggleShowLcIssueContainer()\\\" class=\\\"form-m-lc-issue-toggle-show\\\"><span ng-class=\\\"['glyphicon', {'glyphicon-chevron-down': !searchFormMModal.showLcIssueContainer, 'glyphicon-chevron-up': searchFormMModal.showLcIssueContainer}]\\\"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class=\\\"form-m-search-lc-issue\\\" ng-show=\\\"searchFormMModal.showLcIssueContainer\\\"><lc-issue lc-issue-show=\\\"searchFormMModal.showLcIssueContainer\\\" lc-issues-selected=\\\"searchFormMModal.selectedLcIssues\\\"></lc-issue></div></div><div class=\\\"row search-form-m-form-control\\\"><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: left\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.reset(searchFormMModalForm)\\\">Reset</span></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-info\\\" ng-disabled=\\\"searchFormMModalForm.$invalid\\\">Search Form M</button></div><div class=\\\"col-md-4 col-lg-4 col-sm-4\\\" style=\\\"text-align: right\\\"><span class=\\\"btn btn-default\\\" ng-click=\\\"searchFormMModal.close()\\\">Close</span></div></div></form></div>\";\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-uploaded-form-m', [\n\t  'kanmii-underscore',\n\t  'upload-form-m-service',\n\t  'toggle-dim-element'\n\t])\n\n\tapp.factory('SearchUploadedFormMService', SearchUploadedFormMService)\n\tSearchUploadedFormMService.$inject = [\n\t  'UploadFormM',\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q'\n\t]\n\tfunction SearchUploadedFormMService(UploadFormM, xhrErrorDisplay, ModalService, kanmiiUnderscore, $q) {\n\n\t  function searchFormM(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    UploadFormM.query(searchParams).$promise.then(searchFormMSuccess, searchFormMError)\n\n\t    function searchFormMSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchFormMError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal() {\n\t      var deferred = $q.defer()\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl(\n\t          'form-m/upload-form-m/search-uploaded-form-m/search-uploaded-form-m-modal.html'),\n\n\t        controller: 'SearchUploadedFormMServiceModalCtrl as searchUploadedFormMModal'\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 250,\n\t          title: 'Search Uploaded Form M',\n\n\t          close: function() {\n\t            modal.close.then()\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchFormM(submittedSearchParams))\n\t          }\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchUploadedFormMServiceModalCtrl', SearchUploadedFormMServiceModalCtrl)\n\tSearchUploadedFormMServiceModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element'\n\t]\n\tfunction SearchUploadedFormMServiceModalCtrl(close, resetForm, element) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\t}\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('upload-form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'upload-form-m-service'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(uploadFormMURLConfig)\n\tuploadFormMURLConfig.$inject = ['$stateProvider']\n\tfunction uploadFormMURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.upload', {\n\t      kanmiiTitle: 'Form M Upload',\n\n\t      views: {\n\t        'uploadFormM': {\n\t          template: __webpack_require__(20),\n\n\t          controller: 'UploadFormMController as uploadFormM'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('UploadFormMController', UploadFormMController)\n\n\tUploadFormMController.$inject = ['UploadFormM', '$timeout']\n\n\tfunction UploadFormMController(UploadFormM, $timeout) {\n\t  var vm = this\n\n\t  initial()\n\t  function initial() {\n\t    vm.formMIsUploading = false\n\t    vm.uploadIndicationText = 'Uploading Form Ms.........please wait'\n\t    vm.uploadFormMText = ''\n\t  }\n\n\t  vm.uploadFormM = function uploadFormM(text) {\n\t    vm.formMIsUploading = true\n\n\t    var uploaded = [],\n\t      row\n\n\t    function parseDate(dt) {\n\t      return '20' + dt.slice(6) + '-' + dt.slice(3, 5) + '-' + dt.slice(0, 2)\n\t    }\n\n\t    Papa.parse(text, {\n\t      delimiter: '\\t',\n\t      header: false,\n\t      step: function(data) {\n\t        row = data.data[0]\n\n\t        uploaded.push({\n\t          ba: row[0],\n\t          mf: row[1],\n\t          ccy: row[2],\n\t          applicant: row[3],\n\t          fob: row[5].replace(/,/g, ''),\n\t          submitted_at: parseDate(row[6]),\n\t          validated_at: parseDate(row[7])\n\t        })\n\t      }\n\t    })\n\n\t    UploadFormM.save({\n\t      uploaded: uploaded,\n\t      likely_duplicates: true\n\t    })\n\t      .$promise\n\t      .then(formMCreatedSuccess, formMCreatedError)\n\n\t    function formMCreatedSuccess(data) {\n\t      var creationResult = data.created_data,\n\t        numCreatedNow = creationResult.length,\n\t        numCreatedPreviously = uploaded.length - numCreatedNow\n\n\t      vm.uploadIndicationText = 'Done Upload form Ms\\n' +\n\t                                '=========================\\n' +\n\t                                'Total new form Ms created: ' + numCreatedNow + '\\n'\n\t      if (numCreatedPreviously) {\n\t        vm.uploadIndicationText += ('Total not created (because uploaded previously): ' + numCreatedPreviously)\n\t      }\n\n\t      $timeout(function() {\n\t        initial()\n\t      }, 4500)\n\t    }\n\n\t    function formMCreatedError(xhr) {\n\t      console.log(xhr);\n\t    }\n\t  }\n\t}\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"upload-form-m-tab-content\\\"><form class=\\\"upload-form-m-form\\\" role=\\\"form\\\" name=\\\"uploadFormMForm\\\" ng-submit=\\\"uploadFormM.uploadFormM(uploadFormM.uploadFormMText)\\\"><div class=\\\"form-group upload-form-m-text-group\\\"><pre class=\\\"upload-form-m-indicator\\\" ng-show=\\\"uploadFormM.formMIsUploading\\\">\\n        {$uploadFormM.uploadIndicationText$}\\n      </pre><label for=\\\"upload-form-m\\\" class=\\\"control-label sr-only\\\">Copy and paste form M</label> <textarea name=\\\"upload-form-m\\\" id=\\\"upload-form-m\\\" required=\\\"\\\" ng-model=\\\"uploadFormM.uploadFormMText\\\" ng-class=\\\"['form-control', 'upload-form-m', {'form-m-is-uploading':uploadFormM.formMIsUploading}]\\\" ng-readonly=\\\"uploadFormM.formMIsUploading\\\"></textarea></div><div class=\\\"upload-form-m-submit\\\" style=\\\"text-align: center\\\"><button type=\\\"submit\\\" class=\\\"btn btn-success\\\" ng-disabled=\\\"uploadFormMForm.$invalid || uploadFormM.formMIsUploading\\\">Upload</button></div></form></div>\";\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('list-form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'form-m-service',\n\t   'form-m-search',\n\t   'model-table',\n\t   'customer',\n\t   'add-form-m'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(formMListURLConfig)\n\tformMListURLConfig.$inject = ['$stateProvider']\n\tfunction formMListURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m.list', {\n\t      kanmiiTitle: 'Form M List',\n\n\t      views: {\n\t        'listFormM': {\n\t          template: __webpack_require__(22),\n\n\t          controller: 'FormMListController as formMList'\n\t        }\n\t      }\n\t    })\n\t}\n\n\tapp.controller('FormMListController', FormMListController)\n\tFormMListController.$inject = ['FormM', '$scope', 'formMModelManager', '$http', '$state']\n\tfunction FormMListController(FormM, scope, formMModelManager, $http, $state) {\n\t  var vm = this\n\n\t  /**\n\t   * The model manager will be used by the 'model-table' directive to manage the collection of form Ms retrieved\n\t   * from the server\n\t   * @type {[]}\n\t   */\n\t  vm.modelManager = formMModelManager\n\n\t  vm.modelRowDblClick = function modelRowDblClick(formM) {\n\t    $state.go('form_m.add', {detailedFormM: formM})\n\t    scope.tabs.addFormM.active = true\n\t  }\n\n\t  /**\n\t   * Update the form Ms collection and pagination hooks\n\t   * @param {object} data\n\t   */\n\t  function updateFormMs(data) {\n\t    vm.formMs = data.results\n\n\t    vm.paginationHooks = {next: data.next, previous: data.previous, count: data.count}\n\t  }\n\n\t  /**\n\t   * The object containing the hooks for paging through the form Ms collection\n\t   * @type {Array}\n\t   */\n\t  vm.paginationHooks = []\n\n\t  /**\n\t   * The form Ms retrieved from backend. Will contain a list of form Ms and pagination hooks for\n\t   * retrieving the next and previous sets of form Ms. This model is used by the display directive\n\t   * to display the form Ms in a table\n\t   * @type {[]}\n\t   */\n\t  vm.formMs = []\n\t  FormM.getNoLcAttached().$promise.then(function(data) {\n\t    updateFormMs(data)\n\t  })\n\n\t  /**\n\t   * The table caption for the 'model-table' directive\n\t   * @type {string}\n\t   */\n\t  vm.tableCaption = 'Form M (LC Not Established)'\n\n\t  vm.getFormMCollectionOnNavigation = getFormMCollectionOnNavigation\n\t  /**\n\t   * when we navigate through the form Ms, we make an http request to the link contained in the navigation ui\n\t   * @param {string} linkUrl - the url (href) of the link clicked by user\n\t   */\n\t  function getFormMCollectionOnNavigation(linkUrl) {\n\t    $http.get(linkUrl).then(function(response) {\n\t      updateFormMs(response.data)\n\t    })\n\t  }\n\n\t  /**\n\t   * When the search-form-m directive returns, the result is propagated into this model\n\t   * @type {null|object}\n\t   */\n\t  vm.searchedFormMResult = null\n\n\t  scope.$watch(function getNewFormM() {return vm.searchedFormMResult}, function(searchedFormMResult) {\n\t    if (searchedFormMResult) updateFormMs(searchedFormMResult)\n\t  })\n\t}\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"manage-form-m-tab-content\\\"><div class=\\\"action-buttons pull-right\\\"><button class=\\\"btn btn-info\\\" search-form-m=\\\"\\\" search-form-m-result=\\\"formMList.searchedFormMResult\\\">Search Form M</button></div><div model-table=\\\"\\\" model-collection=\\\"formMList.formMs\\\" table-model-manager=\\\"::formMList.modelManager\\\" table-caption=\\\"::formMList.tableCaption\\\" pagination-size=\\\"20\\\" update-collection=\\\"formMList.getFormMCollectionOnNavigation(linkUrl)\\\" pager-object=\\\"formMList.paginationHooks\\\" on-row-dbl-click-callback=\\\"formMList.modelRowDblClick(rowModel)\\\"></div></div>\";\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('lc-issue', [\n\t  'rootApp',\n\t  'lc-issue-service'\n\t])\n\n\tapp.directive('lcIssue', lcIssueDirective)\n\n\tlcIssueDirective.$inject = []\n\n\tfunction lcIssueDirective() {\n\t  return {\n\t    restrict: 'A',\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/lc-issue/lc-issue.html'),\n\t    scope: true,\n\t    bindToController: {\n\t      formM: '=mfContext',\n\t      issues: '=',\n\t      onIssuesChanged: '&',\n\t      onNonClosedIssuesChanged: '&'\n\t    },\n\t    controller: 'LcIssueDirectiveController as lcIssue'\n\t  }\n\t}\n\n\tapp.controller('LcIssueDirectiveController', LcIssueDirectiveController)\n\n\tLcIssueDirectiveController.$inject = [\n\t  '$scope',\n\t  'LCIssueConcrete',\n\t  'getTypeAheadLCIssue',\n\t  'formatDate',\n\t  'xhrErrorDisplay',\n\t  'resetForm2',\n\t  'clearFormField'\n\t]\n\n\tfunction LcIssueDirectiveController($scope, LCIssueConcrete, getTypeAheadLCIssue, formatDate, xhrErrorDisplay,\n\t  resetForm2, clearFormField) {\n\t  var vm = this\n\t  var title = 'Add Letter Of Credit Issues'\n\n\t  initExistingIssues()\n\t  function initExistingIssues() {\n\t    vm.closedIssues = []\n\t    vm.nonClosedIssues = []\n\t  }\n\n\t  initContainerVars()\n\t  function initContainerVars(form) {\n\t    vm.title = title\n\t    vm.showContainer = false\n\n\t    vm.issues = []\n\t    vm.issue = null\n\n\t    if (form) resetForm2(form, [\n\t      {form: form, elements: ['issue']}\n\t    ])\n\t  }\n\n\t  vm.closeIssue = function closeIssue(issue, $index) {\n\t    var closedAt = formatDate(new Date())\n\n\t    LCIssueConcrete.put({\n\t      id: issue.id,\n\t      mf: vm.formM.url,\n\t      issue: issue.issue.url,\n\t      closed_at: closedAt\n\t    }).$promise.then(issueClosedSuccess, issueClosedError)\n\n\t    function issueClosedSuccess() {\n\t      vm.nonClosedIssues.splice($index, 1)\n\t      issue.closed_at = closedAt\n\t      vm.closedIssues.push(issue)\n\t    }\n\n\t    function issueClosedError(xhr) {xhrErrorDisplay(xhr)}\n\t  }\n\n\t  vm.issueSelected = function issueSelected($item, $model) {\n\t    vm.issues.push($model)\n\t    vm.issue = null\n\t    clearFormField($scope.issuesForm, 'issue')\n\t  }\n\n\t  vm.deleteIssue = function deleteIssue(index) {\n\t    vm.issues.splice(index, 1)\n\t  }\n\n\t  vm.getIssue = function getIssue(text) {\n\t    var _ids = []\n\n\t    vm.issues.forEach(function(issue) {\n\t      _ids.push(issue.id)\n\t    })\n\n\t      var x = []\n\n\t    x.concat(vm.nonClosedIssues).concat(vm.closedIssues).forEach(function(issue) {\n\t      _ids.push(issue.issue.id)\n\t    })\n\n\t    return getTypeAheadLCIssue({text: text, exclude_issue_ids: _ids.join(',')})\n\t  }\n\n\t  vm.downloadIssues = function downloadIssues() {\n\t    $scope.addFormMState.savingFormMIndicator = $scope.showFormMMessage() + $scope.showIssuesMessage()\n\n\t    $scope.addFormMState.formMIsSaving = true\n\t  }\n\n\t  vm.toggleShow = function toggleShow(form) {\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\n\n\t    if (!vm.showContainer) initContainerVars(form)\n\t    else vm.title = 'Dismiss'\n\t  }\n\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\n\t    if (newFormM) {\n\t      var formMIssues = newFormM.form_m_issues\n\t      if (formMIssues && formMIssues.length !== (vm.closedIssues.length + vm.nonClosedIssues.length)) {\n\t        formMIssues.forEach(function(issue) {\n\t          if (!issue.closed_at) {\n\t            vm.nonClosedIssues.push(issue)\n\t            return true\n\t          }\n\t          else {\n\t            vm.closedIssues.push(issue)\n\t            return false\n\t          }\n\t        })\n\t      }\n\n\t      if (!newFormM.number || !newFormM.amount) {\n\t        initExistingIssues()\n\t        initContainerVars()\n\t      }\n\t    }\n\t  }, true)\n\n\t  $scope.$watch(function getIssues() {return vm.issues}, function onUpdateIssues(newIssues) {\n\t    $scope.issuesForm.issue.$validate()\n\t    if (newIssues) vm.onIssuesChanged({issues: newIssues, issuesForm: $scope.issuesForm})\n\t  }, true)\n\n\t  $scope.$watch(function getNonClosedIssues() {return vm.nonClosedIssues}, function onUpdateNonClosedIssues(newIssues) {\n\t    if (newIssues) vm.onNonClosedIssuesChanged({issues: newIssues})\n\t  }, true)\n\n\t  $scope.$watch(function getShowContainer() {return vm.showContainer}, function onUpdateShowContainer() {\n\t    $scope.issuesForm.issue.$validate()\n\t  })\n\t}\n\n\tapp.directive('validateIssues', function validateIssues() {\n\t  return {\n\t    restrict: 'A',\n\t    require: 'ngModel',\n\t    link: function($scope, elm, atts, ctrl) {\n\t      var vm = $scope.lcIssue\n\t      ctrl.$validators.issues = function() {\n\t        return !vm.showContainer || Boolean(vm.issues.length)\n\t      }\n\t    }\n\t  }\n\t})\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\"\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('form-m',\n\t  ['rootApp',\n\t   'ui.router',\n\t   'list-form-m',\n\t   'upload-form-m',\n\t   'add-form-m'\n\t  ])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(formMURLConfig)\n\tformMURLConfig.$inject = ['$stateProvider']\n\tfunction formMURLConfig($stateProvider) {\n\n\t  $stateProvider\n\t    .state('form_m', {\n\t      url: '/form-m',\n\n\t      kanmiiTitle: 'Form M',\n\n\t      template: __webpack_require__(25),\n\n\t      controller: 'FormMController as formMHome'\n\t    })\n\t}\n\n\tapp.controller('FormMController', FormMController)\n\tFormMController.$inject = ['$state', '$scope']\n\tfunction FormMController($state, $scope) {\n\t  var vm = this\n\n\t  var uploadFormMTab = {\n\t    title: 'Upload Form M',\n\t    viewName: 'uploadFormM',\n\t    select: function() { $state.go('form_m.upload')}\n\t  }\n\n\t  var listFormMTab =  {\n\t    title: 'List Form M',\n\t    viewName: 'listFormM',\n\t    select: function() { $state.go('form_m.list')}\n\t  }\n\n\t  var addFormMTab = {\n\t    title: 'Add Form M',\n\t    active: true,\n\t    viewName: 'addFormM',\n\t    select: function() { $state.go('form_m.add')}\n\t  }\n\n\t  vm.tabs = [uploadFormMTab, listFormMTab, addFormMTab]\n\n\t  $scope.tabs = { uploadFormM: uploadFormMTab, listFormM: listFormMTab, addFormM: addFormMTab}\n\t}\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div uib-tabset=\\\"\\\"><div uib-tab=\\\"\\\" ng-repeat=\\\"tab in formMHome.tabs\\\" heading=\\\"{$tab.title$}\\\" active=\\\"tab.active\\\" select=\\\"tab.select()\\\"><div class=\\\"\\\" ui-view=\\\"{$tab.viewName$}\\\"></div></div></div></div>\";\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('lc', [\n\t  'ui.router',\n\t  'model-table',\n\t  'rootApp',\n\t  'search-lc',\n\t  'lc-detail'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\tbidURLConfig.$inject = ['$stateProvider']\n\tfunction bidURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('lc', {\n\t      url: '/lc',\n\n\t      kanmiiTitle: 'Letter of credit',\n\n\t      templateUrl: __webpack_require__(5).buildUrl('lc/lc.html'),\n\n\t      controller: 'LetterOfCreditController as lcHome'\n\t    })\n\t}\n\n\tapp.controller('LetterOfCreditController', LetterOfCreditController)\n\tLetterOfCreditController.$inject = ['SearchLc', '$state']\n\tfunction LetterOfCreditController(SearchLc, $state) {\n\t  var vm = this\n\n\t  vm.searchLc = function searchLc() {\n\t    SearchLc.searchWithModal().then(function(data) {\n\t      var results = data.results\n\n\t      if (results.length) {\n\t        if (results.length === 1) {\n\t          var lc = results[0]\n\t          $state.go('lc_detail', {lc_number: lc.lc_number, lc: lc})\n\t        }\n\t      }\n\t    })\n\t  }\n\t}\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\r\n\tvar rootCommons = __webpack_require__(2)\r\n\r\n\tvar app = angular.module('lc-cover', [\r\n\t  'rootApp'\r\n\t])\r\n\r\n\tapp.directive('lcCover', lcIssueDirective)\r\n\r\n\tlcIssueDirective.$inject = []\r\n\r\n\tfunction lcIssueDirective() {\r\n\t  return {\r\n\t    restrict: 'A',\r\n\t    templateUrl: __webpack_require__(5).buildUrl('form-m/lc-cover/lc-cover.html'),\r\n\t    scope: true,\r\n\t    bindToController: {\r\n\t      formM: '=mfContext',\r\n\t      cover: '=',\r\n\t      onCoverChanged: '&'\r\n\t    },\r\n\t    controller: 'LcCoverDirectiveController as lcCover'\r\n\t  }\r\n\t}\r\n\r\n\tapp.controller('LcCoverDirectiveController', LcCoverDirectiveController)\r\n\r\n\tLcCoverDirectiveController.$inject = [\r\n\t  '$scope',\r\n\t  'formMCoverTypes',\r\n\t  '$filter',\r\n\t  'formFieldIsValid'\r\n\t]\r\n\r\n\tfunction LcCoverDirectiveController($scope, formMCoverTypes, $filter, formFieldIsValid) {\r\n\t  var vm = this\r\n\t  var title = 'Register Cover'\r\n\t  init()\r\n\r\n\t  function init(form) {\r\n\t    vm.title = title\r\n\t    vm.showContainer = false\r\n\t    vm.cover = {}\r\n\t    vm.coverTypes = null\r\n\r\n\t    if (form) {\r\n\t      form.$setPristine()\r\n\t      form.$setUntouched()\r\n\t    }\r\n\t  }\r\n\r\n\t  vm.isValid = function isValid(name, validity) {\r\n\t    return formFieldIsValid($scope, 'coverForm', name, validity)\r\n\t  }\r\n\r\n\t  vm.amountGetterSetter = function(val) {\r\n\t    if (arguments.length) {\r\n\t      if (!/[\\d,\\.]+/.test(val)) vm.cover.amount = null\r\n\t      else vm.cover.amount = Number(val.replace(/,/g, ''))\r\n\t    } else return vm.cover.amount ? $filter('number')(vm.cover.amount, 2) : undefined\r\n\t  }\r\n\r\n\t  vm.toggleShow = function toggleShow(form) {\r\n\t    vm.showContainer = vm.formM.amount && vm.formM.number && !vm.showContainer\r\n\r\n\t    if (!vm.showContainer) {\r\n\t      init(form)\r\n\t    }\r\n\t    else {\r\n\t      vm.title = 'Dismiss'\r\n\t      vm.coverTypes = formMCoverTypes\r\n\t      vm.cover.amount = vm.formM.amount\r\n\t    }\r\n\t  }\r\n\r\n\t  $scope.$watch(function getFormM() {return vm.formM}, function(newFormM) {\r\n\t    if (newFormM) {\r\n\t      if (! newFormM.number || !newFormM.amount) init()\r\n\t    }\r\n\t  }, true)\r\n\r\n\t  $scope.$watch(function getCover() {return vm.cover}, function(newCover) {\r\n\t    vm.onCoverChanged({\r\n\t      cover: newCover, coverForm: $scope.coverForm\r\n\t    })\r\n\r\n\t  }, true)\r\n\t}\r\n\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\n\t/*jshint camelcase:false*/\n\n\tvar rootCommons = __webpack_require__(2)\n\n\tvar app = angular.module('lc-detail', [\n\t  'ui.router',\n\t  'rootApp',\n\t  'lc-service',\n\t  'lc-issue-service',\n\t  'kanmii-underscore',\n\t  'customer'\n\t])\n\n\tapp.config(rootCommons.interpolateProviderConfig)\n\n\tapp.config(bidURLConfig)\n\n\tbidURLConfig.$inject = ['$stateProvider']\n\n\tfunction bidURLConfig($stateProvider) {\n\t  $stateProvider\n\t    .state('lc_detail', {\n\t      url: '/lc/:lc_number',\n\n\t      params: {lc: null},\n\n\t      kanmiiTitle: 'Letter of credit',\n\n\t      templateUrl: __webpack_require__(5).buildUrl('lc/lc-detail/lc-detail.html'),\n\n\t      controller: 'LetterOfCreditDetailController as lcDetail'\n\t    })\n\t}\n\n\tapp.controller('LetterOfCreditDetailController', LetterOfCreditDetailController)\n\n\tLetterOfCreditDetailController.$inject = [\n\t  '$stateParams',\n\t  'LetterOfCredit',\n\t  '$state',\n\t  'getTypeAheadCustomer',\n\t  '$filter',\n\t  'getTypeAheadLCIssue',\n\t  'LCIssueConcrete',\n\t  'kanmiiUnderscore',\n\t  'xhrErrorDisplay',\n\t  'formatDate',\n\t  'Customer',\n\t  'formMAttributesVerboseNames'\n\t]\n\n\tfunction LetterOfCreditDetailController($stateParams, LetterOfCredit, $state, getTypeAheadCustomer, $filter,\n\t  getTypeAheadLCIssue, LCIssueConcrete, kanmiiUnderscore, xhrErrorDisplay, formatDate, Customer,\n\t  formMAttributesVerboseNames) {\n\t  var vm = this\n\n\t  initialize()\n\n\t  function initialize() {\n\t    if ($stateParams.lc) {\n\t      vm.lc = $stateParams.lc\n\t      vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\n\t    }\n\n\t    else {\n\t      LetterOfCredit.getPaginated({lc_number: $stateParams.lc_number}).$promise.then(function(data) {\n\t        if (data.count) {\n\t          vm.lc = data.results[0]\n\t          vm.lcIssues = getIssuesNotClosed(vm.lc.issues)\n\t        }\n\n\t        else $state.go('lc')\n\t      })\n\t    }\n\n\t    vm.lcForm = {}\n\t    vm.alertIsShown = false\n\t    vm.issue = {}\n\n\t    function getIssuesNotClosed(issues) {\n\t      if (!issues) return []\n\n\t      return issues.filter(function(issue) {\n\t        return !issue.closed_at\n\t      })\n\t    }\n\t  }\n\n\t  vm.issueDateGetterSetter = function issueDateGetterSetter() {\n\t    if (vm.lc && vm.lc.estb_date) return $filter('date')(vm.lc.estb_date, 'dd-MMM-yyyy')\n\t  }\n\n\t  vm.expiryDateGetterSetter = function expiryDateGetterSetter() {\n\t    if (vm.lc && vm.lc.expiry_date) return $filter('date')(vm.lc.expiry_date, 'dd-MMM-yyyy')\n\t  }\n\n\t  vm.saveIssue = function saveIssue(issue, form) {\n\t    if (issue && !kanmiiUnderscore.isEmpty(issue)) {\n\t      var postData = {\n\t        issue: issue.issue.url,\n\t        mf: vm.lc.mf,\n\t        lc_number: vm.lc.lc_number,\n\t        get_or_create_form_m: true\n\t      }\n\n\t      var applicant = issue.applicant\n\n\t      if (applicant && !kanmiiUnderscore.isEmpty(applicant)) {\n\t        postData.form_m_data = {\n\t          applicant: applicant.url,\n\t          currency: vm.lc.ccy_data.url,\n\t          amount: vm.lc.lc_amt_org_ccy,\n\t          lc: vm.lc.url,\n\t          number: vm.lc.mf\n\t        }\n\n\t      }\n\n\t      LCIssueConcrete.save(postData).$promise.then(saveSuccess, saveError)\n\t    }\n\n\t    function saveSuccess(data) {\n\t      vm.lcIssues.unshift({\n\t        issue_text: data.issue_text,\n\t        issue: data.issue,\n\t        id: data.id,\n\t        mf: data.mf\n\t      })\n\n\t      vm.issue = {}\n\n\t      if (!vm.lc.applicant_data) { vm.lc.applicant_data = applicant}\n\t      form.$setPristine()\n\t      form.$setUntouched()\n\t    }\n\n\t    function saveError(xhr) {\n\t      var transform = null\n\t      if (xhr.data.form_m_creation_errors) {\n\t        transform = formMAttributesVerboseNames\n\t        delete xhr.data.form_m_creation_errors\n\t      }\n\t      xhrErrorDisplay(xhr, transform)\n\t    }\n\n\t  }\n\n\t  vm.closeIssue = function closeIssue(issue) {\n\t    issue.closed_at = formatDate(new Date())\n\t    LCIssueConcrete.put(issue).$promise.then(function() {\n\n\t      vm.lcIssues = vm.lcIssues.filter(function(anIssue) {\n\t        return anIssue.id !== issue.id\n\t      })\n\n\t    }, function(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t    })\n\t  }\n\n\t  vm.replaceLc = function replaceLc(newLcNumber) {\n\t    LetterOfCredit.getPaginated({lc_number: newLcNumber}).$promise.then(function(data) {\n\t      if (data.count) {\n\t        var lc = data.results[0]\n\n\t        $state.go('.', {lc_number: lc.lc_number, lc: lc})\n\n\t      } else vm.alertIsShown = true\n\t    })\n\t  }\n\n\t  vm.replaceLcFormInvalid = function replaceLcFormInvalid(formInvalid, newLcNumber) {\n\t    return formInvalid || vm.lc.lc_number.toLowerCase().indexOf(newLcNumber.toLowerCase()) !== -1\n\t  }\n\n\t  vm.customerAdded = function customerAdded(customer) {\n\t    vm.issue.applicant = customer\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\n\t  vm.getIssue = function getIssue(text) {\n\t    return getTypeAheadLCIssue({text: text, exclude_form_m_issues: vm.lc.mf})\n\t  }\n\n\t  vm.addCustomer = function addCustomer() {\n\t    Customer.save({name: vm.lc.applicant}).$promise.then(function(data) {\n\t      vm.issue.applicant = data\n\t      vm.lc.applicant_data = data\n\t    })\n\t  }\n\n\t  vm.closeAlert = function closeAlert() {\n\t    vm.alertIsShown = false\n\t  }\n\t}\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t/*jshint camelcase:false*/\n\n\tvar app = angular.module('search-lc', [\n\t  'kanmii-underscore',\n\t  'toggle-dim-element',\n\t  'form-m-service',\n\t  'lc-service'\n\t])\n\n\tapp.factory('SearchLc', SearchLc)\n\tSearchLc.$inject = [\n\t  'xhrErrorDisplay',\n\t  'ModalService',\n\t  'kanmiiUnderscore',\n\t  '$q',\n\t  'ToggleDimElement',\n\t  'LetterOfCredit'\n\t]\n\tfunction SearchLc(xhrErrorDisplay, ModalService, kanmiiUnderscore, $q, ToggleDimElement, LetterOfCredit) {\n\n\t  function searchLc(submittedSearchParams) {\n\t    var deferred = $q.defer()\n\t    var searchParams = angular.copy(submittedSearchParams)\n\n\t    if (searchParams.applicant) searchParams.applicant = searchParams.applicant.name\n\t    if (searchParams.currency) searchParams.currency = searchParams.currency.code\n\n\t    LetterOfCredit.getPaginated(searchParams).$promise.then(searchLcSuccess, searchLcError)\n\n\t    function searchLcSuccess(data) {\n\t      deferred.resolve(data)\n\t    }\n\n\t    function searchLcError(xhr) {\n\t      xhrErrorDisplay(xhr)\n\t      deferred.reject(xhr)\n\t    }\n\n\t    return deferred.promise\n\t  }\n\n\t  function SearchService() {\n\t    var service = this\n\n\t    service.searchWithModal = searchWithModal\n\t    function searchWithModal(config) {\n\t      var deferred = $q.defer()\n\t      config = config || {}\n\n\t      ModalService.showModal({\n\t        templateUrl: __webpack_require__(5).buildUrl('lc/search-lc/search-lc.html'),\n\t        controller: 'SearchLcModalCtrl as searchLcModal',\n\t        inputs: {\n\t          uiOptions: config.uiOptions\n\t        }\n\n\t      }).then(function(modal) {\n\t        modal.element.dialog({\n\t          dialogClass: 'no-close',\n\t          modal: true,\n\t          minWidth: 600,\n\t          minHeight: 450,\n\t          title: 'Search Letter of credit',\n\n\t          open: function() {\n\t            config.dim && ToggleDimElement.dim(config.parent, config.dimCb)\n\t          },\n\n\t          close: function() {\n\t            config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\n\t          }\n\t        })\n\n\t        modal.close.then(function(submittedSearchParams) {\n\t          if (submittedSearchParams && angular.isObject(submittedSearchParams) && !kanmiiUnderscore.isEmpty(submittedSearchParams)) {\n\t            deferred.resolve(searchLc(submittedSearchParams))\n\t          }\n\n\t          config.dim && ToggleDimElement.unDim(config.parent, config.unDimCb)\n\t        })\n\t      })\n\n\t      return deferred.promise\n\t    }\n\t  }\n\n\t  return new SearchService()\n\t}\n\n\tapp.controller('SearchLcModalCtrl', SearchLcModalCtrl)\n\tSearchLcModalCtrl.$inject = [\n\t  'close',\n\t  'resetForm',\n\t  '$element',\n\t  'getTypeAheadCustomer',\n\t  'getTypeAheadCurrency'\n\t]\n\tfunction SearchLcModalCtrl(close, resetForm, element, getTypeAheadCustomer, getTypeAheadCurrency) {\n\t  var vm = this\n\n\t  initForm()\n\t  function initForm() {\n\t    vm.searchParams = {}\n\t  }\n\n\t  vm.close = close\n\n\t  vm.reset = reset\n\t  function reset(form) {\n\t    resetForm(form, element, '.form-control', initForm)\n\t    form.$invalid = false\n\t    form.$error = {}\n\t  }\n\n\t  vm.submitSearchParams = submitSearchParams\n\t  function submitSearchParams(searchParams) {\n\t    close(searchParams)\n\t  }\n\n\t  vm.getApplicant = getTypeAheadCustomer\n\t  vm.getCurrency = getTypeAheadCurrency\n\t}\n\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"form-m-home-view\\\"><div class=\\\"form-m-home-action-buttons btn-group-vertical\\\" role=\\\"group\\\"><a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"lc\\\">Letter of credit</a> <a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"form_m\\\">Form M</a> <a class=\\\"btn btn-info form-m-home-action-button\\\" ui-sref=\\\"bid\\\">Bid Request</a></div></div>\";\n\n/***/ }\n/******/ ]);"],"sourceRoot":"/source/"}