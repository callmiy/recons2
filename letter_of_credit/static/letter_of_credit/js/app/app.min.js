!function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";function r(e,t){t.otherwise("/"),e.state("home",{url:"/",kanmiiTitle:"Home",template:o(28)})}o(1),o(4),o(7),o(8),o(10),o(12),o(13),o(14),o(15),o(17),o(18),o(20),o(22),o(23),o(25),o(26),o(27);var i=o(2),n=angular.module("lc-root-app",["rootApp","ui.router","form-m","form-m-bid","lc"]);n.config(i.interpolateProviderConfig),n.run(["$rootScope","$state","$stateParams",function(e,t,o){e.$state=t,e.$stateParams=o}]),n.config(r),r.$inject=["$stateProvider","$urlRouterProvider"]},function(e,t,o){"use strict";function r(e){e.state("addBid",{url:"/bid/add-bid",kanmiiTitle:"Make Bid Request",template:o(3),controller:"MakeBidRequestController as makeBidRequest"})}function i(e,t,o,r,i,n,a,s,l,c,d){function u(e){e&&(e.$setPristine(),e.$setUntouched()),g.formMDetailShown=!1,g.goodsInputIsEditable=!1,g.bid={mf:null,amount:""}}function m(e){function t(){var t={mf:e.mf.url,amount:e.amount};new i(t).$save(o,r)}function o(e){s.editWithModal({bid:e,formM:b,title:"Bid Save Successful",closeCb:function(e){l.go("bid",{newBid:e})}})}function r(e){a(e,d)}b.goods_description!==e.mf.goods_description?(b.goods_description=e.mf.goods_description,n.put(b).$promise.then(function(e){t(),b=e},function(e){a(e,c)})):t()}function f(e){b=angular.copy(e),g.mfGetterSetter(e),g.bid.number||g.amountGetterSetter(e.amount),g.dateReceivedGetterSetter(e.date_received),g.formMs=[e]}function p(){g.goodsInputIsEditable=!g.goodsInputIsEditable&&g.bid.mf&&g.bid.mf.number?!0:!1}var g=this,b={goods_description:null};u(),g.reset=u,g.modelManager=t,g.tableCaption="Select form M for bid request",g.formMs=[],g.submitBid=m,g.mfGetterSetter=function(e){return e?void(g.bid.mf=e):o.isEmpty(g.bid.mf)?"":g.bid.mf.number+": "+g.bid.mf.applicant_data.name},g.amountGetterSetter=function(e){return e?void(g.bid.amount=Number(String(e).replace(",",""))):g.bid.amount?r("number")(g.bid.amount,2):""},g.dateReceivedGetterSetter=function(e){return e?void(g.bid.mf.date_received=new Date(e)):g.bid.mf?r("date")(g.bid.mf.date_received,"dd-MMM-yyyy"):""},g.onSelectFormM=f,g.getFormM=function(){e.searchWithModal().then(function(e){var t=e.results;t.length&&(1===t.length?g.onSelectFormM(t[0]):(g.formMs=t,g.paginationHooks={next:e.next,previous:e.previous,count:e.count}))})},g.toggleShowFormMDetail=function(){g.formMDetailShown=!g.formMDetailShown},g.toggleEditGoods=p}var n=o(2),a=angular.module("add-bid",["rootApp","ui.router","model-table","form-m-service","form-m-search-service","kanmii-underscore","lc-bid-request","edit-bid"]);a.config(n.interpolateProviderConfig),a.config(r),r.$inject=["$stateProvider"],a.controller("MakeBidRequestController",i),i.$inject=["SearchFormMService","formMModelManager","kanmiiUnderscore","$filter","LcBidRequest","FormM","xhrErrorDisplay","EditBid","$state","formMAttributesVerboseNames","bidAttributesVerboseNames"]},function(e,t){"use strict";function o(e,t){return staticPrefix+e+"/js/"+t}function r(e){e.run(["$rootScope",function(e){e.staticPrefix=staticPrefix,e.addIconSrc=staticPrefix+"core_recons/css/images/icon_addposting.gif"}])}var i=["$interpolateProvider",function(e){e.startSymbol("{$"),e.endSymbol("$}")}];e.exports={interpolateProviderConfig:i,buildUrl:o,rootAppName:"core_recons",setStaticPrefix:r}},function(e,t){e.exports='<div class="make-bid-request-root-container"><div class="state-navigate-back"><a ui-sref="bid"><span class="glyphicon glyphicon-circle-arrow-left"></span> Pending Bids</a></div><div class="row" style="margin-bottom: 45px;"><div class="bid-request-form col-sm-5 well"><form novalidate="" ng-submit="makeBidRequest.submitBid(makeBidRequest.bid)" role="form" name="makeBidRequestForm"><div class="form-group form-m-group"><label for="form-m">Form M</label><div class="input-group"><span class="input-group-addon" data-toggle="tooltip" title="Search for Form M" ng-dblclick="makeBidRequest.getFormM()" style="cursor: pointer;"><i class="glyphicon glyphicon-search"></i></span> <input type="text" class="form-control" min="4" id="form-m" readonly="" required="" name="mf" placeholder="Double click to search" ng-model="makeBidRequest.mfGetterSetter" ng-dblclick="makeBidRequest.getFormM()" ng-pattern="/^MF\\d{11}\\: .+/" ng-model-options="{getterSetter: true}"> <span class="input-group-addon" data-toggle="tooltip" ng-show="makeBidRequest.bid.mf.number" ng-click="makeBidRequest.toggleShowFormMDetail()" title="View Form M" style="cursor:pointer;"><i class="glyphicon glyphicon-eye-open"></i></span></div></div><div class="form-group amount-group"><label for="amount">Bid Amount</label><div class="input-group"><span class="input-group-addon">{$makeBidRequest.bid.mf.currency_data.code || \'@\'$}</span> <input type="text" class="form-control" id="amount" required="" ng-model="makeBidRequest.amountGetterSetter" ng-model-options="{getterSetter: true, updateOn: \'blur\'}"></div></div><div class="form-group goods-description-group"><label for="goods-description">Goods description</label><div class="input-group"><input type="text" class="form-control" id="goods-description" required="" ng-minlength="5" to-upper="" name="goods-description" ng-model="makeBidRequest.bid.mf.goods_description" ng-readonly="!makeBidRequest.goodsInputIsEditable"> <span class="input-group-addon" style="cursor:pointer;" ng-click="makeBidRequest.toggleEditGoods()"><span class="glyphicon glyphicon-pencil"></span></span></div></div><div class="form-group add-bid-form-control"><button type="submit" class="btn btn-info" ng-disabled="makeBidRequestForm.$invalid" name="add-bid-form-control-submit" style="margin-right: 5%;">Make Request</button> <button type="button" class="btn btn-default" ng-click="makeBidRequest.reset(makeBidRequestForm)">Reset</button></div></form></div><div class="form-m-detail-container col-sm-offset-2 col-sm-4" ng-show="makeBidRequest.formMDetailShown"><span class="form-m-detail-container-dismiss" ng-click="makeBidRequest.toggleShowFormMDetail()">&times;</span><div class="form-group form-m-number-group"><label class="control-label" for="form-m-detail-number">Form M Number</label> <input class="form-control" ng-model="makeBidRequest.bid.mf.number" id="form-m-detail-number" disabled=""></div><div class="form-group applicant-group"><label class="control-label" for="form-m-detail-applicant">Applicant</label> <input class="form-control" type="text" id="form-m-detail-applicant" ng-model="makeBidRequest.bid.mf.applicant_data.name" disabled=""></div><div class="form-group amount-group"><label class="control-label" for="form-m-detail-amount">Form M Amount</label><div class="input-group"><span class="input-group-addon">{$makeBidRequest.bid.mf.currency_data.code$}</span> <input class="form-control" id="form-m-detail-amount" required="" ng-model="makeBidRequest.amountGetterSetter" disabled="" ng-model-options="{getterSetter: true}"></div></div><div class="form-group goods-description-group"><label class="control-label" for="form-m-detail-goods-description">Goods Description</label> <input class="form-control" type="text" id="form-m-detail-goods-description" ng-model="makeBidRequest.bid.mf.goods_description" disabled=""></div><div class="form-group received-date-group"><label class="control-label" for="form-m-detail-date-received">Date Received</label> <input class="form-control" id="form-m-detail-date-received" disabled="" ng-model="makeBidRequest.dateReceivedGetterSetter" ng-model-options="{getterSetter: true}"></div></div></div><model-table model-collection="makeBidRequest.formMs" table-model-manager="::makeBidRequest.modelManager" table-caption="::makeBidRequest.tableCaption" pagination-size="20" update-collection="makeBidRequest.getBidsOnNavigation(linkUrl)" pager-object="makeBidRequest.paginationHooks" on-row-dbl-click-callback="makeBidRequest.onSelectFormM(rowModel)"></model-table></div>'},function(e,t,o){"use strict";function r(){return{restrict:"EA",templateUrl:n.buildUrl("bid-request/display-pending-bid/display-pending-bid.html"),scope:{},bindToController:{bids:"=pendingBids",updateCollection:"&",onSelectedBidsChanged:"&",pager:"=pagerObject",onDblClick:"&onRowDblClickCallback",paginationSize:"=",selectedBids:"="},controller:"displayPendingBidDirectiveCtrl as bidTable"}}function i(e,t,o){function r(t,o,r){var i=Math.ceil(r/s.paginationSize),n=e(t,o,i);s.nextPageLink=t,s.prevPageLink=o,s.linkUrls=n.linkUrls,s.currentLink=n.currentLink,s.rowIndexOffset=(s.currentLink-1)*s.paginationSize}function i(e){s.updateCollection({linkUrl:e})}function n(){s.bids.forEach(function(e){e.highlighted=!1})}function a(e){e.downloaded||(n(),e.highlighted=!o.any(s.bids,function(e){return e.checked}))}var s=this;s.selectedBids={},s.onUpdateCollection=i,t.$watch(function(){return s.pager},function(e){e&&!o.isEmpty(e)&&r(e.next,e.previous,e.count)}),s.modelRowClicked=a,t.$watch(function(){return s.selectedBids},function(e){s.onSelectedBidsChanged({newSelections:e}),e&&!o.isEmpty(e)&&(o.each(e,function(e,t){for(var o=0;o<s.bids.length;o++){var r=s.bids[o];r.id===+t&&(r.checked=e)}}),s.toggleAll=o.all(s.bids,function(e){return e.checked===!0}))},!0),s.toggleAll=!1,s.toggleAllClicked=function(){s.bids.forEach(function(e){s.selectedBids[e.id]=s.toggleAll})}}var n=o(5),a=angular.module("display-pending-bid",["kanmii-underscore"]);a.directive("displayPendingBid",r),a.controller("displayPendingBidDirectiveCtrl",i),i.$inject=["pagerNavSetUpLinks","$scope","kanmiiUnderscore"]},function(e,t,o){"use strict";function r(e){return i.buildUrl("app")+"/"+e}var i=o(6);e.exports={buildUrl:r}},function(e,t,o){"use strict";function r(e){return i.buildUrl(n,e)}var i=o(2),n="letter_of_credit";e.exports={buildUrl:r,appName:n}},function(e,t,o){"use strict";function r(e){function t(t,r,i,n){r.css({cursor:"pointer"}).bind("click",function(){e.showModal({templateUrl:o(5).buildUrl("bid-request/add-bid/add-bid.html"),controller:"AddBidModalCtrl as addBidModal"}).then(function(e){e.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,maxHeight:450,title:"Make Bid Request"}),e.close.then(function(e){e&&n.saveBid(e)})})})}return{restrict:"A",link:t,controller:"AddBidDirectiveCtrl as addBid",scope:{},bindToController:{onNewBid:"&"}}}function i(e,t){function o(o){function i(e){r.onNewBid({newBid:e})}function n(t){e(t,{mf:"form m",amount:"amount"})}var a={amount:o.amount,mf:o.mf.url};new t(a).$save(i,n)}var r=this;r.saveBid=o}function n(e,t,o,r,i,n){function a(){l.bid={mf:{}}}function s(e){o(e)}var l=this;a(),l.mfGetterSetter=function(e){return angular.isDefined(e)?void(l.bid.mf=e):i.isEmpty(l.bid.mf)?"":l.bid.mf.number+": "+l.bid.mf.applicant_data.name},l.close=o,l.reset=function(o){e(o,t,".form-control",a)},l.submitBid=s,l.getFormM=function(){function e(){t.find(".form-control").each(function(){var e=$(this);e.prop("disabled",!e.prop("disabled"))})}r.searchWithModal({parent:t,dim:!0,dimCb:e,unDimCb:e}).then(function(e){var t=e.results;t.length&&(1===t.length?l.mfGetterSetter(t[0]):(o(),n.go("addBid",{formMsFromSearch:e})))})}}var a=angular.module("add-bid-service",["rootApp","kanmii-underscore","form-m-search-service"]);a.directive("addBid",r),r.$inject=["ModalService"],a.controller("AddBidDirectiveCtrl",i),i.$inject=["xhrErrorDisplay","LcBidRequest"],a.controller("AddBidModalCtrl",n),n.$inject=["resetForm","$element","close","SearchFormMService","kanmiiUnderscore","$state"]},function(e,t,o){"use strict";function r(e){e.state("bid",{url:"/bid",params:{newBid:null},kanmiiTitle:"Bid Requests",template:o(9),controller:"BidRequestController as bidHome"})}function i(e,t,o,r,i,n,a,s,l,c,d,u){function m(){M.newBid=null,M.searchedBidResult=null,M.selectedBids={},M.selectedDownloadedBids={},M.bidRequests=[],M.paginationHooks={},e.pending().$promise.then(function(e){b(e)})}function f(){o.searchWithModal().then(function(e){console.log(e)})}function p(e){e&&M.bidRequests.unshift(e)}function g(e){r.get(e).then(function(e){b(e.data)})}function b(e){var t=e.results;if(i.newBid){for(var o=0;o<t.length;o++)if(t[o].id===i.newBid.id){t.splice(o,1);break}i.newBid.highlighted=!0,t.unshift(i.newBid),i.newBid=null}M.bidRequests=t,M.paginationHooks={next:e.next,previous:e.previous,count:e.count}}function h(e){e&&!s.isEmpty(e)&&s.each(e,function(e,t){var o=v(t);o&&o.downloaded&&(M.selectedDownloadedBids[t]=e)})}function v(e){for(var t=0;t<M.bidRequests.length;t++){var o=M.bidRequests[t];if(o.id===+e)return o}return null}var M=this;m(),M.searchFormMs=f,M.receiveNewBid=p,M.tableCaption="Pending Bids",M.getBidsOnNavigation=g,t.$watch(function(){return M.searchedBidResult},function(e){e&&b(e)});var y=n(a.lcBidRequestDownloadUrl);M.downloadUrl=function(){if(!s.isEmpty(M.selectedBids)){var e=[];return s.each(M.selectedBids,function(t,o){t===!0&&e.push(o)}),y.search({bid_ids:e}).toString()}},M.downloadBtnDisabled=function(){return s.isEmpty(M.selectedBids)?!0:!s.any(M.selectedBids,function(e){return e===!0})},M.onSelectedBidsChanged=h,M.markRequestedBtnDisabled=function(){if(s.isEmpty(M.selectedDownloadedBids))return!0;var e=s.any(M.selectedBids,function(e,t){return!s.has(M.selectedDownloadedBids,t)&&e===!0});return e?!0:!s.any(M.selectedDownloadedBids,function(e){return e===!0})},M.markRequested=function(){var t=[];s.each(M.selectedDownloadedBids,function(o,r){if(o){var i=v(r);i&&(i.requested_at=l(new Date),t.push(e.put(i).$promise))}}),t.length&&u.all(t).then(function(){m()})},M.refreshPage=function(){d(function(){m()},3e3)}}var n=o(2),a=angular.module("form-m-bid",["ui.router","display-pending-bid","add-bid","form-m-search-service","lc-bid-request","rootApp","kanmii-URI","kanmii-underscore"]);a.config(n.interpolateProviderConfig),a.config(r),r.$inject=["$stateProvider"],a.controller("BidRequestController",i),i.$inject=["LcBidRequest","$scope","SearchFormMService","$http","$stateParams","kanmiiUri","urls","kanmiiUnderscore","formatDate","xhrErrorDisplay","$timeout","$q"]},function(e,t){e.exports='<div class="form-m-home-view"><div class="action-buttons" style="text-align: right;margin-bottom: 30px;"><button type="button" class="btn btn-info" ng-click="$state.go(\'addBid\')">Add bid request</button> <button class="btn btn-info" ng-click="bidHome.searchBids()">Search Bid Requests</button> <a class="btn btn-success" ng-href="{$bidHome.downloadUrl()$}" ng-disabled="bidHome.downloadBtnDisabled()" ng-click="bidHome.refreshPage()">Download</a> <button type="button" name="bid-home-mark-as-requested-btn" class="btn btn-success" ng-click="bidHome.markRequested()" ng-disabled="bidHome.markRequestedBtnDisabled()">Mark as requested</button></div><div display-pending-bid="" pending-bids="bidHome.bidRequests" pager-object="bidHome.paginationHooks" update-collection="bidHome.getBidsOnNavigation(linkUrl)" pagination-size="20" selected-bids="bidHome.selectedBids" on-selected-bids-changed="bidHome.onSelectedBidsChanged(newSelections)"></div></div>'},function(e,t,o){"use strict";function r(e){function t(){function t(t){t=t&&angular.isObject(t)?t:{};var r=t.bid;if(!r)throw new Error("You did not specify the bid to edit");var i=t.formM;e.showModal({controller:"EditBidModalCtrl as editBidModal",template:o(11),inputs:{bid:r,formM:i}}).then(function(e){e.element.dialog({minWidth:450,minHeight:400,modal:!0,title:t.title||"Edit Bid for "+r.form_m_number,close:function(){e.close.then(),t.closeCb?t.closeCb(r):angular.noop}}),e.close.then(function(e){e&&(console.log("bidForEdit = ",e),t.closeCb?t.closeCb():angular.noop)})})}var r=this;r.editWithModal=t}return new t}function i(e,t,o){function r(e){i.formIsEditable[e]=!i.formIsEditable[e],i.formIsEditable.controls=i.formIsEditable.amount||i.formIsEditable.goods}var i=this;i.resetForm=function(o){o&&(o.$setPristine(),o.$setUntouched()),i.formIsEditable={goods:!1,amount:!1,controls:!1},i.bid=angular.copy(e),i.formM=angular.copy(t)},i.resetForm(),i.bidAmountGetterSetter=function(e){return e?void(i.bid.amount=Number(e.replace(",",""))):i.bid.amount?o("number")(i.bid.amount,2):""},i.toggleEnableEditForm=r}var n=angular.module("edit-bid",["angularModalService"]);n.factory("EditBid",r),r.$inject=["ModalService"],n.controller("EditBidModalCtrl",i),i.$inject=["bid","formM","$filter"]},function(e,t){e.exports='<div class="bid-edit-modal"><form role="form" name="bidEditForm"><div class="form-group bid-edit-form-m-number"><label class="control-label" for="bid-edit-form-m-number">Form M Number</label> <input class="form-control" ng-model="editBidModal.bid.form_m_number" id="bid-edit-form-m-number" disabled=""></div><div class="form-group customer-name-group"><label class="control-label" for="bid-edit-customer-name">Customer Name</label> <input class="form-control" type="text" id="bid-edit-customer-name" ng-model="editBidModal.bid.applicant" disabled=""></div><div class="form-group amount-group"><label class="control-label" for="bid-edit-form-m-amount">Form M Amount</label><div class="input-group"><span class="input-group-addon">{$editBidModal.formM.currency_data.code$}</span> <input class="form-control" id="bid-edit-form-m-amount" ng-model="editBidModal.formM.amount" disabled="" number-format=""></div></div><div class="form-group goods-description-group"><label class="control-label" for="bid-edit-goods-description">Goods Description</label><div class="input-group"><input class="form-control" type="text" id="bid-edit-goods-description" ng-disabled="!editBidModal.formIsEditable.goods" ng-model="editBidModal.bid.goods_description"> <span class="input-group-addon" style="cursor:pointer;" ng-click="editBidModal.toggleEnableEditForm(\'goods\')"><span class="glyphicon glyphicon-pencil"></span></span></div></div><div class="form-group bid-amount-group"><label class="control-label" for="bid-edit-bid-amount">Bid Amount</label><div class="input-group"><span class="input-group-addon">{$editBidModal.formM.currency_data.code$}</span> <input type="text" class="form-control" id="bid-edit-bid-amount" required="" ng-disabled="!editBidModal.formIsEditable.amount" ng-model="editBidModal.bidAmountGetterSetter" ng-model-options="{getterSetter: true, updateOn: \'blur\'}"> <span class="input-group-addon" style="cursor:pointer;" ng-click="editBidModal.toggleEnableEditForm(\'amount\')"><span class="glyphicon glyphicon-pencil"></span></span></div></div><div class="edit-bid-form-control" ng-show="editBidModal.formIsEditable.controls"><button type="submit" class="btn btn-info" ng-disabled="bidEditForm.$invalid">Edit</button> <button type="button" class="btn btn-default" ng-click="editBidModal.resetForm(bidEditForm)">Reset</button></div></form></div>'},function(e,t,o){"use strict";function r(e){e.state("form_m.add",{kanmiiTitle:"Add form M",params:{detailedFormM:null},views:{addFormM:{templateUrl:o(5).buildUrl("form-m/add-form-m/add-form-m.html"),controller:"AddFormMStateController as addFormMState"}}})}function i(e,t,o,r,i,n,a,s,l,c,d,u,m){function f(e){w=[],$.detailedFormM?p():($.formM={date_received:new Date},$.fieldsEdit={number:!1,currency:!1,applicant:!1,date_received:!1,amount:!1},$.closedIssues=[],$.nonClosedIssues=[]),$.searchFormM={},h(),b(),g(),e&&(e.$setPristine(),e.$setUntouched())}function p(){w=$.detailedFormM.form_m_issues,$.closedIssues=[],$.nonClosedIssues=[],$.detailedFormM.form_m_issues.forEach(function(e){return e.closed_at?($.closedIssues.push(e),!1):($.nonClosedIssues.push(e),!0)}),$.formM={date_received:new Date($.detailedFormM.date_received),number:$.detailedFormM.number,applicant:$.detailedFormM.applicant_data,currency:$.detailedFormM.currency_data,amount:Number($.detailedFormM.amount)},$.fieldsEdit={number:!0,currency:!0,applicant:!0,date_received:!0,amount:!0}}function g(){$.savingFormMIndicator="Creating New Form M...........please wait",$.formMIsSaving=!1}function b(e){$.showLcIssueContainer=!1,$.addLcIssuesTitle="Add Letter Of Credit Issues",$.issues=[],k=[],$.issue=null,e&&(e.$setPristine(),e.$setUntouched())}function h(e){$.showBidContainer=!1,$.makeBidTitle="Make Bid Request",$.bidRequest={},e&&(e.$setPristine(),e.$setUntouched())}function v(e,t){if(e)return!0;if($.showBidContainer&&t)return!0;if($.showLcIssueContainer&&!$.issues.length)return!0;var o=C();return o?r.all(o)&&!$.issues.length&&r.isEmpty($.bidRequest):!1}function M(e){$.detailedFormM=null,f(),e&&(e.newFormMForm.applicant.$viewValue=null,e.newFormMForm.applicant.$commitViewValue(),e.$setPristine(),e.$setUntouched())}function y(){var e=d("number")($.formM.amount,2),t=$.formM.applicant.name+"/ "+$.formM.number+" /"+$.formM.currency.code+" "+e;return t+"\n\nForm M Number : "+$.formM.number+"\nValue         : "+$.formM.currency.code+" "+e+"\nApplicant     : "+$.formM.applicant.name}function F(){if(!$.nonClosedIssues.length)return"";var e="\n\n\nPlease note the following issues which must be \nregularized before the LC request can be treated:\n",t=1;return r.each($.nonClosedIssues,function(o){e+="("+t++ +") "+o.issue.text.replace(/:ISSUE$/i,"")+"\n"}),e}function C(){return $.detailedFormM?{number:$.formM.number&&angular.equals($.formM.number,$.detailedFormM.number),date_received:angular.equals($.formM.date_received,new Date($.detailedFormM.date_received)),amount:$.formM.amount&&angular.equals($.formM.amount,Number($.detailedFormM.amount)),currency:$.formM.currency&&angular.equals($.formM.currency.code,$.detailedFormM.currency_data.code),applicant:$.formM.applicant&&angular.equals($.formM.applicant.name,$.detailedFormM.applicant_data.name)}:!1}var $=this;$.detailedFormM=angular.copy(u.detailedFormM),u.detailedFormM=null;var w;f();var k;$.enableFieldEdit=function(e){$.fieldsEdit[e]=$.detailedFormM?!$.fieldsEdit[e]:!1},$.closeIssue=function(e,t){function o(){$.nonClosedIssues.splice(t,1),$.closedIssues.push(e)}function r(e){n(e)}m.put({id:e.id,mf:$.detailedFormM.url,issue:e.issue.url,closed_at:i(new Date)}).$promise.then(o,r)},$.toggleShowBidContainer=function(e){$.showBidContainer=!$.showBidContainer,$.makeBidTitle=$.showBidContainer?"Dismiss":"Make Bid Request",$.showBidContainer?$.bidRequest.amount=$.formM.amount:h(e)},$.toggleShowLcIssueContainer=function(){$.showLcIssueContainer=$.formM.number&&!$.showLcIssueContainer,$.showLcIssueContainer?$.addLcIssuesTitle="Dismiss":($.addLcIssuesTitle="Add Letter Of Credit Issues",b())},$.validators={applicant:{test:function(){return r.isObject($.formM.applicant)}},currency:{test:function(){return r.isObject($.formM.currency)}}},$.disableSubmitBtn=v,$.reset=M,$.getApplicant=e,$.getCurrency=t,$.datePickerFormat="dd-MMM-yyyy",$.datePickerIsOpen=!1,$.openDatePicker=function(){$.datePickerIsOpen=!0},$.getUploadedFormM=function(){$.detailedFormM=null,f(),o.searchWithModal().then(function(e){if(e.detailed)$.detailedFormM=e.detailed,p();else{var o=e.uploaded;$.searchFormM=o,$.formM.number=o.mf,t(o.ccy).then(function(e){$.formM.currency=e[0]})}})},$.submit=function(e,t,o){function l(e){$.detailedFormM=e,p(),$.savingFormMIndicator=y(),$.savingFormMIndicator+=F(),e.bid&&($.savingFormMIndicator+="\n\nBid Amount     : "+e.currency_data.code+" "+d("number")(e.bid.amount,2)),$.formMIsSaving=!0,h(),b(),c(function(){$.formMIsSaving=!1},12e4)}function u(e){g(),n(e,a)}var m=angular.copy(e);m.applicant=m.applicant.url,m.currency=m.currency.url,m.date_received=i(m.date_received);var f=angular.copy(t);f&&!r.isEmpty(f)&&(m.goods_description=f.goods_description,m.bid={amount:Number(f.amount)}),$.issues.length&&(m.issues=$.issues),$.detailedFormM?(m.id=$.detailedFormM.id,new s(m).$put(l,u)):new s(m).$save(l,u)},$.hideSavingIndicator=function(){$.formMIsSaving=!1},$.issueSelected=function(e,t){$.issues.push(t),k.push(t.id),$.issue=null},$.deleteIssue=function(e){$.issues.splice(e,1),k.splice(e,1)},$.getIssue=function(e){var t={text:e,exclude_issue_ids:k};return $.detailedFormM&&(t.exclude_form_m_issues=$.detailedFormM.number),l(t)},$.downloadIssues=function(){$.savingFormMIndicator=y(),$.savingFormMIndicator+=F(),$.formMIsSaving=!0}}var n=o(2),a=angular.module("add-form-m",["ui.router","rootApp","kanmii-underscore","customer","lc-issue-service","search-detailed-or-uploaded-form-m","form-m-service"]);a.config(n.interpolateProviderConfig),a.config(r),r.$inject=["$stateProvider"],a.controller("AddFormMStateController",i),i.$inject=["getTypeAheadCustomer","getTypeAheadCurrency","SearchDetailedOrUploadedFormMService","kanmiiUnderscore","formatDate","xhrErrorDisplay","formMAttributesVerboseNames","FormM","getTypeAheadLCIssue","$timeout","$filter","$stateParams","LCIssueConcrete"]},function(e,t,o){"use strict";function r(e,t,r,i,n,a){function s(o){function r(e){1===e.length&&s.resolve({uploaded:e[0]})}function i(e){t(e),s.reject(e)}var s=n.defer(),l=o.mf;return a.getPaginated({number:l}).$promise.then(function(t){1===t.count?s.resolve({detailed:t.results[0]}):e.query({mf:l}).$promise.then(r,i)},i),s.promise}function l(){function e(){var e=n.defer();return r.showModal({templateUrl:o(5).buildUrl("form-m/search-detailed-or-uploaded-form-m/search-detailed-or-uploaded-form-m-modal.html"),controller:"SearchDetailedOrUploadedFormMServiceModalCtrl as searchUploadedFormMModal"}).then(function(t){t.element.dialog({dialogClass:"no-close",modal:!0,minWidth:500,minHeight:200,title:"Search Form M",close:function(){t.close.then()}}),t.close.then(function(t){t&&angular.isObject(t)&&!i.isEmpty(t)&&e.resolve(s(t))})}),e.promise}var t=this;t.searchWithModal=e}return new l}function i(e,t,o){function r(){n.searchParams={}}function i(e){t(e,o,".form-control",r),e.$invalid=!1,e.$error={}}var n=this;r(),n.close=e,n.reset=i}var n=angular.module("search-detailed-or-uploaded-form-m",["kanmii-underscore","upload-form-m-service","toggle-dim-element","form-m-service"]);n.factory("SearchDetailedOrUploadedFormMService",r),r.$inject=["UploadFormM","xhrErrorDisplay","ModalService","kanmiiUnderscore","$q","FormM"],n.controller("SearchDetailedOrUploadedFormMServiceModalCtrl",i),i.$inject=["close","resetForm","$element"]},function(e,t,o){"use strict";function r(e,t,r,i,n,a){function s(o){function r(e){a.resolve(e)}function i(e){t(e),a.reject(e)}var a=n.defer(),s=angular.copy(o);return s.applicant&&(s.applicant=s.applicant.name),s.currency&&(s.currency=s.currency.code),e.getPaginated(s).$promise.then(r,i),a.promise}function l(){function e(e){var t=n.defer();return e=e||{},r.showModal({templateUrl:o(5).buildUrl("form-m/search-form-m-service/search-form-m-modal.html"),controller:"SearchFormMServiceModalCtrl as searchFormMModal",inputs:{uiOptions:e.uiOptions}}).then(function(o){o.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,title:"Search Form M",open:function(){e.dim&&a.dim(e.parent,e.dimCb)},close:function(){e.dim&&a.unDim(e.parent,e.unDimCb)}}),o.close.then(function(o){o&&angular.isObject(o)&&!i.isEmpty(o)&&t.resolve(s(o)),e.dim&&a.unDim(e.parent,e.unDimCb)})}),t.promise}var t=this;t.searchWithModal=e}return new l}function i(e,t,o,r,i,n){function a(){d.searchParams={},d.showLcIssueContainer=!1,d.searchLcIssuesTitle="Search By Letter Of Credit Issues",d.selectedLcIssues={}}function s(){d.showLcIssueContainer=!d.showLcIssueContainer,d.searchLcIssuesTitle=d.showLcIssueContainer?"Dismiss":"Search By Letter Of Credit Issues"}function l(e){o(e,r,".form-control",a),e.$invalid=!1,e.$error={}}function c(e){t(e)}var d=this;d.displayLcIssueUI=!1,e&&(d.displayLcIssueUI=e.displayLcIssueUI),a(),d.toggleShowLcIssueContainer=s,d.close=t,d.reset=l,d.submitSearchParams=c,d.getApplicant=i,d.getCurrency=n}var n=angular.module("form-m-search-service",["kanmii-underscore","toggle-dim-element"]);n.factory("SearchFormMService",r),r.$inject=["FormM","xhrErrorDisplay","ModalService","kanmiiUnderscore","$q","ToggleDimElement"],n.controller("SearchFormMServiceModalCtrl",i),i.$inject=["uiOptions","close","resetForm","$element","getTypeAheadCustomer","getTypeAheadCurrency"]},function(e,t,o){"use strict";function r(e,t){return{restrict:"A",link:function(r,i,n,a){i.css({cursor:"pointer"}).bind("click",function(){e.showModal({template:o(16),controller:"SearchFormMModalCtrl as searchFormMModal"}).then(function(e){e.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,title:"Search Form M"}),e.close.then(function(e){e&&angular.isObject(e)&&!t.isEmpty(e)&&a.searchFormM(e)})})})},controller:"SearchFormMDirectiveCtrl as searchFormM",scope:{},bindToController:{searchFormMResult:"="}}}function i(e,t){function o(o){function i(e){r.searchFormMResult=e}function n(e){t(e)}var a=angular.copy(o);a.applicant&&(a.applicant=a.applicant.name),a.currency&&(a.currency=a.currency.code),e.getPaginated(a).$promise.then(i,n)}var r=this;r.searchFormM=o}function n(e,t,o,r,i){function n(){c.searchParams={},c.showLcIssueContainer=!1,c.searchLcIssuesTitle="Search By Letter Of Credit Issues",c.selectedLcIssues={}}function a(){c.showLcIssueContainer=!c.showLcIssueContainer,c.searchLcIssuesTitle=c.showLcIssueContainer?"Dismiss":"Search By Letter Of Credit Issues"}function s(e){t(e,o,".form-control",n),e.$invalid=!1,e.$error={}}function l(t){e(t)}var c=this;n(),c.toggleShowLcIssueContainer=a,c.close=e,c.reset=s,c.submitSearchParams=l,c.getApplicant=r,c.getCurrency=i}var a=angular.module("form-m-search",["kanmii-underscore"]);a.directive("searchFormM",r),r.$inject=["ModalService","kanmiiUnderscore"],a.controller("SearchFormMDirectiveCtrl",i),i.$inject=["FormM","xhrErrorDisplay"],a.controller("SearchFormMModalCtrl",n),n.$inject=["close","resetForm","$element","getTypeAheadCustomer","getTypeAheadCurrency"]},function(e,t){e.exports='<div id="search-form-m-root-container" class="search-form-m-root-container"><form novalidate="" class="form-horizontal" ng-submit="searchFormMModal.submitSearchParams(searchFormMModal.searchParams)" name="searchFormMModalForm"><fieldset class="search-form-m-container" style="position: relative; padding: 7px;"><div class="form-group form-m-number-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m-number">Form M Number</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" maxlength="13" id="form-m-number" min="0" ng-pattern="/(?:mf)?\\d{4,11}/i" ng-model="searchFormMModal.searchParams.number"></div></div><div class="form-group applicant-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="applicant">Applicant</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" type="text" min="3" id="applicant" ng-model="searchFormMModal.searchParams.applicant" typeahead-min-length="3" uib-typeahead="applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)"></div></div><div class="form-group currency-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="currency">Currency</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="currency" maxlength="3" ng-model="searchFormMModal.searchParams.currency" uib-typeahead="currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)" typeahead-min-length="2"></div></div><div class="form-group amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="amount" min="0" ng-model="searchFormMModal.searchParams.amount" number-format="" ng-pattern="/^\\d[\\d,]*(?:\\.\\d*)?$/"></div></div></fieldset><div class="form-m-lc-issue-container"><span ng-click="searchFormMModal.toggleShowLcIssueContainer()" class="form-m-lc-issue-toggle-show"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !searchFormMModal.showLcIssueContainer, \'glyphicon-chevron-up\': searchFormMModal.showLcIssueContainer}]"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class="form-m-search-lc-issue" ng-show="searchFormMModal.showLcIssueContainer"><lc-issue lc-issue-show="searchFormMModal.showLcIssueContainer" lc-issues-selected="searchFormMModal.selectedLcIssues"></lc-issue></div></div><div class="row search-form-m-form-control"><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left"><span class="btn btn-default" ng-click="searchFormMModal.reset(searchFormMModalForm)">Reset</span></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center"><button type="submit" class="btn btn-info" ng-disabled="searchFormMModalForm.$invalid">Search Form M</button></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right"><span class="btn btn-default" ng-click="searchFormMModal.close()">Close</span></div></div></form></div>';
},function(e,t,o){"use strict";function r(e,t,r,i,n){function a(o){function r(e){a.resolve(e)}function i(e){t(e),a.reject(e)}var a=n.defer(),s=angular.copy(o);return s.applicant&&(s.applicant=s.applicant.name),s.currency&&(s.currency=s.currency.code),e.query(s).$promise.then(r,i),a.promise}function s(){function e(){var e=n.defer();return r.showModal({templateUrl:o(5).buildUrl("form-m/upload-form-m/search-uploaded-form-m/search-uploaded-form-m-modal.html"),controller:"SearchUploadedFormMServiceModalCtrl as searchUploadedFormMModal"}).then(function(t){t.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:250,title:"Search Uploaded Form M",close:function(){t.close.then()}}),t.close.then(function(t){t&&angular.isObject(t)&&!i.isEmpty(t)&&e.resolve(a(t))})}),e.promise}var t=this;t.searchWithModal=e}return new s}function i(e,t,o){function r(){a.searchParams={}}function i(e){t(e,o,".form-control",r),e.$invalid=!1,e.$error={}}function n(t){e(t)}var a=this;r(),a.close=e,a.reset=i,a.submitSearchParams=n}var n=angular.module("search-uploaded-form-m",["kanmii-underscore","upload-form-m-service","toggle-dim-element"]);n.factory("SearchUploadedFormMService",r),r.$inject=["UploadFormM","xhrErrorDisplay","ModalService","kanmiiUnderscore","$q"],n.controller("SearchUploadedFormMServiceModalCtrl",i),i.$inject=["close","resetForm","$element"]},function(e,t,o){"use strict";function r(e){e.state("form_m.upload",{kanmiiTitle:"Form M Upload",views:{uploadFormM:{template:o(19),controller:"UploadFormMController as uploadFormM"}}})}function i(e,t){function o(){r.formMIsUploading=!1,r.uploadIndicationText="Uploading Form Ms.........please wait",r.uploadFormMText=""}var r=this;o(),r.uploadFormM=function(i){function n(e){return"20"+e.slice(6)+"-"+e.slice(3,5)+"-"+e.slice(0,2)}function a(e){var i=e.created_data,n=i.length,a=c.length-n;r.uploadIndicationText="Done Upload form Ms\n=========================\nTotal new form Ms created: "+n+"\n",a&&(r.uploadIndicationText+="Total not created (because uploaded previously): "+a),t(function(){o()},4500)}function s(e){console.log(e)}r.formMIsUploading=!0;var l,c=[];Papa.parse(i,{delimiter:"	",header:!1,step:function(e){l=e.data[0],c.push({ba:l[0],mf:l[1],ccy:l[2],applicant:l[3],fob:l[5].replace(/,/g,""),submitted_at:n(l[6]),validated_at:n(l[7])})}}),e.save({uploaded:c,likely_duplicates:!0}).$promise.then(a,s)}}var n=o(2),a=angular.module("upload-form-m",["rootApp","ui.router","upload-form-m-service"]);a.config(n.interpolateProviderConfig),a.config(r),r.$inject=["$stateProvider"],a.controller("UploadFormMController",i),i.$inject=["UploadFormM","$timeout"]},function(e,t){e.exports='<div class="upload-form-m-tab-content"><form class="upload-form-m-form" role="form" name="uploadFormMForm" ng-submit="uploadFormM.uploadFormM(uploadFormM.uploadFormMText)"><div class="form-group upload-form-m-text-group"><pre class="upload-form-m-indicator" ng-show="uploadFormM.formMIsUploading">\n        {$uploadFormM.uploadIndicationText$}\n      </pre><label for="upload-form-m" class="control-label sr-only">Copy and paste form M</label> <textarea name="upload-form-m" id="upload-form-m" required="" ng-model="uploadFormM.uploadFormMText" ng-class="[\'form-control\', \'upload-form-m\', {\'form-m-is-uploading\':uploadFormM.formMIsUploading}]" ng-readonly="uploadFormM.formMIsUploading"></textarea></div><div class="upload-form-m-submit" style="text-align: center"><button type="submit" class="btn btn-success" ng-disabled="uploadFormMForm.$invalid || uploadFormM.formMIsUploading">Upload</button></div></form></div>'},function(e,t,o){"use strict";function r(e){e.state("form_m.list",{kanmiiTitle:"Form M List",views:{listFormM:{template:o(21),controller:"FormMListController as formMList"}}})}function i(e,t,o,r,i){function n(e){s.formMs=e.results,s.paginationHooks={next:e.next,previous:e.previous,count:e.count}}function a(e){r.get(e).then(function(e){n(e.data)})}var s=this;s.modelManager=o,s.modelRowDblClick=function(e){i.go("form_m.add",{detailedFormM:e}),t.tabs.addFormM.active=!0},s.paginationHooks=[],s.formMs=[],e.getNoLcAttached().$promise.then(function(e){n(e)}),s.tableCaption="Form M (LC Not Established)",s.getFormMCollectionOnNavigation=a,s.searchedFormMResult=null,t.$watch(function(){return s.searchedFormMResult},function(e){e&&n(e)})}var n=o(2),a=angular.module("list-form-m",["rootApp","ui.router","form-m-service","form-m-search","form-m-lc-issue","model-table","customer","add-form-m"]);a.config(n.interpolateProviderConfig),a.config(r),r.$inject=["$stateProvider"],a.controller("FormMListController",i),i.$inject=["FormM","$scope","formMModelManager","$http","$state"]},function(e,t){e.exports='<div class="manage-form-m-tab-content"><div class="action-buttons pull-right"><button class="btn btn-info" search-form-m="" search-form-m-result="formMList.searchedFormMResult">Search Form M</button></div><div model-table="" model-collection="formMList.formMs" table-model-manager="::formMList.modelManager" table-caption="::formMList.tableCaption" pagination-size="20" update-collection="formMList.getFormMCollectionOnNavigation(linkUrl)" pager-object="formMList.paginationHooks" on-row-dbl-click-callback="formMList.modelRowDblClick(rowModel)"></div></div>'},function(e,t,o){"use strict";function r(e){return{restrict:"E",templateUrl:o(5).buildUrl("form-m/lc-issue/lc-issue.html"),link:function(t,o,r,i){t.$watch(function(){return i.show},function(t){i.show=t,t&&!i.lcIssues.length?i.lcIssues=e.query():(o.find(".lc-issue-item-checkbox").each(function(){$(this).prop("checked",!1).closest(".lc-issue-item").removeClass("selected")}),i.selectedIssues={})}),o.on({change:function(){var e=$(this);e.closest(".lc-issue-item").toggleClass("selected",e.prop("checked"))}},".lc-issue-item-checkbox")},scope:{},bindToController:{show:"=lcIssueShow",onSelect:"&onLcIssueSelected"},controller:"LcIssueDirectiveCtrl as lcIssue"}}function i(e){var t=this;t.lcIssues=[],t.selectedIssues={},e.$watch(function(){return t.selectedIssues},function(e){t.onSelect({selectedIssues:e})},!0)}var n=angular.module("form-m-lc-issue",["lc-issue-service"]);n.directive("lcIssue",r),r.$inject=["LCIssue"],n.controller("LcIssueDirectiveCtrl",i),i.$inject=["$scope"]},function(e,t,o){"use strict";function r(e){e.state("form_m",{url:"/form-m",kanmiiTitle:"Form M",template:o(24),controller:"FormMController as formMHome"})}function i(e,t){var o=this,r={title:"Upload Form M",viewName:"uploadFormM",select:function(){e.go("form_m.upload")}},i={title:"List Form M",viewName:"listFormM",select:function(){e.go("form_m.list")}},n={title:"Add Form M",active:!0,viewName:"addFormM",select:function(){e.go("form_m.add")}};o.tabs=[r,i,n],t.tabs={uploadFormM:r,listFormM:i,addFormM:n}}var n=o(2),a=angular.module("form-m",["rootApp","ui.router","list-form-m","upload-form-m","add-form-m"]);a.config(n.interpolateProviderConfig),a.config(r),r.$inject=["$stateProvider"],a.controller("FormMController",i),i.$inject=["$state","$scope"]},function(e,t){e.exports='<div class="form-m-home-view"><div uib-tabset=""><div uib-tab="" ng-repeat="tab in formMHome.tabs" heading="{$tab.title$}" active="tab.active" select="tab.select()"><div class="" ui-view="{$tab.viewName$}"></div></div></div></div>'},function(e,t,o){"use strict";function r(e){e.state("lc",{url:"/lc",kanmiiTitle:"Letter of credit",templateUrl:o(5).buildUrl("lc/lc.html"),controller:"LetterOfCreditController as lcHome"})}function i(e,t){var o=this;o.searchLc=function(){e.searchWithModal().then(function(e){var o=e.results;if(o.length&&1===o.length){var r=o[0];t.go("lc_detail",{lc_number:r.lc_number,lc:r})}})}}var n=o(2),a=angular.module("lc",["ui.router","model-table","rootApp","search-lc","lc-detail"]);a.config(n.interpolateProviderConfig),a.config(r),r.$inject=["$stateProvider"],a.controller("LetterOfCreditController",i),i.$inject=["SearchLc","$state"]},function(e,t,o){"use strict";function r(e){e.state("lc_detail",{url:"/lc/:lc_number",params:{lc:null},kanmiiTitle:"Letter of credit",templateUrl:o(5).buildUrl("lc/lc-detail/lc-detail.html"),controller:"LetterOfCreditDetailController as lcDetail"})}function i(e,t,o,r,i,n,a,s,l,c,d,u){function m(){function r(e){return e?e.filter(function(e){return!e.closed_at}):[]}e.lc?(f.lc=e.lc,f.lcIssues=r(f.lc.issues)):t.getPaginated({lc_number:e.lc_number}).$promise.then(function(e){e.count?(f.lc=e.results[0],f.lcIssues=r(f.lc.issues)):o.go("lc")}),f.lcForm={},f.alertIsShown=!1,f.issue={}}var f=this;m(),f.issueDateGetterSetter=function(){return f.lc&&f.lc.estb_date?i("date")(f.lc.estb_date,"dd-MMM-yyyy"):void 0},f.expiryDateGetterSetter=function(){return f.lc&&f.lc.expiry_date?i("date")(f.lc.expiry_date,"dd-MMM-yyyy"):void 0},f.saveIssue=function(e,t){function o(e){f.lcIssues.unshift({issue_text:e.issue_text,issue:e.issue,id:e.id,mf:e.mf}),f.issue={},f.lc.applicant_data||(f.lc.applicant_data=n),t.$setPristine(),t.$setUntouched()}function r(e){var t=null;e.data.form_m_creation_errors&&(t=u,delete e.data.form_m_creation_errors),l(e,t)}if(e&&!s.isEmpty(e)){var i={issue:e.issue.url,mf:f.lc.mf,lc_number:f.lc.lc_number,get_or_create_form_m:!0},n=e.applicant;n&&!s.isEmpty(n)&&(i.form_m_data={applicant:n.url,currency:f.lc.ccy_data.url,amount:f.lc.lc_amt_org_ccy,lc:f.lc.url,number:f.lc.mf}),a.save(i).$promise.then(o,r)}},f.closeIssue=function(e){e.closed_at=c(new Date),a.put(e).$promise.then(function(){f.lcIssues=f.lcIssues.filter(function(t){return t.id!==e.id})},function(e){l(e)})},f.replaceLc=function(e){t.getPaginated({lc_number:e}).$promise.then(function(e){if(e.count){var t=e.results[0];o.go(".",{lc_number:t.lc_number,lc:t})}else f.alertIsShown=!0})},f.replaceLcFormInvalid=function(e,t){return e||-1!==f.lc.lc_number.toLowerCase().indexOf(t.toLowerCase())},f.customerAdded=function(e){f.issue.applicant=e},f.getApplicant=r,f.getIssue=function(e){return n({text:e,exclude_form_m_issues:f.lc.mf})},f.addCustomer=function(){d.save({name:f.lc.applicant}).$promise.then(function(e){f.issue.applicant=e,f.lc.applicant_data=e})},f.closeAlert=function(){f.alertIsShown=!1}}var n=o(2),a=angular.module("lc-detail",["ui.router","rootApp","lc-service","lc-issue-service","kanmii-underscore","customer"]);a.config(n.interpolateProviderConfig),a.config(r),r.$inject=["$stateProvider"],a.controller("LetterOfCreditDetailController",i),i.$inject=["$stateParams","LetterOfCredit","$state","getTypeAheadCustomer","$filter","getTypeAheadLCIssue","LCIssueConcrete","kanmiiUnderscore","xhrErrorDisplay","formatDate","Customer","formMAttributesVerboseNames"]},function(e,t,o){"use strict";function r(e,t,r,i,n,a){function s(t){function o(e){n.resolve(e)}function r(t){e(t),n.reject(t)}var n=i.defer(),s=angular.copy(t);return s.applicant&&(s.applicant=s.applicant.name),s.currency&&(s.currency=s.currency.code),a.getPaginated(s).$promise.then(o,r),n.promise}function l(){function e(e){var a=i.defer();return e=e||{},t.showModal({templateUrl:o(5).buildUrl("lc/search-lc/search-lc.html"),controller:"SearchLcModalCtrl as searchLcModal",inputs:{uiOptions:e.uiOptions}}).then(function(t){t.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,title:"Search Letter of credit",open:function(){e.dim&&n.dim(e.parent,e.dimCb)},close:function(){e.dim&&n.unDim(e.parent,e.unDimCb)}}),t.close.then(function(t){t&&angular.isObject(t)&&!r.isEmpty(t)&&a.resolve(s(t)),e.dim&&n.unDim(e.parent,e.unDimCb)})}),a.promise}var a=this;a.searchWithModal=e}return new l}function i(e,t,o,r,i){function n(){l.searchParams={}}function a(e){t(e,o,".form-control",n),e.$invalid=!1,e.$error={}}function s(t){e(t)}var l=this;n(),l.close=e,l.reset=a,l.submitSearchParams=s,l.getApplicant=r,l.getCurrency=i}var n=angular.module("search-lc",["kanmii-underscore","toggle-dim-element","form-m-service","lc-service"]);n.factory("SearchLc",r),r.$inject=["xhrErrorDisplay","ModalService","kanmiiUnderscore","$q","ToggleDimElement","LetterOfCredit"],n.controller("SearchLcModalCtrl",i),i.$inject=["close","resetForm","$element","getTypeAheadCustomer","getTypeAheadCurrency"]},function(e,t){e.exports='<div class="form-m-home-view"><div class="form-m-home-action-buttons btn-group-vertical" role="group"><a class="btn btn-info form-m-home-action-button" ui-sref="lc">Letter of credit</a> <a class="btn btn-info form-m-home-action-button" ui-sref="form_m">Form M</a> <a class="btn btn-info form-m-home-action-button" ui-sref="bid">Bid Request</a></div></div>'}]);
//# sourceMappingURL=app.min.js.map