!function(o){function e(t){if(r[t])return r[t].exports;var s=r[t]={exports:{},id:t,loaded:!1};return o[t].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=o,e.c=r,e.p="",e(0)}([function(o,e,r){"use strict";function t(o,e){e.otherwise("/"),o.state("home",{url:"/",template:r(13)})}r(1);var s=r(2),a=angular.module("form-m-root-app",["rootApp","ui.router","form-m"]);a.config(s.interpolateProviderConfig),a.run(["$rootScope","$state","$stateParams",function(o,e,r){o.$state=e,o.$stateParams=r}]),a.config(t),t.$inject=["$stateProvider","$urlRouterProvider"]},function(o,e,r){"use strict";function t(o,e){e.otherwise("/"),o.state("form-m",{url:"/form-m",template:r(10),controller:"FormMController as formMHome"})}function s(o,e){var r=this;r.formMs=o.getPaginated(),r.newFormM=null,r.searchedFormMResult=null,e.$watch(function(){return r.searchedFormMResult},function(o){o&&(r.formMs=o)})}var a=r(2);r(3),r(5),r(7);var l=angular.module("form-m",["rootApp","ui.router","form-m-display","form-m-search","form-m-lc-issue"]);l.config(a.interpolateProviderConfig),l.run(["$rootScope","$state","$stateParams",function(o,e,r){o.$state=e,o.$stateParams=r}]),l.config(t),t.$inject=["$stateProvider","$urlRouterProvider"],l.controller("FormMController",s),s.$inject=["FormM","$scope"],r(11)},function(o,e){"use strict";function r(o,e){return staticPrefix+o+"/js/"+e}function t(o){o.run(["$rootScope",function(o){o.staticPrefix=staticPrefix,o.addIconSrc=staticPrefix+"core_recons/css/images/icon_addposting.gif"}])}var s=["$interpolateProvider",function(o){o.startSymbol("{$"),o.endSymbol("$}")}];o.exports={interpolateProviderConfig:s,buildUrl:r,rootAppName:"core_recons",setStaticPrefix:t}},function(o,e,r){"use strict";function t(){function o(o){function e(o){o.stopPropagation();var e="form-m-display-table-selected",r=$(this);r=r.parents("tr"),r.hasClass(e)?r.removeClass(e):r.addClass(e).siblings().removeClass(e)}o.find("tbody").on({click:e},"td")}return{restrict:"EA",controller:"formMDisplayCtrl as formMTable",template:r(4),link:function(e,r,t,s){o(r),r.find(".form-m-display-root-container").on({click:function(o){o.preventDefault();var e=$(o.target);if(!e.is(".active")&&!e.closest("li").is(".disabled")){var r=e.attr("href")||e.parent().attr("href");s.getFormMCollectionOnNavigation(r)}}},".form-m-pager-nav-link")},scope:{},bindToController:{formMCollection:"=formMCollection",newFormM:"="}}}function s(o,e,r,t){function s(o,e,r){l.nextPageLink=o,l.prevPageLink=e;var s=Math.ceil(r/l.paginationSize);if(l.linkUrls=[],1!==s){var a,n,i,c;if(e)for(a=t(e),n=a.search(!0),n.page?l.currentLink=Number(n.page)+1:l.currentLink=2,i=a.search(""),c=1;s>=c;c++)n.page=c,l.linkUrls.push(i.clone().search(n).toString());else for(l.currentLink=1,a=t(o),n=a.search(!0),i=a.search(""),n.page=1,l.linkUrls=[i.clone().search(n).toString(),o],c=3;s>=c;c++)n.page=c,l.linkUrls.push(i.clone().search(n).toString())}}function a(o){r.get(o).then(function(o){l.formMCollection=o.data})}var l=this;l.paginationSize=20,l.orderProp="-date_received",l.setUpLinks=s,l.getFormMCollectionOnNavigation=a,o.$watch(function(){return l.newFormM},function(o){o&&(l.formMCollection.results.length===l.paginationSize&&l.formMCollection.results.pop(),l.formMCollection.results.unshift(o),l.orderProp="-id")}),o.$watch(function(){return l.formMCollection},function(o){o&&(o.$promise?o.$promise.then(function(o){s(o.next,o.previous,o.count)}):s(o.next,o.previous,o.count))})}var a=angular.module("form-m-display",["kanmii-URI"]);a.directive("displayFormM",t),a.controller("formMDisplayCtrl",s),s.$inject=["$scope","urls","$http","kanmiiUri"]},function(o,e){o.exports='<div class="form-m-display-root-container"><link rel="stylesheet" href="" property="stylesheet"><div class="form-m-table-display-element"><div class="form-m-display-controls"><div class="form-group row"><label class="control-label col-md-2 col-lg-1 col-sm-2" for="order">Sort By</label><div class="col-md-4 col-lg-4 col-sm-4"><select id="order" class="form-control" ng-model="formMTable.orderProp"><option value="-date_received">Latest Received</option><option value="date_received">Earliest Received</option><option value="currency_data.code">Currency</option><option value="amount">Amount</option><option value="applicant_data.name">Applicant</option></select></div></div></div><table class="table table-striped table-condensed table-bordered form-m-table-display" style="margin-bottom: 13px;"><caption>Form M</caption><thead><tr><th>S/N</th><th>Form M</th><th>Applicant</th><th>Currency</th><th>Amount</th><th>Date Received</th><th>Bid Date</th></tr></thead><tbody><tr ng-repeat="formM in formMTable.formMCollection.results|orderBy:formMTable.orderProp|filter:formMTable.query" class="form-m-display-table-row" style="cursor:pointer;"><td>{$$index + 1$}</td><td>{$formM.number$}</td><td>{$formM.applicant_data.name$}</td><td>{$formM.currency_data.code$}</td><td style="text-align: right">{$formM.amount|number:2$}</td><td style="text-align: right">{$formM.date_received|date:\'dd-MMM-yyyy\'$}</td><td></td></tr></tbody></table><nav id="form-m-pager-nav"><ul class="pagination" style="margin-top: 0;"><li ng-class="[\'previous\', {disabled: !formMTable.prevPageLink}]"><a ng-href="{$formMTable.prevPageLink$}" aria-label="Previous" class="form-m-pager-nav-link"><span aria-hidden="true">&laquo;</span></a></li><li ng-repeat="link in formMTable.linkUrls" ng-class="{active: (formMTable.currentLink == ($index + 1))}"><a ng-href="{$link$}" ng-class="[\'form-m-pager-nav-link\', {active: (formMTable.currentLink == ($index + 1))}]">{$($index + 1)$}</a></li><li ng-class="[\'previous\', {disabled: !formMTable.nextPageLink}]"><a ng-href="{$formMTable.nextPageLink$}" aria-label="Next" class="form-m-pager-nav-link"><span aria-hidden="true">&raquo;</span></a></li></ul></nav></div></div>'},function(o,e,r){"use strict";function t(o,e){return{restrict:"A",link:function(t,s,a,l){s.css({cursor:"pointer"}).bind("click",function(){o.showModal({template:r(6),controller:"SearchFormMModalCtrl as searchFormMModal"}).then(function(o){o.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,title:"Search Form M"}),o.close.then(function(o){o&&angular.isObject(o)&&!e.isEmpty(o)&&l.searchFormM(o)})})})},controller:"SearchFormMDirectiveCtrl as searchFormM",scope:{},bindToController:{searchFormMResult:"="}}}function s(o,e){function r(r){function s(o){t.searchFormMResult=o}function a(o){e(o)}var l=angular.copy(r);l.applicant&&(l.applicant=l.applicant.name),l.currency&&(l.currency=l.currency.code),o.getPaginated(l).$promise.then(s,a)}var t=this;t.searchFormM=r}function a(o,e,r,t,s){function a(){c.searchParams={},c.showLcIssueContainer=!1,c.searchLcIssuesTitle="Search By Letter Of Credit Issues",c.selectedLcIssues={}}function l(){c.showLcIssueContainer=!c.showLcIssueContainer,c.searchLcIssuesTitle=c.showLcIssueContainer?"Dismiss":"Search By Letter Of Credit Issues"}function n(o){e(o,r,".form-control",a),o.$invalid=!1,o.$error={}}function i(e){o(e)}var c=this;a(),c.toggleShowLcIssueContainer=l,c.close=o,c.reset=n,c.submitSearchParams=i,c.getApplicant=t,c.getCurrency=s}var l=angular.module("form-m-search",["kanmii-underscore"]);l.directive("searchFormM",t),t.$inject=["ModalService","kanmiiUnderscore"],l.controller("SearchFormMDirectiveCtrl",s),s.$inject=["FormM","xhrErrorDisplay"],l.controller("SearchFormMModalCtrl",a),a.$inject=["close","resetForm","$element","getTypeAheadCustomer","getTypeAheadCurrency"]},function(o,e){o.exports='<div id="search-form-m-root-container" class="search-form-m-root-container"><form novalidate="" class="form-horizontal" ng-submit="searchFormMModal.submitSearchParams(searchFormMModal.searchParams)" name="searchFormMModalForm"><fieldset class="search-form-m-container" style="position: relative; padding: 7px;"><div class="form-group form-m-number-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m-number">Form M Number</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" maxlength="13" id="form-m-number" min="0" ng-pattern="/(?:mf)?\\d{4,11}/i" ng-model="searchFormMModal.searchParams.number"></div></div><div class="form-group applicant-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="applicant">Applicant</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" type="text" min="3" id="applicant" ng-model="searchFormMModal.searchParams.applicant" typeahead-min-length="3" typeahead="applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)"></div></div><div class="form-group currency-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="currency">Currency</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="currency" maxlength="3" ng-model="searchFormMModal.searchParams.currency" typeahead="currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)" typeahead-min-length="2"></div></div><div class="form-group amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="amount" min="0" ng-model="searchFormMModal.searchParams.amount" number-format="" ng-pattern="/^\\d[\\d,]*(?:\\.\\d*)?$/"></div></div></fieldset><div class="form-m-lc-issue-container"><span ng-click="searchFormMModal.toggleShowLcIssueContainer()" class="form-m-lc-issue-toggle-show"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !searchFormMModal.showLcIssueContainer, \'glyphicon-chevron-up\': searchFormMModal.showLcIssueContainer}]"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class="form-m-search-lc-issue" ng-show="searchFormMModal.showLcIssueContainer"><lc-issue lc-issue-show="searchFormMModal.showLcIssueContainer" lc-issues-selected="searchFormMModal.selectedLcIssues"></lc-issue></div></div><div class="row search-form-m-form-control"><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left"><span class="btn btn-default" ng-click="searchFormMModal.reset(searchFormMModalForm)">Reset</span></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center"><button type="submit" class="btn btn-info" ng-disabled="searchFormMModalForm.$invalid">Search Form M</button></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right"><span class="btn btn-default" ng-click="searchFormMModal.close()">Close</span></div></div></form></div>'},function(o,e,r){"use strict";function t(o){return{restrict:"E",templateUrl:r(8).buildUrl("form-m/lc-issue/lc-issue.html"),link:function(e,r,t,s){e.$watch(function(){return s.show},function(e){s.show=e,e&&!s.lcIssues.length?s.lcIssues=o.query():(r.find(".lc-issue-item-checkbox").each(function(){$(this).prop("checked",!1).closest(".lc-issue-item").removeClass("selected")}),s.selectedIssues={})}),r.on({change:function(){var o=$(this);o.closest(".lc-issue-item").toggleClass("selected",o.prop("checked"))}},".lc-issue-item-checkbox")},scope:{},bindToController:{show:"=lcIssueShow",selectedIssues:"=lcIssuesSelected"},controller:"LcIssueDirectiveCtrl as lcIssue"}}function s(){var o=this;o.lcIssues=[],o.selectedIssues={}}var a=angular.module("form-m-lc-issue",[]);a.directive("lcIssue",t),t.$inject=["LCIssue"],a.controller("LcIssueDirectiveCtrl",s)},function(o,e,r){"use strict";function t(o){return s.buildUrl("form-m")+"/"+o}var s=r(9);o.exports={buildUrl:t}},function(o,e,r){"use strict";function t(o){return s.buildUrl(a,o)}var s=r(2),a="letter_of_credit";o.exports={buildUrl:t,appName:a}},function(o,e){o.exports='<div class="form-m-home-view"><div class="action-buttons" style="float: right;"><button class="btn btn-info" add-form-m="" new-form-m="formMHome.newFormM">Add Form M</button> <button class="btn btn-info" search-form-m="" search-form-m-result="formMHome.searchedFormMResult">Search Form M</button></div><div display-form-m="" form-m-collection="formMHome.formMs" new-form-m="formMHome.newFormM"></div></div>'},function(o,e,r){"use strict";function t(o){function e(e,t,s,a){t.css({cursor:"pointer"}).bind("click",function(){o.showModal({template:r(12),controller:"AddFormMModalCtrl as addFormMModal"}).then(function(o){o.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,maxHeight:600,title:"Add Form M"}),o.close.then(function(o){o&&o.submittedFormM&&a.saveFormM(o)})})})}return{restrict:"A",link:e,controller:"AddFormMDirectiveCtrl as addFormM",scope:{},bindToController:{newFormM:"="}}}function s(o,e,r,t,s,a){function l(s){function a(o){n(o.url),m.goods_description&&i(o.url,u),c.newFormM=o,console.log("vm.newFormM = ",c.newFormM)}function l(o){r(o,{date_received:"date received",number:"form m number"})}var d=s.submittedFormM,m=angular.copy(d);m.applicant=d.applicant.url,m.currency=d.currency.url,m.date_received=o(d.date_received);var u=s.submittedBidRequest;u&&!t.isEmpty(u)&&(m.goods_description=s.submittedBidRequest.goods_description);var p=new e(m);p.$save(a,l)}function n(o){t.each(c.selectedLcIssues,function(e,r){e&&new s({issue:r,mf:o}).$save(function(o){console.log(o)},function(o){console.log(o)})})}function i(o,e){e.mf=o;var t=new a(e);t.$save(function(o){console.log("bid saved successfully with data = ",o)},function(o){r(o)})}var c=this;c.saveFormM=l}function a(o,e,r,t,s){function a(){u.formM={date_received:new Date},u.showLcIssueContainer=!1,u.addLcIssuesTitle="Add Letter Of Credit Issues",u.selectedLcIssues={},u.showBidContainer=!1,u.makeBidTitle="Make Bid Request",u.bidRequest={amount:null}}function l(r){u.showBidContainer=!u.showBidContainer,u.makeBidTitle=u.showBidContainer?"Dismiss":"Make Bid Request",u.showBidContainer?u.bidRequest.amount=u.formM.amount:o(r,e,".bid-request-form-container .form-control")}function n(){u.showLcIssueContainer=!u.showLcIssueContainer,u.addLcIssuesTitle=u.showLcIssueContainer?"Dismiss":"Add Letter Of Credit Issues"}function i(o,e){return o?!0:u.showBidContainer&&e?!0:!1}function c(r){u.formM={},o(r,e,"form-control",a)}function d(o,e){r({submittedFormM:o,submittedBidRequest:e})}function m(){u.datePickerIsOpen=!0}var u=this;u.element=e,a(),u.toggleShowBidContainer=l,u.toggleShowLcIssueContainer=n,u.disableSubmitBtn=i,u.close=r,u.reset=c,u.submitFormM=d,u.getApplicant=t,u.getCurrency=s,u.datePickerFormat="dd-MMMM-yyyy",u.datePickerIsOpen=!1,u.openDatePicker=m}var l=angular.module("form-m");l.directive("addFormM",t),t.$inject=["ModalService"],l.controller("AddFormMDirectiveCtrl",s),s.$inject=["formatDate","FormM","xhrErrorDisplay","kanmiiUnderscore","LCIssueConcrete","LcBidRequest"],l.controller("AddFormMModalCtrl",a),a.$inject=["resetForm","$element","close","getTypeAheadCustomer","getTypeAheadCurrency"]},function(o,e){o.exports='<div id="add-form-m-root-container" class="add-form-m-root-container"><form novalidate="" class="form-horizontal" ng-submit="addFormMModal.submitFormM(addFormMModal.formM, addFormMModal.bidRequest)" name="addFormMModalForm"><fieldset class="add-new-form-m-container" ng-form="" name="newFormMModalForm" style="position: relative;padding: 7px;"><div class="form-group form-m-number-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m-number">Form M Number</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" maxlength="13" id="form-m-number" required="" to-upper="" ng-pattern="/mf\\d{11}/i" ng-model="addFormMModal.formM.number"></div></div><div class="form-group applicant-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="applicant">Applicant</label><div class="col-md-8 col-lg-8 col-sm-8"><div class="input-group"><input class="form-control" type="text" min="3" id="applicant" ng-model="addFormMModal.formM.applicant" ng-pattern="/.{4,}/" typeahead-min-length="3" typeahead="applicant as applicant.name for applicant in addFormMModal.getApplicant($viewValue)"> <span class="input-group-addon"><img ng-src="{$$root.addIconSrc$}" alt="" add-customer="" dim-parent="addFormMModal.element" added-new-customer="addFormMModal.formM.applicant"></span></div></div></div><div class="form-group currency-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="currency">Currency</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="currency" required="" maxlength="3" ng-model="addFormMModal.formM.currency" typeahead="currency as currency.code for currency in addFormMModal.getCurrency($viewValue)" typeahead-min-length="2"></div></div><div class="form-group amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="amount" required="" ng-model="addFormMModal.formM.amount" number-format=""></div></div><div class="form-group received-date-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="received-date">Date Received</label><div class="col-md-8 col-lg-8 col-sm-8"><div class="input-group"><input class="form-control" id="received-date" required="" ng-model="addFormMModal.formM.date_received" datepicker-popup="{$addFormMModal.datePickerFormat$}" is-open="addFormMModal.datePickerIsOpen"> <span class="input-group-addon" ng-click="addFormMModal.openDatePicker($event)"><i class="glyphicon glyphicon-calendar"></i></span></div></div></div></fieldset><div class="bid-request-form-container"><div ng-click="addFormMModal.toggleShowBidContainer(bidRequestForm)" class="form-m-bid-toggle-show clearfix"><span class="on-show-helper" ng-show="addFormMModal.showBidContainer">Make Bid Request</span><div class="show-icon"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !addFormMModal.showBidContainer, \'glyphicon-chevron-up\': addFormMModal.showBidContainer}]"></span> {$addFormMModal.makeBidTitle$}</div></div><fieldset ng-form="" name="bidRequestForm" ng-show="addFormMModal.showBidContainer"><div class="form-group bid-request-goods_description"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="goods-description">Goods Description</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="goods-description" required="" min="5" ng-model="addFormMModal.bidRequest.goods_description" to-upper=""></div></div><div class="form-group bid-request-amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="bid-amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="bid-amount" required="" ng-model="addFormMModal.bidRequest.amount" number-format=""></div></div></fieldset></div><div class="form-m-lc-issue-container"><div ng-click="addFormMModal.toggleShowLcIssueContainer()" class="form-m-lc-issue-toggle-show clearfix"><span class="on-show-helper" ng-show="addFormMModal.showLcIssueContainer">Specify LC Request Issues</span><div class="show-icon"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !addFormMModal.showLcIssueContainer, \'glyphicon-chevron-up\': addFormMModal.showLcIssueContainer}]"></span> {$addFormMModal.addLcIssuesTitle$}</div></div><div class="form-m-add-lc-issue" ng-show="addFormMModal.showLcIssueContainer"><lc-issue lc-issue-show="addFormMModal.showLcIssueContainer" lc-issues-selected="addFormMModal.selectedLcIssues"></lc-issue></div></div><div class="row add-form-m-form-control"><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left"><span class="btn btn-default" ng-click="addFormMModal.reset(addFormMModalForm)">Reset</span></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center"><button type="submit" class="btn btn-info" ng-disabled="addFormMModal.disableSubmitBtn(newFormMModalForm.$invalid, bidRequestForm.$invalid)">Add Form M</button></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right"><span class="btn btn-default" ng-click="addFormMModal.close()">Close</span></div></div></form></div>'},function(o,e){o.exports='<div class="form-m-home-view"><div class="action-buttons" style="float: right;"></div></div>'}]);
//# sourceMappingURL=form-m.app.min.js.map