!function(e){function o(l){if(r[l])return r[l].exports;var t=r[l]={exports:{},id:l,loaded:!1};return e[l].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}var r={};return o.m=e,o.c=r,o.p="",o(0)}([function(e,o,r){"use strict";function l(e,o){o.otherwise("/"),e.state("home",{url:"/",template:r(11),controller:"HomeController as formMHome"})}function t(e,o){var r=this;r.formMs=e.getPaginated(),r.newFormM=null,r.searchedFormMResult=null,o.$watch(function(){return r.searchedFormMResult},function(e){e&&(r.formMs=e)})}var a=r(1);r(2),r(6);var s=angular.module("form-m",["rootApp","ui.router","kanmii-underscore","form-m-display","form-m-search"]);s.config(a.interpolateProviderConfig),s.run(["$rootScope","$state","$stateParams",function(e,o,r){e.$state=o,e.$stateParams=r}]),s.config(l),l.$inject=["$stateProvider","$urlRouterProvider"],s.controller("HomeController",t),t.$inject=["FormM","$scope"],r(8),r(9)},function(e,o){"use strict";function r(e,o){return staticPrefix+e+"/js/"+o}function l(e){e.run(["$rootScope",function(e){e.staticPrefix=staticPrefix,e.addIconSrc=staticPrefix+"core_recons/css/images/icon_addposting.gif"}])}var t=["$interpolateProvider",function(e){e.startSymbol("{$"),e.endSymbol("$}")}];e.exports={interpolateProviderConfig:t,buildUrl:r,rootAppName:"core_recons",setStaticPrefix:l}},function(e,o,r){"use strict";function l(e){function o(e){function o(e){e.stopPropagation();var o="form-m-display-table-selected",r=$(this);r=r.parents("tr"),r.hasClass(o)?r.removeClass(o):r.addClass(o).siblings().removeClass(o)}e.find("tbody").on({click:o},"td")}return{restrict:"EA",controller:"formMDisplayCtrl as formMTable",template:r(5),link:function(e,r,l,t){o(r),r.find(".form-m-display-root-container").on({click:function(e){e.preventDefault();var o=$(e.target);if(!o.is(".active")&&!o.closest("li").is(".disabled")){var r=o.attr("href")||o.parent().attr("href");t.getFormMCollectionOnNavigation(r)}}},".form-m-pager-nav-link")},scope:{},bindToController:{formMCollection:"=formMCollection",newFormM:"="}}}function t(e,o,r){function l(e,o,r){a.nextPageLink=e,a.prevPageLink=o,a.numLinks=Math.ceil(r/a.paginationSize);var l=new RegExp("\\?page=(\\d+)");if(e)if(o){var t=l.exec(o);a.currentLink=t?Number(t[1])+1:2}else a.currentLink=1;else a.currentLink=a.numLinks;console.log(o,a.currentLink)}function t(e){r.get(e).then(function(e){var o=e.data;a.formMCollection=o,l(o.next,o.previous,o.count)})}var a=this;a.paginationSize=20,a.orderProp="-date_received",a.setUpLinks=l,a.formMLinkUrl=o.formMAPIUrl,a.formMCollection.$promise.then(function(e){l(e.next,e.previous,e.count)}),a.getFormMCollectionOnNavigation=t,e.$watch(function(){return a.newFormM},function(e){e&&(a.formMCollection.results.length===a.paginationSize&&a.formMCollection.results.pop(),a.formMCollection.results.unshift(e),a.orderProp="-id")}),e.$watch(function(){return a.formMCollection},function(e,o){!angular.equals(e,o)})}var a=(r(3),angular.module("form-m-display",[]));a.directive("displayFormM",l),l.$inject=["$http"],a.controller("formMDisplayCtrl",t),t.$inject=["$scope","urls","$http"]},function(e,o,r){"use strict";function l(e){return t.buildUrl("form-m")+"/"+e}var t=r(4);e.exports={buildUrl:l}},function(e,o,r){"use strict";function l(e){return t.buildUrl(a,e)}var t=r(1),a="letter_of_credit";e.exports={buildUrl:l,appName:a}},function(e,o){e.exports='<div class="form-m-display-root-container"><link rel="stylesheet" href="" property="stylesheet"><div class="form-m-table-display-element"><div class="form-m-display-controls"><div class="form-group row"><label class="control-label col-md-2 col-lg-1 col-sm-2" for="filter-query">Filter List</label><div class="col-md-4 col-lg-4 col-sm-4"><input id="filter-query" class="form-control" type="text" ng-model="formMTable.query"></div></div><div class="form-group row"><label class="control-label col-md-2 col-lg-1 col-sm-2" for="order">Sort By</label><div class="col-md-4 col-lg-4 col-sm-4"><select id="order" class="form-control" ng-model="formMTable.orderProp"><option value="-date_received">Latest Received</option><option value="date_received">Earliest Received</option><option value="currency_data.code">Currency</option><option value="amount">Amount</option><option value="applicant_data.name">Applicant</option></select></div></div></div><table class="table table-striped table-condensed table-bordered form-m-table-display" style="margin-bottom: 13px;"><caption>Form M</caption><thead><tr><th>S/N</th><th>Form M</th><th>Applicant</th><th>Currency</th><th>Amount</th><th>Date Received</th><th>Bid Date</th></tr></thead><tbody><tr ng-repeat="formM in formMTable.formMCollection.results|orderBy:formMTable.orderProp|filter:formMTable.query" class="form-m-display-table-row" style="cursor:pointer;"><td>{$$index + 1$}</td><td>{$formM.number$}</td><td>{$formM.applicant_data.name$}</td><td>{$formM.currency_data.code$}</td><td>{$formM.amount|number:2$}</td><td>{$formM.date_received|date:\'dd-MMM-yyyy\'$}</td><td></td></tr></tbody></table><nav id="form-m-pager-nav"><ul class="pagination" style="margin-top: 0;"><li ng-class="[\'previous\', {disabled: !formMTable.prevPageLink}]"><a ng-href="{$formMTable.prevPageLink$}" aria-label="Previous" class="form-m-pager-nav-link"><span aria-hidden="true">&laquo;</span></a></li><li ng-repeat="link in [].constructor(formMTable.numLinks) track by $index" ng-class="{active: (formMTable.currentLink == ($index + 1))}"><a ng-href="{$formMTable.formMLinkUrl + \'?page=\' + ($index + 1)$}" ng-class="[\'form-m-pager-nav-link\', {active: (formMTable.currentLink == ($index + 1))}]">{$($index + 1)$}</a></li><li ng-class="[\'previous\', {disabled: !formMTable.nextPageLink}]"><a ng-href="{$formMTable.nextPageLink$}" aria-label="Next" class="form-m-pager-nav-link"><span aria-hidden="true">&raquo;</span></a></li></ul></nav></div></div>'},function(e,o,r){"use strict";function l(e,o){return{restrict:"A",link:function(l,t,a,s){t.css({cursor:"pointer"}).bind("click",function(){e.showModal({template:r(7),controller:"SearchFormMModalCtrl as searchFormMModal"}).then(function(e){e.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,title:"Search Form M"}),e.close.then(function(e){e&&angular.isObject(e)&&!o.isEmpty(e)&&s.searchFormM(e)})})})},controller:"SearchFormMDirectiveCtrl as searchFormM",scope:{},bindToController:{searchFormMResult:"="}}}function t(e,o){function r(r){function t(e){l.searchFormMResult=e}function a(e){o(e)}var s=angular.copy(r);s.applicant&&(s.applicant=s.applicant.name),s.currency&&(s.currency=s.currency.code),e.getPaginated(s).$promise.then(t,a)}var l=this;l.searchFormM=r}function a(e,o,r,l,t){function a(){i.searchParams={},i.showLcIssueContainer=!1,i.searchLcIssuesTitle="Search By Letter Of Credit Issues",i.selectedLcIssues={}}function s(){i.showLcIssueContainer=!i.showLcIssueContainer,i.searchLcIssuesTitle=i.showLcIssueContainer?"Dismiss":"Search By Letter Of Credit Issues"}function n(e){o(e,r,"form-control",a)}function c(o){e(o)}var i=this;a(),i.toggleShowLcIssueContainer=s,i.close=e,i.reset=n,i.submitSearchParams=c,i.getApplicant=l,i.getCurrency=t}var s=angular.module("form-m-search",[]);s.directive("searchFormM",l),l.$inject=["ModalService","kanmiiUnderscore"],s.controller("SearchFormMDirectiveCtrl",t),t.$inject=["FormM","xhrErrorDisplay"],s.controller("SearchFormMModalCtrl",a),a.$inject=["close","resetForm","$element","getTypeAheadCustomer","getTypeAheadCurrency"]},function(e,o){e.exports='<div id="search-form-m-root-container" class="search-form-m-root-container"><form novalidate="" class="form-horizontal" ng-submit="searchFormMModal.submitSearchParams(searchFormMModal.searchParams)" name="searchFormMModalForm"><fieldset class="search-form-m-container" style="position: relative; padding: 7px;"><div class="form-group form-m-number-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m-number">Form M Number</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" maxlength="13" id="form-m-number" to-upper="" ng-pattern="/(?:mf)?\\d{4,11}/i" ng-model="searchFormMModal.searchParams.number"></div></div><div class="form-group applicant-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="applicant">Applicant</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" type="text" min="3" id="applicant" ng-model="searchFormMModal.searchParams.applicant" typeahead-min-length="3" typeahead="applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)"></div></div><div class="form-group currency-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="currency">Currency</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="currency" maxlength="3" ng-model="searchFormMModal.searchParams.currency" typeahead="currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)" typeahead-min-length="2"></div></div><div class="form-group amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="amount" ng-model="searchFormMModal.searchParams.amount" number-format=""></div></div></fieldset><div class="form-m-lc-issue-container"><span ng-click="searchFormMModal.toggleShowLcIssueContainer()" class="form-m-lc-issue-toggle-show"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !searchFormMModal.showLcIssueContainer, \'glyphicon-chevron-up\': searchFormMModal.showLcIssueContainer}]"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class="form-m-search-lc-issue" ng-show="searchFormMModal.showLcIssueContainer"><lc-issue lc-issue-show="searchFormMModal.showLcIssueContainer" lc-issues-selected="searchFormMModal.selectedLcIssues"></lc-issue></div></div><div class="row search-form-m-form-control"><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left"><span class="btn btn-default" ng-click="searchFormMModal.reset(searchFormMModalForm)">Reset</span></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center"><button type="submit" class="btn btn-info" ng-disabled="searchFormMModalForm.$invalid">Search Form M</button></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right"><span class="btn btn-default" ng-click="searchFormMModal.close()">Close</span></div></div></form></div>'},function(e,o,r){"use strict";function l(e){return{restrict:"E",templateUrl:a.buildUrl("lc-issue/lc-issue.html"),link:function(o,r,l,t){o.$watch(function(){return t.show},function(o){t.show=o,o&&!t.lcIssues.length?(t.lcIssues=e.query(),console.log(t.lcIssues)):(r.find(".lc-issue-item-checkbox").each(function(){$(this).prop("checked",!1).closest(".lc-issue-item").removeClass("selected")}),t.selectedIssues={})}),r.on({change:function(){var e=$(this);e.closest(".lc-issue-item").toggleClass("selected",e.prop("checked"))}},".lc-issue-item-checkbox")},scope:{},bindToController:{show:"=lcIssueShow",selectedIssues:"=lcIssuesSelected"},controller:"LcIssueDirectiveCtrl as lcIssue"}}function t(){var e=this;e.lcIssues=[],e.selectedIssues={}}var a=r(3),s=angular.module("form-m");s.directive("lcIssue",l),l.$inject=["LCIssue"],s.controller("LcIssueDirectiveCtrl",t)},function(e,o,r){"use strict";function l(e){return{restrict:"A",link:function(o,l,t,a){l.css({cursor:"pointer"}).bind("click",function(){e.showModal({template:r(10),controller:"AddFormMModalCtrl as addFormMModal"}).then(function(e){e.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,title:"Add Form M"}),e.close.then(function(e){e&&a.saveFormM(e)})})})},controller:"AddFormMDirectiveCtrl as addFormM",scope:{},bindToController:{newFormM:"="}}}function t(e,o,r,l,t){function a(l){function t(e){s(e.url),n.newFormM=e}function a(e){r(e,{date_received:"date received",number:"form m number"})}var c=angular.copy(l);c.applicant=l.applicant.url,c.currency=l.currency.url,c.date_received=e(l.date_received);var i=new o(c);i.$save(t,a)}function s(e){l.each(n.selectedLcIssues,function(o,r){o&&new t({issue:r,mf:e}).$save(function(e){console.log(e)},function(e){console.log(e)})})}var n=this;n.saveFormM=a}function a(e,o,r,l,t){function a(){d.formM={date_received:new Date},d.showLcIssueContainer=!1,d.addLcIssuesTitle="Add Letter Of Credit Issues",d.selectedLcIssues={}}function s(){d.showLcIssueContainer=!d.showLcIssueContainer,d.addLcIssuesTitle=d.showLcIssueContainer?"Dismiss":"Add Letter Of Credit Issues"}function n(r){d.formM={},e(r,o,"form-control",a)}function c(e){r(e)}function i(){d.datePickerIsOpen=!0}var d=this;d.element=o,a(),d.toggleShowLcIssueContainer=s,d.close=r,d.reset=n,d.submitFormM=c,d.getApplicant=l,d.getCurrency=t,d.datePickerFormat="dd-MMMM-yyyy",d.datePickerIsOpen=!1,d.openDatePicker=i}var s=angular.module("form-m");s.directive("addFormM",l),l.$inject=["ModalService"],s.controller("AddFormMDirectiveCtrl",t),t.$inject=["formatDate","FormM","xhrErrorDisplay","kanmiiUnderscore","LCIssueConcrete"],s.controller("AddFormMModalCtrl",a),a.$inject=["resetForm","$element","close","getTypeAheadCustomer","getTypeAheadCurrency"]},function(e,o){e.exports='<div id="add-form-m-root-container" class="add-form-m-root-container"><form novalidate="" class="form-horizontal" ng-submit="addFormMModal.submitFormM(addFormMModal.formM)" name="addFormMModalForm"><fieldset class="add-new-form-m-container" ng-form="" name="newFormMModalForm" style="position: relative;padding: 7px;"><div class="form-group form-m-number-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m-number">Form M Number</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" maxlength="13" id="form-m-number" required="" to-upper="" ng-pattern="/mf\\d{11}/i" ng-model="addFormMModal.formM.number"></div></div><div class="form-group applicant-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="applicant">Applicant</label><div class="col-md-8 col-lg-8 col-sm-8"><div class="input-group"><input class="form-control" type="text" min="3" id="applicant" ng-model="addFormMModal.formM.applicant" ng-pattern="/.{4,}/" typeahead-min-length="3" typeahead="applicant as applicant.name for applicant in addFormMModal.getApplicant($viewValue)"> <span class="input-group-addon"><img ng-src="{$$root.addIconSrc$}" alt="" add-customer="" dim-parent="addFormMModal.element" added-new-customer="addFormMModal.formM.applicant"></span></div></div></div><div class="form-group currency-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="currency">Currency</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="currency" required="" maxlength="3" ng-model="addFormMModal.formM.currency" typeahead="currency as currency.code for currency in addFormMModal.getCurrency($viewValue)" typeahead-min-length="2"></div></div><div class="form-group amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="amount" required="" ng-model="addFormMModal.formM.amount" number-format=""></div></div><div class="form-group received-date-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="received-date">Date Received</label><div class="col-md-8 col-lg-8 col-sm-8"><div class="input-group"><input class="form-control" id="received-date" required="" ng-model="addFormMModal.formM.date_received" datepicker-popup="{$addFormMModal.datePickerFormat$}" is-open="addFormMModal.datePickerIsOpen"> <span class="input-group-addon" ng-click="addFormMModal.openDatePicker($event)"><i class="glyphicon glyphicon-calendar"></i></span></div></div></div></fieldset><div class="bid-request-form-container" ng-form="" name="bidRequestForm" style="margin-left: 5%;display: none"><h4>Make Bid Request</h4><div class="form-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="goods-description">Goods Description</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="goods-description" ng-model="addFormMModal.bidRequest.goods_description" to-upper=""></div></div><div class="form-group bid-request-amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="amount" required="" ng-model="addFormMModal.bidRequest.amount" number-format=""></div></div></div><div class="form-m-lc-issue-container"><span ng-click="addFormMModal.toggleShowLcIssueContainer()" class="form-m-lc-issue-toggle-show"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !addFormMModal.showLcIssueContainer, \'glyphicon-chevron-up\': addFormMModal.showLcIssueContainer}]"></span> {$addFormMModal.addLcIssuesTitle$}</span><div class="form-m-add-lc-issue" ng-show="addFormMModal.showLcIssueContainer"><lc-issue lc-issue-show="addFormMModal.showLcIssueContainer" lc-issues-selected="addFormMModal.selectedLcIssues"></lc-issue></div></div><div class="row add-form-m-form-control"><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left"><span class="btn btn-default" ng-click="addFormMModal.reset(addFormMModalForm)">Reset</span></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center"><button type="submit" class="btn btn-info" ng-disabled="newFormMModalForm.$invalid">Add Form M</button></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right"><span class="btn btn-default" ng-click="addFormMModal.close()">Close</span></div></div></form></div>'},function(e,o){e.exports='<div class="form-m-home-view"><div class="action-buttons" style="float: right;"><button class="btn btn-info" add-form-m="" new-form-m="formMHome.newFormM">Add Form M</button> <button class="btn btn-info" search-form-m="" search-form-m-result="formMHome.searchedFormMResult">Search Form M</button></div><div display-form-m="" form-m-collection="formMHome.formMs" new-form-m="formMHome.newFormM"></div></div>'}]);
//# sourceMappingURL=form-m.app.min.js.map