!function(o){function e(t){if(r[t])return r[t].exports;var s=r[t]={exports:{},id:t,loaded:!1};return o[t].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=o,e.c=r,e.p="",e(0)}([function(o,e,r){"use strict";function t(o,e){e.otherwise("/"),o.state("home",{url:"/",template:r(16)})}r(1),r(13);var s=r(2),n=angular.module("form-m-root-app",["rootApp","ui.router","form-m","form-m-bid"]);n.config(s.interpolateProviderConfig),n.run(["$rootScope","$state","$stateParams",function(o,e,r){o.$state=e,o.$stateParams=r}]),n.config(t),t.$inject=["$stateProvider","$urlRouterProvider"]},function(o,e,r){"use strict";function t(o){o.state("form-m",{url:"/form-m",template:r(10),controller:"FormMController as formMHome"})}function s(o,e){var r=this;r.formMs=o.getPaginated(),r.newFormM=null,r.searchedFormMResult=null,e.$watch(function(){return r.searchedFormMResult},function(o){o&&(r.formMs=o)})}var n=r(2);r(3),r(5),r(7);var i=angular.module("form-m",["rootApp","ui.router","form-m-display","form-m-search","form-m-lc-issue"]);i.config(n.interpolateProviderConfig),i.config(t),t.$inject=["$stateProvider"],i.controller("FormMController",s),s.$inject=["FormM","$scope"],r(11)},function(o,e){"use strict";function r(o,e){return staticPrefix+o+"/js/"+e}function t(o){o.run(["$rootScope",function(o){o.staticPrefix=staticPrefix,o.addIconSrc=staticPrefix+"core_recons/css/images/icon_addposting.gif"}])}var s=["$interpolateProvider",function(o){o.startSymbol("{$"),o.endSymbol("$}")}];o.exports={interpolateProviderConfig:s,buildUrl:r,rootAppName:"core_recons",setStaticPrefix:t}},function(o,e,r){"use strict";function t(){function o(o){function e(o){o.stopPropagation();var e="form-m-display-table-selected",r=$(this);r=r.parents("tr"),r.hasClass(e)?r.removeClass(e):r.addClass(e).siblings().removeClass(e)}o.find("tbody").on({click:e},"td")}return{restrict:"EA",controller:"formMDisplayCtrl as formMTable",templateUrl:r(8).buildUrl("form-m/table/table.html"),link:function(e,r,t,s){o(r),r.find(".form-m-display-root-container").on({click:function(o){o.preventDefault();var e=$(o.target);if(!e.is(".active")&&!e.closest("li").is(".disabled")){var r=e.attr("href")||e.parent().attr("href");s.getFormMCollectionOnNavigation(r)}}},".form-m-pager-nav-link")},scope:{},bindToController:{formMCollection:"=formMCollection",newFormM:"="}}}function s(o,e,r){function t(o,e,t){n.nextPageLink=o,n.prevPageLink=e;var s=Math.ceil(t/n.paginationSize);if(n.linkUrls=[],1!==s){var i,l,c,a;if(e)for(i=r(e),l=i.search(!0),l.page?n.currentLink=Number(l.page)+1:n.currentLink=2,c=i.search(""),a=1;s>=a;a++)l.page=a,n.linkUrls.push(c.clone().search(l).toString());else for(n.currentLink=1,i=r(o),l=i.search(!0),c=i.search(""),l.page=1,n.linkUrls=[c.clone().search(l).toString(),o],a=3;s>=a;a++)l.page=a,n.linkUrls.push(c.clone().search(l).toString())}}function s(o){e.get(o).then(function(o){n.formMCollection=o.data})}var n=this;n.paginationSize=20,n.orderProp="-date_received",n.setUpLinks=t,n.getFormMCollectionOnNavigation=s,o.$watch(function(){return n.newFormM},function(o){o&&(n.formMCollection.results.length===n.paginationSize&&n.formMCollection.results.pop(),n.formMCollection.results.unshift(o),n.orderProp="-id")}),o.$watch(function(){return n.formMCollection},function(o){o&&(o.$promise?o.$promise.then(function(o){t(o.next,o.previous,o.count)}):t(o.next,o.previous,o.count))})}var n=angular.module("form-m-display",["kanmii-URI"]);n.directive("displayFormM",t),n.controller("formMDisplayCtrl",s),s.$inject=["$scope","$http","kanmiiUri"]},,function(o,e,r){"use strict";function t(o,e){return{restrict:"A",link:function(t,s,n,i){s.css({cursor:"pointer"}).bind("click",function(){o.showModal({template:r(6),controller:"SearchFormMModalCtrl as searchFormMModal"}).then(function(o){o.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,title:"Search Form M"}),o.close.then(function(o){o&&angular.isObject(o)&&!e.isEmpty(o)&&i.searchFormM(o)})})})},controller:"SearchFormMDirectiveCtrl as searchFormM",scope:{},bindToController:{searchFormMResult:"="}}}function s(o,e){function r(r){function s(o){t.searchFormMResult=o}function n(o){e(o)}var i=angular.copy(r);i.applicant&&(i.applicant=i.applicant.name),i.currency&&(i.currency=i.currency.code),o.getPaginated(i).$promise.then(s,n)}var t=this;t.searchFormM=r}function n(o,e,r,t,s){function n(){a.searchParams={},a.showLcIssueContainer=!1,a.searchLcIssuesTitle="Search By Letter Of Credit Issues",a.selectedLcIssues={}}function i(){a.showLcIssueContainer=!a.showLcIssueContainer,a.searchLcIssuesTitle=a.showLcIssueContainer?"Dismiss":"Search By Letter Of Credit Issues"}function l(o){e(o,r,".form-control",n),o.$invalid=!1,o.$error={}}function c(e){o(e)}var a=this;n(),a.toggleShowLcIssueContainer=i,a.close=o,a.reset=l,a.submitSearchParams=c,a.getApplicant=t,a.getCurrency=s}var i=angular.module("form-m-search",["kanmii-underscore"]);i.directive("searchFormM",t),t.$inject=["ModalService","kanmiiUnderscore"],i.controller("SearchFormMDirectiveCtrl",s),s.$inject=["FormM","xhrErrorDisplay"],i.controller("SearchFormMModalCtrl",n),n.$inject=["close","resetForm","$element","getTypeAheadCustomer","getTypeAheadCurrency"]},function(o,e){o.exports='<div id="search-form-m-root-container" class="search-form-m-root-container"><form novalidate="" class="form-horizontal" ng-submit="searchFormMModal.submitSearchParams(searchFormMModal.searchParams)" name="searchFormMModalForm"><fieldset class="search-form-m-container" style="position: relative; padding: 7px;"><div class="form-group form-m-number-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m-number">Form M Number</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" maxlength="13" id="form-m-number" min="0" ng-pattern="/(?:mf)?\\d{4,11}/i" ng-model="searchFormMModal.searchParams.number"></div></div><div class="form-group applicant-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="applicant">Applicant</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" type="text" min="3" id="applicant" ng-model="searchFormMModal.searchParams.applicant" typeahead-min-length="3" typeahead="applicant as applicant.name for applicant in searchFormMModal.getApplicant($viewValue)"></div></div><div class="form-group currency-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="currency">Currency</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="currency" maxlength="3" ng-model="searchFormMModal.searchParams.currency" typeahead="currency as currency.code for currency in searchFormMModal.getCurrency($viewValue)" typeahead-min-length="2"></div></div><div class="form-group amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="amount" min="0" ng-model="searchFormMModal.searchParams.amount" number-format="" ng-pattern="/^\\d[\\d,]*(?:\\.\\d*)?$/"></div></div></fieldset><div class="form-m-lc-issue-container"><span ng-click="searchFormMModal.toggleShowLcIssueContainer()" class="form-m-lc-issue-toggle-show"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !searchFormMModal.showLcIssueContainer, \'glyphicon-chevron-up\': searchFormMModal.showLcIssueContainer}]"></span> {$searchFormMModal.searchLcIssuesTitle$}</span><div class="form-m-search-lc-issue" ng-show="searchFormMModal.showLcIssueContainer"><lc-issue lc-issue-show="searchFormMModal.showLcIssueContainer" lc-issues-selected="searchFormMModal.selectedLcIssues"></lc-issue></div></div><div class="row search-form-m-form-control"><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left"><span class="btn btn-default" ng-click="searchFormMModal.reset(searchFormMModalForm)">Reset</span></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center"><button type="submit" class="btn btn-info" ng-disabled="searchFormMModalForm.$invalid">Search Form M</button></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right"><span class="btn btn-default" ng-click="searchFormMModal.close()">Close</span></div></div></form></div>'},function(o,e,r){"use strict";function t(o){return{restrict:"E",templateUrl:r(8).buildUrl("form-m/lc-issue/lc-issue.html"),link:function(e,r,t,s){e.$watch(function(){return s.show},function(e){s.show=e,e&&!s.lcIssues.length?s.lcIssues=o.query():(r.find(".lc-issue-item-checkbox").each(function(){$(this).prop("checked",!1).closest(".lc-issue-item").removeClass("selected")}),s.selectedIssues={})}),r.on({change:function(){var o=$(this);o.closest(".lc-issue-item").toggleClass("selected",o.prop("checked"))}},".lc-issue-item-checkbox")},scope:{},bindToController:{show:"=lcIssueShow",selectedIssues:"=lcIssuesSelected"},controller:"LcIssueDirectiveCtrl as lcIssue"}}function s(){var o=this;o.lcIssues=[],o.selectedIssues={}}var n=angular.module("form-m-lc-issue",[]);n.directive("lcIssue",t),t.$inject=["LCIssue"],n.controller("LcIssueDirectiveCtrl",s)},function(o,e,r){"use strict";function t(o){return s.buildUrl("form-m")+"/"+o}var s=r(9);o.exports={buildUrl:t}},function(o,e,r){"use strict";function t(o){return s.buildUrl(n,o)}var s=r(2),n="letter_of_credit";o.exports={buildUrl:t,appName:n}},function(o,e){o.exports='<div class="form-m-home-view"><div class="action-buttons" style="float: right;"><button class="btn btn-info" add-form-m="" new-form-m="formMHome.newFormM">Add Form M</button> <button class="btn btn-info" search-form-m="" search-form-m-result="formMHome.searchedFormMResult">Search Form M</button></div><div display-form-m="" form-m-collection="formMHome.formMs" new-form-m="formMHome.newFormM"></div></div>'},function(o,e,r){"use strict";function t(o){function e(e,t,s,n){t.css({cursor:"pointer"}).bind("click",function(){o.showModal({template:r(12),controller:"AddFormMModalCtrl as addFormMModal"}).then(function(o){o.element.dialog({dialogClass:"no-close",modal:!0,minWidth:600,minHeight:450,maxHeight:600,title:"Add Form M"}),o.close.then(function(o){o&&o.submittedFormM&&n.saveFormM(o)})})})}return{restrict:"A",link:e,controller:"AddFormMDirectiveCtrl as addFormM",scope:{},bindToController:{newFormM:"="}}}function s(o,e,r,t,s,n){function i(s){function n(o){l(o.url),m.goods_description&&c(o.url,u),a.newFormM=o,console.log("vm.newFormM = ",a.newFormM)}function i(o){r(o,{date_received:"date received",number:"form m number"})}var d=s.submittedFormM,m=angular.copy(d);m.applicant=d.applicant.url,m.currency=d.currency.url,m.date_received=o(d.date_received);var u=s.submittedBidRequest;u&&!t.isEmpty(u)&&(m.goods_description=s.submittedBidRequest.goods_description);var f=new e(m);f.$save(n,i)}function l(o){t.each(a.selectedLcIssues,function(e,r){e&&new s({issue:r,mf:o}).$save(function(o){console.log(o)},function(o){console.log(o)})})}function c(o,e){e.mf=o;var t=new n(e);t.$save(function(o){console.log("bid saved successfully with data = ",o)},function(o){r(o)})}var a=this;a.saveFormM=i}function n(o,e,r,t,s){function n(){u.formM={date_received:new Date},u.showLcIssueContainer=!1,u.addLcIssuesTitle="Add Letter Of Credit Issues",u.selectedLcIssues={},u.showBidContainer=!1,u.makeBidTitle="Make Bid Request",u.bidRequest={amount:null}}function i(r){u.showBidContainer=!u.showBidContainer,u.makeBidTitle=u.showBidContainer?"Dismiss":"Make Bid Request",u.showBidContainer?u.bidRequest.amount=u.formM.amount:o(r,e,".bid-request-form-container .form-control")}function l(){u.showLcIssueContainer=!u.showLcIssueContainer,u.addLcIssuesTitle=u.showLcIssueContainer?"Dismiss":"Add Letter Of Credit Issues"}function c(o,e){return o?!0:u.showBidContainer&&e?!0:!1}function a(r){u.formM={},o(r,e,"form-control",n)}function d(o,e){r({submittedFormM:o,submittedBidRequest:e})}function m(){u.datePickerIsOpen=!0}var u=this;u.element=e,n(),u.toggleShowBidContainer=i,u.toggleShowLcIssueContainer=l,u.disableSubmitBtn=c,u.close=r,u.reset=a,u.submitFormM=d,u.getApplicant=t,u.getCurrency=s,u.datePickerFormat="dd-MMMM-yyyy",u.datePickerIsOpen=!1,u.openDatePicker=m}var i=angular.module("form-m");i.directive("addFormM",t),t.$inject=["ModalService"],i.controller("AddFormMDirectiveCtrl",s),s.$inject=["formatDate","FormM","xhrErrorDisplay","kanmiiUnderscore","LCIssueConcrete","LcBidRequest"],i.controller("AddFormMModalCtrl",n),n.$inject=["resetForm","$element","close","getTypeAheadCustomer","getTypeAheadCurrency"]},function(o,e){o.exports='<div id="add-form-m-root-container" class="add-form-m-root-container"><form novalidate="" class="form-horizontal" ng-submit="addFormMModal.submitFormM(addFormMModal.formM, addFormMModal.bidRequest)" name="addFormMModalForm"><fieldset class="add-new-form-m-container" ng-form="" name="newFormMModalForm" style="position: relative;padding: 7px;"><div class="form-group form-m-number-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m-number">Form M Number</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" maxlength="13" id="form-m-number" required="" to-upper="" ng-pattern="/mf\\d{11}/i" ng-model="addFormMModal.formM.number"></div></div><div class="form-group applicant-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="applicant">Applicant</label><div class="col-md-8 col-lg-8 col-sm-8"><div class="input-group"><input class="form-control" type="text" min="3" id="applicant" ng-model="addFormMModal.formM.applicant" ng-pattern="/.{4,}/" typeahead-min-length="3" typeahead="applicant as applicant.name for applicant in addFormMModal.getApplicant($viewValue)"> <span class="input-group-addon"><img ng-src="{$$root.addIconSrc$}" alt="" add-customer="" dim-parent="addFormMModal.element" added-new-customer="addFormMModal.formM.applicant"></span></div></div></div><div class="form-group currency-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="currency">Currency</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="currency" required="" maxlength="3" ng-model="addFormMModal.formM.currency" typeahead="currency as currency.code for currency in addFormMModal.getCurrency($viewValue)" typeahead-min-length="2"></div></div><div class="form-group amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="amount" required="" ng-model="addFormMModal.formM.amount" number-format=""></div></div><div class="form-group received-date-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="received-date">Date Received</label><div class="col-md-8 col-lg-8 col-sm-8"><div class="input-group"><input class="form-control" id="received-date" required="" ng-model="addFormMModal.formM.date_received" datepicker-popup="{$addFormMModal.datePickerFormat$}" is-open="addFormMModal.datePickerIsOpen"> <span class="input-group-addon" ng-click="addFormMModal.openDatePicker($event)"><i class="glyphicon glyphicon-calendar"></i></span></div></div></div></fieldset><div class="bid-request-form-container"><div ng-click="addFormMModal.toggleShowBidContainer(bidRequestForm)" class="form-m-bid-toggle-show clearfix"><span class="on-show-helper" ng-show="addFormMModal.showBidContainer">Make Bid Request</span><div class="show-icon"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !addFormMModal.showBidContainer, \'glyphicon-chevron-up\': addFormMModal.showBidContainer}]"></span> {$addFormMModal.makeBidTitle$}</div></div><fieldset ng-form="" name="bidRequestForm" ng-show="addFormMModal.showBidContainer"><div class="form-group bid-request-goods_description"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="goods-description">Goods Description</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="goods-description" required="" min="5" ng-model="addFormMModal.bidRequest.goods_description" to-upper=""></div></div><div class="form-group bid-request-amount-group"><label class="control-label col-md-4 col-lg-4 col-sm-4" for="bid-amount">Amount</label><div class="col-md-8 col-lg-8 col-sm-8"><input class="form-control" id="bid-amount" required="" ng-model="addFormMModal.bidRequest.amount" number-format=""></div></div></fieldset></div><div class="form-m-lc-issue-container"><div ng-click="addFormMModal.toggleShowLcIssueContainer()" class="form-m-lc-issue-toggle-show clearfix"><span class="on-show-helper" ng-show="addFormMModal.showLcIssueContainer">Specify LC Request Issues</span><div class="show-icon"><span ng-class="[\'glyphicon\', {\'glyphicon-chevron-down\': !addFormMModal.showLcIssueContainer, \'glyphicon-chevron-up\': addFormMModal.showLcIssueContainer}]"></span> {$addFormMModal.addLcIssuesTitle$}</div></div><div class="form-m-add-lc-issue" ng-show="addFormMModal.showLcIssueContainer"><lc-issue lc-issue-show="addFormMModal.showLcIssueContainer" lc-issues-selected="addFormMModal.selectedLcIssues"></lc-issue></div></div><div class="row add-form-m-form-control"><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left"><span class="btn btn-default" ng-click="addFormMModal.reset(addFormMModalForm)">Reset</span></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center"><button type="submit" class="btn btn-info" ng-disabled="addFormMModal.disableSubmitBtn(newFormMModalForm.$invalid, bidRequestForm.$invalid)">Add Form M</button></div><div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right"><span class="btn btn-default" ng-click="addFormMModal.close()">Close</span></div></div></form></div>'},function(o,e,r){"use strict";function t(o){o.state("bid",{url:"/bid",template:r(15),controller:"BidRequestController as bidHome"})}function s(o,e){var r=this;r.bidRequests=o.getPaginated(),r.newBidRequest=null,r.searchedBidResult=null,e.$watch(function(){return r.searchedBidResult},function(o){o&&(r.bidRequests=o)})}var n=r(2);r(14);var i=angular.module("form-m-bid",["ui.router","form-m-bid-request-display"]);i.config(n.interpolateProviderConfig),i.config(t),t.$inject=["$stateProvider"],i.controller("BidRequestController",s),s.$inject=["LcBidRequest","$scope"]},function(o,e,r){"use strict";function t(){function o(o,e,r,t){}return{restrict:"E",link:o,scope:{},bindToController:{bidCollection:"=",newBid:"="},controller:"BidRequestDisplayDirectiveCtrl as formMBidTable",templateUrl:r(8).buildUrl("bid-request/table/table.html")}}function s(o){function e(){}var r=this;r.paginationSize=20,r.orderProp="-created_at",o.$watch(function(){return r.newBid},function(o){o&&(r.bidCollection.results.length===r.paginationSize&&r.bidCollection.results.pop(),r.bidCollection.results.unshift(o),r.orderProp="-id")}),o.$watch(function(){return r.bidCollection},function(o){console.log("newBids = ",o),o&&(o.$promise?o.$promise.then(function(o){e(o.next,o.previous,o.count)}):e(o.next,o.previous,o.count))})}var n=angular.module("form-m-bid-request-display",[]);n.config(r(2).interpolateProviderConfig),n.directive("bidRequestDisplay",t),n.controller("BidRequestDisplayDirectiveCtrl",s),s.$inject=["$scope"]},function(o,e){o.exports='<bid-request-display bid-collection="bidHome.bidRequests"></bid-request-display>'},function(o,e){o.exports='<div class="form-m-home-view"><div class="form-m-home-action-buttons btn-group-vertical" role="group"><a class="btn btn-info form-m-home-action-button" ui-sref="form-m">Form M</a> <a class="btn btn-info form-m-home-action-button" ui-sref="bid">FX Purchase</a></div></div>'}]);
//# sourceMappingURL=form-m.app.min.js.map