<div id="add-form-m-root-container" class="add-form-m-root-container">
  <form novalidate class="form-horizontal"
        ng-submit="addFormMModal.submitFormM(addFormMModal.formM, addFormMModal.bidRequest)"
        name="addFormMModalForm">
    <fieldset class="add-new-form-m-container" ng-form name="newFormMModalForm"
              style="position: relative;padding: 7px;">

      <div class="form-group form-m-number-group">
        <label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m-number">Form M Number</label>

        <div class="col-md-8 col-lg-8 col-sm-8">
          <input class="form-control" maxlength="13" id="form-m-number" required to-upper ng-pattern="/mf\d{11}/i"
                 ng-model="addFormMModal.formM.number"/>
        </div>
      </div>

      <div class="form-group applicant-group">
        <label class="control-label col-md-4 col-lg-4 col-sm-4" for="applicant">Applicant</label>

        <div class="col-md-8 col-lg-8 col-sm-8">
          <div class="input-group">
            <input class="form-control" type="text" min="3" id="applicant"
                   ng-model="addFormMModal.formM.applicant"
                   ng-pattern="/.{4,}/"
                   typeahead-min-length="3"
                   typeahead="applicant as applicant.name for applicant in addFormMModal.getApplicant($viewValue)"
                />
            <span class="input-group-addon">
              <img ng-src="{$$root.addIconSrc$}" alt="" add-customer dim-parent="addFormMModal.element"
                   added-new-customer="addFormMModal.formM.applicant"/>
            </span>
          </div>
        </div>
      </div>

      <div class="form-group currency-group">
        <label class="control-label col-md-4 col-lg-4 col-sm-4" for="currency">Currency</label>

        <div class="col-md-8 col-lg-8 col-sm-8">
          <input class="form-control" id="currency" required maxlength="3"
                 ng-model="addFormMModal.formM.currency"
                 typeahead="currency as currency.code for currency in addFormMModal.getCurrency($viewValue)"
                 typeahead-min-length="2"
              />
        </div>
      </div>

      <div class="form-group amount-group">
        <label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label>

        <div class="col-md-8 col-lg-8 col-sm-8">
          <input class="form-control" id="amount" required ng-model="addFormMModal.formM.amount" number-format/>
        </div>
      </div>

      <div class="form-group received-date-group">
        <label class="control-label col-md-4 col-lg-4 col-sm-4" for="received-date">Date Received</label>

        <div class="col-md-8 col-lg-8 col-sm-8">
          <div class="input-group">
            <input class="form-control" id="received-date" required
                   ng-model="addFormMModal.formM.date_received"
                   datepicker-popup="{$addFormMModal.datePickerFormat$}" is-open="addFormMModal.datePickerIsOpen"
                />

            <span class="input-group-addon" ng-click="addFormMModal.openDatePicker($event)">
              <i class=" glyphicon glyphicon-calendar"></i>
            </span>
          </div>
        </div>
      </div>
    </fieldset>

    <div class="bid-request-form-container">

      <div ng-click="addFormMModal.toggleShowBidContainer(bidRequestForm)" class="form-m-bid-toggle-show clearfix">
        <span class="on-show-helper" ng-show="addFormMModal.showBidContainer">Make Bid Request</span>

        <div class="show-icon">
          <span
              ng-class="['glyphicon', {'glyphicon-chevron-down': !addFormMModal.showBidContainer, 'glyphicon-chevron-up': addFormMModal.showBidContainer}]">
          </span>

          {$addFormMModal.makeBidTitle$}
        </div>
      </div>

      <fieldset ng-form name="bidRequestForm" ng-show="addFormMModal.showBidContainer">
        <div class="form-group bid-request-goods_description">
          <label class="control-label col-md-4 col-lg-4 col-sm-4" for="goods-description">Goods Description</label>

          <div class="col-md-8 col-lg-8 col-sm-8">
            <input class="form-control" id="goods-description" required min="5"
                   ng-model="addFormMModal.bidRequest.goods_description" to-upper/>
          </div>
        </div>

        <div class="form-group bid-request-amount-group">
          <label class="control-label col-md-4 col-lg-4 col-sm-4" for="bid-amount">Amount</label>

          <div class="col-md-8 col-lg-8 col-sm-8">
            <input class="form-control" id="bid-amount" required ng-model="addFormMModal.bidRequest.amount"
                   number-format/>
          </div>
        </div>
      </fieldset>
    </div>

    <div class="form-m-lc-issue-container">
      <div ng-click="addFormMModal.toggleShowLcIssueContainer()" class="form-m-lc-issue-toggle-show clearfix">
        <span class="on-show-helper" ng-show="addFormMModal.showLcIssueContainer">Specify LC Request Issues</span>

        <div class="show-icon">
          <span
              ng-class="['glyphicon', {'glyphicon-chevron-down': !addFormMModal.showLcIssueContainer, 'glyphicon-chevron-up': addFormMModal.showLcIssueContainer}]">
          </span>
          {$addFormMModal.addLcIssuesTitle$}
        </div>
      </div>

      <div class="form-m-add-lc-issue" ng-show="addFormMModal.showLcIssueContainer">
        <lc-issue lc-issue-show="addFormMModal.showLcIssueContainer"
                  lc-issues-selected="addFormMModal.selectedLcIssues"/>
      </div>
    </div>

    <div class="row add-form-m-form-control">
      <div class="col-md-4 col-lg-4 col-sm-4" style="text-align: left">
        <span class="btn btn-default"
              ng-click="addFormMModal.reset(addFormMModalForm)">
          Reset
        </span>
      </div>

      <div class="col-md-4 col-lg-4 col-sm-4" style="text-align: center">
        <button type="submit" class="btn btn-info"
                ng-disabled="addFormMModal.disableSubmitBtn(newFormMModalForm.$invalid, bidRequestForm.$invalid)">
          Add Form M
        </button>
      </div>

      <div class="col-md-4 col-lg-4 col-sm-4" style="text-align: right">
        <span class="btn btn-default" ng-click="addFormMModal.close()">Close</span>
      </div>
    </div>
  </form>
</div>
