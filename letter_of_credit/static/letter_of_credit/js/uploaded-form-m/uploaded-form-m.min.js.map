{"version":3,"sources":["letter_of_credit/static/letter_of_credit/js/uploaded-form-m/uploaded-form-m.js"],"names":["$","$idUpload","$toUpload","on","reportHeaderBeginText","toUpload","Papa","parse","val","replace","trim","delimiter","header","step","row","data","ba","length","push","mf","ccy","CURRENCY","fob","FOB","applicant","submitted_at","goods_description","DESCS","cost_freight","validity_type","status","STAX","JSON","stringify","submit","evt","test","prop","each","this","addClass","preventDefault","window","alert"],"mappings":"AAAAA,EAAE,WAGA,YAEA,IAAIC,GAAYD,EAAE,+BAChBE,EAAYF,EAAE,yBAEhBC,GAAUE,GAAG,QAAS,WACpB,GAAIC,GAAwB,iCAC1BC,IAEFC,MAAKC,MAAMN,EAAUO,MAAMC,QAAQL,EAAuB,IAAIM,QAC5DC,UAAW,IACXC,QAAQ,EACRC,KAAM,SAASC,GACb,GAAIC,GAAOD,EAAIC,KAAK,GAClBC,EAAKD,EAAK,SAEM,MAAdC,EAAGC,QACLZ,EAASa,MAELF,GAAIA,EACJG,GAAIJ,EAAK,UACTK,IAAKL,EAAKM,SACVC,IAAKP,EAAKQ,IACVC,UAAWT,EAAK,kBAChBU,aAAcV,EAAK,kBACnBW,kBAAmBX,EAAKY,MACxBC,aAAcb,EAAK,oBACnBc,cAAed,EAAK,iBACpBe,OAAQf,EAAKgB,UAOvB7B,EAAUM,IAAIwB,KAAKC,UAAU5B,MAG/BL,EAAE,4BAA4BkC,OAAO,SAASC,GAExC,WAAWC,KAAKlC,EAAUM,QAC5BR,EAAE,8BAA8BqC,KAAK,YAAY,GACjDrC,EAAE,YAAYsC,KAAK,WACjBtC,EAAEuC,MAAMF,KAAK,YAAY,KAE3BrC,EAAEuC,MAAMC,SAAS,8BAEjBL,EAAIM,mBAGJC,OAAOC,MAAM,6CACbR,EAAIM","file":"letter_of_credit/static/letter_of_credit/js/uploaded-form-m/uploaded-form-m.min.js","sourcesContent":["$(function() {\n  /*jshint camelcase:false*/\n\n  \"use strict\";\n\n  var $idUpload = $('#id_upload-lc-register-text'),\n    $toUpload = $('#id_upload-lc-register')\n\n  $idUpload.on('input', function() {\n    var reportHeaderBeginText = 'FORM M PROCESSED ON CBN WINDOW',\n      toUpload = []\n\n    Papa.parse($idUpload.val().replace(reportHeaderBeginText, '').trim(), {\n      delimiter: '\\t',\n      header: true,\n      step: function(row) {\n        var data = row.data[0],\n          ba = data['BA NUM']\n\n        if (ba.length === 16) {\n          toUpload.push(\n            {\n              ba: ba,\n              mf: data['MF NUM'],\n              ccy: data.CURRENCY,\n              fob: data.FOB,\n              applicant: data['APPLICANT NAME'],\n              submitted_at: data['DATE SUBMITTED'],\n              goods_description: data.DESCS,\n              cost_freight: data['COST AND FREIGHT'],\n              validity_type: data['VALIDITY TYPE'],\n              status: data.STAX\n            }\n          )\n        }\n      }\n    })\n\n    $toUpload.val(JSON.stringify(toUpload))\n  })\n\n  $('.upload-lc-register-form').submit(function(evt) {\n\n    if (/^\\[\\{\".+/.test($toUpload.val())) {\n      $('#upload-lc-register-submit').prop('disabled', true)\n      $('textarea').each(function() {\n        $(this).prop('readonly', true)\n      })\n      $(this).addClass('ui-widget-overlay ui-front')\n\n      evt.preventDefault()\n\n    } else {\n      window.alert('Nothing to upload or invalid upload data!')\n      evt.preventDefault()\n    }\n  })\n});\n"],"sourceRoot":"/source/"}