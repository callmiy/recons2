$(function(){"use strict";function t(t){return Number(t.replace(/[,\s]/g,""))}function e(t){return t=""+t,4===t.length?t:"20"+t}function r(t){var r=new RegExp("(\\d+)[^\\d](\\d+)[^\\d](\\d+)"),a=r.exec(t.trim()),n=e(a[3])+"-";return"mm-dd-yyyy"===i?n+a[1]+"-"+a[2]:n+a[2]+"-"+a[1]}var i,a=$("#id_upload-lc-register-text"),n=$("#id_upload-lc-register"),o=$("[name=date-format]"),d=$(".text-area-control");o.change(function(){i=$(this).val();var t=!o.filter(":checked").size();d.each(function(){$(this).prop("disabled",t)})}),a.on("input",function(){var e,i="FORM M PROCESSED ON CBN WINDOW",o=[];Papa.parse(a.val().replace(i,"").trim().replace(/"/g,""),{delimiter:"\t",header:!0,step:function(i){e=i.data[0];try{o.push({ba:e["BA NUM"].trim(),mf:e["MF NUM"].trim(),ccy:e.CURRENCY.trim(),fob:t(e.FOB),applicant:e["APPLICANT NAME"].trim(),bene:e["BENEFICIARY'S NAME"].trim(),submitted_at:r(e["DATE SUBMITTED"]),goods_description:e.DESCS.trim(),cost_freight:t(e["COST AND FREIGHT"]),validity_type:e["VALIDITY TYPE"].trim(),status:e.STAX.trim()})}catch(a){window.alert("Error parsing data\n"+a.message)}}}),n.val(JSON.stringify(o))}),$(".upload-lc-register-form").submit(function(t){/^\[\{".+/.test(n.val())?($("#upload-lc-register-submit").prop("disabled",!0),$("textarea").each(function(){$(this).prop("readonly",!0)}),$(this).addClass("ui-widget-overlay ui-front")):(window.alert("Nothing to upload or invalid upload data!"),t.preventDefault())})});
//# sourceMappingURL=uploaded-form-m.min.js.map
