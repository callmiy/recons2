$(function(){"use strict";function e(e){return e.size()?i(e.parent(),"div[id^=AUTOGENBOOKMARK_]:contains(Operator:)",!0):""}function i(e,i,t){var r=e.find(i).parent().next().children("div");return t?n(r.html()):r}function n(e){return e.trim().replace(/<br>/gi,"\n").replace(/&nbsp;/gi," ")}var t=document.getElementById("process-swift");$(".message-area");$("#process-swift-form").submit(function(r){r.preventDefault();var o=t.files[0];if(o){var s=new FileReader;s.readAsText(o),s.onload=function(t){for(var r,o=$(t.target.result.trim()),s=0;s<o.size()&&(r=$(o[s]),!r.is("table"));s++)r=null;if(!r)return void window.alert("No table selector found, exiting...");var a=["div:contains(F20: Transaction Reference Number)","div:contains(F20: Sender's Reference)","div:contains(F20: Documentary Credit Number)"].join(",");r.find("div[id^=AUTOGENBOOKMARK_]:contains(Start of Message)").each(function(){var t=$(this).parent(),r=(t.find("div:contains(fin.)").text(),i(t,"div[id^=AUTOGENBOOKMARK_]:contains(Receiver Institution)")),o=(r.text(),i(r.parent().next(),"div[id^=AUTOGENBOOKMARK_]:contains(Expansion:)",!0),i(t,"div[id^=AUTOGENBOOKMARK_]:contains(Transaction Reference:)",!0),i(t,"div[id^=AUTOGENBOOKMARK_]:contains(Related Reference:)")),s=(o.size()?n(o.text()):"",i(t,"div[id^=AUTOGENBOOKMARK_]:contains(Unique Message Identifier:)",!0),i(t,"div[id^=AUTOGENBOOKMARK_]:contains(ACK/NAK Reception Date/Time (GMT):)")),c=(s.size()?new Date(n(s.text()).replace(/\//g,"-")):null,n(t.find(a).html()),t.find("td>div:contains(Routed from rp [_MP_authorisation] to rp [_SI_to_SWIFT]; On Processing by Function mpa with result Success;)").eq(0)),d=(e(c),t.find("td>div:contains(Routed from rp [_MP_verification] to rp [_MP_authorisation]; On Processing by Function mpa with result Success;)")),u=d.size(),f=(u?e(d.eq(u-1)):"",t.find("td>div:contains(Routed from rp [_MP_creation] to rp [_MP_verification]; On Processing by Function mpc with result Success;)")),O=f.size(),v=(O?e(f.eq(O-1)):"",i(t,"div[id^=AUTOGENBOOKMARK_]:contains(Network Delivery Status:)")),l=v.size()?n(v.text()):"Message has not been authorized";console.log(l)})}}})});
//# sourceMappingURL=process_swift.min.js.map
