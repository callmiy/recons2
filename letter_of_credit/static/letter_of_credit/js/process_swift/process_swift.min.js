$(function(){"use strict";function n(n){return n.size()?e(n.parent(),"div[id^=AUTOGENBOOKMARK_]:contains(Operator:)",!0):""}function e(n,e,t){var r=n.find(e).parent().next().children("div");return t?i(r.html()):r}function i(n){return n.trim().replace(/<br>/gi,"\n").replace(/&nbsp;/gi," ")}var t=document.getElementById("process-swift"),r=$("#swift-messages");$("#process-swift-form").submit(function(s){s.preventDefault(),r.hide().val("");var o=t.files[0];if(o){var a=new FileReader;a.readAsText(o),a.onload=function(t){for(var s,o=$(t.target.result.trim()),a=0;a<o.size()&&(s=$(o[a]),!s.is("table"));a++)s=null;if(!s)return void window.alert("No table selector found, exiting...");var c=["div:contains(F20: Transaction Reference Number)","div:contains(F20: Sender's Reference)","div:contains(F20: Documentary Credit Number)"].join(","),d="";s.find("div[id^=AUTOGENBOOKMARK_]:contains(Start of Message)").each(function(){var t=$(this).parent(),r=t.find("div:contains(fin.)").text(),s=e(t,"div[id^=AUTOGENBOOKMARK_]:contains(Receiver Institution)"),o=s.text(),a=(e(s.parent().next(),"div[id^=AUTOGENBOOKMARK_]:contains(Expansion:)",!0),e(t,"div[id^=AUTOGENBOOKMARK_]:contains(Transaction Reference:)",!0)),u=e(t,"div[id^=AUTOGENBOOKMARK_]:contains(Related Reference:)"),f=u.size()?i(u.text()):"",v=(e(t,"div[id^=AUTOGENBOOKMARK_]:contains(Unique Message Identifier:)",!0),e(t,"div[id^=AUTOGENBOOKMARK_]:contains(ACK/NAK Reception Date/Time (GMT):)")),O=v.size()?new Date(i(v.text()).replace(/\//g,"-")):null,l=i(t.find(c).html()),p=t.find("td>div:contains(Routed from rp [_MP_authorisation] to rp [_SI_to_SWIFT]; On Processing by Function mpa with result Success;)").eq(0),A=n(p),_=t.find("td>div:contains(Routed from rp [_MP_verification] to rp [_MP_authorisation]; On Processing by Function mpa with result Success;)"),m=_.size(),K=m?n(_.eq(m-1)):"",R=t.find("td>div:contains(Routed from rp [_MP_creation] to rp [_MP_verification]; On Processing by Function mpc with result Success;)"),M=R.size(),h=M?n(R.eq(M-1)):"",T=e(t,"div[id^=AUTOGENBOOKMARK_]:contains(Network Delivery Status:)"),b=T.size()?i(T.text()):"Message has not been authorized";d+=r+"\n"+o+"\n"+a+"\n"+f+"\n\n"+l+"\n\nInput by:	         "+h+"\nVerified by:	  "+K+"\nAuthorized by:	  "+A+"\nAuthorization completed at:	"+O+"\nDelivery status:	"+b+"\n================================================\n\n\n\n"}),r.show().val(d)}}})});
//# sourceMappingURL=process_swift.min.js.map
