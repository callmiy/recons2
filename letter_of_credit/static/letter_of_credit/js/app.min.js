!function(l){function e(t){if(n[t])return n[t].exports;var c=n[t]={exports:{},id:t,loaded:!1};return l[t].call(c.exports,c,c.exports,e),c.loaded=!0,c.exports}var n={};return e.m=l,e.c=n,e.p="",e(0)}([function(l,e,n){"use strict";function t(l){l.when("/",{template:n(2),controller:"LetterOfCreditSearchController",controllerAs:"vm"}).when("/new",{template:n(3),controller:"LetterOfCreditNewController",controllerAs:"newLc"}).when("/details/:id",{template:n(4),controller:"LetterOfCreditDetailController",controllerAs:"vm"})}angular.module("letterOfCreditApp",["rootApp"]).config(n(1).interpolateProviderConfig).config(t),t.$inject=["$routeProvider"],n(5),n(6),n(11),n(12),n(13)},function(l,e){"use strict";function n(l,e){return staticPrefix+l+"/js/"+e}function t(l){l.run(["$rootScope",function(l){l.staticPrefix=staticPrefix,l.addIconSrc=staticPrefix+"core_recons/css/images/icon_addposting.gif"}])}var c=["$interpolateProvider",function(l){l.startSymbol("{$"),l.endSymbol("$}")}];l.exports={interpolateProviderConfig:c,buildUrl:n,rootAppName:"core_recons",setStaticPrefix:t}},function(l,e){l.exports='<form novalidate="" class="form-horizontal" ng-submit="vm.searchLc(vm.searchParams)" name="searchLcForm"><fieldset><legend>Search LC</legend><div class="form-group lc-number"><label class="control-label col-md-2 col-lg-2 col-sm-3" for="lc-ref">LC Reference</label><div class="col-md-10 col-lg-10 col-sm-9"><input class="form-control" id="lc-ref" maxlength="16" ng-model="vm.searchParams.lc_ref" ng-pattern="/^ILCL([a-zA-Z]{1,3}\\d{1,9}?)?/" to-upper=""></div></div><div class="form-group applicant-group"><label class="control-label col-md-2 col-lg-2 col-sm-3" for="applicant">Applicant</label><div class="col-md-10 col-lg-10 col-sm-9"><input class="form-control" type="text" min="3" id="applicant" ng-model="vm.searchParams.applicant" ng-pattern="/.{4,}/" typeahead-min-length="3" typeahead="customer as customer.name for customer in vm.getCustomer($viewValue)"></div></div><div class="mf-filter-row row"><div class="col-md-6 col-lg-6 col-sm-6"><div class="form-group mf-group"><label class="control-label col-md-4 col-lg-4 col-sm-6" for="form-m">Form M Number</label><div class="col-md-8 col-lg-8 col-sm-6"><input class="form-control" id="form-m" maxlength="13" ng-pattern="/^MF\\d{3,}/" ng-model="vm.searchParams.mf" to-upper=""></div></div></div><div class="col-md-6 col-lg-6 col-sm-6"><div class="form-group filter-group"><label class="control-label col-md-2 col-lg-2 col-sm-3" for="filter">Filter</label><div class="col-md-10 col-lg-10 col-sm-9"><select class="form-control" id="filter" ng-model="vm.searchParams.released"><option value="">--------------</option><option value="False">Not Released</option><option value="True">Released</option></select></div></div></div></div></fieldset><div class="row"><div class="col-md-6 col-lg-6 col-sm-6"><button type="submit" class="btn btn-info" ng-disabled="searchLcForm.$invalid">Search</button> <span class="btn btn-default" ng-click="reset()">Reset</span></div></div></form><hr><displayed-lcees-table lc-list="vm.foundLcees"></displayed-lcees-table>'},function(l,e){l.exports='<form novalidate class="form-horizontal" ng-submit="newLc.createNewLc(newLc.newLc)" name="newLc.newLcForm">\r\n	<fieldset>\r\n		<legend>New LC Request</legend>\r\n\r\n		<div class="form-group applicant-group">\r\n			<label class="control-label col-md-2 col-lg-2 col-sm-2" for="applicant">Applicant</label>\r\n\r\n			<div class="col-md-10 col-lg-10 col-sm-10">\r\n				<input class="form-control" type="text" min="3" id="applicant" required\r\n				       ng-model="newLc.newLc.applicant"\r\n				       ng-pattern="/.{4,}/"\r\n				       typeahead-min-length="3"\r\n				       typeahead="customer as customer.name for customer in newLc.getCustomers($viewValue)"\r\n					/>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row mf-ccy-group">\r\n			<div class="col-md-6 col-lg-6 col-sm-6 mf-group">\r\n				<div class="form-group">\r\n					<label class="control-label col-md-4 col-lg-4 col-sm-4" for="form-m">Form M Number</label>\r\n\r\n					<div class="col-md-8 col-lg-8 col-sm-8">\r\n						<input class="form-control" id="form-m" maxlength="13", name="mf"\r\n						       ng-pattern="/^MF\\d{11}/i"\r\n						       ng-model="newLc.newLc.mf"\r\n						       to-upper\r\n							/>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div class="col-md-6 col-lg-6 col-sm-6 ccy-group">\r\n				<div class="form-group">\r\n					<label class="control-label col-md-4 col-lg-4 col-sm-4" for="ccy">Currency</label>\r\n\r\n					<div class="col-md-8 col-lg-8 col-sm-8">\r\n						<input class="form-control" id="ccy" required maxlength="3"\r\n						       ng-model="newLc.newLc.ccy"\r\n						       typeahead="ccy as ccy.code for ccy in newLc.getCurrencies($viewValue)"\r\n						       typeahead-min-length="3"\r\n							/>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row amount-group-container">\r\n			<div class="col-md-6 col-lg-6 col-sm-6 amount-group">\r\n				<div class="form-group">\r\n					<label class="control-label col-md-4 col-lg-4 col-sm-4" for="amount">Amount</label>\r\n\r\n					<div class="col-md-8 col-lg-8 col-sm-8">\r\n						<input class="form-control" id="amount" required\r\n						       ng-model="newLc.newLc.amount"\r\n						       number-format\r\n							/>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-md-6 col-lg-6 col-sm-6 bid-date-group">\r\n				<div class="form-group">\r\n					<label class="control-label col-md-4 col-lg-4 col-sm-4" for="bid-date">Bid Date</label>\r\n\r\n					<div class="col-md-8 col-lg-8 col-sm-8">\r\n						<input class="form-control" id="bid-date"\r\n						       ng-model="newLc.newLc.bid_date"\r\n						       datepicker-popup="dd-MMMM-yyyy"\r\n\r\n							/>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row ti-mf-lc-ref-group">\r\n			<div class="col-md-6 col-lg-6 col-sm-6 ti-mf-group">\r\n				<div class="form-group">\r\n					<label class="control-label col-md-4 col-lg-4 col-sm-4" for="ti-mf">\r\n						TI Form M Number\r\n					</label>\r\n\r\n					<div class="col-md-8 col-lg-8 col-sm-8">\r\n						<input class="form-control" id="ti-mf" maxlength="12"\r\n						       ng-pattern="/^CBN\\d{9}/"\r\n						       ng-model="newLc.newLc.ti_mf"\r\n						       to-upper\r\n							/>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div class="col-md-6 col-lg-6 col-sm-6 lc-ref-group">\r\n				<div class="form-group">\r\n					<label class="control-label col-md-4 col-lg-4 col-sm-4" for="lc-ref">\r\n						LC Ref\r\n					</label>\r\n\r\n					<div class="col-md-8 col-lg-8 col-sm-8">\r\n						<input class="form-control" id="lc-ref" maxlength="16"\r\n						       ng-pattern="/^ILCL[A-Z]{3}\\d{9}/"\r\n						       ng-model="newLc.newLc.lc_ref"\r\n						       to-upper\r\n							/>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n		<div class="row">\r\n			<div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">\r\n				<div class="form-group">\r\n					<label for="status-text" class="control-label col-md-3 col-lg-3 col-sm-3">\r\n						Status\r\n					</label>\r\n\r\n					<div class="col-md-9 col-lg-9 col-sm-9">\r\n						<input class="form-control" id="status-text"\r\n						       ng-model="newLc.newLc.status"\r\n						       to-upper\r\n							/>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n			<div class="col-md-4 col-lg-4 col-sm-4 col-xs-4">\r\n				<button type="submit" class="btn btn-info" ng-disabled="newLc.newLcForm.$invalid">\r\n					Save\r\n				</button>\r\n				<span class="btn btn-default" ng-click="newLc.reset(newLc.newLc)">Clear All</span>\r\n			</div>\r\n		</div>\r\n		</div>\r\n\r\n	</fieldset>\r\n</form>\r\n\r\n<hr/>\r\n\r\n<displayed-lcees-table lc-list="newLc.newLcees"/>\r\n'},function(l,e){l.exports="<p>Name: {$vm.lc.applicant_data.name$}</p>\n<p>Amount: {$vm.lc.ccy_code.code$} {$vm.lc.amount | number:2$}</p>\n<p>MF Number: {$vm.lc.mf$}</p>\n<p>TI MF Number: {$vm.lc.ti_mf$}</p>\n<p>LC Ref: {$vm.lc.lc_ref$}</p>\n<p>Bid Date: {$vm.lc.bid_date | date:'dd-MMMM-yyyy'$}</p>\n<p>Date Released: {$vm.lc.date_released | date:'dd-MMMM-yyyy'$}</p>\n<p>\n    Statuses\n<ol>\n    <li ng-repeat=\"status in vm.lc.statuses_data\">{$status.text$}</li>\n</ol>\n</p>\n<div></div>\n<div></div>\n<div></div>\n"},function(l,e){"use strict";function n(l,e){var n=appendToUrl(e.letterOfCreditStatusesAPIUrl,":id");return l(n,{id:"@id"})}angular.module("letterOfCreditApp").factory("LetterOfCreditStatuses",n),n.$inject=["$resource","urls"]},function(l,e,n){"use strict";function t(l,e,n,t,c){l.lc=e,l.oldLc=i.copy(e),l.getCurrencies=t,l.getCustomers=c,l.statusText=null,l.editLc=function(l,e){n({mode:a,editedLc:l,statusText:e})},l.close=function(e){l.lc=e,n(500)}}function c(l,e,n){l.lc=e,l.confirmDelete=function(l){n(l,500)},l.close=function(){n()}}function o(l,e,t,c,o){function d(l){function e(l){l.stopPropagation();var e=$(this),n=e.parents("tr");n.hasClass("lc-display-tr-clicked")?e.hasClass("glyphicon")||n.removeClass("lc-display-tr-clicked"):n.addClass("lc-display-tr-clicked").siblings().removeClass("lc-display-tr-clicked")}l.find("tbody").on({click:e},"td"),l.find("tbody").on({click:e},".controls>.glyphicon")}function m(m,p){function u(l,e){new o({text:l,lc:e}).$save(function(){},function(l){t(l)})}d(p),m.orderProp="-bid_date",m.deleteLc=function(l){e.showModal({template:n(9),controller:"LetterOfCreditDeleteController",inputs:{lc:l}}).then(function(e){e.element.dialog({dialogClass:"no-close"}),e.close.then(function(e){e&&l.$delete(function(l){console.log("\n\n\nsuccessData = ",l,"\n\n\n"),m.lcees=_.without(m.lcees,l)},function(l){t("Error occured while doing delete\n"+l)})})})},m.editLcees=function(c){e.showModal({template:n(10),controller:"LetterOfCreditEditController",inputs:{lc:c}}).then(function(e){e.element.dialog({dialogClass:"no-close",title:"Edit Letter of Credit "+(c.mf||c.applicant_data.name),modal:!0,minWidth:705,minHeight:600}),e.close.then(function(e){switch(e.mode){case a:if(e&&e.editedLc){var n=e.editedLc;n.bid_date=l(n.bid_date),n.date_released=l(n.date_released),n=r(n);var c=i.copy(n);delete c.applicant_data,delete c.ccy_obj,c.$put(function(l){e.statusText&&u(e.statusText,n.url)},function(l){t(l)})}break;case s:}})})},m.goToDetailPage=function(l){c.path("details/"+l.id)}}return{restrict:"E",link:m,scope:{lcees:"=lcList"},template:n(8)}}function r(l){var e=new RegExp("\\d+$"),n=e.exec(l.ccy)[0],t=String(l.ccy_obj.id);n!==t&&(l.ccy=l.ccy.replace(e,t));var c=new RegExp("\\d+$"),o=c.exec(l.applicant)[0],r=String(l.applicant_data.id);return o!==r&&(l.applicant=l.applicant.replace(c,r)),l}var a="save",s="close",i=n(7),d=i.module("letterOfCreditApp");d.controller("LetterOfCreditEditController",t),t.$inject=["$scope","lc","close","getCurrencies","getTypeAheadCustomer"],d.controller("LetterOfCreditDeleteController",c),c.$inject=["$scope","lc","close"],d.directive("displayedLceesTable",o),o.$inject=["parseDate","ModalService","xhrErrorDisplay","$location","LetterOfCreditStatuses"]},function(l,e){l.exports=angular},function(l,e){l.exports='<div class="form-group row">\n  <label class="control-label col-md-2 col-lg-2 col-sm-2" for="filter-query">Filter List</label>\n\n  <div class="col-md-4 col-lg-4 col-sm-4">\n    <input id="filter-query" class="form-control" type="text" ng-model="query"/>\n  </div>\n</div>\n\n<div class="form-group row">\n  <label class="control-label col-md-2 col-lg-2 col-sm-2" for="order">Sort By</label>\n\n  <div class="col-md-4 col-lg-4 col-sm-4">\n    <select id="order" class="form-control" ng-model="orderProp">\n      <option value="-bid_date">Bid Date</option>\n      <option value="-ti_mf">TI Form M Ref</option>\n      <option value="amount">Amount</option>\n      <option value="-id">Tracking ID</option>\n      <option value="-date_released">Date Released</option>\n    </select>\n  </div>\n</div>\n\n<table class="table table-condensed table-bordered lc-display-table">\n  <caption>Recently Added Letters of Credit</caption>\n\n  <thead>\n    <tr>\n      <th>S/N</th>\n      <th>Tracking ID</th>\n      <th>LC Ref</th>\n      <th>Applicant</th>\n      <th>Form M</th>\n      <th>TI Form M</th>\n      <th>Currency</th>\n      <th>Amount</th>\n      <th>Bid Date</th>\n      <th>Status</th>\n      <th>Date Started</th>\n      <th>Date Released</th>\n      <th>Controls</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="lc in lcees | filter:query | orderBy:orderProp"\n        ng-dblclick="goToDetailPage(lc)">\n      <td class="clickable">{$$index+1$}</td>\n      <td class="clickable">{$lc.id$}</td>\n      <td class="clickable">{$lc.lc_ref$}</td>\n      <td class="clickable">{$lc.applicant_data.name$}</td>\n      <td class="clickable">{$lc.mf$}</td>\n      <td class="clickable">{$lc.ti_mf$}</td>\n      <td class="clickable">{$lc.ccy_obj.code$}</td>\n      <td class="clickable">{$lc.amount | number:2$}</td>\n      <td class="clickable">{$lc.bid_date | date:\'dd-MMM-yyyy\'$}</td>\n      <td class="clickable">{$lc.status$}</td>\n      <td class="clickable">{$lc.date_started | date:\'dd-MMM-yyyy\'$}</td>\n      <td class="clickable">{$lc.date_released | date:\'dd-MMM-yyyy\'$}</td>\n      <td class="controls" style="min-width: 50px;">\n        <span class="clickable glyphicon glyphicon-edit" ng-click="editLcees(lc)"></span>\n\n        &nbsp;&nbsp;&nbsp;\n\n        <span class="clickable glyphicon glyphicon-trash" ng-click="deleteLc(lc)"></span>\n      </td>\n    </tr>\n  </tbody>\n</table>\n'},function(l,e){l.exports='<div id="delete-lc" title="Confirm Delete Letter Of Credit">\n	<p>Applicant: {$lc.applicant_data.name$}</p>\n\n	<p ng-show="lc.mf">Form M: {$lc.mf$}</p>\n\n	<p>Currency: {$lc.ccy_obj.code$}</p>\n\n	<p>Amount: {$lc.amount | number:2$}</p>\n\n	<p ng-show="lc.bid_date">Bid Date: {$lc.bid_date | date:\'dd-MMM-yyyy\'$}</p>\n\n	<p ng-show="lc.ti_mf">TI Form M: {$lc.ti_mf$}</p>\n\n	<p ng-show="lc.lc_ref">LC Reference: {$lc.lc_ref$}</p>\n\n	<div class="btn-group">\n		<button class="btn btn-danger" ng-click="confirmDelete(true)">Yes</button>\n		<button class="btn btn-success" ng-click="confirmDelete(false)">No</button>\n	</div>\n</div>\n'},function(l,e){l.exports='<div id="editLc">\n  <form novalidate class="form-horizontal" ng-submit="editLc(lc, statusText)" name="editLcForm">\n    <fieldset>\n\n      <div class="form-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="applicant">Applicant</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" type="text" min="3" id="applicant" required\n                 ng-model="lc.applicant_data"\n                 ng-pattern="/.{4,}/"\n                 typeahead-min-length="3"\n                 typeahead="customer as customer.name for customer in getCustomers($viewValue)"\n              />\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="form-m">Form M Number</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" id="form-m" maxlength="13"\n                 ng-pattern="/^MF\\d{11}/"\n                 ng-model="lc.mf"\n                 to-upper\n              />\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="ccy">Currency</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" id="ccy" required maxlength="3"\n                 ng-model="lc.ccy_obj"\n                 typeahead="ccy as ccy.code for ccy in getCurrencies($viewValue)"\n                 typeahead-editable="false"\n                 typeahead-min-length="3"\n              />\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="amount">Amount</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" id="amount" required\n                 ng-model="lc.amount"\n                 number-format\n              />\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="bid-date">Bid Date</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" id="bid-date"\n                 ng-model="lc.bid_date"\n                 datepicker-popup="dd-MMMM-yyyy"\n              />\n        </div>\n      </div>\n\n      <div class="form-group ti-mf-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="ti-mf">TI Form M Number</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" id="ti-mf" maxlength="12"\n                 ng-pattern="/^CBN\\d{9}/"\n                 ng-model="lc.ti_mf"\n                 to-upper\n              />\n        </div>\n      </div>\n\n      <div class="form-group lc-ref-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="lc-ref">LC Ref</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" id="lc-ref" maxlength="16"\n                 ng-pattern="/^ILCL[A-Z]{3}\\d{9}/"\n                 ng-model="lc.lc_ref"\n                 to-upper\n              />\n        </div>\n      </div>\n\n      <div class="form-group lc-status-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="status-text">Status</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" id="status-text"\n                 ng-model="statusText"\n                 to-upper\n              />\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="control-label col-md-2 col-lg-2 col-sm-3" for="released-date">Date Released</label>\n\n        <div class="col-md-10 col-lg-10 col-sm-9">\n          <input class="form-control" id="released-date"\n                 ng-model="lc.date_released"\n                 datepicker-popup="dd-MMMM-yyyy"\n              />\n        </div>\n      </div>\n    </fieldset>\n\n    <div class="row">\n      <div class="col-md-6 col-lg-6 col-sm-6">\n        <button type="submit" class="btn btn-info" ng-disabled="editLcForm.$invalid">Save</button>\n        <span class="btn btn-default" ng-click="close(oldLc)">Close</span>\n      </div>\n    </div>\n  </form>\n</div>\n'},function(l,e,n){"use strict";function t(l,e,n,t,o,r,a){function s(){d.newLc=null,d.newLcForm.$setPristine()}function i(l){function n(l,e){new r({text:l,lc:e}).$save(function(){},function(l){o(l)})}var s=c.copy(l);s.applicant=appendToUrl(a.customerAPIUrl,s.applicant.id),s.ccy=appendToUrl(a.currencyAPIUrl,s.ccy.id),s.bid_date=t(s.bid_date);var i=new e(s);i.$save(function(l){d.reset(),d.newLcees.unshift(l),s.status&&n(s.status,l.url)},function(l){o(l)})}var d=this;d.getCustomers=l,d.getCurrencies=n,d.createNewLc=i,d.reset=s,d.newLc={},d.newLcees=[]}var c=n(7);c.module("letterOfCreditApp").controller("LetterOfCreditNewController",t),t.$inject=["getTypeAheadCustomer","LetterOfCredit","getTypeAheadCurrency","parseDate","xhrErrorDisplay","LetterOfCreditStatuses","urls"]},function(l,e){"use strict";function n(l,e){function n(l){if(!_.isEmpty(l)){var n={};l.lc_ref&&(n.lc_ref=l.lc_ref),l.mf&&(n.mf=l.mf),l.applicant&&(n.applicant=l.applicant.name),l.released&&(n.released=l.released),t.foundLcees=e.query(n)}}var t=this;t.foundLcees=[],t.searchParams={released:""},t.getCustomer=l,t.searchLc=n}angular.module("letterOfCreditApp").controller("LetterOfCreditSearchController",n),n.$inject=["getTypeAheadCustomer","LetterOfCredit"]},function(l,e,n){n(14)},function(l,e){"use strict";function n(l,e,n){function t(l){o.lc=l,o.lc.statuses_data=[],angular.forEach(l.statuses_id,function(l){o.lc.statuses_data.push(n.get({id:l}))})}function c(l){console.log(l)}var o=this;e.get({id:l.id}).$promise.then(t,c)}angular.module("letterOfCreditApp").controller("LetterOfCreditDetailController",n),n.$inject=["$routeParams","LetterOfCredit","LetterOfCreditStatuses"]}]);
//# sourceMappingURL=app.min.js.map