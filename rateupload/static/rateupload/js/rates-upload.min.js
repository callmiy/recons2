var __bind=function(t,e){return function(){return t.apply(e,arguments)}};$(function(){var t,e,i,r,n,a,s,c;return e=$("#id_format1"),r=$("input[type=submit]"),t=$(".download-btn"),i=$("label"),s=function(t){var e;return 0!==t.length&&(e=1,t.each(function(t,i){$(i).attr("tabindex",e++)})),t.focus(function(){return kanmii.selectText(this)}),t.click(function(){return kanmii.selectText(this)}),t.eq(0).focus()},s($(".rate-data")),c=function(t){return t=t.trim(),!/^\d/.test(t)&&/\d/.test(t)?t.slice(/\d/.exec(t).index):t},n=function(){function t(t){this.rateText=t,this.calculate=__bind(this.calculate,this),this.validate=__bind(this.validate,this),this.rateList=this.rateText.split(/\n|\r|\n\r|\r\n/),this.CCY_RE=/\(([a-z]{3})1\/([a-z]{3})\)$/i}return t.prototype.validate=function(){var t,e,i,r,n,a,s,c,u,o;for(t=/^[0-9]+(?:\.[0-9]+)?$/,i=[],u=this.rateList.slice(0,2),n=0,s=u.length;s>n;n++)r=u[n],i.push(t.test(r));for(o=this.rateList.slice(2),e=a=0,c=o.length;c>a;e=++a)r=o[e],i.push(e%2===0?this.CCY_RE.test(r):t.test(r));return kanmii.all(i)},t.prototype.calculate=function(){var t,e,i,r,n,a,s,c,u,o;for(n={},n.NGN=(kanmii.sum(this.rateList.slice(0,2))/2).toFixed(7),u=this.rateList.slice(2),i=s=0,c=u.length;c>s;i=s+=2)e=u[i],o=this.CCY_RE.exec(e).slice(1,3),r=o[0],t=o[1],a=this.rateList[i+3],r=r.toUpperCase(),"USD"!==r&&(n[r]=(+a).toFixed(7)),"USD"===r&&(n[t.toUpperCase()]=(1/a).toFixed(7));return n},t}(),a=function(t){return $(".errorlist").remove(),$("<ul></ul>",{"class":"errorlist",text:t}).insertBefore($(this))},r.eq(0).on("click",function(t){var i,r,u,o,l,d,h,f;if($(".errorlist").remove(),$("tbody").empty(),d="",e.val(function(t,e){return""===e?e:d=c(e)}),""===d)return a.call(this,"This field is required!"),!1;if(l=new n(d),l.validate()){h=l.calculate();for(o in h)f=h[o],u=$("<tr>"),i=$("<td>",{"class":"rate-data ccy",text:o}),r=$("<td>",{"class":"rate-data xchg-rate-val",text:f}),u.append(i).append(r),$("tbody").append(u),s($(".rate-data"));return!1}return a.call(this,"The data format is incorrect!"),!1}),r.eq(1).click(function(t){var e;return e=$(".rate-data"),0===e.length?t.preventDefault():void 0}),i.on("click",function(t){return i.hide(),e[0].focus()}),e.on({focusin:function(t){return i.hide()},focusout:function(t){return e.val()?void 0:i.show()}})});